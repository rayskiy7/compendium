{"createdTime":1767269269240,"shownInTree":["-start-page.html","gopl.html","k&r-c.html","mastering-go.html","py-asyncio.html","tc++pl-(i).html","tc++pl-(ii).html"],"attachments":["site-lib/html/custom-head-content-content.html","site-lib/fonts/94f2f163d4b698242fef.otf","site-lib/fonts/72505e6a122c6acd5471.woff2","site-lib/fonts/2d5198822ab091ce4305.woff2","site-lib/fonts/c8ba52b05a9ef10f4758.woff2","site-lib/fonts/cb10ffd7684cd9836a05.woff2","site-lib/fonts/293fd13dbca5a3e450ef.woff2","site-lib/fonts/085cb93e613ba3d40d2b.woff2","site-lib/fonts/b5f0f109bc88052d4000.woff2","site-lib/fonts/cbe0ae49c52c920fd563.woff2","site-lib/fonts/535a6cf662596b3bd6a6.woff2","site-lib/fonts/70cc7ff27245e82ad414.ttf","site-lib/fonts/454577c22304619db035.ttf","site-lib/fonts/52ac8f3034507f1d9e53.ttf","site-lib/fonts/05b618077343fbbd92b7.ttf","site-lib/fonts/4bb6ac751d1c5478ff3a.woff2","site-lib/media/6155340132a851f6089e.svg","site-lib/media/2308ab1944a6bfa5c5b8.svg","site-lib/fonts/mathjax_zero.woff","site-lib/fonts/mathjax_main-regular.woff","site-lib/fonts/mathjax_main-bold.woff","site-lib/fonts/mathjax_math-italic.woff","site-lib/fonts/mathjax_main-italic.woff","site-lib/fonts/mathjax_math-bolditalic.woff","site-lib/fonts/mathjax_size1-regular.woff","site-lib/fonts/mathjax_size2-regular.woff","site-lib/fonts/mathjax_size3-regular.woff","site-lib/fonts/mathjax_size4-regular.woff","site-lib/fonts/mathjax_ams-regular.woff","site-lib/fonts/mathjax_calligraphic-regular.woff","site-lib/fonts/mathjax_calligraphic-bold.woff","site-lib/fonts/mathjax_fraktur-regular.woff","site-lib/fonts/mathjax_fraktur-bold.woff","site-lib/fonts/mathjax_sansserif-regular.woff","site-lib/fonts/mathjax_sansserif-bold.woff","site-lib/fonts/mathjax_sansserif-italic.woff","site-lib/fonts/mathjax_script-regular.woff","site-lib/fonts/mathjax_typewriter-regular.woff","site-lib/fonts/mathjax_vector-regular.woff","site-lib/fonts/mathjax_vector-bold.woff","site-lib/html/file-tree-content.html","site-lib/scripts/webpage.js","site-lib/media/favicon.png","site-lib/styles/snippets.css","site-lib/styles/obsidian.css","site-lib/styles/other-plugins.css","site-lib/styles/global-variable-styles.css","site-lib/styles/supported-plugins.css","site-lib/styles/main-styles.css","a9s/screenshot-2025-10-04-at-04.41.40.png","a9s/screenshot-2025-10-04-at-20.06.24.png","a9s/screenshot-2025-10-05-at-01.00.15.png","a9s/screenshot-2025-10-05-at-05.47.03.png","a9s/screenshot-2025-10-05-at-18.26.55.png","a9s/screenshot-2025-10-05-at-18.27.27.png","a9s/screenshot-2025-10-07-at-03.03.28.png","a9s/screenshot-2025-10-11-at-19.25.32.png","a9s/screenshot-2025-09-29-at-04.15.37.png","a9s/screenshot-2025-09-29-at-15.56.15.png","a9s/screenshot-2025-10-01-at-02.55.34.png","a9s/screenshot-2025-10-01-at-02.56.03.png","a9s/screenshot-2025-10-02-at-01.51.27.png","a9s/screenshot-2025-10-02-at-23.54.37.png","a9s/screenshot-2025-09-27-at-22.49.48.png","a9s/screenshot-2025-09-20-at-01.48.06.png","a9s/screenshot-2025-09-20-at-13.23.06.png","a9s/screenshot-2025-09-20-at-15.44.51.png","a9s/screenshot-2025-09-25-at-02.53.33.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-14.54.57.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.56.19.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.57.07.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-13.44.57.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-16.56.12.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-20.25.22.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-15.56.10.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-22.43.37.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-25-–≤-23.49.27.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.12.07.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.24.58.png","a9s/telegram-cloud-document-2-5312238323056530771.jpg"],"allFiles":["py-asyncio.html","site-lib/html/custom-head-content-content.html","tc++pl-(ii).html","tc++pl-(i).html","k&r-c.html","gopl.html","mastering-go.html","-start-page.html","a9s/screenshot-2025-10-11-at-19.25.32.png","a9s/screenshot-2025-10-07-at-03.03.28.png","a9s/screenshot-2025-10-05-at-18.27.27.png","a9s/screenshot-2025-10-05-at-18.26.55.png","a9s/screenshot-2025-10-05-at-05.47.03.png","a9s/screenshot-2025-10-05-at-01.00.15.png","a9s/screenshot-2025-10-04-at-20.06.24.png","a9s/screenshot-2025-10-04-at-04.41.40.png","a9s/screenshot-2025-10-02-at-23.54.37.png","a9s/screenshot-2025-10-02-at-01.51.27.png","a9s/screenshot-2025-10-01-at-02.56.03.png","a9s/screenshot-2025-10-01-at-02.55.34.png","a9s/screenshot-2025-09-29-at-15.56.15.png","a9s/screenshot-2025-09-29-at-04.15.37.png","a9s/screenshot-2025-09-27-at-22.49.48.png","a9s/screenshot-2025-09-25-at-02.53.33.png","a9s/screenshot-2025-09-20-at-15.44.51.png","a9s/screenshot-2025-09-20-at-13.23.06.png","a9s/screenshot-2025-09-20-at-01.48.06.png","a9s/telegram-cloud-document-2-5312238323056530771.jpg","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.24.58.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.12.07.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-25-–≤-23.49.27.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-22.43.37.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-15.56.10.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-20.25.22.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-16.56.12.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-13.44.57.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.57.07.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.56.19.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-14.54.57.png","site-lib/fonts/94f2f163d4b698242fef.otf","site-lib/fonts/72505e6a122c6acd5471.woff2","site-lib/fonts/2d5198822ab091ce4305.woff2","site-lib/fonts/c8ba52b05a9ef10f4758.woff2","site-lib/fonts/cb10ffd7684cd9836a05.woff2","site-lib/fonts/293fd13dbca5a3e450ef.woff2","site-lib/fonts/085cb93e613ba3d40d2b.woff2","site-lib/fonts/b5f0f109bc88052d4000.woff2","site-lib/fonts/cbe0ae49c52c920fd563.woff2","site-lib/fonts/535a6cf662596b3bd6a6.woff2","site-lib/fonts/70cc7ff27245e82ad414.ttf","site-lib/fonts/454577c22304619db035.ttf","site-lib/fonts/52ac8f3034507f1d9e53.ttf","site-lib/fonts/05b618077343fbbd92b7.ttf","site-lib/fonts/4bb6ac751d1c5478ff3a.woff2","site-lib/media/6155340132a851f6089e.svg","site-lib/media/2308ab1944a6bfa5c5b8.svg","site-lib/fonts/mathjax_zero.woff","site-lib/fonts/mathjax_main-regular.woff","site-lib/fonts/mathjax_main-bold.woff","site-lib/fonts/mathjax_math-italic.woff","site-lib/fonts/mathjax_main-italic.woff","site-lib/fonts/mathjax_math-bolditalic.woff","site-lib/fonts/mathjax_size1-regular.woff","site-lib/fonts/mathjax_size2-regular.woff","site-lib/fonts/mathjax_size3-regular.woff","site-lib/fonts/mathjax_size4-regular.woff","site-lib/fonts/mathjax_ams-regular.woff","site-lib/fonts/mathjax_calligraphic-regular.woff","site-lib/fonts/mathjax_calligraphic-bold.woff","site-lib/fonts/mathjax_fraktur-regular.woff","site-lib/fonts/mathjax_fraktur-bold.woff","site-lib/fonts/mathjax_sansserif-regular.woff","site-lib/fonts/mathjax_sansserif-bold.woff","site-lib/fonts/mathjax_sansserif-italic.woff","site-lib/fonts/mathjax_script-regular.woff","site-lib/fonts/mathjax_typewriter-regular.woff","site-lib/fonts/mathjax_vector-regular.woff","site-lib/fonts/mathjax_vector-bold.woff","site-lib/html/file-tree-content.html","site-lib/scripts/webpage.js","site-lib/media/favicon.png","site-lib/styles/snippets.css","site-lib/styles/obsidian.css","site-lib/styles/other-plugins.css","site-lib/styles/global-variable-styles.css","site-lib/styles/supported-plugins.css","site-lib/styles/main-styles.css"],"webpages":{"-start-page.html":{"title":"- start page","icon":"","description":"This is selected collection of my book notes!\nüëàüèº All works can be found in the left side-bar","aliases":[],"inlineTags":[],"frontmatterTags":[],"headers":[{"heading":"<span>- \n\n<span>start page</span></span>","level":1,"id":"-_start_page_0"}],"links":[],"author":"","coverImageURL":"","fullURL":"-start-page.html","pathToRoot":".","attachments":[],"createdTime":1767014780778,"modifiedTime":1767016904330,"sourceSize":99,"sourcePath":"engineering/compendium/- start page.md","exportPath":"-start-page.html","showInTree":true,"treeOrder":0,"backlinks":[],"type":"markdown"},"gopl.html":{"title":"GoPL","icon":"","description":"This is my notes for the book:\nThe Go Programming Language ‚Äî Alan A. A. Donovan, Brian W. Kernighangofmt ‚Äî formats a file\ngo fmt ‚Äî formats a folder or a package\ngoimports ‚Äî auto-formatting of imports\nIncrement and decrement only have postfix notation and are statements, not expressions, therefore the following notations are unavailable:++i; --i\na += (b++) + 2\netc.\nThe for loop has several forms:for &lt;init short statement&gt;; &lt;condition&gt;; &lt;operation&gt; {}\nfor &lt;&gt; := range &lt;&gt; {}\nfor &lt;expr&gt; {}\nfor {} // such as while The short declaration construction := is allowed only inside functions! Not at the package level\nConcatenation of multiple strings:strings.Join(elements []string, sep string)\nCool use of a hashmap for counting occurrences:1for el := range &lt;&gt; {2 hashmap[el]++3}Reading standard input:1scanner := bufio.NewScanner(os.Stdin)2for scanner.Scan() {3 do_with(scanner.Text())4}Verbs. Keep in mind that they work differently for different types:<img alt=\"–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-22 –≤ 14.54.57.png\" src=\"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-14.54.57.png\" target=\"_self\">\nTechniques: Specifying %[1]d allows you to reuse the 1st argument of the fmt.Printf function\n# ‚Äî adds a prefix for octal and hexadecimal systems; also for %#v it adds a Go-syntax representation\n%*s takes the width and the string itself sequentially from a pair of arguments. To run a command in the background in the terminal, just add \"&amp;\" to the end of the command In Go, there are both labels and goto.\nLanguage keywords:<br><img alt=\"–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-22 –≤ 17.56.19.png\" src=\"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.56.19.png\" target=\"_self\">\nBuiltins (can be redefined!):<br><img alt=\"–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-22 –≤ 17.57.07.png\" src=\"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.57.07.png\" target=\"_self\">Standard package for handling command-line flags:1import \"flag\"23var n = flag.Bool(\"n\", false, \"description of flag -n\")4var s = flag.String(\"s\", \" \", \"description of flag -s\")Usage:1func someFunc() {2 flag.Parse()3 args := flag.Args() // you can also just take the input arguments4 &lt;use values&gt; *n, *s, ...5}Dynamic creation of an unnamed variable of type T, returns a pointer!:1p := new(int) // p is var p *intNote: For zero-size data like interface{} or [0]int, the same address may be returned\nThe compiler itself determines whether to create a variable on the heap or the stack. Moreover, this is not affected by how it was created (via var or new), since variables can escape the function or, conversely, not escape. A doc-comment should be located in only 1 file of the package. It is common practice to place large doc-comments in a separate doc.go file\nInitialization:\nFirst, package-level variables, usually in order of declaration (but dependencies are resolved first)\nThen all init(){...} functions in order of declaration. There can be any number of them\nLexical blocks:\nuniverse\npackage\nfile\nconstruction (for, if, switch)\nblock in switch and select\nexplicit blocks {}\nThe scope of labels for break, continue, and goto is the entire enclosing functionTypes in Go:\nbasic (numbers, strings, booleans)\naggregate (arrays, structs)\nreference (pointers, slices, maps, functions, channels)\ninterface\nNumbers:1int; int8, int16, int32=rune, int642uint; uint8=byte, uint16, uint32, uint643size(int) = 32 / 644size(uint) = 32 / 645(if size(int) = 32, then accordingly size(uint) = 32)67uintptr ‚Äî large enough to hold a pointer89complex64, complex128Note: even if size(int) = 32, the types int and int32 are not the sameOperators in decreasing order of precedence (left-associative within a line):<br><img alt=\"–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-23 –≤ 13.44.57.png\" src=\"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-13.44.57.png\" target=\"_self\">\nThe sign of the remainder is always the same as the sign of the dividend\nNote: when right-shifting signed values, new bits are filled with the value of the sign bit!Note: len returns an int, not a uint, which might seem more logical.Available notations:\n4.3e-13 .0162\nVerbs:\n%f displays in floating-point format\n%e displays in scientific notation\n%g displays in the most compact representation\nSpecial constants exist:\nmath.NaN() -&gt; NaN\nmath.Inf(sign) -&gt; sign*Inf\nNote: any comparison with NaN yields false SVG ‚Äî an XML format for drawing polygonal meshes\nBooleans:1bool\nEvaluation of &amp;&amp; and || uses short-circuiting\nStrings and Runes:1string2rune\nThey are sequences of bytes\nImportant: copying strings and taking substrings are cheap operations! Since strings are immutable, different strings can share the same memory\nASCII escape sequences:<br><img alt=\"–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-23 –≤ 16.56.12.png\" src=\"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-16.56.12.png\" target=\"_self\">One can also include: \\xhh and \\oooRaw string literals are defined in backticks:1`raw string literal \\n &lt;- prints this as is`Note: it only removes carriage return characters for compatibility between different systemsUnicode character codes can be specified explicitly:1\\uhhhh OR \\UhhhhhhhhExamples: \"\\u4e16\" = ‚Äò\\u4e16‚Äô = ‚Äò\\U00004e16‚Äô; A = ‚Äò\\x41‚ÄôIMPORTANT: a loop can be called like this:1for range myString {2 &lt;do something&gt;3} // executes as many times as there are runes in myStringCounting the number of runes in a string: utf8.RuneCountInString(s)If decoding a character fails, the decoder generates a special replacement character \\UFFFD, which looks like this: Converting an int to a string produces a string consisting of one rune with that code, or \\UFFFD in case of failure\nPackages for working with strings:\nbytes (contains many functions similar to strings)\nstrings\nstrconv\nunicode Conversions between strings and []byte create new arrays and perform copying (though the compiler may optimize this in some cases)\nMultiple definition of constants (or variables):1const (2 e Ôøº3 pi Ôøº4)Constants can be used in some places where variables are unavailable, for example:1const IPv4Len = 42func f(){var ip [IPv4Len]byte &lt;...&gt;}Omissions are allowed if constants are declared in a block:1const (2 a = 13 b // copy previous expression (1) and its type type(1)4 c // and this too5 d = 26)The constant generator iota. It is a variable that increases by 1 each time.1type Flags uint2const (3 _ Flags = 1 &lt;&lt; iota // = 1 &lt;&lt; 0 it's possible to skip a value4 FirstFlag // = 1 &lt;&lt; iota = 1 &lt;&lt; 15 SecondFlag // = 1 &lt;&lt; iota = 1 &lt;&lt; 26 ThirdFlag // = 1 &lt;&lt; iota = 1 &lt;&lt; 37)Constants can be untyped, which allows them to maintain higher precision. There are 6 kinds:\nuntyped bool\nuntyped int\nuntyped rune\nuntyped float\nuntyped complex\nuntyped string\nSpecial forms of array initialization:1var a [3]int = [3]int{1, 5} // = {1, 5, 0}2b := [...]int{1, 2, 3} // = {1, 2, 3}, type(b) = [3]int3c := [...]rune{3: 'x', 1: 'y'} // = {'', 'y', '', 'x'}\nSlicing beyond len(slice) but within cap(slice) extends the resulting slice\nImportant: string slices are strings, while array and slice slices are slicesArrays are comparable (==), but slices are not. There is a bytes.Equal function for comparing []byte\nThe only allowed comparison for a slice (and a map!):1slice == nilClarification regarding nil slices:<br><img alt=\"–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-23 –≤ 20.25.22.png\" src=\"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-20.25.22.png\" target=\"_self\">Function for creating a slice:1make([]T, len, cap) // cap can be omitted, but not lenUse the append function to add an element or a slice to a slice, followed by reassignment:1mysl := append(mysl, appendix)\nkeep in mind that it may return a slice over the same base array or a new one. Typically, the size doubles, but this cannot be assumed for certain\ncopy(dst, src) ‚Äî copies slice elements from one to another, returning the number of elements actually copied, which is the minimum of the two lengths\nMaps.\nDeleting an element:1delete(mymap, key)You cannot take the address of values (due to possible rehashing):1_ = &amp;mymap[key] // error!\nFor a nil map, everything is generally safe except adding a new element, which causes a panic.\nStructs.\nImportant: you cannot access fields of a value using a dot, only fields of a variable.\nthe order of fields matters; different orders result in different structures.\nrecursion type S struct{next S} is not allowed, but type S struct{next *S} is allowed\nStruct literals can be without keys if the order is followed, or without all values if keys are used:1type Point struct {x, y int}2p1 := Point{y: 15} // -&gt; {0, 15}3p2 := Point{-3, -3} // -&gt; {-3, -3}\nA struct consisting of comparable (==) fields is comparable\n?? Interesting: it is stated that a struct field type can be a pointer to a type.After declaring struct fields, string literals called field tags can be specified:1type S struct {2 x int `some tag`3 y int `another tag`4}Example for JSON:1`json:\"new_name\"`2`json:\"new_name,omitempty\"` // omitempty ‚Äî omit empty or zero valuesStruct literals inside a slice of those structs can be defined without specifying the struct type:1list := []MyStruct{2 S{}, {} // S is not required3}Marshaling ‚Äî converting an object into its JSON representation:1json.Marshal(object) OR json.MarshalIndent(object, newLinePrefix, indentPrefix)By convention, tags are recorded as a set of the following form:1`key1:\"val1\" key2:\"val2\" ...`The reverse operation: Unmarshaling. Reading and restoring all fields is not required:1var names []struct{Title string}2err := json.Unmarshal(data, &amp;titles)Additionally:\nThe json package also offers streaming encoders/decoders:1json.NewEncoder(data).Encode(data)2json.NewDecoder(data).Decode(data)Text and HTML templates use {{}} constructions. Specifically:\n{{.Field | SomeFunc}} ‚Äî it is possible to access fields and functions. fmt.Sprintf is built-in as printf\n{{range .SomeIterable}} ‚Ä¶ {{end}} ‚Äî it is possible to create a loop\n{{if}} {{else}} ‚Äî choose based on a condition\nUsage structure:\n1tmplt, err := template.2 New(\"name\").3 Funcs(template.FuncMap{\"pattern name\": MyFunc, ...}).4 Parse(templateString)There is a way to crash the program if there is an error:1tmplt = template.Must(tmplt)Final usage:1tmplt(writer, data) // -&gt; errHTML templates suppress potential injection attacks and output characters literally. To output an element with HTML formatting, it must be unmarshaled into a field of type template.HTML rather than string.1func f() int {}2but3func f() (resI int) {}\nNamed return parameters become local variables of the function (with zero values)!\nThese variables are returned automatically, for example:\n1func f() (r int) {2 r = 4 * 23 return4}Input can be ignored:1func f (_ int){}2OR3func f (int, int){}\nDeclaring a function without a body indicates its implementation in another language! IMPORTANT: Go's garbage collector frees memory, but not system resources like open files and connections. They must be closed explicitly!\nFunctions are a full-fledged reference type defined by their signature.Anonymous functions and their returns, closures:1func squares() func() int {2 var k int3 return func() int {4 k++5 return k * k6 }7}\nImportant: all functions outside the package level must be anonymous (but they can be assigned to a variable with a name)\nKeep in mind:1func f(){2 g := func() {3 &lt;no access to g here&gt;4 }5}However:1func f(){2 var g func()3 g = func() {4 &lt;there is(!) access to g here&gt;5 }6}\nVERY IMPORTANT: In closures, you should not capture loop variables because they change, and the closures will end up with the same value: the one from the final iteration of the loop. UPD: It seems this has been addressed in newer versions of the language!!!\nA bit about variadic functions (with the ... argument):\nWhen calling such a function, an array is implicitly created that copies the input values and passes a slice of the entire array.\nThese are different types: func([]int) and func(...int).\nAbout defer:\nArguments are evaluated at the moment of the call, but the call itself is deferred.\nDeferred calls are executed in reverse order (LIFO).\nThe result of a function is calculated BEFORE the deferred functions are executed. Therefore, a deferred function can read and even modify the return values of the enclosing function! Not all close() calls should be deferred, as some of them may return errors themselves. There is no point in doing an if check with a panic call if the program will crash on its own from an invalid state. It is a common convention to name a function MustSomeNameTail if it needs to throw a panic in case of failure. Usually, only things that are CERTAIN to work are passed to such functions.\nrecover:\nCan be called without a panic situation; in that case, it does nothing and returns nil.\nThe panic value has the type interface{} and can be anything.\nOne must be extremely careful: recovering from a panic can be dangerous, and the program state may remain \"corrupted\" and invisible. If you do this, it's best to keep it within a single package.\nSome situations are unrecoverable (e.g., memory exhaustion). The program terminates with a fatal error.\nFunctions can be embedded in interfaces:1type MyInt interface{2 f func(a int) int3}\nA function and a method can have the same name ;) Methods cannot be declared for named types whose underlying type is an interface or a pointer.\nThe name of a method with a pointer receiver is:1(*T).Method\nCONVENTION: All methods should take either T or *T; do not mix them (even though it's possible).\nAnother trap! You cannot call a method with a pointer receiver even with implicit address-taking (&amp;) if you are calling it on a value (like a literal), because addresses can only be taken from variables, not values! Such a call is impossible:1func (t *T) Method() {...}2T{}.Method() // attempts to take &amp;T{}, but this is not allowednil is a valid pointer for a receiver:1func (t *T) Method() {&lt;...&gt;}2T(nil).Method()But not like this (because nil has no type by itself):1nil.Method() // compile errorPromoted methods resulting from embedding take the embedded struct field as the receiver, not the entire new struct. Furthermore, arguments must be given the exact type, not a derived one! (Thus, there is no full inheritance in OOP terms!)You can also embed a pointer to a named type, for example, to implement lists:1type List struct{2 El int3 Next *List4}When calling an object method ob := MyType(...); ob.Method, the compiler searches for the method in order:\nDirectly the method Method of type MyType.\nMethods promoted once (from types embedded in MyType).\nMethods promoted twice (from types embedded in types embedded in MyType).\nAnd so on...\nIf there are two methods with the same name at the same \"promotion level,\" a compilation error occurs!\nIn the case of fields (verified in practice), the same situation occurs.Unnamed structs can have embedded methods. Here is an extremely interesting example:<br><img alt=\"–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-24 –≤ 15.56.10.png\" src=\"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-15.56.10.png\" target=\"_self\">There is a concept of a method value, which is essentially a bounded method:1f := t.Method // returns in f a func() that can be called later with the receiver t already set2f() // direct callThe call is also available in unbounded form (method expression):1T.Method(receiver T, &lt;all args&gt;) 2OR3(*T).Method(receiver *T, &lt;all args&gt;)One must be careful because fmt package functions look for func (T) String() string for type T, and func (*T) String() string for type *T. Thus, to correctly print an object that only has a method for *T, you must do:1fmt.Println(&amp;obj)Expression for determining the bitness of int/uint types:132&lt;&lt;(^uint(0)&gt;&gt;63)Sometimes you need to intentionally encapsulate something in a struct:1type Set []uint64 // bad, there is external access to the slice2type Set struct{3 words []uint64 // good, there is no external access to the slice4}Once more regarding convention:\nSetters are named with Set.\nGetters are named WITHOUT Get.\nAn interface is a set of methods (not functions).\nExample:1type Figure interface{2 Rotate()3 Scale(factor float64)4 Draw() (err error)5}Built-in interfaces:1type io.Writer interface{2 Write(p []byte) (n int, err error)3}4type io.Reader interface{5 Read(p []byte) (n int, err error)6}7type io.Closer interface{8 Close() error9}10type fmt.Stringer interface{11 String() string12}Interface composition (embedding) is allowed:1type ReadWriteCloser interface{2 Reader3 Writer4 Closer5}Once again, IMPORTANT:\nValues of type T do not possess all methods that a pointer *T does, and therefore may satisfy fewer interfaces! Conversely, all methods apply to the pointer *T because dereferencing (*) is always available.\nChecking interface compliance at runtime without allocating explicit memory or a variable:1var _ io.Writer = (*bytes.Buffer)(nil)Scanning the string in according to a template and returning values into multiple passed pointer receivers:1fmt.Sscanf(in, template, &amp;myint, &amp;mystring, &lt;...&gt;) // returns errors if any!You can define your own flags for the flag package. You need to implement the interface:1type flag.Value interface{2 String() string3 Set(string) error4}5// suppose we implemented type TValue struct{Val T}Creating your own flag:1func MyTFlag(name string, value T, usage string) *T {2 t := TValue{value} // (or not as a struct) then change the line (##)3 flag.CommandLine.Var(&amp;t, name, usage)4 return &amp;t.Val // (##)5}In reality, an interface is a dynamic pair of pointer + value, essentially:1struct{2 type uintptr3 value SomeType4}I.e., an interface value is a reference to a type and data.They can be compared like a reference:1var t SomeInterfaceType // = {nil, nil}2t == nil // true\nThey can even be compared to each other with ==; if their types are equal and values pass the == check, it will be true. But be careful: if the types are equal but the values themselves are incomparable (e.g., slices), it will trigger a panic.\nConclusion: comparing interfaces is tricky and should only be done when their dynamic values have comparable types. Attention: there can be an interface with a non-nil type but a nil value; one might think such an object == nil, but in reality, the check will yield false because an interface is only nil when it is entirely nil ({nil, nil}).\nUseful:1import \"text/tabwriter\"1http.ServeMux ‚Äî request multiplexerGo does not have a framework like Django in Python, but it's simply not needed!\nUsage:1// var full2mux := http.NewServeMux()3mux.Handle(\"/any/route/path\", http.HandlerFunc(anyRoutePathHandler))4mux.Handle(\"/other/route/path\", http.HandlerFunc(otherRoutePathHandler))5&lt;and so on...&gt;6log.Fatal(http.ListenAndServe(address, mux))78OR910// var middle11mux := http.NewServeMux()12mux.HandleFunc(\"/any/route/path\", anyRoutePathHandler)13mux.HandleFunc(\"/other/route/path\", otherRoutePathHandler)14&lt;and so on...&gt;15log.Fatal(http.ListenAndServe(address, mux))1617OR1819// var profi20http.HandleFunc(\"/any/route/path\", anyRoutePathHandler)21http.HandleFunc(\"/other/route/path\", otherRoutePathHandler)22&lt;and so on...&gt;23log.Fatal(http.ListenAndServe(address, nil))Very interesting approach:<br><img alt=\"–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-24 –≤ 22.43.37.png\" src=\"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-22.43.37.png\" target=\"_self\">Interface type assertion:1x.(T)\nIf T is a concrete type, it returns the dynamic value of x with type T. (If the dynamic type of x is not T, a panic occurs)\nIf T is an interface type, the dynamic type and value are preserved, but the interface type changes if compliant. (If the dynamic type does not satisfy interface T, a panic occurs)\nNarrowing an interface type can follow two paths:1var w io.Writer2var rw io.ReadWriter34w = rw // ok even if rw == nil5w = rw.(io.Writer) // panic if rw == nilTo check the type, you can use the \"ok\" concept:1f, ok := w.(T) // ok == true if assertion is successful!Even in case of failure, f will be cast but will receive the zero value of type T.\nAs I understand it, type assertion can be used for expressions! (not just variables) Type assertion with ok is often used to determine a more specific error type.\nHelper functions for correctly identifying an error type (which use type assertion with ok under the hood):\nos.IsExist(err error) bool\nos.IsNotExist\nos.IsPermission\nVERY INTERESTING AND IMPORTANT\nio.WriteString(w io.Writer, data string) (n int, err error) ‚Äî prints a string to an io.Writer instead of converting to []byte with extra memory allocation that is immediately cleared. Use this function!\nInternally it uses an interesting trick:1func WriteString(w io.Writer, data string) (n int, err error){2 type stringWriter interface{3 WriteString(string) (n int, err error)4 }5 if sw, ok := w.(stringWriter); ok { // Again the ok-approach concept6 &lt;write string and return&gt;7 }8 &lt;write []byte and return&gt;9}Usually, interfaces are used in two semantics:\nAs concrete types, a specific action, where we simply don't care about the data.\nAs a union of types to implement polymorphism.\nA convenient way to take the second path:\n1switch x.(type) { // called a type switch2 case nil: ... // this branch matches a completely nil interface, i.e., x == nil3 case int, uint: ...4 case string: ...5 case default: ...6}\nIMPORTANT: fallthrough is not allowed here.\nA more complex variant:1var x SomeInterfaceType2switch x := x.(type) {3 case bool:4 f(x) // here x has type bool5 case int, uint:6 g(x) // here x has its interface type SomeInterfaceType7}8// in nil and default cases, the type will also be the interface type!\nAn interface for a single type can be useful for decoupling packages when that type cannot reside in the same package. No need to go overboard with OOP; standalone functions and non-hidden types work perfectly! The net package provides tools for working with TCP, UDP, and Unix sockets.\nThe time package provides tools for formatting and parsing time via layout (using an example!) and layout constants.\n1go func(arg1, arg2) // arguments are evaluated before the goroutine startsChannels are a reference type.You can receive without using the value:1&lt;-chChannels are closed using the built-in function:1close(ch)\nSending to a closed channel ‚Äî panic.\nReceiving from a closed channel ‚Äî default zero value of the type.\nClosing a closed or nil channel ‚Äî panic.\nSending/receiving from a nil channel ‚Äî permanent block.\nChecking a receive from an exhausted channel:1el, ok := &lt;-ch // ok == false if zero value of type was received because channel closedTypes of channels:\nUnbuffered\n1make(chan T)\nBuffered\n1make(chan T, 3) // capacity = 3The length and capacity of a buffered channel can be retrieved:1len(ch)2cap(ch)Cool pattern: Pipeline\nin -&gt; [ch0] -&gt; goroutine1 -&gt; [ch1] -&gt; goroutine2 -&gt; [ch2] -&gt; goroutine3 -&gt; and so on ‚Ä¶ -&gt; out\nIn this situation, you can use close(ch0) so subsequent goroutines in the chain can handle this fact and close other channels in order.Iterating over a channel:1for el := range ch{2 &lt;do something with el...&gt;3}\nIt is not mandatory to close channels (unlike files, connections, etc.).\nUnidirectional channels:1out chan&lt;- int // write only; may be closed2in &lt;-chan int // read only; close() on such a channel causes a compilation errorConversion from bidirectional to unidirectional is possible, but not vice versa!\nDo not use buffered channels as queues! You might hit a deadlock.\nIMPORTANT: if some goroutines try to write to a channel that has reached capacity and no one attempts to read, a goroutine leak occurs. Such situations are not handled by the garbage collector!Again on goroutine leaks: for example, if a channel is used to pass errors and we eject from the reading goroutine after the first error, the remaining reads won't execute and parallel goroutines will hang resources (a goroutine leak occurs!).Completely independent tasks are called embarrassingly parallel.Thread-safe goroutine counter:1sync.WaitGroupUsage (idiomatic pattern for parallel loop execution):1var wg sync.WaitGroup2for &lt;...&gt;{3 wg.Add(1)4 go func(){5 defer wg.Done()6 &lt;write any to channel...&gt;7 }()8}9go func(){10 wg.Wait() // if run in the main goroutine, channel reading won't happen and wg.Wait() will hang11 &lt;close channel...&gt;12}()13for &lt;...&gt;{14 &lt;read channel...&gt;15}There is a problem of excessive parallelism. It can be solved by semaphores:\nBuffered channels can be used as a semaphore! The channel's capacity is the semaphore's capacity. We simply write to the channel to acquire a token (hanging until space is available) and read from it to release.\nExample:\n1var sem = make(chan struct{}, 20) // Semaphore depth 20; cannot use := here at package level!2func f(){3 sem &lt;- struct{}{} // take sem mutex4 defer func(){&lt;-sem}()5 &lt;do something safe synchronized!&gt;6}Another solution is reusing several long-lived goroutines:\nYou can start n goroutines reading from one channel and \"feed\" tasks from the main goroutine. This way we have at most 20 simultaneous jobs (perhaps HTTP connections).\nThe problem of a non-terminating program can be solved with a simple single-threaded counter (in the main goroutine).Channel receiving messages periodically (starts a goroutine):1tick := time.Tick(period time.Duration) // returns channel of time moments &lt;-chan time.TimeChannel receiving a value after a time interval (starts a goroutine):1event_ch := time.After(period)Importantly, time.Tick can cause a goroutine leak, so if the timer isn't needed for the entire program, it's better to use the following template:1ticker := time.NewTicker(period time.Duration)2&lt;-ticker.C3ticker.Stop()Channel Multiplexing:1select{2 case &lt;-ch1:3 ...4 case x := &lt;-ch2:5 ...6 case ch3 &lt;- y:7 ...8 default: // without this block, the select{...} call is blocking!9 ....10}\nwaits for one of the communications and, upon readiness, performs the communication operation and the case block (without executing the others)\nselect {} waits forever\nIf multiple communications are ready, select picks one at random ‚Äî this guarantees that each has an equal chance of being selected and processed.\ncan be interrupted by break\nThere is a convenient idiom with nil-channels: they can be considered \"disabled\" in multiplexing. Here is an example showing the ability to \"turn off\" logging in a summation goroutine. \"Turning off\" means that reading and writing will never be linked in the select{...} construct.\nAlso, here is an example of a label:1var tick &lt;-chan time.Time // == nil (!)2if logging{tick = time.Tick(duration)}34loop:5 for {6 select {7 case el, ok := &lt;-values:8 if !ok {break loop}9 sum += el10 case &lt;- tick: // this spot is \"turned off\" if !logging11 printlog()12 }13 }IMPORTANT:\nThe broadcasting mechanism for notifying many goroutines is implemented simply ‚Äî by closing an abort channel!It is important that cancellation is a subtle concept, and sometimes many places in the code must be changed to make cancellation instantaneous; one should think carefully about where to invoke such logic.\nThere is also a trick to verify that all goroutines terminate without leaking:\ncall panic() at the end of main() and see if there are any goroutines in the dump besides the main one!\nRegularly performing select{} to see if there is a value or to go to default is called polling a channel.Interesting technique:1type client chan&lt;- string2clients := make(chan client) // this is a channel of channels :)Wow, how simple, beautiful, and elegant (abstract) a chat is implemented in Go. I can't help but leave a note here of my deepest admiration üòçü§§üò≠üòçConcurrency issues:\ndeadlocks ‚Äî mutual acquisition of mutexes in the wrong order and their infinite hang\nlivelocks ‚Äî \"looping\" in a changing but uselessly repeating state\nstarvation ‚Äî lack of resources for a thread because everything is occupied by other threads\nA treacherous example of unsynchronized access:\nTwo clients write simultaneously ‚Äî but only the first one's entry is recorded. Swallowing!Another ultra-treacherous example:1var x []int2go func(){ x = make([]int, 10) }()3go func(){ x = make([]int, 100) }()4x[97] = 2Here x can turn into a chimera: have a length of 100 but a base array of length 10, and writing the two will overwrite distant memory and lead to completely undefined behavior!\nThere is NO such thing as a benign data race! (Even if you are willing to compromise on something)\nWays to avoid a data race:\ndo not write to the variable. For example, if a map is populated during initialization (before main starts), reading it from multiple goroutines is safe.\nEnsure that access to the variable is only from one goroutine. This goroutine acts as a broker for requests from other goroutines and is called a Monitor in this case (coroutine-management pattern).\nmutexes\n1var mu sync.Mutex2mu.Lock()3mu.Unlock()\nBy convention, variables protected by a mutex are declared immediately after it.\nRWMutex:1var mu sync.RWMutex2mu.RLock()3...4mu.RUnlock()Do not succumb to the temptation of reading without an R-mutex because:\nFirstly, a read operation should not be performed in the middle of other operations (writes).\nSecondly, locks and channels flush the cache of an individual core to shared memory, making results visible to other processes!! This is very important.\nSometimes the initialization of huge structures is deferred until their first use to avoid slowing down program startup; doing this in a thread-safe way is difficult. Here is an example:1var (2 mu sync.RWMutex3 bd BigData4)56func BD(args Args) BigData{7 mu.RLock()8 if bd != nil {9 res := &lt;get needed data from bd by args&gt;10 mu.RUnlock()11 return res12 }13 mu.RUnlock()14 // dangerous place15 mu.Lock()16 if bd == nil { // This check is needed because of the dangerous place17 initBD()18 }19 res := &lt;get needed data from bd by args&gt;20 mu.Unlock()21 return res22}2324func initBD(){25 ...26}The code is very large and contains a \"dangerous place.\" Instead, the following is suggested:1var loadBDOnce sync.Once2var bd BigData34func BD(args Args) BigData {5 loadBDOnce.Do(initBD)6 return &lt;get needed data from bd by args&gt;7}89func initBD(){10 ...11}Build flag for building a version of the application/test (build/run/test) that records:\nshared memory usage\ngoroutine info\nsynchronization point info\n1go &lt;cmd&gt; -race ... // the program will be slower, but this can save a lot of nerves in the future!\nThere is a suppression-of-repetition technique consisting of creating, instead of a result, some structure with a done channel that allows waiting. New duplicate requests will see that the result is \"on its way\" and wait for its actual completion (the closing of the done channel).\nOS Threads:\nmanaged by the task scheduler (via kernel-level interrupts)\nrequire many operations for context switching\nhave a fixed stack\nGo Threads (Goroutines):\nmanaged by the Go m:n scheduler (m goroutines per n threads)\nuse an internal mechanism for switching (similar to async/await)\nhave a dynamic stack\nGOMAXPROCS ‚Äî that very n in the Go scheduler. By default, it equals the number of CPU cores. Keep in mind that \"this does not count\" sleeping goroutines and system calls (I/O, files, networks)!Keep in mind: goroutines do not have identification (because programmers often abuse thread-local storage, an abstraction over mapping an ID to local data).Compilation in Go is faster than other languages because:\nexplicit imports (no scan needed)\ndependencies form a directed acyclic graph (can be compiled separately and in parallel)\nbinaries record exported information not only for the package but also its dependencies (reading one binary per imported package, without going beyond those boundaries)\nSurprising fact:\nIn reality, the meaning of import expression strings is not determined. What is determined is how the Go tool interprets them. (If Google or Yandex use their own builders, all of this might work differently!)\nFor shared or published packages, the import path must be globally unique! By convention, it should start with the domain of the owning organization!Each package defines its own name:1package mypackagename\nBy convention, the package name should match the last part of its import path (but we understand this is not mandatory üòâ)\nExceptions to the general rules for package names and import paths:\nmain package\n_test suffix for packages in *_test.go files (such directories can define 2 packages)\n.v2 suffix for import paths (the package itself is named without this suffix)\nRenaming an import:1import (2 \"crypto/rand\" // available as rand3 mrand \"math/rand\" // available as mrand4)Blank import:1import (2 _ \"image/png\"3)\nsometimes necessary to trigger side effects of initialization expressions and init()\nExamples of needing a blank import:1import (2 ...3 _ \"image/png\" // init() registers png format for image.Decode(in)4 _ \"github.com/lib/pq\" // enable support for Postgres (append this db driver)5 _ \"archive/tar\" // enable support for tar archive format6)By default, all these formats are not included so the binary isn't bloated!Frequently used commands of the go tool:<br><img alt=\"–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-25 –≤ 23.49.27.png\" src=\"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-25-–≤-23.49.27.png\" target=\"_self\">Standalone tools:\ngofmt ‚Äî file formatting\ngolint ‚Äî checking file for linting\ngodoc ‚Äî shows documentation in HTML; can be run for your files as godoc -http:8000. Flags -analysis=type and -analysis=pointer add advanced analysis info.\nGOROOT ‚Äî root directory of the Go distribution (best not to touch)go env outputs all significant variables, including default values. Here are a few more interesting ones:\nGOOS ‚Äî target OS\nGOARCH ‚Äî processor architecture\n(Information may be outdated and requires clarification and a changelog check)‚Ä¶\nCommand for installing source code and its dependencies:1go get domain/path/to/package2OR3go get domain/subtree/...\ndownloads packages, installs libraries and modules\nsupports popular code hosting sites\ndirectories created by the program are full-fledged repository clients\nflag -u updates visited packages (including dependencies) to the latest version before installation\n1go build args\ncompiles all packages from args\nif called for the main package, compiles the executable in the current directory\navailable forms: go build; go build ./path/to/pack; go build ../path/to/pack; go build /path/to/pack\nflag -i ‚Äî installs dependencies\nhow to compile for another system: $GOOS=&lt;...&gt; go build ...\nfor files with prefixes like net_linux*.go, it compiles for that system\nComments for the linker can be included in files: // +build linux darwin\n// +build ignore\nand others. 1go install args\ncompiles all packages and executable programs from args and saves them in ?/pkg and ?/bin respectively Doc-comments are specified at the beginning of the package and for all exported names. package comments should be in only one file. For large ones, this is usually doc.go\n1go doc args\nshows the doc from comments for a package or its member There are internal packages if their path contains an internal directory and they reside in a subtree. Such packages can access non-exported names.\n1go list23Forms:4go list some/package5go list ...6go list some/...7go list ...xml...\noutputs information about available packages\nflag -f ¬´pattern string¬ª allows writing a text/template language template for filtering\n1go tool &lt;cmd&gt;\nruns one of the executable files of the Go tool, for example go tool cover for information, or go tool cover -html=c.out to process coverage profile results after testing\n*_test.go files are not part of the package via go build, but they are part of it via go test.\nThere are three types of functions in such files:\nfunc Test&lt;&gt; (t *testing.T) {‚Ä¶}\nfunc Benchmark&lt;&gt; (b *testing.B) {‚Ä¶}\nfunc Example&lt;&gt; () {‚Ä¶}\n1go test\nlooks for these functions\nbuilds a temporary package\nbuilds and runs it\noutputs results\nperforms cleanup\nflags: -v, verbose\n-run=¬´myregexp¬ª, runs only those tests whose names match the regex\nTESTMethods of t *testing.T:1t.Error2t.Errorf3t.Log4t.Logf5t.Fatal // must be called from the same goroutine6t.Fatalf // and this one\nTable-driven testing with struct{input T; want P} is common. the main package can be tested just like any other, as if it were a library. In this case, the main() function is ignored.\nPackage for sending emails: net/smtp\nWhen white-box testing, you can save original globals in the test and replace them with stubs, but they must be restored via defer so that other tests don't see the substitution. Usually, go test runs tests sequentially.\nYou can declare packages like1package url_testAs part of net/url. Then during the testing of net/url, go test will assemble an additional package url_test and run its tests as well.\nThis is called an external test package.Filtering files of the fmt package:To allow an external test access to non-exported package names, a file export_test.go is usually added to the regular tests, in which internal names are forwarded, for example:1//mainpack/export_test.go2package mainpack34var NowPublic = wasPrivateAnd the external testing package can gain access:1//mainpack/xtest_test.go2package mainpack_test34import (5 \"mainpack\"6 ...7)89mainpack.NowPublic // access to private wasPrivate\nAvoid brittle tests! Do not test complex internal functions, or test something that obviously will never change in them. The degree to which tests investigate a package is called test coverage.\nUsually, you can see the statement coverage:\n1go test -coverprofile=c.out mypack2OR3go test -covermode=count // additionally counts the most covered (frequent) sections4OR5go test -cover // result only without profileBENCHMARK\nMethods are the same as testing.T, plus:1b.N // iteration count field2&lt;timer management methods&gt;Running a benchmark:1go test -bench=.\nbench sets a regex. Necessary! Otherwise, nothing will be selected.\nflag -benchmem adds memory information to the output (number of allocations and total volume)\ninitially runs for small N, extrapolating to necessary ones\nwe usually write the loop ourselves, so we have the opportunity to initialize anything outside the loop. If this is still needed, the b object allows regulating the testing core's timer. Benchmarks show absolute values. Calculating relative values is achieved by normal coding. Profiling is built into go test. Here are the flags:\n-cpuprofile=cpu.out\n-blockprofile=block.out\n-memprofile=mem.out\nDo not use several flags at once, as some may distort the results of others.\nA test run does not delete the binary after a benchmark test but saves it as pack.test.\nProfiling tool for long-running applications:1go tool pprofExample of starting profiling:1go test -run=NONE -bench=TargetFunction -cpuprofile=cpu.out some/packageAnd viewing it:1go tool pprof -text -nodecount=10 &lt;binary&gt;./pack.test &lt;event log&gt;cpu.outSee also the visualization tool: graphvizEXAMPLENeeded for:\ndocumentation\na runnable test for compliance with the output shown in the comment // Output:\n<br>for practical snippets on godoc (<a data-tooltip-position=\"top\" aria-label=\"http://golang.org\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"http://golang.org\" target=\"_self\">golang.org</a>)\nCommon Methods1reflect.Zero(tp reflect.Type) // zero value for type tp2reflect.Append(slice, item) // slice ‚Äî slice as reflect.Value, item ‚Äî element as reflect.Value3reflect.New(tp) // new pointer to a variable of type tp reflect.Type4reflect.MakeMap(tp) // create map of tp reflect.Type (where both key and value types are specified)56reflect.DeepEqual(a, b) // deep recursive comparison across all corresponding elements7// note (on the logic of this function): []int != []int{}; map[int]int != make(map[int]int)Dynamic Type1reflect.Type // dynamically represents a Go typeObtaining:1reflect.TypeOf(obj) // returns reflect.TypeMethods:1t.Kind()2t.Field(ind) reflect.StructField // struct field, for which one can ask, e.g., for .NameDynamic Value1reflect.Value // dynamically represents a value (of any type) in memoryObtaining:1reflect.ValueOf(obj) // returns reflect.ValueMethods:1v.Interface() // returns interface{} storing the correct type and value, back from reflect.Value23v.String() // returns a description like \"&lt;int Value&gt;\". Note: NOT the string representation of the value45v.Kind() // variety of the type. For named types, it \"reaches\" the underlying base type!6v.Type() // dynamic type.78// Obtaining values (panics if the real type doesn't match):9v.Bool()10v.Int()11v.Uint()12v.String()13v.Pointer() // (?) value where the reference type points14v.Len()15v.Index(ind)16v.NumField()17v.Field(i) // struct field18v.FieldByName(name) // get struct field by name19v.MapKeys() // slice of map keys []reflect.Value20v.MapIndex(key)21v.SetMapIndex(key, value) // map element assignment22v.IsNil() // for pointers and interfaces23v.Elem() // retrieve the dynamic value pointed to or the dynamic value of an interface type, 24// can then call .Type() to find the interface's type; for nil, this will be Invalid2526v.CanAddr() // whether the value is addressable27v.CanSet() // whether the value is both addressable and settable2829v.IsValid() // check that the value is not zero/nil, actually represents something3031v.NumMethod() // number of methods of this interface value32v.Method(i) // getting the i-th method (attention: it will be bounded)33v.Call(...) // ability to call the methodTypes have varieties (a-la type of the type):\nBool, String, Int, Int8, ‚Ä¶ ‚Äî primitives\nArray, Struct ‚Äî composite\nPtr, Slice, Map, Func, Chan ‚Äî reference\nInterface ‚Äî interface\nInvalid ‚Äî nil\nAll Kind constants are presented in the reflect package. Important: I found out that the reflection tool indeed stores extra info, but through special mechanisms, so there isn't a huge overhead for every single variable's type. If reflection is not used at all, no extra data will be created!) Reflection ‚Äî has access to unexported fields!\nChanges using reflection.\nReminder: there are variables (addressable locations in memory) and just values\nIt's not all that obvious here. Example:1x := 2 // value type variable?2a := reflect.ValueOf(7) // 7 int no3b := reflect.ValueOf(x) // 2 int no4c := reflect.ValueOf(&amp;x) // &amp;x *int no5d := c.Elem() // 2 int yes‚ùóÔ∏èGeneral approach to getting an addressable reflect.Value:1reflect.ValueOf(&amp;x).Elem() // x -&gt; addressable representation of x as reflect.ValueAnother example:1reflect.ValueOf(slice).Index(i) // addressable‚ùóÔ∏èObtaining the variable back from an addressable v reflect.Value (example for int):1ptr := v.Addr().Interface().(*int)2*ptr = 7You can set the value of an addressable v reflect.Value:1v.Set(reflect.ValueOf(7)) // important to set using a reflect.Value\nusually the same assignability checks as the compiler's are performed! So you can't write an int64 into an int.\nThere are specialized analogs:\n1SetInt, SetUint, SetString, SetFloat, etc.2// you can pass them a simple value without wrapping in reflect.Value3// also does not do strict checks and can silently truncate int64 to int16, for exampleThese specialized methods can only be called for dynamic values of primitives, but NOT interfaces!For an interface, you can call .Set():1var anyVar interface{}2v := reflect.ValueOf(&amp;anyVar).Elem()3v.Set(reflect.ValueOf(2)) // anyVar=2. reminder that .Set() takes a reflect.Value!4v.Set(reflect.ValueOf(\"hi\") // anyVar=\"hi\"\nIMPORTANT: Setting the value of an unexported field still won't work! An addressable reflect.Value records whether it was obtained by traversing an unexported struct field, and if so ‚Äî prohibits modification!\nLexical analyzer:1import \"text/scanner\"Way to get struct field tags:1// v ‚Äî reflect.Value addressable struct2tag := v.Type().Field(k).Tag // tag3tag.Get(\"http\") // value by key in the tagWhy reflection should be used cautiously:\ncode is vulnerable as type errors are not checked by the compiler\ndifficult code, expected types etc. must be clearly documented\nslow code. Often not a big deal for testing\nInteresting: the Go scheduler can freely move one goroutine between different OS threads.Important: the garbage collector can move a variable, changing its address! (which is why pointers do not reveal them)Package of low-level capabilities:1unsafe1unsafe.Sizeof(arg) // size of the representation of arg in bytes\nexpression arg is not evaluated\nresult is of type const uintptr, so it can be used in array sizes and defining other constants\nreports the size of the fixed part of arg, but not its contents\nsize of a composite type may be larger than the sum of its elements' sizes due to memory alignment (presence of alignment padding)\nBase sizes:<br><img alt=\"–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-27 –≤ 23.12.07.png\" src=\"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.12.07.png\" target=\"_self\">\nCompilers can (though not observed yet) reorder struct fields.\nGenerally, the most compact packing of a struct allows it to occupy less memory (in machine words) and thus be faster.\n1unsafe.Alignof(arg) // alignment size of argAs a rule:\nbooleans and numerics ‚Äî by their size\nothers ‚Äî by machine word size\n1unsafe.Offsetof(x.f) // offset of part f relative to the start of data x\naccounting for padding, if any\nExample of padding in a struct:<br><img alt=\"–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-27 –≤ 23.24.58.png\" src=\"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.24.58.png\" target=\"_self\">1unsafe.Pointer\na pointer, but without a specific type\ncan be obtained from a regular pointer *T as unsafe.Pointer(&amp;x)\ncan be turned back into a regular pointer as (*int)up // up is unsafe.Pointer\nfor arithmetic: can be converted to uintptr: uintptr(up)\ncan go back (dangerous!): unsafe.Pointer(uip) // uip is uintptr\nIMPORTANT:\nit is dangerous to break pointer expressions across different lines because moving garbage collectors change addresses of pointers and unsafe.Pointer, but not uintptr (which is a simple number). If we save uip in one instruction to return to it later, it might already point to an arbitrary area!\nEven funnier, if uip is the only address of some variable and there are no other pointers, the garbage collector might simply destroy the variable before we try to access it via that address.\nEven if the garbage collector is not a moving one, the address might change during a goroutine stack rebuild... Therefore, for example, all pointers returned by the reflect package as uintptr should be immediately converted to unsafe.Pointer. In Go, you can call C code. To do this, a special comment is inserted and the \"package\" \"C\" is imported:1package bzip23/*4#cgo CFLAGS: -I/usr/include5#cgo LDFLAGS: -L/usr/lib -lbz26#cgo ... and other directives for the cgo tool7C code8*/910import \"C\"1112... Go code with the ability to access C language fields: C.field1, C.function, C.tp, C.CONST etc.\nthe declaration import \"C\" forces go build to pre-process this file with the cgo tool, creating a temporary \"C\" package with Go declarations so the regular Go compiler can work correctly.\nIt is also possible to compile Go code as a static archive or dynlib for running in C programs.One must understand these are very complex matters not yet strictly defined. Here are the questions:\nmemory management\npointers\ncallbacks\nsignal handling\nstrings\nerrno\nfinalizers\nrelations between goroutines and OS threads\ncorrect pointer passing\netc.<br>\nsee: <a rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"http://golang.org/cmd/cgo\" target=\"_self\">http://golang.org/cmd/cgo</a> Dot notation with a pointer to a struct automatically dereferences it!\nDereferencing also happens when indexing a pointer to an array.\nAnonymous struct fields:1type Struct1 struct {2 Field int3}45type Struct2 struct {6 Name string7 Struct1 // field has both type and name Struct18}Such a structure is called embedded, its fields can be accessed directly:1var s Struct22s.Field = ...\nPointers only exist for what is stored in variables! You cannot take an address like this: &amp;4 ok-approach:\n1val, ok := mydict[key] // ok ‚Äî is key in mydict indeed?2typed, ok := object.(T) // ok ‚Äî has object the type T?3el, ok := &lt;-channel // ok ‚Äî channel isn't closed?Switch:1switch &lt;init optional!&gt;; &lt;expression optional!&gt; {2 case &lt;val 1&gt;:3 ...4 fallthrough // go into next section5 case &lt;val 2&gt;:6 ...7 case &lt;val 3&gt;:8 ...9 default:10 ...11}","aliases":[],"inlineTags":[],"frontmatterTags":[],"headers":[{"heading":"Chapter 1: Tutorial","level":1,"id":"Chapter_1_Tutorial_0"},{"heading":"Chapter 2: Program Structure","level":1,"id":"Chapter_2_Program_Structure_0"},{"heading":"Chapter 3: Basic Types","level":1,"id":"Chapter_3_Basic_Types_0"},{"heading":"Chapter 4: Composite Types","level":1,"id":"Chapter_4_Composite_Types_0"},{"heading":"Chapter 5: Functions","level":1,"id":"Chapter_5_Functions_0"},{"heading":"Chapter 6: Methods","level":1,"id":"Chapter_6_Methods_0"},{"heading":"Chapter 7: Interfaces","level":1,"id":"Chapter_7_Interfaces_0"},{"heading":"Chapter 8: Goroutines and Channels","level":1,"id":"Chapter_8_Goroutines_and_Channels_0"},{"heading":"Chapter 9: Concurrency and Shared Data","level":1,"id":"Chapter_9_Concurrency_and_Shared_Data_0"},{"heading":"Chapter 10: Packages and Go Tools","level":1,"id":"Chapter_10_Packages_and_Go_Tools_0"},{"heading":"Chapter 11: Testing","level":1,"id":"Chapter_11_Testing_0"},{"heading":"Chapter 12: Reflection","level":1,"id":"Chapter_12_Reflection_0"},{"heading":"Chapter 13: Low-Level Programming","level":1,"id":"Chapter_13_Low-Level_Programming_0"},{"heading":"Additional","level":1,"id":"Additional_0"}],"links":[],"author":"","coverImageURL":".","fullURL":"gopl.html","pathToRoot":".","attachments":["a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-14.54.57.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.56.19.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.57.07.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-13.44.57.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-16.56.12.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-20.25.22.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-15.56.10.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-22.43.37.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-25-–≤-23.49.27.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.12.07.png","a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.24.58.png"],"createdTime":1729104493643,"modifiedTime":1767125833398,"sourceSize":51745,"sourcePath":"engineering/compendium/GoPL.md","exportPath":"gopl.html","showInTree":true,"treeOrder":1,"backlinks":[],"type":"markdown"},"k&r-c.html":{"title":"K&R C","icon":"","description":"This is my notes for the book:\nThe C Programming Language ‚Äî Kernighan &amp; Ritchie\nShould to note: C is not a strongly-typed, but still has type-checking! Earlier, you mustn't to explicitly interchange of pointers and integers, but now you must! Some operators have the wrong precedence!\n#include &lt;stdio.h&gt; int main()\n{\nprintf(\"hello, world!\\n\");\n}\nC programm:\nfunctions statements variables\nPlay with arithmetic:#include &lt;stdio.h&gt; // inline comment\n/* multiline comment */ int main(){ float f, c; int lower, upper, step; lower = 0; upper = 300; step = 20; f = lower; while (f &lt;= upper){ c = (5.0/9.0) * (f-32.0); printf(\"%3.0f %6.1f\\n\", f, c); f = f + step; }\n} int division truncates\nAvailable types:\nint, float, char, short, long, double\nwhile kinds:\nsingle statement: while (&lt;condition&gt;) &lt;statement&gt;;\nmany statements: while (&lt;condition&gt;) {&lt;statement 1&gt;; &lt;statement 2&gt;; ...}\narithmetic way depends on operand types:\nall integers -&gt; integer operation\nat least one float -&gt; convert ints to floats and float operation\ntest it:\n#include &lt;stdio.h&gt; int main(){ printf(\"%d\\n\", 1/2); printf(\"%f\\n\", 1.0/2); printf(\"%f\\n\", 1.0/2.0);\n}\nsome formatted output specs:\n%d - for int\n%ld - for long\n%f - for float and double\n%e - scientific notation of float\n%g - general notation of float\n%o - for octal\n%x - for hexadecimal\n%c - for character\n%s - for character string\n%% - for %-sign\n%p - for pointers\nDetails directly from the book:\nformat of conversion: %[-][5][.][7][h/l]?, where ? is special character:\n<img alt=\"Screenshot 2025-09-27 at 22.49.48.png\" src=\"a9s/screenshot-2025-09-27-at-22.49.48.png\" target=\"_self\" style=\"width: 500px; max-width: 100%;\">\nWidth and precision can be set by int value:\nprintf(\"%.*f\", prec, floatval);There is an alternative version that prints in another string:1int sprintf(char *resstr, char *format, arg1, arg2, ...);\nAll parts of for loop can be any expressions\nPreprocessor directives:1#include23#define4\t#5\t##6\t... and __VA_ARGS__7#undef89#if10#ifdef11#ifndef12#elif13#else14#endif1516#error17#warning18#line19#pragma2021#Predefined macros:1__FILE__2__LINE__3__DATE__4__TIME__56__func__7__STDC__8__STDC_VERSION__Directive #define doesn't replace NAME in quotes nor as part of another name.First step io functions:\ngetchar\nputchar\nthey work with int\nExercise \"char counts\":1#include &lt;stdio.h&gt;2#define CHARS_COUNT 25634int main(){5\tchar text[] = \"hello world my dear man!\";6\tint chars[CHARS_COUNT];7\tfor(int i=0; i&lt;CHARS_COUNT; i++)8 chars[i]=0;910\tfor(int i=0; i&lt;sizeof(text); i++)11 chars[text[i]]++;12\tfor(int i=0; i&lt;CHARS_COUNT; i++)13 if (chars[i] !=0)14 printf(\"%c(%d) ‚Äî %d\\n\",i,i,chars[i]);15}Used convention:\nparameter (formal argument) ‚Äî for variable in function declaration/definition\nargument (actual argument) ‚Äî for in call\nSome info about parameter names:1int power(int, int); // just declaration or function prototype2int main(){3\t// some use of power(m, n);4}5int func(int base, int exponent){6\t// definition...7}Attention!\nStrings end with \\0 symbol!\n<br>Exercise \"max line length, but max 50 symbols to show\": <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/longest_line.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/longest_line.c\" target=\"_self\">–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª</a>Automatic variables ‚Äî term for local function variables.Available to set void in params list. Indeed, they must do so for explicit indication for compiler to check your calls of this function1int myfunc (void) // &lt;- !2{...}34int main()5{6\tmyfunc(); // can't be called without arguments7}Explicit declaration of global variable:1int main()2{3\textern int x;4}It's possible to omit extern if global var defined in this file:1#include &lt;stdio.h&gt;2int x=77;34int main()5{6\t// omitted: extern int x;7\tprintf(\"%d\\n\", x);8}Don't use more than 31 symbol for names in C, it may cause problems for linking in older systems.Basic types:\nchar, short, int, long, long long, float, double, long double.\nInteger types can be provided with signed or unsigned.Standard says: 8 ‚â§ char, 16 ‚â§ short ‚â§ int ‚â§ long ‚â§ long long, 32 ‚â§ long.Any suffixes and their types:1\tint x = 1234;2\tlong x = 1234L;3\tunsigned long x = 1234UL;4\tfloat x = 12.3f, y = 12e-3f;5\tdouble x = 3.4;6\tlong double = 3.4L;Octals and hexs:1int x = 010; // 8 (_10)2int x = 0xB; // 11 (_10)3unsigned long x = 0xFul;All escape sequences:<br>\n<img alt=\"Screenshot 2025-09-20 at 01.48.06.png\" src=\"a9s/screenshot-2025-09-20-at-01.48.06.png\" target=\"_self\">Concatenation is automatic:\n\"conca\" \"tenation\" == \"concatenation\"Important!1\t\"hello\" == char[6]{'h', 'e', 'l', 'l', 'o', '\\0'}1enum months{JAN=1, FEB, MAR}; // autoincrements!2MAR == 3Names in different enums must be unique, but inner values in the same enum must not.\nAlso unnamed enums are valid:1enum {GREEN, RED, BLUE};\nExternal and static variables must be initialized once before program starts. With constant expression! Local variables is initialized on function call with expression.\nExternals/static has 0 as default value. But locals has not!\nConstants:1const double e = 2.71828182845905;2const char msg[] = \"warning: \";34int strlen(const char message[]){...};Rules only for signed operands, auto type conversions:<br>\n<img alt=\"Screenshot 2025-09-20 at 13.23.06.png\" src=\"a9s/screenshot-2025-09-20-at-13.23.06.png\" target=\"_self\">Type conversion rules with unsigned is more complicated, because comparisons between signed/unsigned are machine-dependent. For example:1-1L &lt; 1U; // so 1U i-&gt;L2-1L &gt; 1UL; // so -1L L-&gt;ULFor function calls, when it doesn't have prototype (declaration with args), there are any more auto convertions:\nchar, short ‚Äî&gt; int\nfloat ‚Äî&gt; double\n<br>See exercises with strings: <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/htoi.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/htoi.c\" target=\"_self\">htoi</a> and <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/squeeze.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/squeeze.c\" target=\"_self\">sqeeze</a>.\nRight bitwise shift of signed value fills with sign bits or 0-bits in machine-dependent way! For op= operator left-hand expression computes only once\n1-bits count is faster with:\nx &amp;= (x-1), which delete rightmost 1-bit!\nType of ?:-expression is determined by the conversion rules. Be careful about order of computing different operand. For example in x = f() + g() there is no determined order in which functions are called!\nAnd one more example is:\n1f(n++, n*2); // wrong! There is no determined order for args evalOperators precedence:<br>\n<img alt=\"Screenshot 2025-09-20 at 15.44.51.png\" src=\"a9s/screenshot-2025-09-20-at-15.44.51.png\" target=\"_self\">\nAnd shortcut:\nbraces and attributes\nunary\nnotbin arithmetic\nshifts\ncomparison\nbin arithmetic\nboolean\nternary ?:\nassignment\ncomma-op\nIf-else association:1if (...)2\tif (...) // &lt;- second if3 statement_1;4\telse // refers to second if5 statement_2;Right associativity:1x = cond1 ? (cond2 ? expr1 : expr2) : expr3;2y = cond1 ? expr1 : (cond2 ? expr2 : expr3);Good practice\nAdd break; even in default section of switch\nswitch:1switch(expression){2case 1: case 2:3\tstatements;4case 3:5\tstatement;6\tbreak;7default:8\tstatement;9\tbreak;10}<br>See exercise <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/escapes.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/escapes.c\" target=\"_self\">escapes</a>.Comma operator (parenthesis are required due = precedence is more than ,-precedence):1/* isn't for prod */23int x;4x = (2, 3.4, 7); // x becomes int 7May use good practice:1do { // use braces for hastly reader of your code!2\tonly one statement;3} while (condition);goto:1void func()2{3\tgoto label; // label must be in this func block4\t5\tlabel: // scopes this func block6\tstatements;7}Remainder: functions earlier was declared without params. And default return type was int.warning, but possible:1int f(){2\t// no return statement3} // returns garbageThere is possibility to declare external function right in local scope of another function:1void f()2{3\tint sum(int, int), sub(int, int);4\tsum(1, 2);5}if func defined as:1// file: funcs.c23double func(){...}and used as:1// file: program.c23int main()4{5\tint func();6\tint x = func();7}\nThen func will be called with implicit type reinterpretation double-&gt;int. It's possible and dangerous!\nAttention!\n3.1234 will interpreted as 1078523464\nIt's just treat double bits as int\n2 more risky moments:\nIf there is no explicit declaration but calling some symbol like x = somefunc(int_a, int_b); compiler think somefunc returns int and worse of that, somefunc treat int_a and int_b with just type reinterpretation (type punning).\ndeclaration float func() is unknown params func, and onlyfloat func(void) is valid way!\nInteresting moment from Polish calculator program:1switch(type){2case '+':3\tpush(pop()+pop());4\tbreak;5case '-':6\top2=pop();7\tpush(pop()-op2);8\tbreak;9...10}Take attention at order for pop() and pop(): in 7'th line we can't use (pop()-pop()).<br>See the example with <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/ch4/stack.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/ch4/stack.c\" target=\"_self\">stack</a>. There are extern variables.For extern array declaration we usually don't use the size inside brackets:1extern int sp;2extern double stack[]; // there is no size, indeed it's optionalImportant!\nThere is a tradeoff between the desire that each file have access only to the information it need for its job and the pactical reality that it is harder to maintain more header files.\nThus, one .h is used by any files, and by user's code and your library realization.\nAll modifiers:\nstorage class specifiers auto (outdated)\nextern\nstatic\nregister type qualifiers (may be inserted after *: int *const var;) const\nvolatile\nrestrict function specifiers extern\nstatic\ninline It's possible to mark function params and automatic variables with register to advise the compiler to place var in machine registers.But\nCompilers are free to ignore that advice.\nExample:1int func(register int a, int b)2{3\tregister float f;4}For register-marked vars:\nonly some types and numbers of variable can be register (machine-dependent)\nIt's NOT possible to take the address of register variable\nYou can declare and initialize variables in nested blocks, compiler move it declaration on top of enclosing function or optimize, but doesn't access any by scope rules. Example:1int func(){2\tint i=0; // indeed `j` may be created here, or with `i` reuse3\tfor (int j=1; j&lt;5; j++){ // j can be accessed only in `for` body4 &lt;print(j)&gt;;5 // can access `i`6\t}7\t// can't access `j`, but it may be still alive8}Automatic Initialization, when there is no declare+init statement.\nStatic and extern ‚Äî autoinit with 0\nAuto and register ‚Äî undefined (i.e., garbage)\nFor static:1static int a=7; // [const!] inited on start wherever it is23int func(){4\tif (condition){5 static int b=dinamicval(); // (C99+) [dyn!] inited6 ... // at this line only 1 time7\t}8}Arrays may be initialized with braces, and then size may be omitted:1char message[] = {'H', 'i'}; // but \"Hi\" == {'H', 'i', '\\0'}When and only when there is less values, the missing elements will be set to zero (for static, extern, and even auto):1int months[12] = {1, 2}; // == {1, 2, 0, 0, ..., 0}There is new form (C99+):1int months[12] = {[0] = 1, [5] = 6}; // and zero at othersrecursion spends memory for calls stack, so it's not the most effective way, but often quite compact and easy to read/write/understand.<br>See ex. about <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/ch4/recursion.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/ch4/recursion.c\" target=\"_self\">recursion</a>.You can multiline your #define:1#define NAME some\\2long textYou can use params:1#define SQUARE(X) X*Xbut there are dangerous pitfalls:\nSQUARE(z+1) ‚Äî&gt; z+1*z+1 ‚Äî violation of operation order (so SQUARE(X) (X)*(X) can help)\nSQUARE(a++) ‚Äî&gt; a++*a++ ‚Äî unwanted double increment side effect\nand so on\nYou can undef a macro:1#undef SQUAREThere is stringify operator # in #define:1#define debug(expr) printf(#expr \" = %g\\n\", expr)It will replace x+y ‚Äî&gt; \"x+y\".\nFor valid token expr screens \" and \\ with \\\" and \\\\ accordingly.There is operator ## also for concatenate args:1#define glue(x,y) x ## y2glue(a+b,aby); // evaluated to `a+baby`, ##-adjacent spaces are removed(carefully: nested uses ## are arcane...)#if expr line may not include sizeof, casts, enum consts.\nIf expr is not zero, lines until other if-macros are included.\nCan use:1#if defined(NAME)Pattern for only once including section is:1#if !defined(HDR)2#define HDR34/* contents of hdr.h go here */56#endifSpecialized forms of #if defined(NAME) can be replaces as:1#ifdef2#ifndefUses macros from std library and special convention:1#include &lt;stdarg.h&gt;23void func(int lastnamed, ...)4{5\tva_list ap; // pointer to each unnamed arg6\tva_start(ap, lastnamed); // make ap point to 1st unnamed arg7\t//usage:8\tfloat x = va_arg(ap, float); // get explicit type value9\tva_end(ap); // required finalization10}From legacy: char* was replaced with *void as a proper type of general pointer!It's possible to take address only for value in memory, so you can't:1int *p = &amp;4; // WRONG!2int *p = &amp;(4-VAL*2); // WRONG!3register int a = 7;4int *p = &amp;a; // WRONG!Name of * in english is:\nindirection\ndereferencing\nUseful mnemonic\nVariable in declaration mimics the syntax in which the variable might appear\nExample:1double *dp, atof(char *);<br>In function you can affect caller args via address. See <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/ch5/getfloat.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/ch5/getfloat.c\" target=\"_self\">getfloat example</a>.\nPointer version of arrays operations in general is faster (at least to the uninitiated)\nPointer arithmetic works not literally, but address-wise. So int* + 1 increase real value by sizeof(int).Let a ‚Äî array, and pa = &amp;a[0]\nThen value of array is equal to the address of first element:1a == &amp;a[0]Furthermore, compiler immediately converts:1a[i] ‚Äî&gt; *(a+i)Thus, you can use array with arithmetic (for addressing) and pointer with indexing (for dereferencing):1a+i; // a[i]2pa[i]; // a[i]But keep in mind the difference\nAn array name is not a variable, so it's not a modifiable lvalue, and it's wrong:\na = pa; (can't assign to array)\na++; (can't modify value)\nIn fact, these parameters are equal:1void f(char a[]); // indeed is char *a, –Ω–æ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π!2void g(char *ap); // used more often, because allow the self-value changesOh My God! The incredible insight!\nAll const literal data (except for ordinal small numbers) has its own place at bytecode in .rodata (read only data). Thus, there are something like: 19384717236L\n\"Hello, world!\"\n{1,2,3,4,5,6,7,8,9,10} But remember, you can't do something like:\nchar* str = \"hello\"; str[0] = 'H';\nIt causes bus error or other!\nFor func void print(char* str); each of the next is valid:\nprint(\"Hello, world\"); // string constant\nprint(array); // char array[100]\nprint(ptr); // char *ptr\nWith syntax sugar (that compiler implicit replace f(int []arr); with f(int* arr);) it's possible to call:1f(ap+2);2f(&amp;ap[2]);But you can't:1int array[] = ap; // WRONG!Because array is always memory allocation by compiler, not just refer to some place. See more at two sections ahead.Note\nIf one is sure, it's also possible to index backwards: a[-1], a[-2], and so on.\nPointers and integers are not interchangeable! The sole exception is 0. There is a special const:1#include &lt;stdio.h&gt;2NULL; // == 0, for special meaning of specific pointerBut note: NULL is just macro, not a part of the language.\nNote: pointers arithmetic or comparisons work properly for 0, addresses of the same array and address of the first element past the end of this array.\nThere are special types in C:\nptrdiff_t for pointers' difference\nsize_t for sizeof result\nThere is an important difference between definitions:1char amessage[] = \"Hello!\"; // is [H e l l o ! \\0]2char *pmessage = \"Hello!\"; // just [ ] -&gt; .rodata{H e l l o ! \\0}Wow\nFor string copy until '\\0' is gotten, there is a pretty pattern:\nwhile (*s++ = *t++);\nBecause '\\0' is 0 and 0 is false for boolean-comparison\n<br>See exercise <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/ch5/strend.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/ch5/strend.c\" target=\"_self\">strend</a>.<br>See line sorting with array of pointers: <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/ch5/sortlines.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/ch5/sortlines.c\" target=\"_self\">exercise</a>.One important peculiarity, compiler must know step for pointer increment:1void func(int arr[2][6][8]){...}2‚âà3void func(int arr[][6][8]){...} // possible to ommit first dimension4// but only first!56// Same as for extern arrays:7extern int arr[7][5];8extern int arr[][5]; // valid9extern int arr[][]; // WRONG!Modern way:1void func(int x, int y, int z, int arr[x][y][z]){...}\nMulti-dimensional (MD) arrays are stored sequentially, so you can send 3-dimensional array to function, that waits for a 1-dimensional.\nBut: if MD array allocated dynamically, its elements may be not sequential in the memory.There is difference between:1int a[10][20];2int *b[10];In the former ‚Äî memory is allocated actually (200 ints), in the latter ‚Äî just 10 pointers are really stored. Eval a[1] don't loads memory for a, but b[1] loads value of b, see asm:1ldr w8, [sp, #28] ; read a[1]vs.1ldr x8, [sp, #16] ; b &lt;- not hardcoded and need to be gotten from memory2ldr w8, [x8, #4] ; b[1]1// myprogram hello, world2int main(int argc, char *argv[])3{4\t// argc == 35\t// argv[0] ‚Äî&gt; myprogram6\t// argv[1] ‚Äî&gt; hello,7\t// argv[2] ‚Äî&gt; world8\t// argv[3] == 0 (nullptr) ‚Äî that standard requires9}Function, in fact, is address already, so:1&amp;func == func // same as arr==&amp;arrIn C, a function is not a variable, but it's possible to define a pointer to function:1void sort(int (*comp)(void*, void*), void *elements[]){2\t...3\t(*comp)(p1, p2); // should be unreferenced for call4\t...5}6int direct_order(char *a, char *b); extern char *elements[];78// send `direct_order` to `sort`9sort((int (*)(void*,void*))direct_order, (void**)elements);<br>See huge example <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/ch5/sortlines.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/ch5/sortlines.c\" target=\"_self\">sortlines</a>.This example has shown the important moment: we can't cast (char *lines[100]) even to (char*[]) because it is cast from complete type to incomplete type.\nIt's possible to cast to incomplete type in some rare cases (from GPT):\ncomplete * ‚Äî&gt; incomplete * (it casts a pointer)\nincomplete ‚Äî&gt; incomplete\nThe reason of complicated declaration is that C syntax is an attempt to make the declarations and the use agree! (I write as i read)Precise C cpecification\nThe precise grammar that specifies a declarator (dcl) uses BNF-grammar\nSimplified form is:1dcl: optional *'s direct-dcl2direct-dcl: name3 (dcl)4 direct-dcl()5 direct-dcl[optional size]For instance:\n(*pfa[])()\nIllustration of the parsing with a parse tree:<br>\n<img alt=\"Screenshot 2025-09-25 at 02.53.33.png\" src=\"a9s/screenshot-2025-09-25-at-02.53.33.png\" target=\"_self\" style=\"width: 400px; max-width: 100%;\">Basic view:1struct point {2\tint x; // structure member3\tint y;4}; // Pay attention to the semicolon!\nNote: struct name (which is often called structure tag) is optional\nImportant\nYou must use \";\" at the end of struct declaration.\nIt is statement! (All statements must be ended with \";\")\nStructure name, its member name and also an ordinary variable can have the same name! (since they can always be distinguished by context)Declaration and definition forms:1struct point {2\tint x;3\tint y;4} p1, p2;5struct point p3 = {7, -3}; // with initializationImportant\nIn C, type name is struct point, not just point\nFor access a member they use operator \".\":1printf(\"%d\\n\", p2.y);Structures can be nested:1struct rect {2\tstruct point pt1;3\tstruct point pt2;4};The only legal operations on a structure:\ncopying\nassigning\ntake address &amp;\naccess members \".\"\nIn C99+ you can:1struct point{int x; int y;} p;2p = (struct point){1, 2};Structure parameters are passed by value like any others.Ways to access structure members:1struct rect r, *rp = &amp;r;2r.pt1.x;3rp-&gt;pt1.x;You can initialize in-place:1struct key {2\tchar *word;3\tint count;4} keytab[] = { // empty brackets ([])5\t\"auto\", 0, // no nested braces ({})6\t\"break\", 0,7\t...8}Important: sizeof is a compile-time operator that can be used to compute size of any object in bytes:1sizeof object // variable, array or structure. Not typename2sizeof (typename)3// pay attention to these two different formsA good way to define compile-time determinated array is macro, that protects from type changes:1#define ARRLENGTH (sizeof arr / sizeof arr[0]) // or / sizeof (&lt;el type&gt;)Note: sizeof can't be used in #if, because the preprocessor does not parse type names.<br>See example <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/ch6/countwords.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/ch6/countwords.c\" target=\"_self\">countwords</a>. It also applies to later subparagraphs.Don't assume that size of a structure is the sum of the sizes of its members. Alignment may be involved by compiler. Use: sizeof (struct mystructurename).You can use this prettified form for long return types (on your taste):1struct mystructurename *2func(...&lt;params&gt;)\nIt's illegal to put a struct in itself declaration, but it's legal to put a pointer to this struct.\n1struct s{2\tstruct s next; // WRONG3\tstruct s *next; // valid4}You can cycle structures, but best practice is to declare latter before:1struct b; // forward declaration, good to use!23struct a { struct b *p; };4struct b { struct a *p; };<br>See example <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/c/KR/ch6/hashtable.c\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/c/KR/ch6/hashtable.c\" target=\"_self\">hashtable</a>.You can define type synonyms:1typedef int *const Ints[10]; // you must set array size. Incomplete types2 // are not allowed34//usage:5Ints ints = {&amp;a, &amp;b}; // first 2 are inited with adressesMore complicated example:1typedef struct tnode *Treeptr;23typedef struct tnode { // note: struct tnode type is defined too!4\tchar *word;5\tint count;6\tTreeptr left;7\tTreeptr right;8} Treenode;Note\ntypedef just adds a new name for some existing types, thus it is a simple textual substitution, but more efficient than #define\nBesides purely aesthetic issues, there are two main reasons for using typedef:\nportability (e.g. size_t, ptrdiff_t)\nbetter documentation\nImportant\nThere are 2 types of alignment: internal (within a structure), external (among memory addresses).\nUnion variables may hold (at different times) objects of different types and sizes, with the compiler keeping track of size and alignment requirements:1union data{2\tint ival;3\tfloat fval;4\tchar *sval;5} var;Facts:\nsyntax based on structures\nvar is large enough to hold the largest of member types\nresponsibility is on programmer: store/retrieve the correct type\nspecific var size and misusing error is machine-dependent\naccess elements just as for structures (. and -&gt;)\nUnion may only be initialized with value of the type of its first member, or in C99+:1union Data {2 int i;3 float f;4}5union Data d = {.f = 3.14f}; // designated initializerFor avoid bit-work with masks and bit-wise arithmetic you can use:1// declaration:2struct {3\tunsigned int is_keyword : 1;4\tunsigned int is_extern : 1;5\tunsigned int is_static : 1;6} flags;78// usage:9flags.is_extern = flags.is_static = 1;10if (flags.is_extern == 0 &amp;&amp; flags.is_static == 0)11\t&lt;then ...&gt;;Be careful:\nalmost everything about bit-fields is implementation-dependent (whether a bit-field may overlap a word boundary; assignation left-right or right-left). You should not to pick apart externally-defined data. Use unsigned for portability\nbit-fields may be unnamed for manual padding, special width : 0 may be used to force alignment at the next word boundary (machine word)\ncan be declared only as int (and _Bool for new standards)\ncan't be referenced with &amp;\n","aliases":[],"inlineTags":[],"frontmatterTags":[],"headers":[{"heading":"K&amp;R C","level":1,"id":"K&R_C_0"},{"heading":"Introduction","level":1,"id":"Introduction_0"},{"heading":"Chapter 1. A tutorial introduction","level":1,"id":"Chapter_1._A_tutorial_introduction_0"},{"heading":"Chapter 2. Types, Operators, Expressions","level":1,"id":"Chapter_2._Types,_Operators,_Expressions_0"},{"heading":"Chapter 3. Control flow","level":1,"id":"Chapter_3._Control_flow_0"},{"heading":"Chapter 4. Functions and Program Structure","level":1,"id":"Chapter_4._Functions_and_Program_Structure_0"},{"heading":"<strong>Initialization</strong>","level":2,"id":"**Initialization**_0"},{"heading":"Recursion","level":2,"id":"Recursion_0"},{"heading":"The C Preprocessor","level":2,"id":"The_C_Preprocessor_0"},{"heading":"Macro substitution","level":3,"id":"Macro_substitution_0"},{"heading":"Conditional inclusion","level":3,"id":"Conditional_inclusion_0"},{"heading":"Variable-length Argument Lists","level":2,"id":"Variable-length_Argument_Lists_0"},{"heading":"Chapter 5. Pointers and Arrays","level":1,"id":"Chapter_5._Pointers_and_Arrays_0"},{"heading":"Pointers and Addresses","level":2,"id":"Pointers_and_Addresses_0"},{"heading":"Pointers and Function Arguments","level":2,"id":"Pointers_and_Function_Arguments_0"},{"heading":"Pointers and Arrays","level":2,"id":"Pointers_and_Arrays_0"},{"heading":"Address Arithmetic","level":2,"id":"Address_Arithmetic_0"},{"heading":"Character Pointers and Functions","level":2,"id":"Character_Pointers_and_Functions_0"},{"heading":"Pointer Arrays; Pointers to Pointers","level":2,"id":"Pointer_Arrays;_Pointers_to_Pointers_0"},{"heading":"Multi-dimensional Arrays","level":2,"id":"Multi-dimensional_Arrays_0"},{"heading":"Pointers vs. Multi-dimensional Arrays","level":2,"id":"Pointers_vs._Multi-dimensional_Arrays_0"},{"heading":"Command-line Arguments","level":2,"id":"Command-line_Arguments_0"},{"heading":"Pointers to Functions","level":2,"id":"Pointers_to_Functions_0"},{"heading":"Complicated Declarations","level":2,"id":"Complicated_Declarations_0"},{"heading":"Chapter 6. Structures","level":1,"id":"Chapter_6._Structures_0"},{"heading":"Basic of Structures","level":2,"id":"Basic_of_Structures_0"},{"heading":"Structures and Functions","level":2,"id":"Structures_and_Functions_0"},{"heading":"Arrays of Structures","level":2,"id":"Arrays_of_Structures_0"},{"heading":"Pointers to Structures","level":2,"id":"Pointers_to_Structures_0"},{"heading":"Self-referential Structures","level":2,"id":"Self-referential_Structures_0"},{"heading":"Table lookup","level":2,"id":"Table_lookup_0"},{"heading":"Typedef","level":2,"id":"Typedef_0"},{"heading":"Unions","level":2,"id":"Unions_0"},{"heading":"Bit-fields","level":2,"id":"Bit-fields_0"}],"links":["file:///Users/rayskiy7/dev/new_beginning/c/KR/longest_line.c","file:///Users/rayskiy7/dev/new_beginning/c/KR/htoi.c","file:///Users/rayskiy7/dev/new_beginning/c/KR/squeeze.c","file:///Users/rayskiy7/dev/new_beginning/c/KR/escapes.c","file:///Users/rayskiy7/dev/new_beginning/c/KR/ch4/stack.c","file:///Users/rayskiy7/dev/new_beginning/c/KR/ch4/recursion.c","file:///Users/rayskiy7/dev/new_beginning/c/KR/ch5/getfloat.c","file:///Users/rayskiy7/dev/new_beginning/c/KR/ch5/strend.c","file:///Users/rayskiy7/dev/new_beginning/c/KR/ch5/sortlines.c","file:///Users/rayskiy7/dev/new_beginning/c/KR/ch5/sortlines.c","file:///Users/rayskiy7/dev/new_beginning/c/KR/ch6/countwords.c","file:///Users/rayskiy7/dev/new_beginning/c/KR/ch6/hashtable.c"],"author":"","coverImageURL":".","fullURL":"k&r-c.html","pathToRoot":".","attachments":["a9s/screenshot-2025-09-27-at-22.49.48.png","a9s/screenshot-2025-09-20-at-01.48.06.png","a9s/screenshot-2025-09-20-at-13.23.06.png","a9s/screenshot-2025-09-20-at-15.44.51.png","a9s/screenshot-2025-09-25-at-02.53.33.png"],"createdTime":1758074369052,"modifiedTime":1767126906847,"sourceSize":25413,"sourcePath":"engineering/compendium/K&R C.md","exportPath":"k&r-c.html","showInTree":true,"treeOrder":2,"backlinks":[],"type":"markdown"},"mastering-go.html":{"title":"Mastering Go","icon":"","description":"This is my notes for the book:\nMastering Go ‚Äî Mihalis TsoukalosThe cobra and viper libraries are used to create CLI applications.Go uses static linking! Thus, all dependencies (only the necessary ones) are bundled into the binary, making it independent.You can quickly get data from a user using:fmt.Scanln(*string)\nThe following help to reach and identify the executable file:os.Getenv(varname string) string // get env var\nfilepath.SplitList(path string) []string // cross-platform way to split paths\nfilepath.Join(paths ...string) string // join paths\nos.Stat(path string) (FileInfo, error) // info about file\n(FileInfo) Mode() FileMode // describes file's mode\n(FileMode) IsRegular() bool // is it a regular file? Logging is intended for applications, not libraries!\nCreating a logger that writes to the system log /var/log/system.log:\nsysLog, err := syslog.New(syslog.LOG_SYSLOG, \"systemLog.go\") if err != nil { log.Println(err) return\n} else { log.SetOutput(sysLog) log.Print(\"&lt;print your messages&gt;\")\n}\nThe logger defines:1.Print[f][ln]() // for logs2.Panic[f][ln]() // for errors3.Fatal[f][ln]() // for critical crashes and immediate termination via os.Exit(1)Creating your own log file in the /tmp directory (for Mac this is /var/folders/‚Ä¶):1LOGFILE := path.Join(os.TempDir(), \"mylog.log\")2f, err := os.OpenFile(LOGFILE, os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)34if err != nil {5 fmt.Println(err)6 return7}8defer f.Close()910mylog := log.New(f, \"mylog: \", log.LstdFlags)11mylog.Println(\"&lt;print your messages&gt;\")You can change the flags argument for the log.New function to output different data to the log (time, source code line, etc.):1LstdFlags := log.Ldate | log.Lshortfile // my custom flagsFlags can also be reset during the process:1mylog.SetFlags(LstdFlags)Generics are used like this:1func f[T any](values []T){...}Getting an error:1errors.New(text)2fmt.Errorf(template, args...)Go treats time and date as the same thing!Conversions are legitimate:1[]byte(\"string\")2string([]byte{24, 33, 16, 3}) // but one must understand there could be decoding errors hereUseful function:1strings.Fields(str string) []string // splits by \\s+Using a time zone:1loc, _ := time.LoadLocation(\"America/New_York\")2mytime.In(loc) // returns time in the specified locationYou can skip multiple constants:1const (2 a int = iota*iota3 _4 b5 _6 c7)8// a = 0, b = 4, c = 16Holy cow. You can set the capacity of a sliced slice:1newSlice := slice[1:5:7]2// resulting capacity equals 7-1 3// the specified capacity (7) must not exceed the capacity of the original sliceReminder: copy(dst, src) is used for slices (or strings and []byte), and returns the number of copied elements, which equals min(len(dst), len(src)).Reminder: sorting is implemented via interfaces, so for reverse order you need:1sort.Ints(ints) // just sort ints2sort.Sort(sort.Reverse(sort.IntSlice(ints)))Cryptographically secure random:1import \"crypto/rand\"Do not use new with maps and channels!Reminder: a Must prefix in a function name indicates that it will panic upon failure.Regex:1import \"regexp\"2...3re := regexp.MustCompile(pattern)4re.MatchString(str)CSV:1lines, err := csv.NewReader(file).ReadAll()2...3csvwriter := csv.NewWriter(file)4csvwriter.Comma = '\\t'5err = csvwriter.Write(strings)6csvwriter.Flush()JSON unmarshaling can be performed into map[string]interface{}, which allows for saving an arbitrary structure.Normal way to sort in a functional style:1sort.Slice(slice, lessfunc)Checking if sorted is also supported:1sort.SliceIsSorted(slice, lessfunc)SUPER IMPORTANT:\nYou cannot pass a list with a concrete type, e.g., []int, as []interface{}.IMPORTANT:\nThe new semantics for closures in loops does indeed slightly slow down the code by allocating variables on the heap instead of the stack, but the compiler only does this when the variable has its address taken &amp;i or is used in a closure.Working with a Database:1connection := \"host=localhost port=5432 user=postgres password=password dbname=products sslmode=disable\"2 db, err := sql.Open(\"postgres\", connection)3 MustNil(err)4 defer db.Close()5 rows, err := db.Query(`SELECT \"datname\" FROM \"pg_database\" WHERE datistemplate = false`) // Cursor!6 defer rows.Close()7 MustNil(err)8 for rows.Next() {9 var result string10 err = rows.Scan(&amp;result)11 MustNil(err)12 fmt.Println(\"&gt;\", result)13 }Methods for an open connection:1db.Query // with getting a response as a cursor2db.Exec // without getting a responseQueries can be passed as:1(`SELECT ...`)2(`DELETE FROM ... WHERE \"field\" = $1`, args...)Query for selecting from 2 tables:1SELECT2 \"id\",\"username\",\"name\",\"surname\",\"description\"3FROM4 \"users\",\"userdata\"5WHERE6 users.id = userdata.useridQuery for updating records:1UPDATE2 \"userdata\"3SET4 \"name\"=$1, \"surname\"=$2, \"description\"=$35WHERE6 \"userid\"=$4Versions:\nv2.4.14, v.1.24.3, etc.\nGeneral format:1vX.Y.Z2X (major) ‚Äî major version, usually without backward compatibility3Y (minor) ‚Äî new functionality4Z (patch) ‚Äî bug fixes without new functionalitygo doc / godoc treats comments specially:1// BUG(1): ...A bit about CI/CD:\nYou can use GitLab Runners or GitHub Actions to define CI/CD scripts that can automatically build and run new code in a container (so you don't have to do it manually). GitHub has its own \"Secrets\" storage where you can save uname/pass for postgres and/or docker. GitHub can automatically analyze, compile, and package new code into a docker container, which can then be automatically pushed to DockerHub. DockerHub ‚Äî a cloud container registry provided by Docker.\nThere is a way to manage Go package variables during build using a builder flag, as well as taking the version from a commit. Here is the combined command:1$ export VERSION=$(git rev-list -1 HEAD) &amp;&amp; go build -ldflags \"-X main.VERSION=$VERSION\" gitVersion.goAnd here is the usage:1$ ./gitVersion version2Version: 99745c8fbaff94790b5818edf55f15d309f5bfebStdin, Stdout, Stderr ‚Äî 3 files constantly open in UNIX.\nUNIX uses file descriptors, and these 3 files are represented by the numbers 0, 1, and 2 respectively.\nThey can be found at:1/dev/fd/0; /dev/fd/1; /dev/fd/2 ‚Äî respectivelyProcesses are divided into 3 types:\nUser processes\nDaemons\nKernel processes In UNIX, signals are used for asynchronous interaction with an application.\nGet process ID:1os.Getpid()Predefined signal constants:1syscall.SIGINT (^C)2syscall.SIGINFO3syscall.SIGKILL4syscall.SIGSTOP (^Z)5syscall.SIGTERM6syscall.SIGURG7and others^D ‚Äî sends the EOF command.Set your own channel for handling system signals:1import (\"os\"; \"os/signal\")2signal.Notify(ch, args...) // accepts a buffered channel of capacity 1: chan os.Signal3// specific signal codes are passed in args if you only need to handle thoseThese signals cannot be intercepted:1syscall.SIGKILL; syscall.SIGSTOPCommand to send a signal (default is -9) to a process:1kill [-&lt;sigcode or signame&gt;] &lt;PID&gt;Reference from an AI on what to use and what not to:1[file rw] use: os.ReadFile, os.WriteFile, os.Open, os.OpenFile, os.Create, bufio.NewReader,2 bufio.NewWriter, io.Copy3[file rw] DON'T: ioutil45[dir tree] use: filepath.WalkDir (represents elements as fs.DirEntry)6[dir tree] DON'T: filepath.Walk78[file stat] use: os.FileInfo, fs.ReadDir, fs.DirEntry, os.Stat, os.Lstat9[file stat] DON'T: os.FileMode (for direct identification of file type)\nFunny: ReadDir and DirEntry were copied from Python :) The io.Reader.Read([]byte) method fills the slice according to its length (len). Similarly for Writer.\nBasic interfaces for reading/writing data:1io.Reader2io.WriterBuffering:1import \"bufio\"SEPARATELY ON FILES (from AI):1Open file for reading: os.Open()2Read bytes: f.Read()3Read buffered bytes: bufio.NewReader(); r.Read()4Read buffered strings: r.ReadString('\\n')5Read buffered strings in a loop: bufio.NewScanner(); for s.Scan(); s.Text()6Read entirely: os.ReadFile()78Open (overwrite): os.Create()9Open (append): os.OpenFile()10Write bytes: f.Write()11Write formatted strings: fmt.Fprint(f, ...)12Write strings: f.WriteString(); io.WriteString()13Write entirely: os.WriteFile()14Write buffered bytes(strings): bufio.NewWriter(); w.Write(); w.WriteString(); w.Flush()1516Work with positions: `f.Seek()`1718Close a file: `f.Close()`19Delete a file: `os.Remove()`20Rename/Move: `os.Rename()`21Get info: `os.Stat()`22Change permissions: `os.Chmod()`23Change owner: `os.Chown()`24Change timings: `os.Chtimes()`UNIX command to output the first lines (or -c characters):1head &lt;flags&gt; fileInteresting fact: in UNIX, there are files that collect entropy and provide cryptographic randomness:1/dev/random // blocks if not enough entropy has been collected yet2/dev/urandom // non-blocking, but may have lower cryptographic strengthHow to read random bytes from /dev/random and decode them into, for example, int64:1import \"encoding/binary\"2...3file, _ := os.Open(\"/dev/random\")4defer file.Close()56var rnd int647binary.Read(file, binary.LittleEndian, &amp;rnd) // specified LittleEndian byte order\nNote: marshaling problems are often related to non-exported fields.\nJSON tags once again:1`json:\"newname\"`2`json:\"newname,omitempty\"` // do not record nulls/zero values3`json:\"-\"` // do not record at allYou can use json.Marshal() and json.Unmarshal() directly, or you can create streaming ones:1json.NewEncoder(); json.NewDecoder()\nYou can set .SetIndent() for these.\nAn analogous package exists for XML:1import \"encoding/xml\"But the essence is slightly different; here is an example:1type Employee struct {2 XMLName xml.Name `xml:\"employee\"` // needed as the element name3 ID int `xml:\"id,attr\"` // attr is inside the tag: &lt;employee id=7&gt;4 FirstName string `xml:\"name&gt;first\"` // inner tag5 LastName string `xml:\"name&gt;last\"`6 Height float32 `xml:\"height,omitempty\"` // omit if empty7 Address8 Comment string `xml:\",comment\"` // comment as is9}A similar story exists for YAML, but it is noted that a third-party package must be installed for this.Application of viper (schematically):1pflag.StringP(...) // --someflag -s2pflag.StringP(...)3pflag.CommandLine.SetNormalizeFunc(...)4pflag.Parse()56viper.Bind(pflag.CommandLine)78val := viper.GetInt(\"age\") // 37 &lt;= --age 37As I understand it, viper is only needed for application configuration. That is, pflag works with flags, while viper acts as a settings manager.\nHere is an example of working with a config file:1viper.SetConfigType(\"json\")2viper.SetConfigFile(CONFIG)3viper.ReadInConfig()4if viper.IsSet(\"some_param\") {5 &lt;use&gt; viper.GetInt(\"some_param\")6}7// You can unload the config into a structure:8type ConfigStructure struct {9 SomeParam int `mapstructure:\"some_param\"`10}11var cnf ConfigStructure12_ = viper.Unmarshal(&amp;cnf)Cobra is needed for creating a CLI interface. It comes both as a package and as a console utility for code generation.1$cobra-cli init$ cobra-cli add foo2$cobra-cli add bar$ cobra-cli add subfoo -p fooCmdCommand and its description:1var subCmd = &amp;cobra.Command{2 Use: \"sub\",3 Aliases: []string{\"cmd1\"},4 Short: \"...\",5 Long: `...`,6 Run: func(cmd *cobra.Command, args []string) {...},7}8func init() {rootCmd.AddCommand(subCmd);}After creation, we can make global and local flags:1// global2rootCmd.PersistentFlags().&lt;Type&gt;&lt;P&gt;(\"flagname\", ...)3viper.BindPFlag(\"flagname\", rootCmd.PersistentFlags().Lookup(\"flagname\"))4viper.Get&lt;Type&gt;(\"flagname\") // to retrieve5// local6subCmd.Flags().&lt;Type&gt;&lt;P&gt;(\"lf\", ...)7cmd.Flags().Get&lt;Type&gt;(\"lf\")There is a function for embedding files into Go code (you can even embed the source code itself):1import _ \"embed\"23// go:embed ./some/text/source_code.go4var tfile string56// go:embed ./some/image/path/mountains.png7var imgfile []byteNew functions for temporary files/folders:1os.MkdirTemp(), os.CreateTemp()The \"os/fs\" package represents an abstraction over the file system fs.FS (interface). It can use embed.FS, which implements this interface. Thus, embedded files form their own file system that can be traversed.\nIMPORTANT: works for reading only!In Go, the parallelization model is: fork-join. Goroutines are created whenever needed, and synchronization, waiting, and channels ‚Äî merge the goroutines back into one. A uniform scheduling strategy consists of the compiler pre-allocating processors for everything (evenly). But this is risky because something might suddenly finish and not use its resources, while something else might suddenly become more complex and lack resources.\nTherefore, Go uses a strategy of intercepting consequences, distributing resources on the fly according to needs!\nTsoukalos writes: Go can and does use continuation stealing in its work stealing algorithm.P ‚Äî processor, M ‚Äî OS thread, G ‚Äî goroutine. This is what the Go scheduler works with.\nUseful: think about parallelization, not concurrency! (Break the task into independent pieces rather than shoving everything into different cores!)\nReminder: the data race detection flag for running or building:1go run -race ...VERY IMPORTANT: in other languages like Python, we are used to process pools because re-creating them is expensive. In Go, there are also effective pools, but manual re-creation of goroutines is cheap. This should not be confused with a connection pool, which is usually created for databases and is needed in all programming languages.\nIn Go, a process pool is implemented via a buffered channel (as a task pool)!\nWays for goroutines to interact:\nchannels\nlocal sockets\nshared memory\natomic package:1import \"sync/atomic\"Used for reading and writing via pointers:1atomic.LoadInt64(&amp;x)2atomic.AddInt64(&amp;x, 1)context package:1import \"context\"Okay, this is something passed along the call chain, creating new child contexts (if necessary). Contexts are primarily created for canceling goroutines. They are thread-safe. Canceling a context cancels it and all its child contexts. You can pass a value in contexts (which in good practice should be logically related to the context). Here are the main examples:1Context ‚Äî interface with methods Deadline(), Done(), Err(), Value()23basecntx := context.Background() // you can use context.TODO if you don't understand anything or don't know what to pass further down the call chain45cntx2, cancel := context.With&lt;Cancel/Deadline/Timeout&gt;(basecntx, args...)6cntx3 := context.WithValue(cntx2, key, val) // k:v are any type7cntx3.Value(key) // returns nil if it is not present for this key8defer cancel()\nImportant, from an AI: cancel() does not terminate child goroutines, it merely notifies them as context users that they should wrap up! The garbage collector won't touch them until they finish!\nSemaphore:1import \"golang.org/x/sync/semaphore\"2sem := semaphore.NewWeighted(int64(4))3ctx := context.TODO()4sem.Acquire(ctx, n) // you may acquire &gt;1 at once5...6sem.Release(n) // and release &gt;1 at once1http.Response struct {2 Status string // e.g. \"200 OK\"3 StatusCode int // e.g. 2004 Proto string // e.g. \"HTTP/1.0\"5 ProtoMajor int // e.g. 16 ProtoMinor int // e.g. 07 Header Header8 Body io.ReadCloser9 ContentLength int6410 TransferEncoding []string11 Close bool12 Uncompressed bool13 Trailer Header14 Request *Request15 TLS *tls.ConnectionState16}1http.Request struct {2 Method string3 URL *url.URL4 Proto string // \"HTTP/1.0\"5 ProtoMajor int // 16 ProtoMinor int // 07 Header Header8 Body io.ReadCloser9 GetBody func() (io.ReadCloser, error)10 ContentLength int6411 TransferEncoding []string12 Close bool13 Host string14 Form url.Values15 PostForm url.Values16 MultipartForm *multipart.Form17 Trailer Header18 RemoteAddr string19 RequestURI string20 TLS *tls.ConnectionState21 Cancel &lt;-chan struct{}22 Response *Response23 Pattern string24 ctx context.Context25 pat *pattern26 matches []string27 otherValues map[string]string28}(You can also look at: http.Transport, http.Client.)\nThe author writes that if a powerful server is needed, one should use: Nginx or Apache.\nIMPORTANT: we write HTTP code because usually we are running in a Docker container on an Nginx server, which implements HTTPS, providing us with security!A handler attached to \"/\" is the default handler and matches any address not matched by others.http.Server can be created explicitly:1mux := http.NewServeMux()2s := &amp;http.Server{3 Addr: PORT,4 Handler: mux,5 IdleTimeout: 10 * time.Second,6 ReadTimeout: time.Second,7 WriteTimeout: time.Second,8}9mux.Handle(\"/insert/\", http.HandlerFunc(insertHandler))10mux.Handle(\"/insert\", http.HandlerFunc(insertHandler))\nNote the forms of the route points; a trailing slash indicates any possible continuation.\nData types for Prometheus metrics:\ncounter (+0, +k, =0) [counter]\ngauge (¬±k) [gauge]\nhistogram (usually for counting duration) [histogram]\nsummary (‚âàhistogram, but also +calculates quantiles) [summary]\nRetrieving Go metrics:1import \"runtime/metrics\"2metrics.All() // all available metrics34genMetric := make([]metrics.Sample, 1)5genMetric[0].Name = \"/sched/goroutines:goroutines\" // number of active goroutines6metrics.Read(genMetric) // fills the metric values7if genMetric[0].Value.Kind() == metrics.KindBad {...} // metric is no longer supported8&lt;print&gt; genMetric[0].Value.Uint64() // get the valuePassing metrics to Prometheus:1// declare and register2var &lt;counter&gt; = prometheus.New&lt;Counter&gt;{3 prometheus.&lt;Counter&gt;Opts{4 Namespace: \"rayskiy7\",5 Name: \"my_counter\",6 Help: \"This is my counter\",7 }8}9... // likewise you can use gauge, histogram, summary1011func init(){12 prometheus.MustRegister(counter)13 ...14}1516&lt;use&gt; counter.Add(3) // for histograms and summaries, .Observe() is used1718// You need to provide a scrape point for Prometheus; it comes to fetch them itself:19http.Handle(\"/metrics\", promhttp.Handler()) // there is a built-in handler from Prometheus\nthe Prometheus collector, which runs separately, has its own configuration file, which usually describes the polling interval and the address of who will be polled.\nTo create Docker applications, you need to build an image using a script file:\nDockerfile\n1$docker build -t res_image_name . # build docker image$ docker images # check build; list all built imagesafter which a multi-container application is described in a .yml file:\ndocker-compose.yml\n1$docker-compose up$ docker-compose down # to stop or use ^C\n! Further details are not described in this note.\nWay to force garbage collection:1runtime.GC()For an application collecting its own statistics and sending them to Prometheus, it is sufficient to describe a docker-compose file declaring: the Go application container and the Prometheus container. You can also add Grafana to this setup for beautiful visualization.Correct parsing of a URL:1url.Parse(inputString)You can separately create a client, a request, and run the request from the client:1c := &amp;http.Client{Timeout: 15*time.Second}2request, err := http.NewRequest(http.MethodGet, urlString, nil) // &lt;body&gt; is nil3response, err := c.Do(request)4&lt;can use&gt;:5 response.Status6 response.Header.Get(\"Content-Type\") // and other keys7 response.ContentLength // may be -18 response.Body // io.ReaderHelper methods for obtaining the HTTP/1.x wire representation of a request/response:1httputil.DumpRequest(request, &lt;include body&gt;false)2httputil.DumpResponse(response, &lt;include body&gt;false)File servers.\nA full-fledged server:1mux.HandleFunc(\"/\", defaultHandler) // for requests that \"miss the mark\"2fileServer := http.FileServer(http.Dir(\"/tmp/\")) // attach server to this local directory3mux.Handle(\"/files/\", http.StripPrefix(\"/files\", fileServer)) // handler receives a stripped prefixCreating a temporary file and a single-file server:1f, err := os.CreateTemp(\"\", \"data*.txt\") // write to this2defer os.Remove(f.Name())3http.ServeFile(w, r, tempFileName)4time.Sleep(30 * time.Second)Setting a timeout without context:1func Timeout(network, host string) (net.Conn, error) {2 conn, err := net.DialTimeout(network, host, timeout)3 if err != nil {4 return nil, err5 }6 conn.SetDeadline(time.Now().Add(timeout))7 return conn, nil8}9...10t := http.Transport{11 Dial: Timeout,12}13client := http.Client{14 Transport: &amp;t,15}16data, err := client.Get(URL) // Timeout will be called hereTimeout via context (client side) schematically:1func connect (c context.Context) error {2 req := http.NewRequestWithContext(c, \"GET\", URL, nil) // picks up the .cancel() of the parent context3 go client.Do(req)4 select{5 &lt;check for cancel on our side or success from the goroutine&gt;6 }7}Timeout on the server side, essence:1m := http.NewServeMux()2 srv := &amp;http.Server{3 Addr: PORT,4 Handler: m,5 ReadTimeout: 3 * time.Second,6 WriteTimeout: 3 * time.Second,7 }Protocol Hierarchy:1IP -&gt; TCP -&gt; HTTP -&gt; WebSocket (well, roughly speaking, haha)TCP ‚Äî reliable data transmission via TCP packets, which typically include a port in their headers.\nPorts 0-1024 are restricted to root access, which is risky. It's better to avoid them.\nPort 0 assigns any available unprivileged port.\nPrimary console utility for TCP:1netcat &lt;ipv4/ipv6&gt; &lt;port&gt;2flags:3 -l, run as a server4 -u, UDP protocol5 -v and -vv, verbose outputThe net package:1net.Dial(...) // client2net.Listen(...) // server3// return:4net.Conn (implements io.Reader &amp; io.Writer)Valid network parameters for net.Dial(), \"L\" marks those used with Listen:1tcp(L) tcp4(L) tcp6(L)2udp udp4 udp63ip ip4 ip64unix(L) unixgram unixpacket(L)Simple TCP server creation:1net.Listen()2net.Accept()Note: A connection closes when the client sends an EOF, signaling the end of the read stream (i.e., the client has nothing more to send).\nThere is a lower-level method:1net.ResolveTCPAddr()2DialTCP() &amp; ListenTCP()A bit about UDP:1// client:2net.ResolveUDPAddr(\"udp4\", CONNECT)3net.DialUDP(\"udp4\", nil, s)4defer c.Close()56// server:7net.ResolveUDPAddr(\"udp4\", PORT)8net.ListenUDP(\"udp4\", s)9defer c.Close()1011Clients and servers for UDP use:12.ReadFromUDP() &amp; .WriteToUDP()\nThese methods are used because a UDP server accepts packets from MULTIPLE (any) clients simultaneously.\nCreating a UNIX socket is very similar to creating a standard TCP socket, but you pass a file path instead of host:port:1l, _ := net.Listen(\"unix\", \"path/to/unix/socket\") // the socket file must be deleted before starting the server!WebSockets.\nUse third-party libraries:\n1github.com/gorilla/websocket2nhooyr.io/websocket\nNEVER use fmt.Fprint functions for writing to or reading from a WebSocket because they require proper fragmentation (working with frames).\nUsage:\n1ws, err := upgrader.Upgrade(w, r, nil) // upgrade HTTP to WS2mt, message, _ := ws.ReadMessage()3ws.WriteMessage(mt, message)4// important: check errors!Console utility for working with WebSockets:1websocatCreating your own WebSocket client:1ws, ... := websocket.DefaultDialer.Dial(wsServer.String(), nil)2defer ws.Close()3&lt;do work...&gt;4ws.WriteMessage(websocket.CloseMessage, websocket.FormatCloseMessage(websocket.CloseNormalClosure, \"\"))5return\nInteresting technique: Re-creating the goroutine that reads user input to make it non-blocking.\nTrick:\n1url.URL{2 Scheme: \"ws\",3 Host: host,4 Path: path,5}.String()Reminder:1interrupt := make(chan os.Signal, 1)2signal.Notify(interrupt, os.Interrupt)Trick:1syscall.Kill(syscall.Getpid(), syscall.SIGINT)Error response function:1http.Error(w, \"Error text\", errCode)How to specify that the client wants to send JSON to the server:1request.Header.Set(\"Content-Type\", \"application/json\")Use the router package:1gorilla/muxto create a more advanced RESTful server. It is essentially a framework.\nThis package provides advanced features:\nRestricting HTTP methods for specific endpoints.\nDefault handlers: mux.NotFoundHandler and mux.MethodNotAllowedHandler.\nURL pattern matching like GET /users/{id:[0-9]+}.\nThe creation of handlers isn't particularly unique, but generally, a gorilla/mux server is set up like this:1var rMux = mux.NewRouter()23func main() {4 s := http.Server{5 // address config, rMux multiplexer, timeouts, etc.6 }78 rMux.NotFoundHandler = http.HandlerFunc(DefaultHandler) // default 404 handler via wrapper9 rMux.MethodNotAllowedHandler = notAllowedHandler{} // default 405 handler via interface1011 rMux.HandleFunc(\"/endp_1\", Handler_1) // handles all HTTP methods1213 getMux := rMux.Methods(http.MethodGet).Subrouter()14 getMux.HandleFunc(\"/endp_2\", Handler_2)15 getMux.HandleFunc(\"/endp_3/{id:[0-9]+}\", Handler_3)16 // and other handlers...1718 putMux := rMux.Methods(http.MethodPut).Subrouter()19 putMux.HandleFunc(\"/endp_4\", Handler_4)20 // ...2122 // AND OTHER HTTP METHODS...2324 go func() { // run server25 log.Println(\"Listening on\", PORT)26 err := s.ListenAndServe()27 if err != nil {28 log.Printf(\"Error starting server: %s\\n\", err)29 return30 }31 }()3233 // catch SIGINT and then shutdown:34 s.Shutdown(nil)Note: Two structures with identical fields are still considered different types by Go!A REST API can have several versions, implemented via:\nHTTP Headers\nSubdomains (3rd level)\nAccept and Content-Type headers\nDifferent sub-routes\nURL Parameters\nUsing gorilla/mux, you can create a file server for binary files:\nFor PUT, set a custom handler for saving (e.g., locally).\nFor GET, use the standard http.FileServer.\nHow to extract a parameter from a URL:1mux.Vars(req)[\"some_param_name\"] // returns the valueWorking with Swagger:1go install github.com/go-swagger/go-swagger/cmd/swagger@latestAdding markup-comments. Preamble:1// Documentation for REST API2//3// Schemes: http4// BasePath: /5// Version: 1.0.76//7// Consumes:8// - application/json9//10// Produces:11// - application/json12//13// swagger:metaSpecific declarations (leaked into docs):1// @termsOfService http://swagger.io/terms/Data:1// User defines the structure for a Full User Record2//3// swagger:model4type User struct {5 // The ID for the user6 // in: body7 //8 // required: false9 // min: 110 ID int `json:\"id\"`1112 // The Username of the user13 // in: body14 //15 // required: true16 Username string `json:\"username\"`1718 // The Password of the user19 //20 // required: true21 Password string `json:\"password\"`2223 // The Last Login time of the User24 //25 // required: true26 // min: 027 LastLogin int64 `json:\"lastlogin\"`2829 // Is the User Admin or not30 //31 // required: true32 Admin int `json:\"admin\"`3334 // Is the User Logged In or Not35 //36 // required: true37 Active int `json:\"active\"`38}Route documentation:1// swagger:route DELETE /delete/{id} DeleteUser deleteID2// Delete a user given their ID.3// The command should be issued by an admin user4//5// responses:6// 200: noContent7// 404: ErrorMessageand:1// swagger:route GET /logged logged getUserInfo2// Returns a list of logged-in users3//4// responses:5// 200: UsersResponse6// 400: BadRequestDocumentation usually refers to different parameter entities (e.g., deleteID) and response entities (e.g., UsersResponse). These entities must also be documented as Go code, typically placed in a separate file named docs.go:1// swagger:parameters deleteID2type idParamWrapper struct {3 // The user id to be deleted4 // in: path5 // required: true6 ID int `json:\"id\"`7}89// A list of Users10// swagger:response UsersResponse11type UsersResponseWrapper struct {12 // A list of users13 // in: body14 Body []User15}\nNote: In swagger:parameters, you can specify more than one parameter at once.\ngorilla/mux allows adding middleware for its routers:1mymux.Use(middleware) // middleware = func(http.Handler) http.HandlerGenerating .yaml documentation from Swagger comments in Go code:1$ swagger generate spec --scan-models -o ./path/to/out.yamlAnd the code to launch a server displaying the generated documentation:1getMux := mux.Methods(http.MethodGet).Subrouter()2opts := middleware.RedocOpts{SpecURL: \"/swagger.yaml\"}3sh := middleware.Redoc(opts, nil)4getMux.Handle(\"/docs\", sh)There is also a separate site for viewing OpenAPI files (yamls):1https://editor.swagger.io/Library for encoding Go structures into URL parameters:1go-querystringPackage for validating incoming JSON data:1validatorFlag for go test to run tests and benchmarks in random order:1go test -shuffle=on ...A pattern trick of renaming main to run to allow calling run() from other executable programs:1func main(){2 err := run(os.Args, os.Stdout)3 if err != nil {4 fmt.Println(err)5 return6 }7}89func run (args []string, stdout io.Writer) error {10 // write main business logic here ;)11 return nil12}IMPORTANT:\nb.N ‚Äî how many times to call the target function in the current benchmark iteration.\nEach benchmark runs for at least one second, gradually increasing b.N.\nIt's better to save target function results to a global variable so the compiler doesn't optimize away a function call with an unused result (as claimed by Tsoukalos).\nFolder treated specially by Go for test-required data:1testdataHow to run multiple sub-benchmarks from a single benchmark:1b.Run(name string, subbench func(*testing.B))In this case, the enclosing benchmark itself is not measured!Execution command:1go test -bench=. [-benchmem] *.go\nNote, output includes: The -8 suffix displaying the number of CPU cores.\nThe first column shows the benchmark score ‚Äî number of operations completed.\nAverage time in ns/op. Compare a couple of benchmark outputs using:1benchstat (go install golang.org/x/perf/cmd/benchstat@latest)Profiling.1runtime/pprof ‚Äî profiling applications (e.g., CLI)2net/http/pprof ‚Äî profiling a web serverProfiling from CLI application code:1pprof.StartCPUProfile(cpuOut)2defer pprof.StopCPUProfile()34pprof.WriteHeapProfile(memoryOut) // in a loopCommand with multiple launch variants to view profiles:1go tool pprof ... // ask the AI for more detailsProfiling an HTTP server:1r.HandleFunc(\"/debug/pprof/\", pprof.Index)2r.HandleFunc(\"/debug/pprof/cmdline\", pprof.Cmdline)3r.HandleFunc(\"/debug/pprof/profile\", pprof.Profile)4r.HandleFunc(\"/debug/pprof/symbol\", pprof.Symbol)5r.HandleFunc(\"/debug/pprof/trace\", pprof.Trace)Viewing the profile is similar to standard console tools:1go tool pprof http://yourdomain.com:8000/debug/pprof/profileAfterward, you enter interactive mode (%) and can use commands like top, cum, list, etc.You can view the profile in a web interface:1go tool pprof -http=localhost:8080 aProfile.outTracing.Viewing a trace (launches web mode immediately):1go tool trace /path/to/trace/file.outGenerating a trace (3 variants):1runtime/trace2net/http/httptrace3go test -trace1st variant - collecting a trace for a regular application:1err := trace.Start(outfile)2&lt;process err&gt;3defer trace.Stop()2nd variant - collecting a web server trace from the client side:1client := http.Client{}23req, _ := http.NewRequest(\"GET\", URL, nil)4trace := &amp;httptrace.ClientTrace{5 GotFirstResponseByte: func() {6 fmt.Println(\"First response byte!\")7 },8 GotConn: func(connInfo httptrace.GotConnInfo) {9 fmt.Printf(\"Got Conn: %+v\\n\", connInfo)10 },11 DNSDone: func(dnsInfo httptrace.DNSDoneInfo) {12 fmt.Printf(\"DNS Info: %+v\\n\", dnsInfo)13 },14 ConnectStart: func(network, addr string) {15 fmt.Println(\"Dial start\")16 },17 ConnectDone: func(network, addr string, err error) {18 fmt.Println(\"Dial done\")19 },20 WroteHeaders: func() {21 fmt.Println(\"Wrote headers\")22 },23}2425req = req.WithContext(httptrace.WithClientTrace(req.Context(), trace)) 26fmt.Println(\"Requesting data from server!\")27_, err := http.DefaultTransport.RoundTrip(req)28if err != nil {29 fmt.Println(err)30 return31}3233_, err = client.Do(req) 34if err != nil {35 fmt.Println(err)36 return37}You can also view all available routes on the server side:1err := r.Walk(2 func(route *mux.Route, router *mux.Router, ancestors []*mux.Route) error {3 pathTemplate, err := route.GetPathTemplate()4 if err == nil {5 fmt.Println(\"ROUTE:\", pathTemplate)6 }7 pathRegexp, err := route.GetPathRegexp()8 if err == nil {9 fmt.Println(\"Path regexp:\", pathRegexp)10 }11 qT, err := route.GetQueriesTemplates()12 if err == nil {13 fmt.Println(\"Queries templates:\", strings.Join(qT, \",\"))14 }15 qRegexps, err := route.GetQueriesRegexp()16 if err == nil {17 fmt.Println(\"Queries regexps:\", strings.Join(qRegexps, \",\"))18 }19 methods, err := route.GetMethods()20 if err == nil {21 fmt.Println(\"Methods:\", strings.Join(methods, \",\"))22 }23 fmt.Println()24 return nil25 }26)Testing.For tests and benchmarks, you can call:1defer t.Cleanup(func() {...}) // final teardown actionsA very convenient package for automated random testing:1import (2 \"testing\"3 \"testing/quick\"4)567func TestSomething(t *testing.T){8 cond := func(&lt;some params&gt;) bool {&lt;...&gt;}9 err := quick.Check(cond, &amp;quick.Config{MaxCount: N}) // auto random test10}Testing tool flags:1$ go test &lt;...&gt; -timeout=2s -count=1 # sets max time for all tests and number of repetitionsInvestigating coverage:1$go test -cover *.go # shows coverage percentage$ go test -coverprofile=coverage.out *.go # creates a coverage profile fileHow to beautifully open the coverage profile file:1$ go tool cover -html=coverage.outGo's built-in lightweight staticcheck tool:1go vet somefile.goHow to test an HTTP server:1import \"net/http/httptest\"23rr := httptest.NewRecorder()4handler := http.HandlerFunc(MyHandleFunc) // returns http.Handler5handler.ServeHTTP(rr, req) // essentially passes the recorder instead of a response writerNote: if you need to set dynamic path variables for gorilla/mux in a test:1req = mux.SetURLVars(req, vars) // where vars is map[string]stringThere is a newer type of testing called Fuzzing:1func FuzzSomeFunc(f *testing.F){2 f.Add(\"some input\")3 f.Add(\"some other input\")45 f.Fuzz(6 func(t *testing.T, input string){ // called with seed data and random inputs7 &lt;check your SomeFunc here&gt;8 }9 )10}Execution:1go test -fuzz [-fuzztime=10s] [-fuzzprog=some.concrete] [-fuzzdir=/path/to/out] targetCross-compilation in Go is achieved via environment variables:1GOOS=linux GOARCH=amd64 go build someprogram.goDirective:1// go:generate echo helloTriggers a shell command when the corresponding tool is executed:1$ go generateAvailable flags:\n-v: output names of packages and files\n-n: print commands without executing them\n-x: print commands before execution\nReminder:\nExample functions exist (interestingly, they don't need the testing package):1func ExampleSquare() {2 fmt.Println(Square(7))3}4// Output:5// 49Key steps in creating a gRPC server+client (Remote Procedure Calls):\nIDL ‚Äî Interface Definition Language\nCreating the gRPC server\nCreating the gRPC client gRPC is built on top of HTTP/2\nThe .proto file defines the protoapi.\nChoosing the version and working with namespaces:1syntax = \"proto3\";2package mypack;3import \"other.pack\";Location and name of the generated code:1option go_package = \"./;packname\";Defining the service and its interface:1service ServiceName {2 rpc SomeFunc(MessType) returns (OtherType); // comments allowed3}Defining types:1message MessType{2 string SomeField = 1;3}4enum Color {5 Red = 0;6 Green = 1;7 Blue = 2;8}9message B{10 A x = 1;11 int64 y = 2;12 repeated string z = 3;13 Color c = 4;14 reserved 5, 6;15 reserved \"oldname\";16}The .proto files must be compiled using the compiler:1$ brew install protobuf # installs protocTo generate Go code, you will need:1# for generating data structures (protobuf)2$ go install google.golang.org/protobuf/cmd/protoc-gen-go@latest34# for generating the service (gRPC):5$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latestIf the plugins are installed, you can generate Go code:1$ protoc --go_out=. --go-grpc_out=. myfile.proto(Tsoukalos also demonstrates using options):1--go_opt=paths=source_relative2--go-grpc_opt=paths=source_relative\nprotoc generates apiname.pb.go and apiname_grpc.pb.go files containing the protobuf and gRPC service code respectively. Both files declare: package packaname! Therefore, when creating a server/client, you must import this specific package.\nCreating a gRPC server. Key points:1import (2 ...3 \"path/to/my/myapi\"4 \"google.golang.org/grpc\"5 \"google.golang.org/grpc/reflection\"6)78type ServiceServer struct {9 myapi.UnimplementedServiceServer10}1112func (ServiceServer) SomeFunc (ctx context.Context, arg *myapi.MessType) (*myapi.OtherType, error) {13 // get fields: arg.GetSomeField()14 // create and set fields: return &amp;myapi.OtherType{Value: int64(47)}, nil15}1617func main() {18 server := grpc.NewServer()19 var grpcServer ServiceServer20 myapi.RegisterServiceServer(server, &amp;grpcServer)2122 reflection.Register(server) // needed when there's more than one service in .proto2324 listen, err := net.Listen(\"tcp\", \":8080\") // noqa: ignore err2526 fmt.Println(\"Serving requests...\")27 server.Serve(listen)28}Creating a gRPC client. Key points:1import (2 ...3 \"path/to/my/myapi\"4 \"google.golang.org/grpc\"5)67func CallSomeFunc(ctx context.Context, c myapi.ServiceClient, in string) (*myapi.OtherType, error) {8 arg := &amp;myapi.MessType{9 SomeField: in,10 }11 return c.SomeFunc(ctx, arg)12}1314func main() {15 conn, err := grpc.Dial(\":8080\", grpc.WithInsecure()) // noqa: ignore err16 client := myapi.NewServiceClient(conn)1718 in := \"some input\"19 result, err := CallSomeFunc(context.Background(), client, in) // noqa: ignore err20 fmt.Println(\"Result (int64):\", result.Value)21}Advanced gRPC features:\nPassing arrays\nStreaming (Client-side, Server-side, Bi-directional)\nTesting gRPC:1$ grpcurl ...Functions:1func Add[T Numeric](a, b T) T {2 return a+b3}45type Numeric interface{6 ~int | ~int32 | ~int64 // the 'type' keyword can be omitted; '~' includes underlying types7}89// usage:10// Add(2, 3)11// or12// Add[int](2, 3)Types and methods:1type List[T any] []T23// Note the lack of constraint in the receiver4func (l List[T]) getLast() T {5 return l[len(l) - 1]6}Structures:1type Box[T any] struct {2 Value T3}APPENDIX: GC (Garbage Collector)\n–í Go, new() doesn't necessarily send a created variable to the heap, nor does x:= send it to the stack (this is why you can return the address of a local variable from a function). To see the compiler's escape analysis decisions, run:\n1$ go run -gcflags '-m' program.go2or:3$ go run -gcflags '-m -m' program.goruntime.MemStats parameters for inspection:1mem.Alloc2mem.TotalAlloc3mem.HeapAlloc4mem.NumGCFlags to see GC cycle traces during execution:1$ GODEBUG=gctrace=1 go run myprog.go\nGo uses a tricolor marking algorithm for garbage collection (black/grey/white). (Tsoukalos)? Maps have a worse impact on application speed than slices because they cause the garbage collector to work more slowly.\nContainerization ‚Äî creating applications in a wrapped container that is \"guaranteed to work\" regardless of the launch platform and the local environment!Iterators in Go are implemented as a range over a function having the signature:1func(yield func(...)bool)Essentially, Go passes the loop body as the yield function, replacing continue with return true and break with return false.\nExample:1func Fib(n int) iter.Seq[int] {2 a, b := 0, 13 return func(yield func(int) bool) {4 for ; n &gt; 0; n-- {5 if !yield(b) {6 return7 }8 a, b = b, a+b9 }10 }11}Now it can be used in a range:1for v := range Fib(10) {2 fmt.Println(v)3}The yield function allows only 0, 1, or 2 arguments for use in a for loop.Types can be defined like this (type aliasing):1type myint=int32Build tags, compiler directives:1// +build &lt;constraint&gt;Reminder about the special folder:1internalNames within this folder cannot be imported from \"outside\" of this folder.Structure of a modern web application:\n<img alt=\"telegram-cloud-document-2-5312238323056530771.jpg\" src=\"a9s/telegram-cloud-document-2-5312238323056530771.jpg\" target=\"_self\">Hexadecimal literals with a power of two exist:10x1p11 // == 2^11 == 2048Makefile ‚Äî like a bash script-list where you can run code via aliases. Very convenient for:\ncompilation/build\nautomation (tests, linting, deployment, containerization, etc.)\ndependency management (came from C)\nas documentation\n","aliases":[],"inlineTags":[],"frontmatterTags":[],"headers":[{"heading":"Chapter 1: Introduction","level":1,"id":"Chapter_1_Introduction_0"},{"heading":"Chapter 2: Basic Data Types","level":1,"id":"Chapter_2_Basic_Data_Types_0"},{"heading":"Chapter 3: Composite Types","level":1,"id":"Chapter_3_Composite_Types_0"},{"heading":"Chapter 4: Interfaces Reflection","level":1,"id":"Chapter_4_Interfaces_Reflection_0"},{"heading":"Chapter 5: Go Packages and Functions","level":1,"id":"Chapter_5_Go_Packages_and_Functions_0"},{"heading":"Chapter 6: Giving Instructions to The Unix System","level":1,"id":"Chapter_6_Giving_Instructions_to_The_Unix_System_0"},{"heading":"Chapter 7: Parallel Execution","level":1,"id":"Chapter_7_Parallel_Execution_0"},{"heading":"Chapter 8: Creating Web Services","level":1,"id":"Chapter_8_Creating_Web_Services_0"},{"heading":"Chapter 9: Working with TCP/IP and Web-Sockets","level":1,"id":"Chapter_9_Working_with_TCP/IP_and_Web-Sockets_0"},{"heading":"Chapter 10: Working with REST API","level":1,"id":"Chapter_10_Working_with_REST_API_0"},{"heading":"Chapter 11: Testing and Profiling","level":1,"id":"Chapter_11_Testing_and_Profiling_0"},{"heading":"Chapter 12: gRPC and Protobuf","level":1,"id":"Chapter_12_gRPC_and_Protobuf_0"},{"heading":"Chapter 13: Generics","level":1,"id":"Chapter_13_Generics_0"},{"heading":"Additional","level":1,"id":"Additional_0"}],"links":[],"author":"","coverImageURL":"a9s/telegram-cloud-document-2-5312238323056530771.jpg","fullURL":"mastering-go.html","pathToRoot":".","attachments":["a9s/telegram-cloud-document-2-5312238323056530771.jpg"],"createdTime":1767121075514,"modifiedTime":1767122541378,"sourceSize":43922,"sourcePath":"engineering/compendium/Mastering Go.md","exportPath":"mastering-go.html","showInTree":true,"treeOrder":3,"backlinks":[],"type":"markdown"},"py-asyncio.html":{"title":"Py Asyncio","icon":"","description":"This is my notes for the book:\nPython Concurrency with asyncio ‚Äî Matthew FowlerTypes of multitasking:\nPreemptive\nThe CPU itself decides when to switch between threads/processes.\nCooperative (non-preemptive)\nWe manually write points in the code where control can be yielded.\nProcess ‚Äî like a running application with its own memory space.\nThread ‚Äî the smallest unit of execution, usually created by a process. For example, a process always creates its main thread.Processes create threads.\nProcess_1: main thread, side thread #1, side thread #2.Libraries:\nthreading\nmultiprocessing\nasyncio\nNew keywords:\nasync ‚Äî (coroutine creation)\nasync for\nasync with\nawait ‚Äî (suspending a coroutine to wait for another, usually long-running operation)\nCalls:\ncalling a function returns a result\ncalling a generator returns a generator object\ncalling a coroutine returns a coroutine object\ncalling an asynchronous (coroutine) generator returns an object suitable for async for\nMain entry point for an asyncio application:asyncio.run(coroutine: coroutine) ‚Äî&gt; tp.Any\nCreating a task that starts immediately:asyncio.create_task(coroutine)\nChecking if a task is finished:task.done() # bool\nCancelling a task:task.cancel() # raises a CancelledError exception\nChecking if a task was cancelled explicitly or by timeout:task.cancelled() # bool\nTask result:task.result()\nTask exception:task.exception()\nWaiting with a 2-second timeout:await asyncio.wait_for(subtask, timeout=2)\n# raises asyncio.TimeoutError if time expires\nProtecting a task from cancellation:asyncio.shield(task) # returns a task that cannot be cancelled\nAt the moment of creation, a Future object is referred to as one of:\nincomplete\nunresolved\nnot done\nBut after receiving a value, it is called:\ncomplete\ndone\nMethods of asyncio.Future objects:\ndone()\nset_result()\nset_exception()\nresult()\nInvalidState # exception raised when trying to retrieve a result that isn't ready\nFuture objects can be awaited using await.\nAwaitable objects are those that implement __await__.General structure:A Task is, in a sense, a pair (Coroutine + Future).! Useful: functools.wraps ‚Äî a decorator that updates a wrapper so that the function retains its original name and docstring.CPU-bound tasks can be run truly in parallel using asyncio tools, but this must be done within a process pool.An asyncio event loop can be created manually:loop = asyncio.new_event_loop()\nEvent loop methods (I):\nloop.run_until_complete() ‚Äî unfinished tasks are not cancelled.\nloop.close ‚Äî free resources at the end, best used in a finally block.\nloop.call_soon() ‚Äî call a callable on the next iteration of the event loop.\nloop.slow_callback_duration = .250 ‚Äî set the threshold in seconds for debug mode.\nWays to get the event loop:asyncio.get_running_loop() # recommended, fails if there is no loop asyncio.get_event_loop() # creates a loop if it doesn't exist\nWays to enter debug mode:\nasyncio.run(coroutine(), debug=True)\n‚Ä¶% python3 -X dev program.py\n‚Ä¶% PYTHONASYNCIODEBUG=1 python3 program.py\nNetwork protocols:\nTCP ‚Äî reliable data transfer without loss, but with overhead.\nUDP ‚Äî less reliable, but with less overhead.\nCreating a socket:socket.socket(family=&lt;socket.AF_INET&gt;, type=&lt;socket.SOCK_STREAM&gt;) # can be used in a with statement\nsocket.setsockopt(level=&lt;socket.SOL_SOCKET&gt;, optname=&lt;socket.SO_REUSEADDR&gt;, value=&lt;1&gt;)\nsocket.setsockopt(...)\n...\nsocket.bind(address=&lt;('127.0.0.1', 8000)&gt;)\nsocket.setblocking(value:bool)\n&lt;do something with socket&gt;\nsocket.close()\nSocket methods:\nsocket.listen() ‚Äî switch to \"listening\" mode.\nsocket.accept() ‚Äî wait for a connection and return it.\nsocket.recv(n: int) ‚Äî receive n bytes.\nsocket.sendall(bytes) ‚Äî send bytes.\nsocket.close() ‚Äî close the socket.\nsocket.shutdown(&lt;socket.SHUT_RDWR&gt;)\nThere are many ways to connect to a server. One of them is telnet (brew install telnet).SELECTORS:\nThe notification system for socket events is built around the Selector class:\nBaseSelector ‚Äî abstract base class.\nDefaultSelector ‚Äî automatically selected implementation for a specific system.\nA single selector object can handle a pool of sockets at once.Important concepts of selectors:\nRegistration. Each socket must be registered, specifying which events we are interested in. Registration can be cancelled when finished.\nSelection. Blocking while waiting for an event. Returns a list of sockets and their events that are ready for processing. A timeout is available.\nIn short, selectors are part of the event loop, which asyncio uses under the hood. Therefore, we often don't need to dive into selectors and create our own event loops!WORKING WITH SOCKETS IN ASYNCIO:\nMethods for handling sockets belong to the event loop itself, as sockets are relatively low-level objects.More event loop methods (II):\nawait loop.sock_accept(socket) ‚Äî coroutine, returns connection_socket, connection_address.\nawait loop.sock_recv(socket, n) ‚Äî coroutine, returns the incoming data.\nawait loop.sock_sendall(socket, data) ‚Äî coroutine, sends data and returns None if everything is okay.\nSignals ‚Äî a mechanism for asynchronous notification of processes about events happening at the OS level. Examples:\nSIGINT ‚Äî interruption signal, when pressing ^C.\nSIGTERM ‚Äî termination signal, when a process is killed via kill.\nMore event loop methods (III):\nloop.add_signal_handler(type, func) ‚Äî add a signal handler.\nThis is different from the unsafe (relative to the event loop) method:\nsignal.signal(...)\nGet a set of all running tasks:1asyncio.all_tasks()HTTP libraries:\nrequests ‚Äî blocking, not compatible with asyncio.\naiohttp ‚Äî asynchronous, compatible with asyncio and uses non-blocking sockets.\nAsynchronous context manager:1async withUsed for objects implementing:\naenter (async enter)\naexit (async exit)\nWhen working with web connections, the concept of a session is used. Cookies and open connections are stored in the session. A connection pool is very important because creating them is an expensive procedure.Creating an asynchronous HTTP client:1with aiohttp.ClientSession() ...A GET request returns a result that also needs to be closed (released), so we use it within an async context manager as well:1with session.get(url) as result:By default, a session is limited to creating 100 connections. This number can be changed using aiohttp.TCPConnector passed to aiohttp.ClientSession.To run and handle a dynamic (determined at runtime) number of tasks, you should use asyncio tools!Useful asyncio methods for multiple executions:1# 12asyncio.gather(*awaitables, return_exceptions=...)\nReturns an awaitable.\nWraps coroutines into tasks and starts all tasks. When awaited, it concurrently waits for all tasks to complete and returns a list of results!\nThe order of results corresponds to the order of the passed coroutines, but the order of their execution (receiving results) is non-deterministic.\nreturn_exceptions=False (default) immediately raises the first exception that occurs; if True, exceptions are returned in the result list (according to the order).\n1# 22asyncio.as_completed(awaitables, timeout: float)\nReturns an iterator where each subsequent object is an awaitable. When a coroutine is ready, it returns its result upon being awaited.\nAn exception will be thrown at the await point of the next iterator object, which is convenient for immediate handling.\nThe timeout is set for all passed coroutines. Once time expires, all subsequent awaits on tasks will raise a TimeoutException.\nThe gather and as_completed methods have one common drawback: it's difficult to cancel tasks that are still running when an exception occurs. The wait method comes to the rescue:1await asyncio.wait(futures_iterable, *, timeout, return_when) # -&gt; Tuple[Set, Set]\nAccepts an iterable of Futures. These should be coroutines already wrapped in tasks; otherwise, it will wrap them itself (in old versions), leading to potential is comparison errors, or in new versions, it will raise a TypeError.\nReturns 2 sets: (done, pending) ‚Äî finished (normally or with an exception) and still active tasks.\ntimeout does not raise exceptions, unlike as_completed.\nreturn_when is set to one of: ALL_COMPLETED, FIRST_EXCEPTION, or FIRST_COMPLETED.\nNon-blocking APIs for concurrent DB access:\naiomysql, implements PEP-249.\nasyncpg (asynchronous PostgreSQL or postgres), deliberately does not implement PEP-249.\nConnection/Disconnection:1connection = await asyncpg.connect(...)2await connection.close()Connection object methods:\nExecute a query:1await connection.execute(query, ...) # -&gt; status:strExecute a query and return values:1await connection.fetch(query, ...) # -&gt; List[asyncpg.Record]\nArguments for $1, $2, etc., can be passed here. Fetch only 1 row:\n1await connection.fetchrow(...)\nsame regarding $1, $2, etc. Run a parameterized command:\n1await connection.executemany(query, args, ...)runs the query, replacing $1, $2, and so on with elements from the first tuple in args, then the second, and so on‚Ä¶One DB connection corresponds to one socket! To work concurrently, you need multiple connections. Since creating them is expensive, they are usually cached; such a cache is called a:\nconnection pool.Creating a pool:1async with asyncpg.create_pool(min_size, max_size, **connection_kwargs) as pool:Acquiring a connection:1 async with pool.acquire() as connection:You can execute a query without explicitly acquiring a connection by using the pool directly:1result = await pool.fetch(query)Closing the pool if it wasn't created via async with:1await pool.close()TRANSACTIONS.\nACID (atomicity, consistency, isolation, durability).\nTransactions are a key concept in many ACID-compliant databases.\nA DB transaction is one or more SQL commands executed as an indivisible whole. If everything is successful, the result is committed; otherwise, it is rolled back.A simple way to execute a transaction:1async with connection.transaction():2 await &lt;do some SQL command&gt;3 await &lt;do some SQL command&gt;4# if no exception occurs ‚Äî commit changes!5# if any exception occurs ‚Äî roll back changes!! asyncpg supports nested transactions (async with inside async with).Transactions can be managed manually. Getting a transaction manager:1transaction: asyncpg.transaction.Transaction = connection.transaction()Transaction object methods:1await transaction.start()2await transaction.commit()3await transaction.rollback()Asynchronous generators:1async def async_generator():2 ...3 await ...4 yield ...How to iterate through an entire async generator:1async for element in async_generator():2 print(element)If you need to retrieve elements manually:1gen = async_generator()2await anext(gen)3await anext(gen)4...By the way!! This async for loop is also available in comprehensions!:1[x async for x in get_async_generator()]Using a cursor (to get an async generator for streaming SQL query results) also requires opening a transaction:1async with connection.transaction():2 async for el in connection.cursor(query, prefetch=):3 ...45OR67async with connection.transaction():8 cursor = await connection.cursor(query)\nprefetch ‚Äî the number of records to load into RAM per iteration.\nCursor methods:1# 12await cursor.fetch(n) # take n elements into RAM34# 25await cursor.forward(n) # skip n elementsMoving forward and backward through a selection is possible when explicitly using the query:1DECLARE ... SCROLL CURSORLibrary for working with async generators:1 aiostreamYou can bypass the GIL and execute CPU-bound tasks concurrently in Python! For this, the following library is used:1 multiprocessingWorking with a process:1task = multiprocessing.Process(target=, args=,)2task.start()3...4task.join()The use of the if __name__ == '__main__': construct is mandatory; otherwise, you will get an error:\n\"An attempt has been made to start a new process before the current process has finished its bootstrapping phase.\"Creating a process pool:1with multiprocessing.Pool(processes=&lt;defaults to multiprocessing.cpu_count()&gt;) as process_pool:2 result = process_pool.apply(target_func, args=)3 print (result)You can also apply functions in a process pool asynchronously, though these are not yet awaitable objects:1 task = process_pool.apply_async(target_func, args=) # non-blocking2 result = task.get() # blockingProcess Pool Executors\nA module offering an abstraction over process pools:1concurrent.futuresThe abstract class Executor represents an abstraction of an executor with a certain pool of resources. Depending on the type of resource, there are:\nProcessPoolExecutor\nThreadPoolExecutor\nExecutor methods:\nsubmit\n1Executor.submit(fn, /, **kwargs) -&gt; Future\nThe returned Future is different from the one in asyncio.\nIt is analogous to multiprocessing.Pool.apply_async. map\n1Executor.map(fn, *iterables, timeout, chunksize) -&gt; Iterator\nIt is analogous to asyncio.as_completed.\nBut this analogy only holds in that results arrive as they are ready; however, they arrive IN THE SAME ORDER as the iterables. This means even if tasks run in parallel, you have to wait for results in sequence (i.e., if a long operation comes first, you won't get the results of fast operations even if they are already done).\nCreating a process pool executor:1import concurrent.futures as concfu23with concfu.ProcessPoolExecutor() as process_pool:4 ...USEFUL: partial function application:1functools.partial(some_func, 3) # returns a function equivalent to the following:2def result_func():3 return some_func(3)How to link a process pool executor to asyncio:1event_loop.run_in_executor(2 process_pool,3 functools.partial(count, n),4)\nThis returns an awaitable object that can be used, for example, in asyncio.gather.\nNote: the second argument is a function WITHOUT arguments! UPD This seems to be an error; arguments can be passed further.\nThe method belongs to the event loop class, not the asyncio module!\nEven with this approach, you MUST use if __name__ == '__main__':.\nInteresting! Real BigData systems for cluster (group of computers) computing:\nHadoop\nSpark\nDefinition:\n&gt; An n-gram is a sequence of n consecutive words in a text.\nExample:\nText: \"The quick ball flies\"\n1-grams: (The), (Quick), (Ball), (Flies)\n2-grams: (The quick), (Quick ball), (Ball flies)\n3-grams: (The quick ball), (Quick ball flies)\n4-grams: (The quick ball flies)\nShared data and locks.\nThe multiprocessing library supports shared memory objects. Types of shared data:\nValue\nArray\nOnly types described in the <a data-tooltip-position=\"top\" aria-label=\"https://docs.python.org/3/library/array.html#module-array\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"https://docs.python.org/3/library/array.html#module-array\" target=\"_self\">array module</a> are allowed for storage.\nCreation example:1import multiprocessing as mp23number = mp.Value('i', 0)4intarray = mp.Array('i', [1, 2, 3])56# these objects can be passed to processes as arguments!78mp.Process(target=some_func, args=(number, intarray, ...)).start().join()Definition:\nRace condition ‚Äî a situation where the outcome of a sequence of operations depends on which operation finishes first.<br>Atomic and non-atomic operations in Python are described <a data-tooltip-position=\"top\" aria-label=\"http://mng.bz/5Kj4\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"http://mng.bz/5Kj4\" target=\"_self\">here</a>.To synchronize access to shared data, locks (also known as mutexes) are used. The section of code subject to a lock is called a critical section.\nMutex operations:\nacquire\nrelease\nTo acquire a lock in multiprocessing:1x: mp.Value = ...2x.get_lock().acquire()3...4x.get_lock().release()Or like this:1with x.get_lock():2 ...Important!\nA process pool maintains a task queue; arguments are serialized and placed in the queue. (UPD It should also be noted that return values are also serialized!) This prevents us from passing shared mp.Value and mp.Array as arguments to the pool because they are NOT serializable. In this case, we use:\nProcess Pool Initializers1with concfu.ProcessPoolExecutor(2 initializer=init_func,3 initargs=(arg1, arg2, ...),4) as pool:5 ...Here, initargs are NOT serialized! This is exactly what is needed.Important!\nWhen each process is created, the script that creates it is executed anew! This is why initializers are needed (and it's the same reason why we are required to use the if __name__ == '__main__': construct).Culmination: You can use multiple event loops across processes (e.g., multiple DB connection pools), which allows increasing application throughput for workloads containing both CPU-bound and I/O-bound tasks. Example:1# pseudocode23def task():4 async def sub_main():5 await asyncio.gather(*sub_tasks)6 7 asyncio.run(sub_main())89async def main():10 await asyncio.gather(*tasks) # where 1 task in the process pool is something like the logic above ‚òùüèº1112asyncio.run(main())There is a lot of legacy code using requests, psycopg, or other libraries incompatible with asyncio. In such cases, multithreading comes to the rescue!\nBlocking I/O operations release the GIL!You can simply create a multithreaded echo server by creating child threads for echo tasks. However, the first difficulty arises here: an interruption (^C) will only stop the parent thread, while child threads will continue to execute.You can:\nMake child threads daemons (though such threads terminate abruptly, which doesn't allow for proper cleanup). Example: thread.daemon = True\nImplement your own logic for interrupting child threads.\nThe correct way to terminate child threads would be:\nInherit from th.Thread and write your own .run() and .close() methods. The former is called automatically when .start() is invoked, and the latter is called manually during shutdown. At the moment of .shutdown(), .recv() returns an empty result, and .sendall() raises an OSError. For empty results, a BrokenPipeError (a subclass of OSError) should be raised.Reminder: When reading with .recv(), a value of 0 may be received if the connection was closed (by either the client or the server).Thread methods:\nis_alive()\nTwo ways of manual thread management:\nExplicitly creating th.Thread with a target function.\nInheriting class MyThread(th.Thread) and overriding .run().\nMultithreaded execution is still slower than multiprocess execution. This is because creating and maintaining threads (context switching) is more expensive for the operating system!!You can omit the executor in the event_loop.run_in_executor() call:1event_loop = asyncio.get_running_loop()2task = event_loop.run_in_executor(None, func, *args)In this case, concfu.ThreadPoolExecutor() will be used by default.\nNote that such a pool will only be terminated when the event loop exits, which usually happens only when the program finishes. The pool remains cached.\nYou can go even further using the newer asyncio function:1task = asyncio.to_thread(func, *args)Obviously: Threads have access to shared memory, so shared memory objects (mt.Value / mt.Array) are not needed. However, locks are still required:1import threading as th2th.Lock() # supports: .acquire(), .release(), with statementReentrant lock:1th.RLock\nAllows being re-acquired by the same thread.\nUnder the hood, such a mutex stores an acquisition counter: +1 when acquired and -1 when released. When it hits 0, another thread can acquire the lock.\nReentrant locks are mostly needed when two methods acquire a lock, and one of them calls the other.The DRY principle (Don't Repeat Yourself).Definition:\nDeadlock ‚Äî a situation where several threads are waiting for locks held by each other.\nWays to avoid deadlock:\n\"Ostrich algorithm\" ‚Äî assume a deadlock won't happen or just restart the program if it does. A poor choice.\nProper design: Use a consistent locking order or only a single lock.\nTkinter ‚Äî a cross-platform library for building GUIs.\nThe name comes from \"Tk interface,\" meaning it's an interface to the low-level Tk library written in Tcl.\nThis library (like many other GUI libs) is based on widgets and its own event loop.\nIt's important to understand that passing functions/calls between two event loops in different threads is a dangerous procedure, and you must watch out for race conditions (look for thread-safe methods).\nThread-safe asyncio tools:1# 12event_loop.call_soon_threadsafe(func)\nThread-safely schedules the execution of a function (not a coroutine) on the next iteration of the event loop.\n1# 22asyncio.run_coroutine_threadsafe(coroutine)\nThread-safely schedules the execution of a coroutine.\nReturns a Future object (concurrent.futures, not asyncio, though their interfaces are similar).\nOne pattern for executing a callback function in the main thread is using a thread-safe queue!Another event loop method with a self-explanatory name:1event_loop.run_forever()Some CPU-bound workloads can also release the GIL because they do NOT interact with Python objects but compute at a low level (often C code).\nExamples of libraries that compute in C and therefore release the GIL:\nhashlib\nnumpy\nKEY IDEA: Multithreaded execution of CPU-bound tasks that release the GIL provides a performance gain!!Hashed data cannot be read or recovered, but you can verify that data matches the hash (checksum).\nSome well-known hashing algorithms:\nSHA512\nBLAKE2\nscrypt\nThe scrypt algorithm uses a salt and is considered a secure choice for password hashing.NumPy Tip: A significant performance boost comes from maximal code vectorization (avoiding Python loops or functions like apply_along_axis that hide a loop).Stream APIs are built on top of low-level transport and protocol APIs. These stream APIs are designed differently: there is no active waiting; instead, the library calls a callback method when data is ready. Let's look at those first:How is it organized in terms of low-level vs high-level?\nSocket, Selector ‚Äî&gt; Transport, Protocol ‚Äî&gt; Data streamPreviously we worked with sockets and selectors; now we'll show how to work with Transport and Protocol (which actually work together; a Protocol is created to communicate automatically with a Transport). Although in the future, we will use data streams!\nFirst, a subclass of asyncio.Protocol is created:1class MyProtocol(asyncio.Protocol):23 def connection_made(self, transport: asyncio.Transport):4 ... # Transport calls this when the socket is successfully connected5 transport.write(bytes) # We can send bytes6 7 def data_received(self, data):8 ... # Transport calls this EVERY TIME data arrives9 self._buffer += data # Usually, data is accumulated in a buffer here1011 def eof_received(self) -&gt; tp.Optional[bool]:12 ... # Transport calls this when EOF is received (for sockets ‚Äî connection closed)13 return False # Return True if we have already closed the transport1415 def connection_lost(self, exc: tp.Optional[Exception]):16 ... # Transport calls this when the connection is lost or closed (with an exception in the first case)Event loop method to manually create a future object. Apparently, it is immediately \"registered\" in this event loop, unlike manual creation of Future():1event_loop.create_future()Event loop method that takes a protocol factory to asynchronously launch a TCP echo client:1transport, protocol = await event_loop.create_connection(protocol_factory, host, port)\nReturns the created transport (which is usually ignored) and our protocol class object, for which one usually awaits protocol.get_response().\nData streams ‚Äî the next level of abstraction, built on top of transports and protocols!\nData streams are the recommended way to build network applications in asyncio.The asyncio method for creating a connection and obtaining a StreamReader and StreamWriter:1stream_reader, stream_writer = await asyncio.open_connection(host, port)StreamReader methods:1await stream_reader.read(bytes)2await stream_reader.readline()StreamWriter methods:1stream_writer.write(bytes) # non-blocking, writes to buffer2await stream_writer.drain()3stream_writer.close() # non-blocking4await stream_writer.wait_closed()The basic Python function for user input is blocking!1input('Input your data: ')By the way, there is no non-blocking version of this function))\nThe trick await asyncio.sleep(0) ‚Äî \"yielding control back to the event loop.\"A StreamReader object can be created manually:1stream_reader = asyncio.StreamReader()You can get a protocol object that delegates work to a passed stream reader:1protocol = asyncio.StreamReaderProtocol(stream_reader)\nSuch a class acting as a callable is a factory!\nEvent loop method for connecting a StreamReader object to a file-like object:\n1await event_loop.connect_read_pipe(protocol_factory, pipe)2# usage example:3_transport, _protocol = await event_loop.connect_read_pipe(lambda: protocol, sys.stdin)\nIn this case, the factory always returns the same object.\nThe returned transport and protocol are usually ignored (?).\nA terminal can be used in different modes:\ncooked mode ‚Äî mode with processing. This is the default!\nraw mode ‚Äî mode without any processing.\ncbreak (rare mode) ‚Äî mode with processing only for control sequences.\nModule that allows changing the mode:\n1import tty2tty.setraw(sys.stdin) ‚Äî switch to raw mode3tty.setcbreak(sys.stdin) ‚Äî switch to cbreak modeWay to find the terminal size:1import shutil2columns, rows = shutil.get_terminal_size()Clear the terminal screen:1os.system('clear') # possibly for Windows: os.system('cls')Creating a server using data streams:1server = await asyncio.start_server(callback, host, port)2 async with server:3 await server.serve_forever()\nserver is of type AbstractServer.\ncallback ‚Äî a function or coroutine. Accepts StreamReader and StreamWriter.\nREST (REpresentational State Transfer) ‚Äî an architectural style for component interaction in a distributed network application.\nThe main concept is a resource or endpoint (route). Examples:1customers23customers/7445customers/74/favoritesCreating a simple server based on aiohttp:1import aiohttp2from aiohttp import web34routes = web.RouteTableDef()56@routes.get('/time')7async def time(request: aiohttp.web_requests.Request) -&gt; aiohttp.web_response.Response:8 result = dict(a=1, b=2, c=3)9 return web.json_response(result)1011app = web.Application()12app.add_routes(routes)13web.run_app(app)Command-line utility for web requests:1curl (cURL)Adding coroutines to run at the start and end of an aiohttp web application:1# 12app.on_startup.append(coroutine)3# 24app.on_cleanup.append(coroutine)\nSuch coroutines receive the application object app: aiohttp.web_app.Application.\nShared resources can be stored in the application object like a dictionary via indexing:1app['connection_pool'] = await &lt;create connection pool&gt;The request object: aiohttp.web_request.Request, passed to the @route coroutines, contains the application:1request.app['connection_pool'] # Example: how to get a connection pool (e.g., to a DB)Creating masks and extracting passed values:1@routes.get('/products/{id}') ‚Äî this decorator defines an endpoint with a mask2async def get_product(request):3 id = int(request.match_info['id']) ‚Äî how to extract the passed valueCreating a handler for POST requests:1@routes.post('/product')2async def create_product(request):3 if request.can_read_body: # property!!!4 body = await request.json()You can also return a non-JSON response from a web application:1 return web.Response(status=201) # 201: CreatedThere are special exceptions which, if raised from a request-handling coroutine, will return the corresponding error code to the user:1raise web.HTTPNotFound() # 404: not found2raise web.HTTPBadRequest() # 400: bad requestWSGI (Web Server Gateway Interface) ‚Äî a standard for interaction between a Python program running on the server side and the web server itself (e.g., Apache).\nAs I understand it, there are several levels through which a signal from a user reaches the business logic point. In order: Client sends an HTTP request.\nIt is received and balanced by a web server.\nThe request is then translated into CGI or WSGI form, and a handler is called.\nThe handler can be our code directly or a framework (like Django).\nFinally, our business logic executes. The response travels back the same way. ASGI (Asynchronous Server Gateway Interface) ‚Äî a client-server protocol for interaction between a web server and an application, a further evolution of WSGI technology.Simple low-level example of an ASGI application:1async def application(scope: dict, receive: coroutine, send: coroutine):2 await send({3 'type': 'http.response.start',4 'status': 200,5 'headers': [[b'content-type', b'text/html']]6 })7 await send({'type': 'http.response.body', 'body': b'ASGI hello!'})And an example of launching it with the Uvicorn ASGI server:1uvicorn chapter_09.listing_9_7:application\nUsually, it is recommended to run Uvicorn using Gunicorn.\nExample of the Starlette ASGI-compatible framework:1pip install starlette\nThe framework was created by Encode, whose achievements include: Development of Uvicorn.\nREST implementation for Django.\nFramework pros:\nImpressive performance.\nWebSocket support.<br>\nDocumentation: <a data-tooltip-position=\"top\" aria-label=\"https://www.starlette.io/\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"https://www.starlette.io/\" target=\"_self\">here</a> Using this framework is incredibly pleasant!1import asyncpg2from starlette.applications import Starlette3from starlette.requests import Request4from starlette.responses import JSONResponse, Response5from starlette.routing import Route67async def some_startup():8 app.state.DB = ...910async def some_destroy():11 await app.state.DB.close()1213async def brands(request: Request) -&gt; Response:14 connection = request.app.state.DB15 results = ...16 return JSONResponse(dict(results))1718app = Starlette(19 routes=[Route('/brands', brands), ],20 on_startup=[some_startup, ],21 on_shutdown=[some_destroy, ],22)Such a program is launched by specifying the name of the Starlette() instance through an ASGI server. Example for Uvicorn:1uvicorn --workers 8 --log-level error mine._09.first_starlette:appWhen testing, this framework+server combination shows processing of around 20k requests per second! Test with the wrk utility:1wrk -t1 -c200 -d30s http://127.0.0.1:8000/brands\nAnother fast recommended option: eight aiohttp threads running behind NGINX.\nHow to make a long-term connection between a client and a web application?\nYou could use a JavaScript script that polls an endpoint in a loop, but this has drawbacks.\nWebSockets.\nGenerally, Sockets and WebSockets are different concepts and should not be confused.Starlette supports WebSockets, but they must be installed separately:1pip install websocketsUsing WebSockets in Starlette:1import asyncio2from starlette.applications import Starlette3from starlette.endpoints import WebSocketEndpoint4from starlette.routing import WebSocketRoute56class WSEndpoint(WebSocketEndpoint):7 encoding = 'text'8 shared_data = [] # example910 async def on_connect(self, websocket):11 await websocket.accept() # must accept!12 ...1314 async def on_disconnect(self, websocket, close_code):15 ...1617 async def on_receive(self, websocket, data):18 await websocket.send_text('hello world!')1920app = Starlette(routes=[WebSocketRoute('/ws_page', WSEndpoint)])! When running this code on a server, if shared_data is used, you must work with 1 worker! Example:1uvicorn --workers 1 my_pack.my_module:appTo work with this type of WebSocket endpoint, a special script inside the HTML is required:1&lt;script&gt;2 document.addEventListener(\"DOMContentLoaded\", () =&gt; {3 let socket = new WebSocket(\"ws://localhost:8000/counter\");4 socket.onmessage = (event) =&gt; {5 const counter = document.querySelector(\"#counter\");6 counter.textContent = event.data;7 };8 });9&lt;/script&gt;Definition:\nDOM (Document Object Model) ‚Äî a platform- and language-neutral interface that allows programs and scripts to dynamically access and update the content, structure, and style of HTML, XHTML, and XML documents. The DOM model does not impose restrictions on the document structure.Django\nThe \"Royal\" framework for creating web applications, including many features from ORM to an admin panel. It operates with concepts like views, HTML templates, and others.\nWARNING Not Found: /favicon.ico in Django occurs because browsers by default try to request this page to get a site icon for bookmarks and other places.\nCreating a project in Django:1django-admin startproject async_viewsRunning it on the Uvicorn ASGI server:1gunicorn async_views.asgi:application -k uvicorn.workers.UvicornWorkerCreating a Django app:1python3 manage.py startapp async_apiWhere views are defined:1my_project/my_app/views.pyA view is written as a function or coroutine (for an asynchronous view):1from django.shortcuts import render23async def requests_view(request): # request ‚Äî the incoming web request passed to this code4 param_value = request.GET['param_name'] # way to extract something from the request5 ...6 return render(request, template_name, context=result, ...)7 # templates ‚Äî HTML templatesThe request itself looks something like this, for example:1http://localhost:8000/requests/?param_name=http://example.com&amp;other_param=10Where templates are defined:1my_project/my_app/templates/my_app/template_name.extensionWhere templates are linked to views:1my_project/my_app/urls.py2urlpatterns listWhere the web application URL is linked to the Django project:1my_project/my_project/urls.py2urlpatterns listAnd finally, where applications are added to the installed list for the entire project:1my_project/my_project/settings.py2INSTALLED_APPS listIMPORTANT note:\nEven when running through a synchronous WSGI server, we can leverage the advantages of asynchronous code. However, a NEW event loop is created for each request, which is why things requiring the same event loop will still only work in an ASGI application.The ASGI specification provides functions in the asgiref.sync package:1sync_to_async(func, thread_sensitive=True)Used for executing blocking work within an async view (similar to using a thread pool for synchronous APIs). But there is a nuance:\nBy default, it is thread-sensitive. This means the work will run in Django's main thread, thereby blocking the WSGI/ASGI worker process. You can change this to thread_sensitive=False, but then race conditions in synchronous APIs are possible‚Äîbe careful!\nAlso in this package:1async_to_sync(func)For converting a coroutine into a function executed in the current ASGI event loop (or a new loop for each WSGI request). Such a function will return results synchronously.What is a microservice? Key characteristics:\nLoosely coupled and independently deployed.\nEach microservice has its own technology stack and data model.\nThey communicate with each other via a protocol, such as REST or gRPC.\nFollow the Single Responsibility Principle: each service does one thing and does it well!\nFor comparison, pros of monoliths:\nSimple testing and deployment after changes.\nScaling (vertical/horizontal) is straightforward‚Äîjust deploy additional instances or upgrade hardware.\nBut there are disadvantages:\nComplex code: modules and dependencies grow, increasing technical debt. Everything becomes slow and tangled.\nScaling difficulties: you have to duplicate all parts, even those with low load, leading to inefficient costs.\nTeam and stack dependency: many teams committing different changes lead to merge conflicts and coordination overhead.\nThese downsides are mitigated in a microservice architecture!\n[Image of Monolithic vs Microservices architecture]\nSince you can communicate with multiple microservices simultaneously, we gain the ability for concurrency and efficiency impossible in a synchronous application!\nGood pattern: Backend-for-Frontend (BFF). The essence is that the frontend doesn't talk to microservices directly. Instead, it hits a single specialized \"BFF\" service that sends multiple requests to various microservices and returns an aggregated result to the frontend. This is beneficial because our service isn't limited by frontend constraints (slow internet, weak hardware, different devices).Asyncio locks:1from asyncio import Lock23async def f(lock: Lock): # f(Lock())4 async with lock:5 ...67# OR:89await lock.acquire(); await lock.release()Be careful calling Lock() before starting the main event loop, because asyncio will create a new loop for the optional loop parameter of this call! (This applies to other asyncio objects as well).Pattern for limiting request bursts per second:\n\"Leaky Bucket\"\nA semaphore that raises an error if you try to release it more times than it was acquired:1asyncio.BoundedSemaphoreAnother synchronization primitive (Event):1event = asyncio.Event()2await event.wait() # unblocks when someone calls event.set()3event.clear() # resets the eventAnd another primitive (Condition):1cnd = asyncio.Condition()2async with cnd:3 ...4 cnd.notify_all()5async with cnd:6 await cnd.wait() # OR await cnd.wait_for(predicate)Conditions are useful when access to a shared resource is needed, but you must wait for a specific state before starting work.1asyncio.Queue(maxsize=&lt;default&gt;)2await queue.put() OR queue.put_nowait()3await queue.get() OR queue.get_nowait()4queue.task_done()5await queue.join() # wait until the queue is emptyExamples of queues with disk storage: Celery, RabbitMQ.Popular HTML parsing library:1BeautifulSoupPriority queue based on Python's binary heap heapq:1asyncio.PriorityQueue\nUses a min-heap by default, meaning tasks with lower numbers are considered higher priority. Magic methods are also called \"dunder\" methods (from \"double underscore\").\nThe processing order for elements in a priority queue with equal priority is undefined! If necessary, you can add a sequence number manually.Another type of queue, the stack:1asyncio.LifoQueueSubprocesses can be run in blocking mode using subprocess, but asyncio offers a non-blocking API for creating and managing subprocesses as coroutines:1asyncio.subprocessBasics:1asyncio.create_subprocess_exec # without an OS shell, preferred2asyncio.create_subprocess_shellArguments:1(2 *args, # command and arguments to run3 stdin=, # where to get input from; asyncio.subprocess.PIPE creates a StreamWriter4 stdout=, # where to direct output; asyncio.subprocess.PIPE creates a StreamReader5 ...,6)Returns a Process object. Key methods and fields:1await prc.wait() # coroutine returning the exit code23prc.terminate() OR prc.kill() # sends SIGTERM or SIGKILL respectively45prc.stdout # field containing the StreamReader created via asyncio.subprocess.PIPE67await prc.communicate([text]) # returns (stdout, stderr). Interactively reads into an internal buffer concurrently. 'text' is sent to stdin.Problem: A subprocess outputs a lot of data to asyncio.subprocess.PIPE, but our main process doesn't read them and waits. The subprocess blocks waiting for the buffer to clear. This can be solved by avoiding await prc.wait() or using prc.communicate(), but the latter might cause high memory usage.Overfill and system overload problems can be solved using semaphores!If a subprocess non-deterministically requests input between several outputs, it‚Äôs best to use separate coroutines for reading stdout and writing to stdin using asyncio.Event.Checking a function for its async class and properly scheduling it in the event loop:1if asyncio.iscoroutinefunction(func): # func that creates a coroutine2 &lt;tasks append&gt; asyncio.create_task(func())3elif asyncio.iscoroutine(func): # func that is already a coroutine4 &lt;tasks append&gt; asyncio.create_task(func)5else: # regular func6 loop.call_soon(func)78await asyncio.gather(*tasks)910loop.run_until_complete(^()) # ^ ‚Äî the code above as a functionFor multithreaded programs, there are thread-local variables (see the threading module docs).For single-threaded concurrency, the equivalent is:\nContext Variables\nImplemented in the contextvars module:\n1var = contextvars.ContextVar('var_name')2var.set(object)3var.get()Optimized idiom to yield to the next iteration of the event loop:1asyncio.sleep(0)Be aware that other event loop implementations exist! For example, uvloop:1pip install uvloopBuilt on a C library, making it faster, especially for streaming I/O and sockets. How to switch:1import uvloop23uvloop.install()4asyncio.run(main())56# OR78asyncio.set_event_loop(uvloop.new_event_loop())9asyncio.run(main())\nIMPORTANT: The async/await syntax and coroutines are conceptually separate from asyncio. You can write your own event loop to manage coroutine execution!\nTo understand this, look at how coroutines were written before async/await. This highlights the close link between coroutines and generators:1@asyncio.coroutine2def coroutine():3 print('do hard work asynchronously')4 yield from asyncio.sleep(1)5 print('work is done!')67asyncio.run(coroutine())async/await is syntactic sugar wrapping this construction!Example class clarifying the __await__ dunder method and the concept of implementing single-threaded concurrency via iterators:1class CustomFuture:23 def __init__(self):4 self._result = None5 self._is_finished = False6 self._done_callback = None78 def result(self):9 return self._result1011 def is_finished(self):12 return self._is_finished1314 def set_result(self, result):15 self._result = result16 self._is_finished = True17 if self._done_callback:18 self._done_callback(result)1920 def add_done_callback(self, fn):21 self._done_callback = fn2223 def __await__(self):24 if not self._is_finished:25 yield self26 return self.result()You can create your own class CustomTask(CustomFuture) and a class CustomEventLoop to concurrently execute coroutines without asyncio at all!!!","aliases":[],"inlineTags":[],"frontmatterTags":[],"headers":[{"heading":"Chapters I &amp; II: Introduction to <code class=\"code-styler-inline\">asyncio</code>, The Basics","level":1,"id":"Chapters_I_&_II_Introduction_to_`asyncio`,_The_Basics_0"},{"heading":"Chapter III: First <code class=\"code-styler-inline\">asyncio</code> Application. Echo Server","level":1,"id":"Chapter_III_First_`asyncio`_Application._Echo_Server_0"},{"heading":"Chapter IV: Concurrent Web Requests","level":1,"id":"Chapter_IV_Concurrent_Web_Requests_0"},{"heading":"Chapter V: Non-blocking DB Drivers","level":1,"id":"Chapter_V_Non-blocking_DB_Drivers_0"},{"heading":"Chapter VI: CPU-bound Tasks","level":1,"id":"Chapter_VI_CPU-bound_Tasks_0"},{"heading":"Chapter VII: Solving Blocking Issues with Threads","level":1,"id":"Chapter_VII_Solving_Blocking_Issues_with_Threads_0"},{"heading":"Chapter VIII: Data Streams","level":1,"id":"Chapter_VIII_Data_Streams_0"},{"heading":"Chapter IX: Web Applications","level":1,"id":"Chapter_IX_Web_Applications_0"},{"heading":"Chapter X: Microservices","level":1,"id":"Chapter_X_Microservices_0"},{"heading":"Chapter XI: Synchronization","level":1,"id":"Chapter_XI_Synchronization_0"},{"heading":"Chapter XII: Asynchronous Queues","level":1,"id":"Chapter_XII_Asynchronous_Queues_0"},{"heading":"Chapter XIII: Subprocess Management","level":1,"id":"Chapter_XIII_Subprocess_Management_0"},{"heading":"Chapter XIV: Advanced <code class=\"code-styler-inline\">asyncio</code> Usage","level":1,"id":"Chapter_XIV_Advanced_`asyncio`_Usage_0"}],"links":[],"author":"","coverImageURL":"","fullURL":"py-asyncio.html","pathToRoot":".","attachments":[],"createdTime":1767267776831,"modifiedTime":1767269216237,"sourceSize":45177,"sourcePath":"engineering/compendium/Py Asyncio.md","exportPath":"py-asyncio.html","showInTree":true,"treeOrder":4,"backlinks":[],"type":"markdown"},"tc++pl-(i).html":{"title":"TC++PL (I)","icon":"","description":"This is my notes for the book:\nThe C++ Programming Language ‚Äî Bjarne Stroustrup\nTome I: IntroductionC++ is based on the idea of providing both:\ndirect mappings of build-in operations and types ti hardware to provide efficient memory use and efficient low-level operations, and\naffordable and flexible abstractions mechanisms to provide user-defined types with the same notation support, range of uses&lt; and performance as build-in types. C++ is a language for developing and using elegant and efficient abstractions. C++ concentrates on system programming. C++ follows zero-overhead principle.\nNote\nDon't assume that something laboriously written in C style is more efficient than a shorter alternative. Often, the opposite is true.\nAims for the C++11 effort were:\nMake C++ a better language for systems programming and library building\nMake C++ easier to teach and learn\nAlso to introduce concurrent systems programming type-safe and portable (new memory model, facilities for lock-free programming)\nMost widely useful features of C++11:\n=delete, =default\nauto (type deducing)\nconstexpr\nmove semantic\nnoexcept\nrange-for statement\nfinal and override\nenum class\nAbout new features of standard library:\nunordered_map and so on\nthread, mutex, lock\nfuture, promise, async()\ngarbage collector interface\nregexp\nrandom numbers\nunique_ptr (originally called move_ptr, auto_ptr)\nshared_ptr (originally counted_ptr)\ntuple\nbind()\nfunction type\nC++ is considerable to have unique strengths in the area of infrastructure software.\nrepresent ideas directly in code\naim: elegant and efficient\ndon't overabstract\ntry elegant and efficient abstractions from libraries\nrepresent relations directly in code\nrepresent independent ideas separately in code\nC++ is not just object-oriented\nC++ is not just for generic programming\nprefer solutions that can be statically checked (compile-time preference)\nmake resources explicit (as class objects)\nexpress simple ideas simply\nuse libraries. don't build everything from scratch\nuse type-rich style of programming\ndon't avoid high-level abstractions out of fear of performance problems\nif data has an invariant ‚Äî encapsulate it\nC++ is not just C with a few extensions\nThe ISO C++ standard defines two kinds of entities:\nCore language features (build-in types, loops, etc.)\nStandard-library components (containers, I/O operations)\nsee: <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch2/helloworld.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch2/helloworld.cpp\" target=\"_self\">hello world</a>.C++ introduces bool type.Different ways to initialize:1int i = 2.3; // truncates to 22int i {2.3}; // error3int i = {2.3}; // error\nDon't introduce a name until you have a suitable value for it! Even using user-defined types\ntype can be deduced from the initializer:1auto b = true;2auto ch = 'x';3auto i = 123;4auto d = 1.2;5auto z = sqrt(y); // gets type from sqrt resultContrary\nWith auto we use =, not {} syntax for init\nSpecific reasons to use explicit type declaration:\nfor readability (in large scopes)\nbe explicit about range or precision (e.g., double rather than float)\nThere are two notions of immutability:\nconst ‚Äî \"I promise not to change this value\"\nconstexpr ‚Äî \"To be evaluated at compile time\"\nIt's possible to define constexpr functions:1constexpr double square(double x){ return x*x; }It calls will be evaluated on compile timeWarning\nTo be a constexpr function must include only return statement. (But see also consteval in C++20)\nconstexpr functions may be called with no-constexpr args.In few places it must be constexpr:\narray bounds\ncase labels\nsome template arguments\nconstants declared using constexpr\nNew range-for-statement:1int v[] = {0,1,2,3,4,5,5,6,7,8,9};23for (auto x : v)4\tcout &lt;&lt; x &lt;&lt; '\\n';56for (auto x : {10, 20, 30}) // even for in-place defined arrays7\tcout &lt;&lt; x &lt;&lt; '\\n';It's also possible to have the objects themself, not copy:1int v[] = {0,1,2,3,4,5,5,6,7,8,9};23for (auto&amp; x : v)4\t++x;About &amp;\nA reference cannot be made to refer to a different object after its initialization\nC++ introduces nullprt:1double* dp = nullptr;2Link&lt;Record&gt;* lst = nullptr;In declaration operators &amp;, *, [], () (invokation) are called declarator operators.\nBuilt-in types ‚Äî fundamental types and their derivatives built from them, const and declarator operators.Unlike in C, in C++ struct types can be referred just by name:1struct Vector {2\tint sz;3\tdouble* elem;4};56Vector v; // not `struct Vector v;`A way to dynamically allocate memory and init Vector:1void vector_init(Vector&amp; v, int s)2{3\tv.elem = new double[s];4\tv.sz = s;5}new allocates from the free storage | dynamic memory | heap.Example:1class Vector {2public:3\tVector(int s) : elem{new double[s]}, sz{s} {}4\tdouble&amp; operator[](int i) {return elem[i];} // no `&amp;`?5\tint size() {return sz;}6private:7\tdouble* elem;8\tint sz;9};1011//usage:12Vector v(6);C++ introduces enum class that is not just enum (plain enum) from C, but is its extended version:1enum class Color {red, blue, green};2enum class Light {green, yellow, red};34// usage:5Color c = Color::red;6Light l = Light::red;An enumeration is a user-defined type so we can define operators for it:1Light&amp; operator++(Light&amp; l) // prefix form(!)2{3\tswitch(l){4\tcase Light::green: return l = Light::yellow;5\tcase Light::yellow: return l = Light::red;6\tcase Light::red: return l = Light::green;7\t}8}910//usage:11Light l = Light::yellow;12Light next = ++l;DS says: a program consists of entities: variables, functions, types. Declaration ‚Äî all that compiler needs.Example without any definitions. There are only declaration (interface):1double sqrt(double);23class Vector {4public:5\tVector (int s);6\tdouble&amp; operator[](int i);7\tint size();8private:9\tint sz;10\tdouble* elem;11};DS says: inside a namespace you can put everything you can put into global space.For not to conflict with global names from std you can use namespaces. Example:1namespace My_code {2\tclass complex{3 ...4\t};5\tcomplex sqrt(complex);6\tint main();7}89int My_code::main()10{11\tcomplex z1 {1, 2}; // not My_code::complex, just complex12\tauto z2 = sqrt(z1);13}1415int main()16{17\treturn My_code::main();18}using-directive:1using namespace std;You can just throw in critical section:1double&amp; Vector::operator[](int i)2{3\tif (i&lt;0 || i &gt;= size())4 throw out_of_range{\"Vector::operator[]\"};5\treturn elem[i];6}78// usage, later:9try {10\tv[v.size()] = 7; // throws exception11}12catch (out_of_range) {13\t... // handle exception14}Some stable state of correct class object must be observed. It's work for a constructor to set invariant, and public methods must to maintain the invariant (at least on the return). And then destructor can rely on that invariant.On the compile time:1// first arg must be constexpr2static_assert(sizeof(int)&gt;=4, \"integers are too small\"); // check type sizeOften used in generic programming for make assertions about concrete types.\nYou don't have to know every detail of C++ to write good programs\nFocus on programming techniques, not on language features\nClasses in C++ divided on:\nabstract classes\nconcrete classes\nThere is an ordinary example. Pay attention to const method of class, such one can not to change object at all:1class complex {2\tdouble re, im;3public:4\tcomplex(double r, double i) : re{r}, im{i} {}5\tcomplex(double r) : re{r}, im{0} {}6\tcomplex() : re{0}, im{0} {}78\tvoid real(double d) {re=d;}9\tvoid imag(double d) {im=d;}10\tdouble real() const {return re;}11\tdouble imag() const {return im;}1213\tcomplex&amp; operator+=(complex z) {re+=z.re, im+=z.im; return *this;}14\tcomplex&amp; operator-=(complex z) {re-=z.re, im-=z.im; return *this;}15\tcomplex&amp; operator*=(complex); // just declaration16\tcomplex&amp; operator/=(complex); // just declaration17};Wow\nFunction defined (not declared) in a class are inlined by default!\n<br>see about inline: <a data-href=\"üîó –°++ all modifiers#^inlinevar\" href=\"engineering/c++-essentials/üîó-—Å++-all-modifiers.html\" class=\"internal-link\" target=\"_self\" rel=\"noopener nofollow\">üîó –°++ all modifiers &gt; ^inlinevar</a>\nBy defining a default constructor you eliminate the possibility of uninitialized variables of that type (complex).\nOperations that don't require direct access to the representation can be defined separately (out of class):1complex operator+(complex a, complex b) {return a+=b;}2complex operator-(complex a, complex b) {return a-=b;}3complex operator-(complex a) {return {-a.real(), -a.imag()};} // unary minus4bool operator==(complex a, complex b) {5\treturn a.real()==b.real() &amp;&amp; a.imag()==b.imag();6}Note: a+=b doesn't change the original because param a is considered as a copy.1//usage:2complex a {2.3};3complex b {1/a}; // copy?4complex c {a + z*complex{1, 2.3}};5if (c!=b) {...}<br>see <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch3/mycomplex.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch3/mycomplex.cpp\" target=\"_self\">example</a>.Destructor example:1class Vector{2private:3\tdouble* elem;4\tint sz;5public:6\tVector(int s) : elem{new double[s]}, sz{s} {7 for (int i=0; i!=s; ++i) elem[i]=0;8\t}9\t~Vector() {delete[] elem;}10\tdouble&amp; operator[](int i);11\tint size() const;12};def\nRAII (Resource Acquisition Is Initialization) ‚Äî the technique of acquiring resources in a constructor and releasing them in a destructor\nFor use {1, 2, 3} form you need use std::initializer_list&lt;T&gt;. Example:1class Vector{2public:3\tVector(std::initializer_list&lt;double&gt;);4\tvoid push_back(double);5};Also you can use stream:1Vector read(istream&amp; is)2{3\tVector v;4\tfor (double d; is&gt;&gt;d; )5 v.push_back(d);6\treturn v;7}DS says:<br>\n<img alt=\"Screenshot 2025-09-29 at 04.15.37.png\" src=\"a9s/screenshot-2025-09-29-at-04.15.37.png\" target=\"_self\" style=\"width: 300px; max-width: 100%;\">\nFor abstract classes we must allocate objects on the heap and access them through references or pointers, because we do not even know the size of an object.\nAbstract class example:1class Container { // this class is a pure interface2public:3\tvirtual double&amp; operator[](int) = 0; // pure virtual func4\tvirtual int size() const = 0;5\tvirtual ~Container() {}6};def\nvirual means \"may be redefined lated in a class derived from this one\".\ndef\npure virtual function =0 means that some class derived from Container must define the function.\ndef\nAbstract class is a class with a pure virtual function.\ndef\nPolymorphic type is a class with a virtual function.\nImportant\nPolymorphic types have a virtual destructor because they (their instances) tend to be manipulated through references/pointers, and someone destroying an instance (with ref type) has no idea what resources must be released.\nRealization example:1class VectorC : public Container {2\tVector v;3public:4\tVectorC(int s): v(s) {}5\t~VectorC() {} // override6\tdouble&amp; operator[](int i){return v[i];} // override7\tint size() const {return v.size();} // override8};Note\nMember (v) destructor ~Vector() is implicitly invoked by its class's destructor (~VectorC())\nUsage:1void use(Container&amp; c)2{3\tconst int sz = c.size();4\tfor (int i=0; i!=sz; ++i)5 cout &lt;&lt; c[i] &lt;&lt; '\\n';6}78void func()9{10\tVectorC vc {0,1,2,3,4,5};11\tuse(vc); // as Container&amp;, not VectorC&amp;12}The usual implementation technique for selecting the right realization of the virtual function is converting of virtual function names into indices into a table of pointers to functions. This table is called the virtual function table or just vtbl. Each class with virtual functions has its own vtbl identifying its virtual functions.\nGraphically:<br>\n<img alt=\"Screenshot 2025-09-29 at 15.56.15.png\" src=\"a9s/screenshot-2025-09-29-at-15.56.15.png\" target=\"_self\" style=\"width: 600px; max-width: 100%;\">This mechanism is almost as efficient as the normal function call, but is slower within 25%.\nAbout memory: +1[] for each class and +1* for each instance.Helpful to know!\nGPT says: in general, all functions from base-class and in derived-class, even if they have the same signatures (override), are different in the machine code\nFor hierarchy Shape -&gt; Circle -&gt; Smiley you can access super-classes:1void Smiley::draw()2{3\tCircle::draw();4\tfor (auto p: eyes)5 p-&gt;draw(); // Shape::draw6\tmounth-&gt;draw(); // Shape::draw7}\nNote: virtual destructor is necessary, because delete is often used with pointer to a base class.\nNote: concrete destructor (called by vtbl) implicitly invokes the destructors of base classes and members.\nA class hierarchy offers two kinds of benefits:\nInterface inheritance\nImplementation inheritance\nIf user of Shapes forget to delete them, it cause memory leak. For this case there is:1{2\tauto s = unique_ptr&lt;Shape&gt;{new Circle{p, r}};3} // s is deleted here1void test(complex z1)2{3\tcomplex z2{z1}; // copy initialization4\tcomplex z3;5\tz3 = z2; // copy assignment6}For simple types memberwise copy is often used. But for some Containers it is not the right semantic, and for abstract types it almost never is.Strong hint\nThe fact that Vector has a destructor hints that the default (memberwise) copy semantic is wrong\nCopying of objects is defined by:1class Vector {2private:3\tdouble* elem; // 1st to init4\tint sz; // 2nd to init5public:6\tVector(int s);7\t~Vector() {delete[] elem;}8\tVector(const Vector&amp; a); // copy constructor9\tVector&amp; operator=(const Vector&amp; a); // copy assignment1011\tdouble&amp; operator[](int i); // for commmon objects12\tconst double&amp; operator[](int i) const; // for const objects1314\tint size() const;15};Realization examples:1Vector::Vector(const Vector&amp; a)2\t:elem{new double[a.sz]},3\tsz{a.sz}4{5\tfor (int i=0; i!=sz; ++i)6 elem[i] = a.elem[i];7}89Vector&amp; Vector::operator=(const Vector&amp; a)10{11\tdoubple* p new double[a.sz];12\tfor (int i=0; i!=a.sz; ++i)13 p[i] = a.elem[i];14\tdelete[] elem; // IMPORTANT15\telem = p;16\tsz = a.sz;17\treturn *this; // predefined Class* this;18}On return from function Vector ...(...)...{...return v;} object Vector is copied, and for large data it is pointless. To state intent we want to move it rather than copy there is:1class Vector {2\t// ...3\tVector(const Vector&amp; a); // copy constructor4\tVector&amp; operator=(const Vector&amp; a); // copy assignment5\t6\tVector(Vector&amp;&amp; a); // move constructor7\tVector&amp; operator=(Vector&amp;&amp; a); // move assignment8};910Vecto::Vector(Vector&amp;&amp; a)11\t:elem{a.elem}, // \"grab the element\" from a12\tsz{a.sz}, // \"grab the element\" from a13{14\ta.elem = nullptr; // now `a` has no elements15\ta.sz = 0;16}For that definition compiler will chose the move constructor to implement the transfer of the return value out of the function.For clarifying various types, GPT+DS says:1* ‚Äî pointer2&amp; ‚Äî lvalue-reference3&amp;&amp; ‚Äî rvalue-reference45// special rule:6const T&amp; ‚Äî can be attached to rvalue78NRVO (Named Return Value Optimization)Important\nAfter a move, a moved-from object (grabbed) should be in state that allows a destructor to be run.\nTypically, we should also allow assignment to a moved-from (grabbed) object.\nIf value will not be used again (that is not obvious for the compiler), you can:1Vector f()2{3\tVector a(100);4\tVector y(100);5\tVector z(100);6\tz = x; // move7\ty = std::move(x); // move (specified), returns an Vector&amp;&amp;8\treturn z; // move9}On return x is empty from line 7, z is empty from line 8, and then x,y,z are destroed.Vector, std::thread ‚Äî resource handles, and move semantic makes its an alternative to using pointers in many cases.In fact, unique_ptr and others are themselves resource handles.Replacing new/delete with move semantic may achieve strong resource safety; that is we can eliminate resource leaks for a general notion of resource (e.g., vectors for data, threads for sys threads, and fstreams for file handles)One (but not the only) example when we don't wanna copy object: base class in class hierarchy. Then the best thing to do is usually to delete the default copy/move constructors:1class Shape{2public:3\tShape(const Shape&amp;) = delete; // no copy constr4\tShape&amp; operator=(const Shape&amp;) = delete; // no copy assign56\tShape(Shape&amp;&amp;) = delete; // no move constr7\tShape&amp; operator=(Shape&amp;&amp;) = delete; // no move assign89\t~Shape(); // &lt;- (read note below)10}Note\nIf user has explicitly declared destructor, the compile will not implicitly generate move operations. Furthermore:\nmove ‚Äî not generated!\ncopy ‚Äî generated, but deprecated! (will warn)\ndef\ntemplate is a class or function that we parametrize with a set of types or values\nExample:1template&lt;typename T&gt;2class Vector {3private:4\tT* elem;5\tint sz;6public:7\tVector(int s);8\t~Vector() {delete[] elem;}9\t// copy/move operations10\tT&amp; operator[](int i);11\tconst T&amp; operator[](int i) const;12\tint size() const {return sz;}13};Defining member functions:1template&lt;typename T&gt;2Vector&lt;T&gt;::Vector(int s)3{4\tif (s&lt;0) throw Negative_size{};5\telem = new T[s];6\tsz = s;7}89template&lt;typename T&gt;10const T&amp; Vector&lt;T&gt;::operator[](int i) const11{12\tif (i&lt;0 || size()&lt;=i)13 throw out_of_range{\"Vector::operator[]\"};14\treturn elem[i];15}And now we can use generic objects:1Vector&lt;char&gt; vc(200); // 200 chars2Vector&lt;string&gt; vs(17); // 17 strings3Vector&lt;list&lt;int&gt;&gt; vli(45); // 45 lists of ints(About C++98 you couldn't use &gt;&gt;, then they used additional blank: &lt; list&lt;int&gt; &gt;)For support for-range loop you must define begin() and end():1template&lt;typename T&gt;2T* begin(Vector&lt;T&gt;&amp; x)3{4\treturn x.size()? &amp;x[0]: nullptr;5}6template&lt;typename T&gt;7T* end(Vector&lt;T&gt;&amp; x)8{9\treturn begin(x) + x.size();10}Then use:1void write(const Vector&lt;string&gt;&amp; vs) // strings vector2{3\tfor (auto&amp; s: vs) // for-range4 cout &lt;&lt; s &lt;&lt; '\\n';5}Function compile-time type parametrization:1templace&lt;typename Container, typename Value&gt;2Value sum(const Container&amp; c, Value v)3{4\tfor (auto x : c)5 v+=x;6\treturn v;7}Usage:1void use(Vector&lt;int&gt;&amp; vi, std::vector&lt;complex&lt;double&gt;&gt;&amp; vc)2{3\tdouble s = sum(vi, 0.0); // add to double4\t// note: not sum&lt;Vector&lt;int&gt;, double&gt;(...), just sum(...)5\tauto z = sum(vc, complex&lt;double&gt;{});6}note again: type arguments for sum are deduced from call arguments.def\nfunction object as known as functor is object that can be called like functions.\nExample:1template &lt;typename T&gt;2class Complt {3\tconst T val;4public:5\tCompwith(const T&amp; v) : val(v) {}6\tbool operation()(const T&amp; x) const {return x&lt;val;}7};89// use as predicate:1011template&lt;typename C, typename P&gt;12int count(const C&amp; c, P predicate){13\tint cnt=0;14\tfor (const auto&amp; x: c)15 if (predicate(x))16 ++cnt;17\treturn cnt;18}1920void use(){21\tint x = 42;22\tstring s = \"Backus\";23\tComplt&lt;int&gt; lti{x}; // def: policy object24\tComplt&lt;string&gt; lts{s}; // too2526\tconst Vector&lt;int&gt;&amp; vi = ...;27\tconst list&lt;string&gt;&amp; ls = ...;2829\tcout &lt;&lt; count(vi, lti) &lt;&lt; '\\n';30\tcout &lt;&lt; count(ls, lts) &lt;&lt; '\\n';3132\t// or in-place with lambdas:33\tcout &lt;&lt; count(vi, [&amp;](int a){return a&lt;x;}) &lt;&lt; '\\n';34\tcout &lt;&lt; count(ls, [&amp;](const string&amp; a){return a&lt;s;}) &lt;&lt; '\\n';35}\n[&amp;] in lambda expression is called a capture list, that specifies that local names used (as x) will be passed by reference.\nPossible types of capture:\n[&amp;x] ‚Äî concrete by reference\n[=x] ‚Äî concrete by copy\n[] ‚Äî capture nothing\n[&amp;] ‚Äî all local names by reference\n[=] ‚Äî all local names by value\nWe can separate the traversal of our container from the specification of what is to be done with each element:1// class ‚âà typename2template&lt;class C, class Oper&gt; // assume C is a Container of pointers3void for_all(C&amp; c, Oper op)4{5\tfor (auto&amp; x: c)6 op(*x); // x is T* and is taken by reference(&amp;), so *x is just x7}89void use()10{11\tvector&lt;unique_ptr&lt;Shape&gt;&gt; v; // may be vector&lt;Shape*&gt;12\twhile (cin)13 v.push_back(read_shape(cin));14\tfor_all(v, [](Shpae&amp; s){s.draw();} ); // x is got by reference(&amp;)15\tfor_all(v, [](Shape&amp; p){s.rotate(45);} );16}As known as variadics.\nExample:1void func() {} // do nothing23template &lt;typename T, typename... Tail&gt;4void func(T head, Tail... tail) // `func` name again!5{6\tg(head); // do something, in fact, on each argument7\tfunc(tail...); // try again with tail, at some time here is f()8}GPT says: SFINAE ‚Äî Substitution Failure Is Not An Error.Examples:1using size_t = insigned int;23// Every std contained defines such this:4template&lt;typename T&gt;5class Vector{6public:7\tusing value_type = T;8...9};1011// type of element:12template&lt;typename C&gt;13using eltype = typename C::value_type;14// and then:15templace&lt;typename Cont&gt;16void func(Cont&amp; c)17{18\tVector&lt;eltype&lt;Cont&gt;&gt; vec;19\t// or explicit: Vector&lt;typename Cont::value_type&gt; vec;20}2122// predefined types:23template&lt;typename V&gt;24using stringmap = Map&lt;string, V&gt;;25//and then:26stringmap&lt;int&gt; m; // m has type: Map&lt;string, int&gt;\nexpress ideas directly in code\ndefine classes to represent concepts\nuse concrete classes to represent simple concepts and performance-critical components\navoid naked new/delete\nuse resource handles and RAII to manage resources\nuse abstract classes to fully separate interface from implementation\nuse class hierarchies to represent hierarchical concepts\nusing hierarchy you should distinguish between implementation inheritance and interface inheritance (impl-inher / interf-inher)\ncontrol constr/copy/move/destr of your class\nreturn containers by value (relying on move for efficiency)\nprovide strong resource safety (never leak resources)\nuse container for resource handles\nuse templates for general algo/data\nuse functors/lambdas to represent policies/actions\nuse type aliases and template aliases\nThe facilities provided by the standard library can be classified like this:\nrun-time language support (allocation, run-time type info)\nthe C standard library\nstrings, i/o streams (are extensible framework), localization\ncontainers framework, types/algorithms ‚Äî called STL, is extensible\nnumerical computations (math funcs, complex, vectors with arithmetic, random)\nregex\nconcurrency (thread, lock). It is foundational (so you can add support for new models)\nutilities to support templates, STL-style generic programming, generals (clock and others)\n\"smart pointers\", interface for GC\nSpecial-purpose containers (array, bitset, tuple)\nAll of them included because:\nhelpful to almost every C++ programmer\nprovided in a general form and have not significant overhead\nsimple to use, easy to learn (but solves complex tasks)\nThe standard library is defined in a namespace called std for all headers (#include string, list, complex and others...)\nStandardized C++98 introduce new headers without .h extension, so: string.h ‚Äî old C code, string ‚Äî new modern code of C++\nSelection of std headers:<br>\n<img alt=\"Screenshot 2025-10-01 at 02.55.34.png\" src=\"a9s/screenshot-2025-10-01-at-02.55.34.png\" target=\"_self\" style=\"width: 400px; max-width: 100%;\"><br>\n<img alt=\"Screenshot 2025-10-01 at 02.56.03.png\" src=\"a9s/screenshot-2025-10-01-at-02.56.03.png\" target=\"_self\" style=\"width: 600px; max-width: 100%;\">Standard strings are mutable (s+=\"tail\") and have move constructor (so it is efficient to return strings by value).\nSome useful methods:\n.substr(...) returns new string\n.replace(...) modify string&amp;\noperator==(...)\nThe output can be extended for user-defined types (easier than input)There are two out streams: cout and cerr.\nA whitespace character by default terminates the read.\nFor reading whole line use:1string std;2getline(cin, str); // cin == \"Hello world\";Important\ngetline(...) reads and terminating \\n char, but not include it in the result.\nGPT: It should be said: struct and class are almost equivalent. Differences:\nby default struct fields are public, class fields ‚Äî private. The same is with default inheritance\nstruct without private members, constructors and destructors allow aggregate initialization: Point p{10, 20};\nuse struct for simple data, and class for objects with encapsulation and logic\nDefine io for custom types:1struct Entry{2\tstring name;3\tint number;4};56ostream&amp; operator&lt;&lt;(ostream&amp; os, const Entry&amp; e)7{8\treturn os &lt;&lt; \"{\\\"\" &lt;&lt; e.name &lt;&lt; \"\\\", \" &lt;&lt; e.number &lt;&lt; \"}\";9}1011istream&amp; operator&gt;&gt;(istream&amp; is, Entry&amp; e)12{13\tchar c, c2;14\tif (is&gt;&gt;c &amp;&amp; c=='{' &amp;&amp; is&gt;&gt;c2 &amp;&amp; c2=='\"') {15 string name;16 while (is.get(c) &amp;&amp; c!='\"') // analogue of C getchar(char *)17 name += c;18 19 if (is&gt;&gt;c &amp;&amp; c==','){20 int number = 0;21 if (is &gt;&gt; number &gt;&gt; c &amp;&amp; c=='}'){22 e = {name, number};23 return is;24 }25 }26\t}27\tis.setstate(ios_base::failbit);28\treturn is;29}3031// now available:32for (Entry e; cin&gt;&gt;e; )33\tcount &lt;&lt; e &lt;&lt; '\\n';Remember\nis &gt;&gt; c skips whitespace by default\nif (is &gt;&gt; c) test whether input was successfully read.Vector example:1vector&lt;Entry&gt; book = {2\t{\"Jane\", 625},3\t{\"Dima Prima\", 93041}, // trailing comma is allowed in many cases4};56// add entries:7for (Entry e; cin&gt;&gt;e; )8\tbook.push_back(e);910vector&lt;Entry&gt; book2(50); // 50 entries {\"\", 0}11vector&lt;Entry&gt; book3(30, {\"x\", 123}); // 30 entries {\"x\", 123}1213for (const auto&amp; e: book)14\tcout &lt;&lt; e &lt;&lt; '\\n';On insert an element std vector copies that value.Std vector does not check the range. For example:1int n = book[book.size()].number; // index is out of rangeWarn\nThis code may not produce error, but fills the n with garbage. This is critical.\nThere is a way to eliminate out-of-range problem with vector::at. Adaptor:1template &lt;typename T&gt;2class Vec: public std::vector&lt;T&gt; {3public:4\tusing vector&lt;T&gt;::vector; // use constructors from base5\tT&amp; operator[](int i){return vector&lt;T&gt;::at(i);}6\tconst T&amp; operator[](int i) const {return vector&lt;T&gt;::at(i);}7};Some implementations save you the bother of defining adaptors (e.g., as a compiler option).A way to minimize surprises from uncaught exceptions:1int func()2try { // NO BODY. Immediate try-block3\tbook[book.size()] = {\"Joe\", 999999};4}5catch (out_of_range) {6\tcerr &lt;&lt; \"range error\\n\";7}8catch (...) {9\tcerr &lt;&lt; \"unknown exception thrown\\n\";10}List is double-linked.Every std container provides:\nbegin() ‚Äî returns iterator to the first element\nend() ‚Äî returns iterator to the one-past-the-last element\nIn fact\nCompiler realizes for-range with begin and end Traverse the list:1int get_number(const string&amp; s)2{3\tfor (auto p = book.begin(); p!=book.end(); ++p)4 if (p-&gt;name==s)5 return p-&gt;number;6\treturn -1; // as error7}Insertion and erasion are performed by iterator:1e = ... // some Entry obj2list&lt;Entry&gt;::iterator p = ...3list&lt;Entry&gt;::iterator q = ...45book.insert(p, e);6book.erase(q);Info\nin C++: map is a red-black tree with asymptotic unordered_map is a hash-table with asymptotic Indexing [] of a map returns associated value or zero-value of a type. To avoid this behavior on missing elements you should use find() and insert().An example:1map&lt;string, int&gt; book{ // or unordered_map2\t{\"Dima\", 635},3\t{\"Sasha\", 900},4};Std lib provide default hash function for string. You can (and should) provide your own.<br><img alt=\"Screenshot 2025-10-02 at 01.51.27.png\" src=\"a9s/screenshot-2025-10-02-at-01.51.27.png\" target=\"_self\" style=\"width: 600px; max-width: 100%;\">Std lib provides adaptors: queue&lt;T&gt;, stack&lt;T&gt;, deque&lt;T&gt;, priority_queue&lt;T&gt;, and more specialized container-like types: array&lt;T, N&gt;, bitset&lt;N&gt;.Std containers have notational and semantical uniformity.Example for sort and unique:1bool operator&lt;(const Entry&amp; x, const Entry&amp; y)2{3\treturn x.name &lt; y.name;4}5void sort_and_unique(vector&lt;Entry&gt;&amp; vec, list&lt;Entry&gt;&amp; lst)6{7\tsort(vec.begin(), vec.end());8\tunique_copy(vec.begin(), vec.end(), lst.begin());9}Caution\nAt this example you should know: unique_copy remove only adjacent equal elements, and lst must have enough space for insertion.\nInserting in newly created collection can be realized with back_inserter:1list&lt;Entry&gt; getunique(vector&lt;Entry&gt;&amp; vec)2{3\tlist&lt;Entry&gt; res;4\tsort(vec.begin(), vec.end());5\tunique_copy(vec.begin(), vec.end(), back_inserter(res));6\treturn res;7}find examples:1bool has_c(const string&amp; s, char c)2{3\tauto p = find(s.begin(), s.end(), c);4\tif (p!=s.end())5 return true;6\telse7 return false;8}910// or11bool has_c(const string&amp; s, char c)12{13\treturn find(s.begin(), s.end(), c) != s.end();14}Example (UP: generalized) for find_all with STL:1template&lt;typename C, typename V&gt;2vector&lt;typename C::iterator&gt; find_all(C&amp; c, V c)3{4\tvector&lt;typename C::iterator&gt; res;5\tfor (auto p = s.begin(); p!=s.end(); ++p)6 if (*p==c)7 res.push_bak(p);8\treturn res;9}Warn\ntypename for reference to typename C::iterator is necessary. It informs the compiler that C's iterator is supposed to be a type and not a value of some type, say, the integer 7.\nWe can hide this necessity by using type alias:1template &lt;typename T&gt;2using Iterator&lt;T&gt; = typename T::iterator;34template &lt;typename C, typename V&gt;5vector&lt;Iterator&lt;C&gt;&gt; find_all(C&amp; c, V v)6{7\tvector &lt;Iterator&lt;C&gt;&gt; res;8\t‚Äî || ‚Äî ...9}When matches are found by find_all you can use insert(it, x) or erase(it) or do it manually:1vector&lt;string&gt; vs {\"red\", \"green\", \"blue\", \"green\"};2for (auto p: find_all(vs, \"green\")3\t*p = \"replaced\";Don't pay attention to interior organization of iterator. Just know some agreements:\n.begin() and .end()\np++ or p-- for move\n*p for access to element\n::iterator to get iterator, ::const_iterator to get iterator to immutable values\nIterators find their application not only in interaction with collections. For example, stdin and stdout have \"sequential work\" too:1ostream_iterator&lt;string&gt; oo{cout};2int main()3{4\t*oo = \"Hello, \";5\t++oo;6\t*oo = \"world!\\n\";7}1istream_iterator&lt;string&gt; ii{cin};2istream_iterator&lt;string&gt; eos{}; // to indicate EOF on ii == eosThese iterator types are not often used directly. It's a simple way to use them with std algorithms. For example:1/*2* read in-file, sort words, eliminate duplicates, write resutl to out-file3*/45int main()6{7\tstring from, to;8\tcin &gt;&gt; from &gt;&gt; to;9\t10\tifstream is{from}; // is an istream11\tistream_iterator&lt;string&gt; ii{is};12\tistream_iterator&lt;string&gt; eos{};1314\tofstream os{to}; // is an ostream15\tostream_iterator&lt;string&gt; oo{os, \"\\n\"}; // delimiter1617\tvector&lt;string&gt; b{ii, eos}; // init with iterators18\tsort(b.begin(), b.end());1920\tunique_copy(b.begin(), b.end(), oo);2122\treturn !is.eof() || !os;23}We can shorten the program by using set (ordered, that uses red-black tree):1int main()2{3\tstring from, to;4\tcin &gt;&gt; from &gt;&gt; to;56\tifstream is{from};7\tofstream os{to};89\tset&lt;string&gt; b {10 istream_iterator&lt;string&gt;{is},11 istream_iterator&lt;string&gt;{},12\t};13\tcopy(b.begin(), b.end(), ostream_iterator&lt;string&gt;{os, \"\\n\"});1415\treturn !is.eof() || !os;16}Example for find:1struct GT { // for functor2\tint val;3\tGreater_than(int v): val{v} {}4\tbool operator()(const pair&lt;string,int&gt;&amp; r){5 return r.second&gt;val;6\t}7};89// usage:10map&lt;string, int&gt;&amp; m = ...;11auto p = find_if(m.gebin(), m.end(), GT{42});12// or with lambda:13int cx = count_if(m.begin(), m.end(),14\t[](const pair&lt;string, int&gt;&amp; r){return r.second &gt; 42;}15);Features of algorithm:\nfiniteness\ndefiniteness\ninput\noutput\neffectiveness\n<br><img alt=\"Screenshot 2025-10-02 at 23.54.37.png\" src=\"a9s/screenshot-2025-10-02-at-23.54.37.png\" target=\"_self\" style=\"width: 600px; max-width: 100%;\">You can provide shorthand for containers to avoid .begin()/.end() calls:1template &lt;class C&gt;2void sort(C&amp; c)3{4\tsort(c.begon(), c.end());5}67template&lt;class C, class Pred&gt;8void sort(C&amp; c, Pred p)9{10\tsort(c.begin(), c.end(), p);11}\nUse libraries! (Don't reinvent the wheel)\nHaving choice, prefer std lib against others\nHowever, don't think std is ideal for everything\nDon't forget #include\nDon't forget std::\nPrefer string rather than cstring\niostreams are type sensitive, type-safe, and extensible\nPrefer vector, map, and unordered_map\nKnow concrete containers and their tradeoffs\nUse vector by default\nPrefer compact data structures\nIf in doubt, use a range-checked vector (.at)\nUse push_back or back_inserter to add elements\nUse push_back on a vector rather than realloc() on an array\nCatch common exceptions in main()\nPrefer std algorithms rather than handwritten loops\nIf iterator use gets tedious, define shorthand for container algorithm\nThe main aim of the std library is not \"everything for everyone\". It aims to cover needs of intersection rather than union. That is, std library provides components that are useful to most people in most application areas.The most important aspect of good programs is resource management, and of course the std library is designed to not leak resources.Example, the technique is used for the std library lock classes:1mutex m;2void f()3{4\tunique_lock&lt;mutex&gt; lck{m};5}Note\nunique_lock's destructor release the mutex when the thread of control leaves f() (either by return or by throw)\nThis is an application of the RAII technique. This technique is fundamental to the idiomatic handling of resources in C++, and many std libs do so (containers, strings, iostreams and others).To help manage objects allocated on the free store (heap) std &lt;memory&gt; provides two \"smart pointers\":\nunique_ptr to represent unique ownership\nshared_ptr to represent shared ownership\nboth use RAII\nExample of careless programming that may cause memory leaks:Bad code1void f(int i, int j)2{3\tX* p = new X;4\tunique_ptr&lt;X&gt; sp{new X};5\t// ...6\tif (i &lt; 99)7 throw Z{}; // leak by p8\tif (j &lt; 77)9 return; // leak by p10\tp-&gt;do_something();11\tsp-&gt;do_something();12\t// ...13\tdelete p;14}Ironically, we could have solved the problem simply by not using a pointer and not using new.Smart pointers can be used for passing addresses in/out functions:1unique_ptr&lt;X&gt; make_X(int i)2{3\treturn unique_ptr&lt;X&gt;{new X{i}};4}Inmportant\nOn passing objects of smart pointer types we have:\nunique_ptr is moved\nshared_ptr is copied\nThe object that is under shared_ptrs control is destroyed when last of its shared_ptrs is destroyed.\nExample:1void f(shared_ptr&lt;fstream&gt;);2void g(shared_ptr&lt;fstream&gt;);34void use(const string&amp; name, ios_base::openmode mode)5{6\tshared_ptr&lt;fstream&gt; fp{new fstream(name, mode)};7\tif (!*fp) throw No_file{};89\tf(fp); // after return unique_ptr fp would be destroyed10\tg(fp); // this call would be unavailable if fp were unique_ptr11\t// ...12}Usage of smart pointer is neither cost free nor exorbitantly expensive.In fact, shared_ptrs do not in themselves provide any rules for which of their owners can read/write the shared object.Note\nThe smart pointers don't solve data races and other form of confusion (it's not enough just eliminate the resource management issues).\nNot every time you should use smart pointers (e.g., there is no need when you use containers or thread). Smart pointers are needed when we need pointer semantics:\nwe share an object (maybe with unique ownership)\nwe refer to a polymorphic object (with unique or shared ownership)\nMy own concurrency classification:1concurrency ‚Äî several tasks simultaneously2\tasynchronous ‚Äî 1-2-1-2-1-23\tparallelism - 12-12-124 multithreading - several threads5 multiprocessing - several processesWorth to note\nThe std lib mostly supports system-level concurrency.\nIt does not aim to directly provide sophisticated higher-level concurrency models.\nEven more interesting\nIn fact, on lowest level C++ provides a suitable (for concurrency) memory model and a set of atomic operations ‚Äî it is the basis of the concurrency.\nHowever, most users will see concurrency only in terms of the std lib and higher-level libs.\nMain std lib concurrency facilities:\nthread\nmutex\nlock()\npackaged_task\nfuture C++ concurrency std lib features do not incur performance penalties compared with operating system's offerings def\ntask is a computation that can potentially be executed concurrently. In C++ it is function or functor.\nthread is the system-level representation of a task in a program.\nExample:1void f();23struct F{4\tvoid operator()();5};67void use()8{9\tthread t1{f}; // is launched immediately10\tthread t2{F()}; // is launched immediately1112\tt1.join(); // wait for finish13\tt2.join();14}Threads can communicate through shared data, that is typically controlled by locks or other synchronization mechanism.Example of communication:Bad code\nNot synchronized cout\n1int main()2{3\tthread t1{[](){cout &lt;&lt; \"Hello world!\\n\";}};4\tthread t2{[](){cout &lt;&lt; \"Parallel World!\\n\";}};5\tt1.join(); t2.join();6}Out is unpredictable!Our main aim in concurrent program is to keep tasks completely separate except where they communicate in simple and obvious way.1void f(vector&lt;double&gt; v);23struct F{4\tvector&lt;double&gt;&amp; v;5\tF(vector&lt;double&gt;&amp; vv) :v(vv) {}6\tvoid operator()();7};89int main()10{11\tvector&lt;double&gt; v1{1,2,3,4,5};12\tvector&lt;double&gt; v2{6,7,8,9,0};13\tthread t1{f, v1}; // copy of v114\tthread t2{F{v2}}; // will work with original v215\tt1.join(); t2.join();16}Note\nWith thread t1{f, v1}; the compiler constructs the functor (as Stroustrup says) and stores a copy of v1. On the actual call in the thread, f is invoked with std::move of this copy. Therefore, for f's arguments (without templates and without std::ref), valid parameter types are: T (by value), const T&amp;, and T&amp;&amp;, but not T&amp;, since a true lvalue reference to the original object (and to its copy in thread) is never provided.\nFor return you can pass the location of a place to deposit the result as a separate pointer argument. It is not a particularly elegant way.def\nmutex ‚Äî mutual exclusion object\n1mutex m;2int sh;34void f()5{6\tunique_lock&lt;mutex&gt; lck{m}; // call to m.lock()7\tsh += 7;8} // mutex is released by unique_lock, call to m.unlock()Correspondence based on convention (i.e., which mutex protects which data) ‚Äî error-prone. A better way is to make it clear using various language mechanisms:1class Record{2public:3\tmutex rm;4};To avoid deadlock on acquiring many mutex std lib offers:1void f()2{3\tunique_lock lck1{m1, defer_lock}; // defer_lock ‚Äî special flag (emp str)4\tunique_lock lck2{m2, defer_lock};5\tunique_lock lck3{m3, defer_lock};6\tlock(lck1, lck2, lck3); // smart algorithm to lock all three7} // release all three by unique_lockLocking and unlocking are relatively expensive operations. Do not choose shared data for communication between threads solely for \"efficiency\"; on modern machines, it can be faster to copy and pass data between threads. Always measure before assuming shared data is more efficient.\nThe main idea is that you can allow you to copy data to create 2 independent copy for each thread, instead of using shared data.An chrono sleeping example:1using namespace std::chrono; // chrono is a namespace23auto t0 = high_resolution_clock::now();4this_thread::sleep_for(milliseconds{20}); // this_thread is a namespace5auto t1 = high_resolution_clock::now();6cout &lt;&lt; duration_cast&lt;nanoseconds&gt;(t1-t0).count()7\t&lt;&lt; \"nanoseconds passed\\n\";For communicating with external events threads use conditional_variable (using it supports many forms of elegant and efficient sharing, but can be rather tricky). Example:1class Message {...};23queue&lt;Message&gt; q;4condition_variable cond;5mutex mtx;67void consumer()8{9\twhile(true){10 unique_lock&lt;mutex&gt; lck{mtx};11 cond.wait(lck, [](){return !q.empty();}); 12 // ^^^^^^^^^^^^^ release lock and wait signal, then reacquire13 auto m = q.front(); q.pop();14 lck.unlock();15 // process m16\t}17}1819void producer()20{21\twhile(true){22 Message m = ...;23 unique_lock&lt;mutex&gt; lck{mtx};24 q.push(m);25 cond.notify_one();26\t}27}<br>See working <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/prodcons.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/prodcons.cpp\" target=\"_self\">example</a>.The std lib provide a few facilities to allow higher-level of concurrency abstraction:\nfuture and promise\npackaged_task\nasync()\nThey are found in &lt;future&gt;.\n.get() on future may throw an exception (from the system, or transmitted from the task we try .get() from).Schematically:\ncallerfuturevalpromisesubthreadExample to put in promise:1void f(promise&lt;X&gt;&amp; px)2{3\ttry {4 X res = ...; // compute res5 px.set_value(res);6\t}7\tcatch (...) {8 px.set_exception(current_exception()); // lib func9\t}10}Example to get future:1void g(future&lt;X&gt;&amp; fx)2{3\ttry {4 X v = fx.get();5 // use v...6\t}7\tcatch (...) {8 // handle error...9\t}10}This type is provided to simplify setting up tasks connected with futures and promises to be run on threads.For example, consider how to accumulate vector by 2 halves:1double accum(double* beg, double* end, double init)2{3\treturn accumulate(beg, end, init);4}56double comp2(vector&lt;double&gt;&amp; v)7{8\tusing Task_type = double(double*,double*,double);910\tpackaged_task&lt;Task_type&gt; pt0{accum};11\tpackaged_task&lt;Task_type&gt; pt1{accum};12\tfuture&lt;double&gt; f0 {pt0.get_future()};13\tfuture&lt;double&gt; f1 {pt1.get_future()};1415\tdouble* first = &amp;v[0];16\tthread t1 {std::move(pt0), first, first+v.size()/2, 0};17\tthread t2 {std::move(pt1), first+v.size()/2, first+v.size(), 0};18\treturn f0.get() + f1.get();19}Note\nWe pass pt0/pt1 in threads by std::move because packaged_task cannot be copied!\nBtw, you should use explicit std:: for avoid compiler warn.\nThe main idea of concurrency is to treat a task as a function that may happen to tun concurrently with other tasks (without more complicated work with shared data).Another way to run task potentially asynchronously:1double comp4(vector&lt;double&gt;&amp; v)2{3\tauto sz = v.size();4\tauto v0 = &amp;v[0], v1=v0+sz/4, v2=v0+sz/2, v3=v0+sz*3/4, v4=v0+sz;56\tauto7 f0 = async(accum, v0, v1, 0.0),8 f1 = async(accum, v1, v2, 0.0),9 f2 = async(accum, v2, v3, 0.0),10 f3 = async(accum, v3, v4, 0.0);11\treturn f0.get()+f1.get()+f2.get()+f3.get();12}<br>See full <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/async.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/async.cpp\" target=\"_self\">example</a>.Warn\nUsing async() you don't even know how many threads will be used, because this function observe available system resources. Don't even think of using async() for tasks that share resources needing locking. async() is not just for parallel computation (and increase performance). It can also be used to spawn a task for user-input, leaving \"main thread\" active with something else!\nThere are not only \"big\" libs, such as containers or I/O.\nOther widely useful components are:\nclock, duration\ntype functions (for gaining info about types), such as iterator_traits and is_arithmetic\npair, tuple\nUse subnamespace std::chrono from &lt;chrono&gt;. Useful names:\nhigh_resolution_clock::now()\nduration_cast&lt;T&gt;(duration)\nDuration::count()\ndef\ntype function is a function that is evaluated at compile-time (takes type as arg, or returns one)\nCompile-time instruments are very efficient for final machine-code!Examples:1constexpr float min = numeric_limits&lt;float&gt;::min(); // from &lt;limits&gt;2constexpr int szi = sizeof(int);3static_assert(numeric_limits&lt;char&gt;::is_signed, \"unsigned chars!\");def\nThis style of programming is called metaprogramming or template metaprogramming (when templates are involved).\nSome algorithms take only random-access iterators (i.e., sort()), and others take forward iterators as well (i.e., for-range).\nSo, we can realize universal sort function to sort container with any type of iterator (random-access or forward). It's convenient to use:1template &lt;class C&gt;2using Iterator_type = typename C::iterator;3template &lt;class IT&gt;4using Iterator_category = typename iterator_traits&lt;IT&gt;::iterator_category;5template &lt;class IT&gt;6using Value_type = typename iterator_traits&lt;IT&gt;::value_type;78template &lt;typename RI&gt; // random-access iterator9void sort_helper(RI beg, RI end, random_access_iterator_tag)10{11 sort(beg, end);12}1314template &lt;typename FI&gt; // forward iterator15void sort_helper(FI beg, FI end, forward_iterator_tag)16{17 vector&lt;Value_type&lt;FI&gt;&gt; v{beg, end};18 sort(v.begin(), v.end());19 copy(v.begin(), v.end(), beg);20}2122template &lt;typename C&gt;23void sort(C &amp;c)24{25 using Iter = Iterator_type&lt;C&gt;;26 sort_helper(c.begin(), c.end(), Iterator_category&lt;Iter&gt;{});27\t// ^^^ here we use tag dispatch technique28}2930void test(vector&lt;string&gt; &amp;v, forward_list&lt;int&gt; &amp;lst)31{ sort(v); sort(lst); }Note\ndecltype is inconvenient on line 17 because it yields int&amp; instead of int.\n<br>See full working <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/unsort.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/unsort.cpp\" target=\"_self\">code</a>.def\ntype predicate is a simple type function that answers a fundamental questions about type.\n&lt;type_traits&gt; provides:\nis_arithmetic, is_class, is_pod, is_literal_type, has_virtual_destructor, is_base_of and others.Example:1template&lt;typename T&gt;2constexpr bool Is_arithmetic()3{4\treturn is_arithmetic&lt;T&gt;::value; // contains true or false5}67// for simple variables:8bool b = Is_arithmetic&lt;int&gt;();910// for restricted type templates11template&lt;typename Scalar&gt;12class complex{13\tScalar re, im;14public:15\tstatic_assert(Is_arithmetic&lt;Scalar&gt;(), \"Arithmetic types only!!\");16\t// ...17};They provides std realizations for many-values plain data objects.1#include &lt;utility&gt; // for type `pair` and others23vector&lt;Record&gt; v{...}; // sorted!4auto er = equal_range(v.begin(), v.end(), Record{\"Reg\"},5\t[](const Record&amp; r1, const Record&amp; r2){return r1.name &lt; r2.name;}6) // returns pair7for (auto p = er.first; p != er.second; ++p)8\tcout &lt;&lt; *p;910auto p = make_pair(Record{\"Gabe\"}, 398); // auto deduce types of elements1tuple&lt;string, int, double&gt; t1(\"Sild\", 123, 3.14);2auto t2 = make_tuple(string(\"Herring\"), 10, 3.14);34// for access:5string s = get&lt;0&gt;(t);6int x = get&lt;1&gt;(t);7// a bit ugly syntax üòûHelpful\nPairs and tuples can be assigned and compared (=, ==, &lt;) if their elements can be\nRaw string literal\nStarts with R\"( and ends with )\". Example: R\"(\\d{4}-\\d{2}(-d{2})?)\"\n1#include &lt;regex&gt;2regex pat{R\"(\\d{4}-\\d{2}(-d{2})?)\"};3int lineno = 0;4for (string line; getline(cin, line); ){5\t++lineno;6\tsmatch matches; // smatch - s'match - sub matches7\tif (regex_search(line, matches, pat))8 cout &lt;&lt; lineno &lt;&lt; \": \" &lt;&lt; matches[0] &lt;&lt; '\\n';9}In &lt;cmath&gt; we find usual math functions.Useful utilities:1#include &lt;numeric&gt;2list&lt;double&gt; lst {...};3auto s = accumulate(lst.begin(), lst.end(), 0.0);For complex&lt;ScalarT&gt; the most common math functions are supported, e.g.: +, sqrt, /, pow, and others.C++ std &lt;random&gt; consists of two parts:\nan engine that produces (pseudo) random values\na distribution that maps those values into a mathematical distribution in a range\nConsider the following approach:1using engine = default_random_engine; // type of engine2using distribution = uniform_int_distribution&lt;&gt;; // type of distribution3// `int` is default type from definition ^^45engine re{random_device{}()};6distribution d1_6 {1, 6};7auto gen = bind(d1_6, re); // gen() ‚âà d1_6(re)89cout &lt;&lt; gen() &lt;&lt; endl;For more compact usage you can define your own class:1class Rand_int{2\tdefault_random_engine re;3\tuniform_int_distribution&lt;&gt; dist;4public:5\tRand_int(int low, int high)6 :dist{low, high}, re{random_device{}()} { }7\tint operator()() { return dist(re); }8};910// then11Rand_int gen{0, 10};12gen(); // -&gt; ?For vector arithmetic in C++ predefined valarray class that supports usual arithmetic operations and the most common mathematical functions. For example:1void f(valarray&lt;double&gt;&amp; a, valarray&lt;double&gt;&amp; b)2{3\tvalarray&lt;double&gt; c = a*3.14 + b/a;4\tb += a*3.14;5\tc = abs(c);6\tdouble x = b[7];7\t// ...8}\nAlso valarray supports stride access (as python's slices) use RAII\nuse unique_ptr for polymorphic type objects\nuse shared_ptr to refer to shared objects\nuse type-safe mechanisms for concurrency\nminimize the use of shared data\ndon't choose shared data (between threads) because of naive \"efficiency\"\nthink in terms of tasks, rather than threads\na lib doesn't have to be large or complicated to be useful\ntime your programs before making claims about efficiency\nyou can write code to explicitly depend on properties of types\nuse regex\ndon't try serious numeric computation using only the language; use libs\nproperties of numeric types are accessible through numeric_limits\n","aliases":[],"inlineTags":[],"frontmatterTags":[],"headers":[{"heading":"1. Notes to the Reader","level":1,"id":"1._Notes_to_the_Reader_0"},{"heading":"The Design of C++","level":2,"id":"The_Design_of_C++_0"},{"heading":"Suggestions for C Programmers","level":2,"id":"Suggestions_for_C_Programmers_0"},{"heading":"The 2011 Standard","level":2,"id":"The_2011_Standard_0"},{"heading":"Standard Library","level":2,"id":"Standard_Library_0"},{"heading":"What is C++ used for?","level":2,"id":"What_is_C++_used_for?_0"},{"heading":"Advice","level":2,"id":"Advice_0"},{"heading":"2. A Tour of C++: The Basics","level":1,"id":"2._A_Tour_of_C++_The_Basics_0"},{"heading":"The Basics","level":2,"id":"The_Basics_0"},{"heading":"Types, Variables, Arithmetic","level":2,"id":"Types,_Variables,_Arithmetic_0"},{"heading":"Constants","level":2,"id":"Constants_0"},{"heading":"Pointers, Arrays, and Loops","level":2,"id":"Pointers,_Arrays,_and_Loops_0"},{"heading":"Structures","level":2,"id":"Structures_0"},{"heading":"Classes","level":2,"id":"Classes_0"},{"heading":"Enumerations","level":2,"id":"Enumerations_0"},{"heading":"Modularity","level":2,"id":"Modularity_0"},{"heading":"Namespaces","level":2,"id":"Namespaces_0"},{"heading":"Exceptions","level":2,"id":"Exceptions_0"},{"heading":"Invariants","level":2,"id":"Invariants_0"},{"heading":"Assertions","level":2,"id":"Assertions_0"},{"heading":"Advice","level":2,"id":"Advice_1"},{"heading":"3. A tour of C++: Abstraction Mechanisms","level":1,"id":"3._A_tour_of_C++_Abstraction_Mechanisms_0"},{"heading":"Introduction","level":2,"id":"Introduction_0"},{"heading":"An Arithmetic Type","level":2,"id":"An_Arithmetic_Type_0"},{"heading":"A container","level":2,"id":"A_container_0"},{"heading":"Initializing Containers","level":2,"id":"Initializing_Containers_0"},{"heading":"Abstract Types","level":2,"id":"Abstract_Types_0"},{"heading":"Virtual Functions","level":2,"id":"Virtual_Functions_0"},{"heading":"Class Hierarchies","level":2,"id":"Class_Hierarchies_0"},{"heading":"Copy and Move","level":2,"id":"Copy_and_Move_0"},{"heading":"Copying Containers","level":2,"id":"Copying_Containers_0"},{"heading":"Moving Containers","level":2,"id":"Moving_Containers_0"},{"heading":"Resource Management","level":2,"id":"Resource_Management_0"},{"heading":"Suppressing Operations","level":2,"id":"Suppressing_Operations_0"},{"heading":"Templates","level":2,"id":"Templates_0"},{"heading":"Parameterized Types","level":2,"id":"Parameterized_Types_0"},{"heading":"Function Templates","level":2,"id":"Function_Templates_0"},{"heading":"Function Objects","level":2,"id":"Function_Objects_0"},{"heading":"Variadic Templates","level":2,"id":"Variadic_Templates_0"},{"heading":"Aliases","level":2,"id":"Aliases_0"},{"heading":"Advice","level":2,"id":"Advice_2"},{"heading":"4. A Tour of C++: Containers and Algorithms","level":1,"id":"4._A_Tour_of_C++_Containers_and_Algorithms_0"},{"heading":"Standard-Library Overview","level":2,"id":"Standard-Library_Overview_0"},{"heading":"The Standard-library Headers and Namespace","level":2,"id":"The_Standard-library_Headers_and_Namespace_0"},{"heading":"Strings","level":2,"id":"Strings_0"},{"heading":"Output","level":2,"id":"Output_0"},{"heading":"Input","level":2,"id":"Input_0"},{"heading":"I/O of User-Defined Types","level":2,"id":"I/O_of_User-Defined_Types_0"},{"heading":"Vector","level":2,"id":"Vector_0"},{"heading":"List","level":2,"id":"List_0"},{"heading":"Map","level":2,"id":"Map_0"},{"heading":"Container Overview","level":2,"id":"Container_Overview_0"},{"heading":"Algorithms","level":2,"id":"Algorithms_0"},{"heading":"Use if Iterators","level":2,"id":"Use_if_Iterators_0"},{"heading":"Stream iterators","level":2,"id":"Stream_iterators_0"},{"heading":"Predicates","level":2,"id":"Predicates_0"},{"heading":"Algorithm Overview","level":2,"id":"Algorithm_Overview_0"},{"heading":"Advice","level":2,"id":"Advice_3"},{"heading":"5. A Tour of C++: Concurrency and Utilities","level":1,"id":"5._A_Tour_of_C++_Concurrency_and_Utilities_0"},{"heading":"Resource Management","level":2,"id":"Resource_Management_1"},{"heading":"<code class=\"code-styler-inline\">unique_ptr</code> and <code class=\"code-styler-inline\">shared_ptr</code>","level":2,"id":"`unique_ptr`_and_`shared_ptr`_0"},{"heading":"Concurrency","level":2,"id":"Concurrency_0"},{"heading":"Tasks and <code class=\"code-styler-inline\">thread</code>s","level":2,"id":"Tasks_and_`thread`s_0"},{"heading":"Passing Arguments","level":2,"id":"Passing_Arguments_0"},{"heading":"Returning Results","level":2,"id":"Returning_Results_0"},{"heading":"Sharing Data","level":2,"id":"Sharing_Data_0"},{"heading":"Waiting for Events","level":2,"id":"Waiting_for_Events_0"},{"heading":"Communicating Tasks","level":2,"id":"Communicating_Tasks_0"},{"heading":"Future and Promise","level":4,"id":"Future_and_Promise_0"},{"heading":"Packaged Task","level":4,"id":"Packaged_Task_0"},{"heading":"Async ‚Äî <code class=\"code-styler-inline\">async()</code>","level":4,"id":"Async_‚Äî_`async()`_0"},{"heading":"Small Utility Components","level":2,"id":"Small_Utility_Components_0"},{"heading":"Time","level":2,"id":"Time_0"},{"heading":"Type Functions","level":2,"id":"Type_Functions_0"},{"heading":"Type Predicates","level":2,"id":"Type_Predicates_0"},{"heading":"Pair and Tuple ‚Äî <code class=\"code-styler-inline\">pair</code>, <code class=\"code-styler-inline\">tuple</code>","level":2,"id":"Pair_and_Tuple_‚Äî_`pair`,_`tuple`_0"},{"heading":"Regular Expressions","level":2,"id":"Regular_Expressions_0"},{"heading":"Math","level":2,"id":"Math_0"},{"heading":"Advice","level":2,"id":"Advice_4"}],"links":["file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch2/helloworld.cpp","engineering/c++-essentials/üîó-—Å++-all-modifiers.html","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch3/mycomplex.cpp","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/prodcons.cpp","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/async.cpp","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/unsort.cpp"],"author":"","coverImageURL":".","fullURL":"tc++pl-(i).html","pathToRoot":".","attachments":["a9s/screenshot-2025-09-29-at-04.15.37.png","a9s/screenshot-2025-09-29-at-15.56.15.png","a9s/screenshot-2025-10-01-at-02.55.34.png","a9s/screenshot-2025-10-01-at-02.56.03.png","a9s/screenshot-2025-10-02-at-01.51.27.png","a9s/screenshot-2025-10-02-at-23.54.37.png"],"createdTime":1766961847016,"modifiedTime":1767129569447,"sourceSize":51855,"sourcePath":"engineering/compendium/TC++PL (I).md","exportPath":"tc++pl-(i).html","showInTree":true,"treeOrder":5,"backlinks":[],"type":"markdown"},"tc++pl-(ii).html":{"title":"TC++PL (II)","icon":"","description":"This is my notes for the book:\nThe C++ Programming Language ‚Äî Bjarne Stroustrup\nTome II: Basic FacilitiesMany important things are deemed implementation-defined by the standard. For example:unsigned char c1 = 64; // well defined\nunsigned char c2 = 1256; // implementation-defined, truncation\nOther behaviors are unspecified (e.g., exact value returned by new, or value of a variable assigned to from two threads without synchronization).To maximize portability it is wise to be explicit about implementation-defined provisions. To support such technique, the std lib provides numeric_limits.static_assert(4&lt;=sizeof(int), \"sizeof(int) is too small\");\nConstructions that is undefined by the standard behave very badly:const int size = 4*1024;\nchar page[size];\nvoid f()\n{ page[size+size] = 7; // undefined, may cause disaster\n}\nKinds of implementation:\nhosted includes all the stdlib facilities as described in std\nfreestanding may provide fewer stdlib facilities, as long as the following are provided:\n<img alt=\"Screenshot 2025-10-04 at 04.41.40.png\" src=\"a9s/screenshot-2025-10-04-at-04.41.40.png\" target=\"_self\" style=\"width: 600px; max-width: 100%;\">\nFreestanding implementation is often used for bare-metal programs.\nMany implementations also provide an option for not using exceptions for really minimal, close-to-the-hardware, programs.\nC++ use 7-bit characters set ASCII (ISO 646-1983, ANSI 3.4-1968).\nEvery name (identifier) in C++ has a type!\nbuilt-in (machine-level)user-definedtypesarithmeticintegralbooleanscharactersintegersfloating-pointvoidpointersarraysreferencesstructuresclassesenumerationscompoundfunctionsfundamentalBooleans are converted to int in expressions (arithmetic and logical):bool b=true;\ncout&lt;&lt;b+5&lt;&lt;endl; // out: 6\nC++ provides a variety of character types:\nchar, signed char, unsigned char, wchar_t, char8_t, char16_t, char32_tDanger\nIt's not safe to assume that the alphabetic characters are contiguous. If your source file is encoded with EBCDIC the test 'a'&lt;c &amp;&amp; c&lt;'z' may be incorrect.\nWarn\nRemember, that C++ leaves open the possibility of existence one's-complement systems; e.g., where char can has values -127...127 (not -128...127) Reminder: most common characters is in range 0...127\nYou cannot cast between pointers to char, unsigned char, signed char ‚Äî because they are three distinct types.<br><img alt=\"Screenshot 2025-10-04 at 20.06.24.png\" src=\"a9s/screenshot-2025-10-04-at-20.06.24.png\" target=\"_self\" style=\"width: 500px; max-width: 100%;\">It's possible but should be avoided:int c = 'ab'; // a='\\0x61' b='\\0x62' -&gt; 0x6162 (big-endian) // 0x6261 (little-endian)\nAdditional char types literals:1wchar_t wc = L'ab'; // implementation-defined :(2char16_t c16 = u'\\uHHHH'; // 4 bytes char3char32_t c32 = U'\\UHHHHHHHH'; // 8 bytes charSynonyms:1int = signed = signed int2unsigned = unsigned int3short = short int4long = long int5long long = long long intFor more detailed integers you can use &lt;cstdint&gt;:\nint64_t ‚Äî signed int with exactly 64 bits\nuint_fast16_t ‚Äî 16-bit unsigned int, supposedly the fastest such integer\nint_least32_t ‚Äî just like plain int\nand others...\nHex and octal notations sets bits directly and can surprise on some types and machines:1// on two's-complement architecture2int16_t x = 0xffff; // == -13int32_t y = 0xffff; // == 65'535Type of integer literal deduced in order (to first in which can be represented):11347 -&gt; I -&gt; LI -&gt; LLI21347L -&gt; LI -&gt; LLI31347LL -&gt; LLI40... -&gt; I -&gt; UI -&gt; LI -&gt; ULI -&gt; LLI -&gt; ULLI50...L -&gt; LI -&gt; ULI -&gt; LLI -&gt; ULLI60...LL -&gt; LLI -&gt; ULLI7...U -&gt; UI -&gt; ULI -&gt; ULLI8...UL -&gt; ULI -&gt; ULLI9...ULL -&gt; ULLIRemember about scientific notation: 1.2e10 or 1.23e-15<br><img alt=\"Screenshot 2025-10-05 at 01.00.15.png\" src=\"a9s/screenshot-2025-10-05-at-01.00.15.png\" target=\"_self\" style=\"width: 600px; max-width: 100%;\">you can use delimiter:1const char* str = R\"x(\"(hello!)\")x\"; // \"(hello!)\"2// ^ ^ ‚Äî optional delimiterCritically to note!\nNote the dramatic difference in the meaning of u prefix for char u'' and string u\"\"!\nFor example, invalid: u'ü§£' (doesn't fit into memory), but valid: u\"ü§£\" (stored as 2 code units of char16_t).\nYou can define your own suffixes (user-defined literals):1KM x = 123_km;2G s = \"hello!\"_gr;(use names started with _)string literal suffix:\nstring s = \"hello\"s;\nRemember\nYou should know C++ is not the implementation. The C++ is the standard!\nThink so and avoid implementation-dependent aspects.\nTip\nProgram you don't want to port today may be ported some day! Compatibility is important!\nIt's easier to limit impact of implementation-dependent language feature. Limiting the impact of system-dependent library facilities is far harder. And therefore:Important\nUse std lib wherever feasible!\nThink about your library portability!\nImportant\nsizeof(char) == 1 by definition. You may assume it is 1 byte, but on different machines it may differ!\nGuaranteed about sizes:11byte ‚â° char ‚â§ short ‚â§ int ‚â§ long ‚â§ long long21byte ‚â§ bool ‚â§ long3char ‚â§ wchar_t ‚â§ long4float ‚â§ double ‚â§ long double5N ‚â° signed N ‚â° unsigned N67char ‚â• 8bits8short ‚â• 16bits9long ‚â• 32bitsTo define real values use &lt;limits&gt; (which functions is constexpr) and sizeof.Best practice: avoid conversions that are not value-preserving.1alignof(arg); // minimal alignment for correct access in memory23// you can also define specific alignment for data4template&lt;typename T&gt;5void use(const vector&lt;T&gt;&amp; v)6{7\tconstexpr int bufmax = 1024;8\talignas(T) char buffer[bufmax]; // uninitialized910\tconst int max_els = min(v.size(), bufmax/sizeof(T));11\tuninitialized_copy(v.begin(), v.begin() + max_els, (T*)buffer);12}Note\nalignas(T) align buffer by alignment of T, i.e. by alignof(T)\n<br>see <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch6/alignment.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch6/alignment.cpp\" target=\"_self\">example</a>.The \"value\" of the following is permanent:\ntypes, aliases, templates, functions, constantsWith some simplification, declaration has five parts:\noptional prefix specifiers (static, virtual, ...)\na base type (vector&lt;double&gt;, const int, ...)\na declarator optionally including a name (p[7], *(*)[], ...)\noptional suffix function specifiers (const, noexcept, ...)\nan optional initializer or function body (={7,5,3}, {return x;},...)\nNote\ndeclarations are terminated by ; except for functions and namespaces\n<br><img alt=\"Screenshot 2025-10-05 at 05.47.03.png\" src=\"a9s/screenshot-2025-10-05-at-05.47.03.png\" target=\"_self\" style=\"width: 500px; max-width: 100%;\">Crit\nYou must not use names: starting with _ in global space\nstarting with __ or _C (uppercase) in any space Select descriptive names for large scope symbols and conventional short names for locals.Recommendation\nUse CAPITALIZED names only for macros, not even for constants\nKeywords:<br>\n<img alt=\"Screenshot 2025-10-05 at 18.26.55.png\" src=\"a9s/screenshot-2025-10-05-at-18.26.55.png\" target=\"_self\" style=\"width: 400px; max-width: 100%;\">\nAnd special meaning identifiers:<br>\n<img alt=\"Screenshot 2025-10-05 at 18.27.27.png\" src=\"a9s/screenshot-2025-10-05-at-18.27.27.png\" target=\"_self\" style=\"width: 300px; max-width: 100%;\">Stroustrup says that names of class scope can't be accessed from other translation units unlike namespace's names that can. It is because namespace variables are considered as \"real data\" whereas class's variables are not a real data.Global names are always accessible even within shadowing by global namespace:1int x = 5;2void f(){3\tint x = 7;4\t:: x = 30; // get global x5}Very important\nThe scope of a name starts after complete declaration and before initializer. Thus possible:\nvoid f(){int x = x;}\nIt may seems odd, but it makes sense: x contains garbage immediately after declaration.\nThis does not apply to constructors.\nNote\nDeclaration is not an expression.\nDeclaration can't exist without its block {}. For example:\n1if (cond)2\tint x = 5; // error3else4\tfloat y=3; // errorForms:1T x1 {v}; // strongly recommended form!2T x2 = {v};3T x3 = v;4T x4(v); // Most vexing parse5// last can be treated as function declaration...List initialization (T x1 {v};) does not allow narrowing.A trap\nUsing auto with list initialization can suprise:\nauto x {99}; ‚Äî deduced as initializer_list&lt;int&gt;, not int (Except for C++17!)\nSo, for auto it's better to use =-initialization\ninitializer_list constructor is preferred.Reminder\nstatic objects (global, namespace, local static, static member) are initialized to {} by default!\nIf array or structure is initialized to {}, nested fields are initialized to {} too.Be careful:1T x(); // always function declaration, not empty-args constructorauto is used for deducing type on initialization simply. Use for var, const, constexpr\ndecltype() is used for deducing type of something more complicated. It's suitable not only for declarations.Important about auto\nauto often omit references and cv-qualifiers because in expression they are dereferenced and lose cv-qualifiers. So, you may (and need sometimes) do so:\nconst auto&amp; x = ...\nAs I've got on practice:1auto x{1}; // int 12auto x{1, 2}; // ERROR! Ambiguous type34auto x = {1}; // initializer_list&lt;int&gt;5auto x = {1, 2}; // initializer_list&lt;int&gt;6decltype is more \"smart\" and can be used in more specific places (not with specific initializer):1template&lt;class T1, class T2&gt;2auto operator+(const Matrix&lt;T1&gt;&amp; m1, const Matrix&lt;T2&gt;&amp; m2)3-&gt; Matrix&lt;decltype(T1{} + T2{})&gt;4{5\tMatrix&lt;decltype(T1{} + T2{})&gt; res;6\t// ...7}Consider 2 properties:\nHas identity ‚Äî the program has the name of, pointer to, or reference to the object\nMovable ‚Äî the object may be moved (to another location without copying, leaving origin location in a valid but unspecified state)\nLet's use i for \"has identity\" and m for \"movable\".\nNote: there are no {i=no, m=no} objects at all (they don't make sense)\nFinally\nWe can precisely describe the C++ language rules:\nlvaluei[+] m[ ]glvaluei[+]xvaluei[+] m[+]rvaluem[+]prvaluei[ ] m[+]\nNote: you use 3 top types in real program\nwhere:\nlvalue - locator value\nglvalue - generalized lvalue\nxvalue - extraordinary, expiring value\nrvalue - read value\nprvalue - pure rvalue Note: Every expression is either an lvalue or an rvalue, but not both.\nObjects classification by lifetime:\nautomatic\nstatic\nfree store\ntemporary objects (temporary objects live until the end of the full expression of which they are part)\nthread-local objects\ndef, note\nfull expression is an expression that is not part of another expression.\nUseful technique:1template&lt;class T&gt;2class vector {3\tusing value_type = T;4\t// ...5}It makes parameter-type T accessible outside: typename Container::value_type. Moreover, now value_type is like namespace member of class vector.Can be generalized with templates:1template &lt;typename T&gt;2\tusing Vector = std::vector&lt;T, My_allocator&lt;T&gt;&gt;;\nSpecifiers cannot be applied to type aliases you can see ISO C++\navoid magic constants (like __FILE__)\nprefer char rather than unsigned char or signed char\navoid multiple declaration\nprefer {} for init with a named type\nprefer = for init with usage of auto\nuse using type alias for generalization (with an eye to the future)\nuse enum and class for not alias but new type\nThere are machines that cannot to access individual bytes, it is the reason why sizeof(char) if assumed as 1.Suggestion\nFor more compact data you can use: 1. bitwise logic, 2. bit-fields, 3. bitset.\nThere is possibility to point to class members:1struct T{2 int a;3 void f(int a) { cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; this -&gt; a &lt;&lt; T::a &lt;&lt; endl; };4};56int T::*p = &amp;T::a;7void (T::*fp)(int) = &amp;T::f; // `&amp;` may not be omitted8 // as may be for usual func names (not in class)910int main()11{12\t// usage example:13 T t{4};14 T *tp = &amp;t;15 (t.*p)++;16 (tp-&gt;*fp)(2);17\t// output:18\t// 2 5519}Note\nvoid* variable may not be assigned with function pointer or member pointer!\nUse static_cast&lt;TT*&gt;(void_pointer) to get pointer to TargetType(TT).Note\nIn C++ array size must be constant expression.\nReminder:1int arr[10];2arr == &amp;arr[0];3arr = new int[20]; // error! Can't assign to arrayTip\nAvoid array in interfaces (e.g., as function arguments)\nThere is no built-in copy operation for arrays (but copy functions are).Note\nWhen you need assignment to a collection use: vector, or array (not []), or valarray\nCaution\nIn old code you may meet char* str = \"some text\"; but in modern C++ it won't be compiled.\nThe reason is: (in C) \"hi\" has type char [3], (in C++) it has type const char [3].\nWOW\nstring literals are statically allocated, so you can:\n1const char *error_message(int i)2{3\t// ...4\treturn \"range error\";5}Interesting (you may not assume whether two identical string literals are allocated as one):1const char* p = \"Equal text\";2const char* q = \"Equal text\";3cout &lt;&lt; p==q &lt;&lt; endl; // result is implementation-definedFor multiline:1const char* s1 = \"hello\\n\\2world!\\n\";3const char* s2 = \"hello\\n\"4 \"world!\\n\";5const char* s3 = R\"(hello6world7)\";Fully defined\nR\"***(...)***\" ‚Äî contains custom pattern *** for open and close raw-string literal.\nNote\nStrings have u8\"\" literal, but there is no u8'' Note again: it's valid to point to the element one beyond last (pointers on arrays). Other deviations are UB by the standard.\nYou can declare C-code:1extern \"C\" int strlen(const char*);2// avoids names manglingReminder\nIt's not possible to return array from function!\nSo funny ü§£\na[i] == *(a+i) == *(i+a) == i[a]\n–°ommutativity of addition of numbers and pointers allows i[a], but of course you should avoid this in prod Standard prescribes that subtraction of pointers is defined only when both pointers point to elements of the same array (and does not check that fact!)\nImportant\nrange-for works for a known-size arrays\n1void init(char&amp; x);23int main(){4 const int N = 7;5 char arr[N];6 for (auto&amp; x: arr)7 init(x);8}Note\nSome compilers suggest range checking, but avoid it in production\nWarning\noperator, (comma) is not allowed in constant expression:\nint arr[3, 5]; // ERROR!\nSome words about multidimensional arrays\nFirst, reminder:\n1void f(int arr[3][5]); ‚â° void f(int arr[][5]); ‚â° void f(int (*arr)[5]);\nSecond, techninque:\n1void process(int* m, int dim1, int dim2){2\tfor (int i=0; i&lt;dim1; i++)3 for (int j=0; j&lt;dim2; j++)4 do_smth(m[i*dim2 + j]); // not m[i][j]5}\nThird, don't be fooled by C's variable-length arrays (VLA):\n1void f(int dim1, int dim2, int arr[dim1][dim2]); // ERRORRemember\nIn C++ any array must have constexpr length. No non-const var can be used!\nNote\nconst values must be initialized on declaration (non extern) Note that const modifies a type, it restricts the ways of use, rather than specifying how the constants is to be allocated.\nRemember: a pointer may be nullptr or point to an unexpected object.\nReference always refers to object to which it was initialized. There is not nullref\nReferences is divided on:\nlvalue references\nconst references\nrvalue references\nPossibly:1extern int&amp; a; // legal: initialized elsewhereNeed to know\nWe cannot have a pointer to a reference. We cannot define an array of references. In that sense, a reference is not an object.\nIllustration for code:1int var = 0;2int&amp; rr{var};3++rr;4int* pp = &amp;rr; // == &amp;var, not &amp;rr (there is no rr indeed)<br><img alt=\"Screenshot 2025-10-07 at 03.03.28.png\" src=\"a9s/screenshot-2025-10-07-at-03.03.28.png\" target=\"_self\" style=\"width: 500px; max-width: 100%;\">The initializer for a const T&amp; need not be an lvalue or even of type T. In such case:\nFirst, implicit type conversion to T is applied if necessary\nThen, the resulting value is placed on a temporary variable of type T\nFinally, this temporary variable is used as the value of the initializer\nSo, you can:\n1const double&amp; cdr{1}; // double tmp = double{1}; const double&amp; cdr {temp};note: lifetime of tmp longs until the end of its reference's scope.Recommendation: if you're going to modify T&amp; arg in function, function's name should give a strong hist that the reference argument is modified.You can return T&amp; from functions to provide access to modify some object. For example:1template&lt;class K, class V&gt;2class Map{3public:4\tV&amp; operator[](const K&amp; v); // return res. Then you can: res = ...5\t// ...6};Consider common swap:1template&lt;class T&gt;2void swap (T&amp; a, T&amp; b){3\tT tmp{a};4\ta = b;5\tb = tmp;6}There have been made 3 copy operations!\nA better way:1template&lt;class T&gt;2void swap2 (T&amp; a, T&amp; b){3\tT tmp{static_cast&lt;T&amp;&amp;&gt;(a)}; // candidate to move!4\ta = static_cast&lt;T&amp;&amp;&gt;(b); // candidate to move!5\tb = static_cast&lt;T&amp;&amp;&gt;(tmp); // candidate to move!6}Note, swap2 can't so: swap2(v, vector&lt;int&gt;{1,2,3});. Solution is to define overloads:1template&lt;class T&gt; void swap2(T&amp;&amp;a, T&amp; b);2template&lt;class T&gt; void swap2(T&amp;a, T&amp;&amp; b);3// now possible:4swap2(v, vector&lt;int&gt;{1,2,3});Otherwise, the std lib takes a different approach: it just defines special functions for the most used second argument in swap (duplicate end empty instance):1void f(string&amp; s, vector&lt;int&gt;&amp; v)2{3\t// make s.capacity() == s.size()4\ts.shrink_to_fit(); // or...5\tswap(s, string{s});67\t// clear v8\tv.clear(); // or...9\tswap(v, vector&lt;int&gt;{}); // or...10\tv = {};11}Feel difference:1template&lt;class T&gt; class vector{2\t//...3\tvector(const vector&amp; r); // copy constructor (1)4\tvector(vector&amp;&amp; r); // move constructor (2)5};67vector&lt;string&gt; s;8vector&lt;string&gt; s2{s}; // s is lvalue, so use (1)9vector&lt;string&gt; s3{s+\" tail\"}; // expr is rvalue so use (2)Yes! Move!\nstatic_cast&lt;T&amp;&amp;&gt;(x) has alias std::move(x)\n(where T is typeof(x))\nYeah!\nSince move(x) does not move x (just produces rvalue reference to x), it would have been better if move() had been called rval(), but by now move() has been used for years.\nAlso\nRvalue references can be used to provide perfect forwarding\nConsider interesting example:1using rr = int&amp;&amp;;2using r = int&amp;;34// *reference collapse*5using rr_rr = rr&amp;&amp;; // `int &amp;&amp; &amp;&amp;` -&gt; `int&amp;&amp;`6using rr_r = rr&amp;; // `int &amp;&amp; &amp; ` -&gt; `int&amp;`7using r_rr = r&amp;&amp;; // `int &amp; &amp;&amp; ` -&gt; `int&amp;`8using r_r = r&amp;; // `int &amp; &amp; ` -&gt; `int$`Simple mnemonic:\n¬´ lvalue always wins! ¬ª\nThis makes sense: nothing we can do with types can change the fact that an lvalue reference refers to an lvalue.\nnote\nint &amp;&amp; &amp; r = ...; // invalid syntax!\nReference to reference can only happen as the result of an alias or a template type argument!\nRemember\nYou may have reference to pointer int* &amp;p = ...; but you may not have a pointer (and therefore array) to reference.\nBe careful! There is trick to create null-reference, but it generates an error on runtime:1char* ident(char * p) { return p; }2char&amp; r {*ident(nullptr)}; // possible, but disaster\navoid nontrivial pointer arithmetic\nprefer not to use multidimensional arrays; use suitable containers instead\nprefer string rather than C-strings\nkeep pointers that represent ownership inside handle classes\nprefer &amp; args over * args, except where \"no object\" is a reasonable option Some operators (e.g., == and !=) are not available by default for structures.\nRule\nAn object of a struct holds its members in the order they are declared. For optimize struct size (due to alignment) you can reorder members from largest to smallest.\nBut usually best to order members for readability.\nEMERGENCY\nUse of multiple access specifiers (public/private/protected) can affect layout!\nRemember about self-reference and cross-reference abilities:1struct B; // incomplete but declared type23struct A{4\tA* a; // possible with a pointer5\tB* b; // possible with a pointer6\tint data;7};89struct B{10\tA* a;11};Incomplete type allows many optional (as long as that use does not require members' size of the size of type):1struct S;23extern S a;4S* p;5S f();6void g(S);7S* h(S*);8S* q = h(p);910// ERRORS:11S a;12f();13g(a);14p-&gt;m = 7;You should avoid equality of names of struct and non-struct even while it is possible with disambiguation in C-style:1struct stat {...};2int stat(char* name);34stat(\"hello\"); // is non-struct acceess5struct stat s; // struct access (as in C)Info\nThe same is true for class, union, enum\nMy research:Remember enum is a type (not alias), and simultaneously defines int constants!\nC++ allows nested types (with block-space). So you can define enum or class in function or another class. Structures are classes indeed, but with public members and inheritance by default.\nBy default, structure provide initialization of members in order:1Point p{}; // inited as {0, 0}2Point q{2}; // inited as {2, {}}, i.e. {2, 0}You can define constant size array inside struct (for pass through func) adapted for range-for:1template &lt;typename T, size_t N&gt;2struct array{3\tT elem[N];45\tT* begin() noexcept {return elem;}6\tconst T* begin() const noexcept {return elem;}7\t// ... and a few more89\tconstexpr size_t size() noexcept;10};We can't deduce number of elements:1array&lt;Point&gt; points = {{1,2}, {7,-9}}; // error, N not givenKeep in mind Two structures are different types even when have the same members\nAlso invalid: struct S{int x;} s; int i = s;\nEvery struct must have a unique definition (same as function must) def\nplain old data (POD) ‚Äî just data, a contiguous sequence of bytes in memory\nNote\nstd::memcopy typically simply uses a block-move machine instruction (that is very efficient). They should use \"such trick\" only for optimized low-level code and avoid this in higher-level code.\ndef trivially copyable type ‚Äî has trivial copy/move ctors/ops and trivial destructor. Has no virtual functions/bases. Recursively for subobjects.\ntrivial type ‚Äî trivially copyable type with trivial default constructor\nstandard-layout type ‚Äî has no virtual functions/bases. Non-static fields has the same access level. Has no reference-members. Has no non-static data members in more than one base (or in base and in derived). Has no the same type base and first non-static member. You can compile-timed check for time for optimization:1template &lt;typename T&gt;2void mycopy(T* to, const T* from, int count)3{4\tif constexpr(is_pod&lt;T&gt;::value)5 memcpy(to, from, count*sizeof(T));6\telse7 for (int i=0; i!=count; i++)8 to[i]=from[i];9}Example:1struct PPN{2\tunsigned int PFN : 22;3\tint : 3; // offset4\tunsigned int CCA : 3;5\tbool nonreachable : 1;6\tbool dirty : 1;7\tbool valid : 1;8\tbool global : 1;9};1011void part_of_VM_system(PPN* p)12{13\t//...14\tif (p-&gt;dirty) { // contents changed15 //copy to disk...16 p-&gt;dirty = 0;17\t}18}Note\nType of a bit-field may be only integral or enum.\nExample:1enum Type {str, num};2union Value{3\tchar* s;4\tint i;5};6struct Entry{7\tchar* name;8\tType t;9\tValue v; // use v.s if t==str, v.i otherwise10};union is a kind of a struct which in turn is a kind of a class.\nHowever, there are some restrictions imposed on unions:\nA union cannot have a virtual functions\nA union cannot have members of reference type\nA union cannot have base classes\nA union cannot be used as a base class\nA union has deleted (), ==, =&lt;-, ~() if its member has custom one! UP: I've found that for unnamed union nested in class it behaves not so way.\nAt most one member of a union can have an in-class initializer\nRule (4) is for avoid \"hidden costs\" on derived classes.Rule (5) keeps simple unions simple. For complicated operations it forces the programmer to explicitly provide them. In fact, compiler does not know which constructors or copy operations to call, or which destructors to call.Wow!\nThere is anonymous nested types injection! (see tagged union in example below). 1class Entry{2private:3\tenum class Tag {number, text};4\tTag type; //discriminant5\tunion { // tagged (or discriminated union)6 int i;7 string s;8\t};9public:10\tstruct Bad_entry {}; // for exceptions11\tstring name;1213\t// Many of important are avoided!14\t// ...1516\tvoid set_number(int n)17\t{18 if (type == Tag::text){19 s.~string(); // explicitly destroy string20 type = Tag::number;21 }22 i = n;23\t}2425\tvoid set_text(const string&amp; str)26\t{27 if (type == Tag::text)28 s = str;29 else {30 // placement new: explicitly construct string31 new(&amp;s) string{str};32 type = Tag::text;33 }34\t}35};<br>See <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch8/anon_union.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch8/anon_union.cpp\" target=\"_self\">full example</a>.The placement new\nForm of the new that places object in already allocated memory and doesn't cause additional allocation\n1enum class Color{2\tred, // called enumerator3\tgreen,4\tblue5};It's possible to define underlying type for enum:1enum class Warning : char {none=0, green=1, yellow=2, orange=4, red=8};2// sizeof(Warning) == 1You can define operators for enum types:1constexpr Warning operator|(Warning a, Warning b)2{3\treturn static_cast&lt;Warning&gt;(4 static_cast&lt;int&gt;(a) | static_cast&lt;int&gt;(b)5\t);6}Note: with constexpr you now can use it in constant expressions:1switch(x){2case Warning::green|Warning::yellow: // for green and yellow3\t...4\tbreak;5}Warn: for bool test you need to compare with none:1void f(Warning w)2{3\tif ((w&amp;(Warning::yellow | Warning::orange))!=Warning::none)4 ... // for yellow or orange5}It's possible to declare (not defined awhile) enum class:1enum class Color : char; // declaration\nNames injecting can also be called as namespace pollution\nPay the attention!\nYou can declare forwarding declaration enum only with setting the underlying type!\nenum Color; //error!\nenum Color: int; //ok\nThe underlying type for contain values is calculated by range for signed and for unsigned to contain at least min and max enumerators.\nwhen you need to compact data place larger before smaller (for compact alignment)\nuse bit-fields to represent hardware-imposed data layouts\ndon't try naively optimize with bitwise games\nuse unions to save space and never for type conversion\nuse enums to represent sets of named constants\nprefer enum class over plain enum to minimize surprises\ndefine operations on enums for safe and simple use\nNote:\ndeclaration is a statement\nexpression terminated with ; is a statement\nReminder\nThe compiler may reorder code to improve performance as long as the observer behavior persists.\nThere are not so many statements:\n; ‚Äî empty statement\ndeclaration\nexpression;\n{} ‚Äî compound statement or block\ntry {} catch {}\ncase &lt;constexpr&gt; : statement\ndefault : statement\nidentifier : statement\nbreak, continue, goto &lt;identifier&gt;, (throw, but it's not a statement)\nreturn &lt;expression&gt;;\nselection (if, switch)\niteration (for, while, do) Note: = (assignment) and () (function call) are expressions, not statements\nFor condition in test statements argument implicitly converts to bool:\nif (arg) == if(static_cast&lt;bool&gt;(arg))Reminder:1if (cond)2\tint x = val-3; // invalid! You may not only declare. Use {} at leastFor for loops we have:11st form:2for3\t(&lt;for-init-statement&gt; [&lt;condition&gt;]; [&lt;expression&gt;])4 &lt;statement&gt;562nd form:7for8\t(&lt;for-init-declaration&gt; : &lt;expression&gt;)9 &lt;statement&gt;\nfor-init-statement may be either a declaration or en expression-statement (both end with a semicolon ;)\nfor-init-declaration must be the declaration of a single uninitialized variable.\nFor tests we have:11st form:2if (&lt;condition&gt;)3\t&lt;statement&gt;452nd form:6while (&lt;condition&gt;)7\t&lt;statement&gt;893rd form:10do &lt;statement&gt;11\twhile (&lt;expression&gt;);\ncondition may be expression or [&lt;init&gt;]; expression.\nif &lt;init&gt; provided, it must declare and init a single variable.\nnote: for do ... while (); you may not to declare in while(...)\nNote\nIt's not possible to repeat the same value in cases:\n1switch (val) {2\tcase 2:3 ...4 break;5\tcase 4-2: // error: multiple usages6 ...7 break;8}The compiler may optimize switches with jump-table or binary-lookup.The compiler often warn if you switch not all enum values:1enum class Color {red, blue, green, black, white, orange, purple};23int main()4{5\textern Color c;6\tswitch(c){7 case Color::red:8 ;break;9 case Color::blue:10 ;break;11 case Color::green:12 ;break;13 case Color::black:14 ;break;15 case Color::white:16 ;break;17 case Color::orange:18 ;break;19 // is `Color::purple` missing?20\t}21}2223// Output:24// ../wl.cpp:10:9: warning: enumeration value 'purple' not handled in switch [-Wswitch]25// 10 | switch(c){26// | ^27// ../wl.cpp:10:9: note: add missing switch cases28// 10 | switch(c){Note\nThis type of errors occur when someone adds new enumerator in enum def!\nTip\ntest impossible values separately.\nPay the attention\nScope of different cases' is common! Thus, there is many possible errors:\n1switch (val) {2case 0:3\tint x;4\tint y = 3;5\tstring s;6\t// fallthrough7case 1: // jump bypasses initialization of y, s8\t++x; // warning: using garbage!9\t++y;10\ts = \"nasty!\";11}Note:\nfor uninitialized primitives you can use but garbage...\nfor initialized primitives you get a error on compile\nfor all user-defined you get a error on IDE\nTip\nAvoid cross-references between case areas. Ot use additional {} blocks For form for( auto x : v ) {...} object v must provide begin and end in either:\nv.begin(), v.end()\nbegin(v), end(v) Note: element x is *p, where p returned by .begin()\n1for (;;) { // prefer this2\t// infinit loop3}45while () {} // error! expression is expected67while (true) {8\t// infinit loop9}Note\ngoto is prohibited for jump past an initializer or into an exception handler!\nNote\ngoto doesn't cause enclosing loop's increment or condition, but correctly exit the scope, thus counter-variable will be destroyed.\nAdvice\nDo not state something in comment, if this is stated in language itself! Don't declare before you have a value to initialize\nPrefer switch ti if when there is a choice\nAvoid goto\nKeep comments crisp (—á–µ—Ç–∫–∏–º–∏)\nState intent in comments\nMaintain a consistent indentation style\nLet's overview the calculator program!\nThere are some important and interesting notes about language facilities and others below.<br>\nFull exercise is done in <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch10/calculator.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch10/calculator.cpp\" target=\"_self\">the file</a>.Recursive descent ‚Äî popular and straightforward top-down technique for syntax analysis.YOU MUST\nYou must declare subsequent function even if its definition is in the same file!\nMost vexing parse (MVP)\nAll that can be interpreted as a function declaration will be so.\nClarifying\nsizeof and C-style cast are operators, not statements.\nreminder, correct forms: sizeof object or sizeof (object)\nsizeof (typename) ‚Äî preferred form\ntypename (expr)\n(typename) expr ‚Äî preferred form In Token_stream we use useful and general technique for classes that hold a pointer to a resource requiring destruction:1Token_stream::Token_stream(istream&amp; s) : ip{&amp;s}, owns{false} {}2Token_stream::Token_stream(istream* p) : ip{p}, owns{true} {}Stroustrup\nIn general, dealing with complete objects is clearer and less error-prone than manipulating data members individually.\nNext functions use hash-search and are completely efficient!1isalpha(char), isdigit(char), isalnum(char), isspace(char)Curious!\nstd::cerr is an unbuffered output stream!\nNew facility ‚Äî Structured bindings\nauto [x, y] = Point{2, 3.8}; // double x = 2, y = 3.8.\nSupported for any object with tuple_size, get, tuple_element\nNote\nIf you don't explicitly return value from func ‚Äî UB, but just warn on compile.\n1int main(int argc, char *argv[]){}With &lt;sstreams&gt; you can use new istringstream{argv[1]}; to form istream from string<br>\nFor more details see <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch10/calculator.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch10/calculator.cpp\" target=\"_self\">main(...)</a>.‚ùóÔ∏èMust see:<br>\n<a data-tooltip-position=\"top\" aria-label=\"‚ûï Operator Summary > By Stroustrup\" data-href=\"‚ûï Operator Summary#By Stroustrup\" href=\"engineering/c++-essentials/‚ûï-operator-summary.html\" class=\"internal-link\" target=\"_self\" rel=\"noopener nofollow\">Full Operator Summary</a>Interesting operators for me:1::x // access global x23typeid(type) // type identification4typeid(expr) // run-time type identification5sizeof...(Args) of sizeof...(args) // number of type args or func args67// Forms of alloc/delete:8new type // allocate9new type (expr-list) // allocate and init10new type {expr-list} // allocate and init1112new (expr-list) type // place13new (expr-list) type (expr-list) // place and init14new (expr-list) type {expr-list} // place and init1516delete pointer // dealloc17delete []pointer // dealloc array1819noexcept (expr) // &lt;- not specifier, just evaluatable operator2021// note22object.*ptomem // has lower precedence than object.member (!)23pointer-&gt;*ptomem // has lower precedence than pointer-&gt;member (!)Note\nLambdas in C++ is objects of anonymous class with overloaded operator(). Just syntax sugar.\nNote\nUnaries and assignments are right-associative\nOthers are left-associative\nWarning\nA few grammar rules cannot be expressed in terms of precedence (also known as binding strength) and associativity.\nExample: a=b&lt;c?d=e:f=g ‚Äî&gt; a=((b&lt;c)?(d=e):(f=g))\nTip!\nThere is Max Munch rule in C++:\n¬´To make a token the longest possible sequence of characters is chosen¬ª. Example:\n&amp;&amp; ‚Äî&gt; '&amp;&amp;' not '&amp;' '&amp;'\na+++1 ‚Äî&gt; 'a' '++' '+' '1' i.e. (a++) + 1\nAll tokens of C++:<br>\n<img alt=\"Screenshot 2025-10-11 at 19.25.32.png\" src=\"a9s/screenshot-2025-10-11-at-19.25.32.png\" target=\"_self\" style=\"width: 500px; max-width: 100%;\">Result type of arithmetic operators are determined by a set of rules known as¬´The usual arithmetic conversions¬ª\nThe overall aim is to produce a result of the \"largest\" operand type types less than int are converted to int before evaluation.\nlogical operator always produce bool result (but you can override for your class)\nNote!\nThe result is lvalue if it logically feasible:\n1int j = x = y; // (x=y) -&gt; x, not just value of x2int* p = &amp;++x; // (++x) ‚Äî&gt; x, not just value of x3int* q = &amp;(x++); // error! (x++) -&gt; tmp value4int* p2 = &amp;(x&gt;y?x:y); // `?:` ‚Äî&gt; lvalue of largest, not just value5int&amp; r = (x&lt;y)?x:1; // error! `?:` ‚Äî&gt; tmp value because of 1Oh My God!!!\nUnderflow, overflow, zero-division do not throw exceptions! Result just is UB\nImportant reminder\nThe order of evaluation is undefined!\n1int x = f(2) + g(3); // what is first? f or g?2v[i] = i++; // UB v[i] = i or v[i+1] = i?3f(a(), b()); // UB what is first?Attention about temporary objects\nSee dangerous example:\n1void f(string&amp; s1, string&amp; s2, string&amp; s3)2{3\tconst char* cs = (s1+s2).c_str();4\tcout &lt;&lt; cs; // Danger! cs may already point to released memory5\tif (strlen(cs=(s2+s3).c_str())&lt;8 &amp;&amp; cs[0]=='a') { // safe6 // use cs7 // Danger! the same problem8\t}9} constexpr may not have side-effects constexpr starts out with integral, floating or enum value constexpr can use some addresses language requires constexpr for array sizes, case labels, and template value arguments for embedded systems you should prefer .rodata because this memory is cheaper (in terms of cost and energy consumption), more plentiful, and immune to most system crashes if something is initialized in compile-time, there can be no data races on that object For C++11 it's only possibility to state return in constexpr function, so you can't use while. It that time sqrt was calculated as:1constexpr int isqrt_helper(int sq, int d, int a)2{ return sq &lt;= a ? isqrt_helper(sq+d, d+2, a) : d; }34constexpr int isqrt(int x)5{ return isqrt_helper(1, 3, x)/2 -1; }But in modern C++ you can:1constexpr int sqrt(int x)2{3\tint base = 1;4\twhile (base*base &lt;= x)5 base++;6\treturn base-1;7}Tip\nThe parts of ?: or &amp;&amp; or || that is not evaluated may not be an constexpr!\nSome notes by me and AI\nconstexpr in C++20 can do quite a lot, if not everything. Strict rules are not found, but you can think about: transitive chain of constexpr calculations and no access to run-time environment.\nconstexpr works like an interpreter, but clever one (with memoization and other optimizations)\nconsteval is another form of exactly constexpr but with strictly-compile-time evaluation. This can be used only with functions\nif constexpr necessarily executed in compile-time (not recommendation)\nif consteval {...} is special construction for to check how enclosing constexpr function is called (run-time or compile-time)\nconstinit new feature for ensure possibility compile-time initialization. Good for local-static variables (removes overhead of init-check), good for thread_local variables (removes guard usage). The main idea is that const is not an constexpr necessarily\ndef\nliteral type is a class with constexpr constructor\nNote: empty constructor can be considered as constexpr\nFor example, we can:1struct Point{2\tint x,y,z;3\t// const here can be omitted ‚Üì but my compiler says no4\tconstexpr Point up(int h) const { return {x,y,z+h}; }5\tconstexpr Point move(int dx, int dy) const { return {x+dx, y+dy, z}; }6};78constexpr Point orig{0,0}; // -&gt; Point{0,0,0}9constexpr int z = orig.x;1011constexpr Point a[] = {12\torig, Point{1, 1}, Point{2, 2}, orig.move(3,3),13};14constexpr int x = a[1].x;In old time compile-time programming in C++ was impoverished (no functions, only ints).\nIn C++11 we already can more, and even:1template&lt;&gt; class complex&lt;double&gt;{2public:3\texplicit constexpr complex(const complex&lt;long double&gt;&amp;);4\t...5};There is cast-constructor that takes a reference argument!Even more, with modern C++ we can use full-fledged reference operations! For example:1constexpr void f(int&amp; a)2{ a++; }34constexpr int g(){5\tint x = 5; // will be modified in compile-time6\tf(x);7\treturn x;8}910int x = g(); // initialized with 6Complicated moment1constexpr const char* str = \"hello\";2constexpr const char* p = str+2; // Stroustrup says it's impossible3constexpr char c = str[2];In fact, char c can be evaluated at compile-time from literal, but address p is unknown. Modern standard is able to understand shifted address as const&lt;str+2&gt;def If you can convert value and then convert the result back to its original type and get the original value, this conversion is called promotion, that is value-preserving conversion.\nIf not, it is narrowing conversion. WOW. You must memorize it forever!\nC++ have implicit promotion for all arithmetic. There are: all types shorter than int are promoted to int\nfor floating-point computations in older versions they were promoted to double Promotions are performed to bring operands to the \"natural\" size for arithmetic operations.Integral promotions. Comprehensive list.\nThey are promoted in order (until first enough space): char, signed char, unsigned char, short, unsigned short ‚Äî&gt; I ‚Äî&gt; UI\nchar16_t, char32_t, wchar_t, enum ‚Äî&gt; I ‚Äî&gt; UI ‚Äî&gt; L ‚Äî&gt; UL ‚Äî&gt; LL ‚Äî&gt; ULL\nbit-field ‚Äî&gt; I ‚Äî&gt; UI\nbool ‚Äî&gt; I\nFundamental types can be implicitly converted into each other in a bewildering number os ways.For integral types:1-&gt; unsigned..., // just take last bits2-&gt; signed..., // implementation-definedFor floating types:1src -&gt; dst2// if src can be represented in dst (maybe in adjacent values) ‚Äî OK3// otherwise ‚Äî UBFor pointers:1// except func* or &amp;A::member2T* -&gt; void*34// for class B: A5(B*) -&gt; (A*)6(B&amp;) -&gt; (A&amp;)70 -&gt; void*8T* -&gt; const T*9T&amp; -&gt; const T&amp;For boolean:1(*), ints, floats -&gt; bool1float -&gt; [trunc] -&gt; int2// if truncated value doesn't fit ‚Äî UB34int -&gt; float5// with some loss of precision if an integral value cannot be6// represented exactly as a value of the floating typeYou can manually check to avoid data loss:1char checked_cast(int i)2{3\tchar c = i; // warn: non portable4\tif (i != c) throw std::runtime_error{\"int-to-char check failed\"}5\treturn c;6}Let up(T) mean: if either operand is of type T, the other is converted to T\nLet adj(A-&gt;B) mean: if one operand is B and other is A, then if B can represent all the values of A, the A is converted to B.\nRules:\nup(long double) otherwise, up(double)\notherwise, up(float)\notherwise, integral promotion are performed on both operands up(ULL) otherwise, adj(UL-&gt;LL) otherwise both -&gt; ULL\notherwise, adj(U-&gt;L) otherwise both -&gt;UL\notherwise, up(L)\notherwise, up(U)\notherwise both are I\nNote adj is implementation-defined. So, avoid mixing unsigned and signed integers. use raw input only when you have to\nalways verify input\navoid complicated expressions, use ()\navoid order-undefined expressions\navoid narrowing\nRemember, for ?: must be common type to which both operands can be implicitly converted.One interesting use:1int i = (p) ? *p : throw std::runtime_error{\"unexpected nullptr\"};Reminder\nexpr in expr++ / --expr and others is evaluated once only!\nNote\nx++ and x-- return temporary value, but ++x and --x return lvalue, &amp;x\nNote: prefer std copy over handmaden *p++=*q++\nI've measured real difference. Wow! Timings:\n1// manual_copy (index): 6.87 ms per copy, 138722.29 MB/s2// manual_copy (pointer): 7.07 ms per copy, 134829.35 MB/s3// std::memcpy: 0.15 ms per copy, 6574476.63 MB/s4// std::copy: 0.13 ms per copy, 7333085.66 MB/sThe main problems with manually controlled free store:\nLeaked objects\nPremature deletion\nDouble deletion Deletion of a pointer doesn't assign its value to nullptr\nTwo approaches to avoid free-store problems:\nPrefer scoped variables over using free store\nSave pointers from heap in manager object (like vector, string, etc.) ‚Äî RAII\nFrom AI again (incomplete array type, delete[])\nT[] and T[10] are different types. First is deduced to T* in many contexts, but T[10] is known-size whole type.\nTo invoke delete[] p you don't need to know size of array. That size is stored by allocator. But you need to know the type.\nExample of safety array allocation:1void f(int n)2{3\tunique_ptr&lt;int[]&gt; p {new int[n]}; // calls delete[], not delete4\t// ...5\t// automatically destruct p underlying allocated memory6}Useful rule of thumb\nNaked new and delete can appear in constructors/destructors only.\nOften external user use new on init of resource handler. For old code with many bad-used new C++ provides std interface to garbage collector\nNote: free storage managers usually use a few additional memory (a couple of words) to store metadata for deallocationNote (Argument Dependent Lookup ADL):1namespace MyLib {2 struct Data {};3 void process(Data); // declared here4}56int main() {7 MyLib::Data d;8 process(d); // found MyLib::process through ADL9}The std implementations of operator new() and operator new[]() don't initialize the memory returned.New information\nIn fact, new may not throw exception when real RAM is exhausted, because there is often virtual memory with swap tables (which gives memory on access, not on allocation).\nYou can define your own new with considering that:1void* operator new(size_t);2// ^^^^^^ necessary arg3T* p = new T;4// ^ implicitly inferred size by sizeof(T)And then, for example:1void* operator new(size_t n, void* p) noexcept2{3\tcout &lt;&lt; \"custom \\\"placement\\\" allocation\" &lt;&lt; endl;4\t// ... allocate5\treturn p;6}78// usage:9void* buf = reinterpret_cast&lt;void*&gt;(0xF00F);10T* p = new(buf) T;Note\nThis code is educational example, in real code it conflict with std global operator new\nThere are placement deletions:1void operator delete(void* p, void*) noexcept;2void operator delete[](void* p, void*) noexcept;Note by default do nothing, except possibly inform a garbage collector about deleted pointer\nare possibly called when placement new fails\ndo not call the destructors Advice\nAvoid explicit destructor calls\nnew policy: Both forms new and noexcept new can fail on allocation, the former with throw bad_alloc and the latter with nullptr returned.\nBoth forms can successfully return, but later you can get crash on systems with virtual memory system (with lazy allocation) Note\nnoexcept - keyword, nothrow - predefined const from &lt;new&gt;\nExample of noexcept new:1void f(int n)2{3\tint* p = new(nothrow) int[n];4\tif (p==nullptr) {5 // handle allocation error6\t}7\toperator delete(nothrow, p); // deallocate8}Example of unqualified list, which type must be determined from the context:1struct S{int a,b;};2void f(S);34int main()5{ f({1,7}); } // OK: f(S)For ambiguous situation you need to provide concrete type:1struct S{int a,b;};2struct V{double a,b;};34void g(S), g(V); // overloaded56int main()7{8\tg({1,3}); // error: ambiguous9\tg(S{1,3}); // ok: g(S)10\tg(V{1,3}); // ok: g(V)11}Three parts of {} implementation model:\nIf used as constructor arguments, it just passes args to constructor. No copy\nIf used as aggregate initialization, each arg is used to initialize element. No copy\nIf used as initializer_list constructor, args are used to init underlying array. Example:1vector&lt;double&gt; v = {1, 2, 3.14};23// is interpreted as:4const double storage[] = {double{1}, double{2}, 3.14};5const initializer_list&lt;double&gt; tmp(storage, sizeof(storage)/sizeof(double));6// ^ private constructor üòû78vector&lt;double&gt; v(tmp);Tip\ninitializer_list is small object (pointer-like)\ninitializer_list is immutable\nTip\nYou can see on double{3} as on modern way to set type for primitive\nUnqualified list can be used as an expression only as:\nfunc arg\nreturn value\nright-hand operand for =, +=, etc.\nsubscript\ni.e. when type is inferable.\nTo know\nT obj{...}; ‚Äî direct initialization\nT obj = {...}; ‚Äî copy/move initialization\nNote\nType initializer_list cannot be deduced for templates! It is language restriction. Example:\n1template &lt;class T&gt;2void f(T) { }3template &lt;class T&gt;4void g(const vector&lt;T&gt;&amp;) { }56int main() {7\tf({1,2,3}); // error8\tg({1,2,3}); // error9}Reason: It must be type for initializer-list, but not from.Also know as lambda functions, but strictly speaking incorrectly. Result of lambda expression is called closure object or simply a closure.Form:1auto f = []() mutable noexcept -&gt; type {};2// ^^ ^^^^^^^ ^^^^^^^^ ^^^^^^^ ‚Äî all are optional3// 1 2 3 4Notes:\nby default lambda is const\nreturns auto by default (inferred from return expression). If impossible, must be provided\nif you specify 2, 3, or 4; 1 must be specified too.\nAn example:1void print_modulo(const vector&lt;int&gt;&amp; v, ostream&amp; os, int m)2{3\tfor_each(4 begin(v),5 end(v),6 [&amp;os, m] (int x) { if (x%m==0) os &lt;&lt; x &lt;&lt; endl; }7\t);8}Note\nUsing [&amp;] (all by reference) may be optimized!\nFor capture this state this explicitly:1[=, this](...){...};2// ^^^^ then in ^ you can use just `field` or `this-&gt;field`Interesting feature\nauto f = +[]{cout &lt;&lt; \"hello\\n\";}; will produce function pointer rather than function\nNote\nYou can provide non a functor for for_each, but it fails on compile with long error message, because it sequentially finds for a operator()() [=] and [&amp;] in fact capture only those variable which you use\nSpecial forms:\n[&amp;, a, b] - a and b by value, others by reference\n[=, &amp;a, &amp;b] - a and b by reference, others by value\nLambda with variadics:1template&lt;typename... Var&gt;2void algo(int s, Var... v)3{4\tauto helper = [&amp;s, &amp;v...] { return s*(f(v...)+g(v...)); }5\t// ^^^^ valid6}Remember: lambda might outlive its caller. So, using [=] is typically best for passing to another thread.\nThink of the capture list [...] as the initializer list for the closure object\nFor body of lambda you don't need to capture global or namespace variables. They will be bound on lambda body definition time.\nType is closure, function-like object. It is local class type.\nType is unique for each lambda (else template instantiation mechanism might be confused)\nYou can create lambda variable with\nauto or std::function&lt;R(AL)&gt;, where R ‚Äî return type, AL ‚Äî lambda's arguments list\nWow!\nYou can't use auto variable until its type has been deduced!\nSo, option with function allows recursion!Wow!\nThe lambda that captures nothing can be assigned to a pointer to function of an appropriate type!\ndouble (*fp)(double) = [](double a){ return sqrt(a); }\nKinds of explicit conversion:\ntype-safe with {}\nnamed convertions: const_cast\nstatic_cast\nreinterpret_cast\ndynamic_cast C-style casts\nFunctional notation\nStroustrup tend to use homemade conversions with explicit exceptions!1template &lt;class T, class S&gt;2T narrow_cast(S v)3{4\tauto res = static_cast&lt;T&gt;(v);5\tif (static_cast&lt;S&gt;(res)!=v)6 throw runtime_error(\"narrow_cast&lt;&gt;() failed\");7\treturn res;8}Warn!\nYou cannot initialize float from non-constexpr int by {}! But it's possible with constexpr (e.g. with literal) that is fit into float: float f{1234}; // OK\nNote\nIn functional style cast you can't use full type without parentheses, use aliases:\n1int* ip; char* cp;2using iptr = int*;34ip = int*(cp); // error!5ip = iptr(cp); // OKdef\ncast is explicit type conversion Just few reinterpret_cast are portable!\nWarn\nThe result of reinterpret_cast is guaranteed to be usable only if its result is converted back to the exact original type.\nTo know\nreinterpret_cast is the kind of conversion that must be used for pointers to functions.\n(T)expr can cast pointer to obj to pointer to its private base. Never do that!For a built-in types T(expr) is equivalent to (T)expr so it may do cast char* -&gt; int, that is dangerous!\nAny other cases can be non portable!\nPrefer T{v} conversions and named casts!\nprefer ++lv over lv++\nuse resource handles (to avoid leaks, premature or double deletion)\nprefer scoped variables over one has been put on free store\navoid naked new / delete\nUse RAII\nkeep lambdas short and avoid their overuse\nbe careful about reference-capture\nlet the compiler deduce the return type of lambdas\nuse T{v} notation for construction\navoid explicit casts\nprefer named casts\nconsider homemade narrow_cast for safe run-time casts\nStrict rule\nAny name must be declared before its mentioning. No exceptions\nWarn\nThe semantic of argument passing are identical to the semantic of copy initialization! (there can be type checks and implicit types conversions)\nParts:\nname\nparams ()\nreturn type (maybe suffix -&gt; ...)\ninline\nconstexpr\nnoexcept\nstatic and others\n[[noreturn]] to indicate that func will not return using normal mechanism\nand for member-functions: virtual\noverride\nfinal\nstatic\nconst Must know\nDue to C compatibility a const ignored at the highest level of an argument type:\n1void f(int);2void f(const int); // interpreted the same3// These two DO NOT overload each other\nUnnamed and unused arguments ensure that callers are not affected by the change\nSpecial things that follow most rules defined for functions but technically are not functions:\nconstructors don't return value\ncan initialize bases and members\ncan't have their address taken destructors can't be overloaded\ncan't have their address taken functors (function objects) are objects\ncan't be overloaded lambda expressions are shorthand for defining functors Useful! (From AI)\nYou can mark class as final at all: class SomeName final: Base {...}; Conversion functions do not contain return value For void function it is legal: return;\nNote\nSemantic of return (as of args passing) is identical to semantic of copy-init.\nFinally!\nreturn statement initialize a variable of the returned type!\nUseful form for templates:1void f(int* p);2void g(int* p)3{4\t// ...5\treturn g(p); // -&gt;void but we can use f()6}Exit function:\nreturn\nfalling off the end\nthrow\nuncaught exception in noexcept func calls std::terminate()\ncall to exit() Function that does not return normally can be marked [[noreturn]]\nGood explanation why inline in not strict command, but compiler's hint:\nIf inline func is recursive it may not terminate at all.\nTip\nTo make sure function body has been inlined use constexpr\nInteresting and important!\nTo inline compiler must see definition of inline function (not just have .o file)!\ninline functions have address and their static variables!\nWarn\nIf an inline function is defined in more than one translation unit, its definition in the different translation units must be identical!\nHave the definitions differed across translation units, the compiler would choose one arbitrarily (UB)!\ndef\nconstexpr means ¬´should be usable in a constant expression when given constant expressions as arguments¬ª\nWarn\nRules for constexpr constructors differ over common. There, only simple initialization of members is allowed.\nReminder\nLiteral type is a type with constexpr constructor\nImportant!\nIf some variable is not declared with constexpr but initialized with such one, compiler may interpret its as constexpr for compile-time computations.\nReminder: we can have run-time branches, which are not evaluated at compile time:1constexpr int check(int a)2{3\treturn (low &lt;= a &amp;&amp; a &lt; high) ? a : runtime(a);4}def\nA construct [[...]] is called an attribute. It specifies some implementation-dependent property about the syntactic entity that follows it.\nStd [[noreturn]] indicate that function never returns. If not ‚Äî UB!Reminder\nTo initialize local static only once use constinit\nLocal variables are initialized when execution reaches its definition.Note\nStandard protects local static initialization! It will be initialized only once. But further use-access from many threads is not protected! Avoid recursively defined local static!\nNote\nLocal static variables are useful for avoiding order dependencies among nonlocal variables (the problem is it's unknown which global static is initialized first) Reminder: the scope of a label (out:) is the complete function\n<br>Bible:\nThe semantic of argument passing are copy-init! see: <a data-href=\"‚ö°Ô∏è Initialization\" href=\"engineering/c++-essentials/‚ö°Ô∏è-initialization.html\" class=\"internal-link\" target=\"_self\" rel=\"noopener nofollow\">‚ö°Ô∏è Initialization</a>\nNote, there are:\nspecial rules for passing arrays\nfacility for passing unchecked arguments (c-style variadics)\nfacility for specifying default arguments\nfacility for using {}\nseveral ways of passing to template functions\nIn most cases you should avoid reference-passing arguments, expect for large object for efficiency (then use const T&amp;)\nNote: the arguments passing is not an assignment (in contrast of initialization). It's important for const args, &amp;/&amp;&amp; args, and user-defined types.\nYou need to remember\nLiteral, constant and conversion-requiring arguments can be passed through const T&amp; but not through T&amp;!\nüëÜüèº explanation to study!\nWhen implicit conversion is needed, the compiler may create tmp object! That is why we need const ‚Äî to prevent modification of tmp object!\nSo, you must understand\nCasts do result into tmp! It does not affect the origin\nSo, conversions for non-const reference arguments are disallowed. It helps to avoid the possibility of silly mistakes with temporaries.\nReminder: passing via reference is passing by lvalue-reference!\nNote\nRvalue references are used (in normal way) for changing, so it's extremely rare case of use it with const\nNote\nFor template type T param type T&amp;&amp; is not the same as X&amp;&amp; (with certain X)!\nGeneral ¬´rules of thumb¬ª for arguments passing:\nuse pass-by-value for small objects\nuse pass-by-const-reference to pass large objects for reading only\nreturn rather than modify \"res-param\"\nuse rvalue references to implement move or forwarding\nuse pass-by-pointer if there is \"nothing\" possible (via nullptr)\nuse pass-by-reference only if you have to (pass by pointer is often less obscure and error-prone when you need modifications)\nReminder\nArrays are passed by pointer! In fact, pointer is passed by value\nSomething incredible new!\nYou can pass arrays by reference! It saves the size of an array completely!\n1template&lt;typename T, int N&gt;2void printarr(const T (&amp;arr)[N]){3\tcout &lt;&lt; \"size: \" &lt;&lt; sizeof(arr)/sizeof(T) &lt;&lt; endl; // or just N4 for (const auto&amp; el : arr)5 cout &lt;&lt; el &lt;&lt; \", \";6 cout &lt;&lt;endl;7}Warn: there are as many functions generated by compiler as there are calls to printarr with distinct array types.Note\ninitializer_list&lt;T&gt; argument takes priority if there is a possible ambiguity:\n1template&lt;typename T&gt;2void f(initializer_list&lt;T&gt; l) { /*...*/ } // (1)34struct S {int a; string s;};5void f(S s) { /*...*/ } // (2)67template &lt;typename T, int N&gt;8void f(const T (&amp;arr)[N]) { /*...*/ } // (3)910void f(int i) { /*...*/ } // (4)1112int main()13{14\tf({1,2,3}); // calls (1)15\tf({1, 2}); // calls (1)16\tf({1}); // calls (1)17\tf({1, \"hi\"}); // calls (2)!18}There are 3 ways for variadics:\nuse variadic template\nuse initializer_list as argument type\nuse &lt;cstdarg&gt; and ... param Use ... only if you have to. There are many alternatives: overloads, default args, initializer_list, variadic template.\nPossible form\nvoid f (int a ...); // with no ,\nRemind the basic macros for C-style variadics:\nva_list\nva_start\nva_arg\nva_end\nIn-code example:\n1void f(int x, ...)2{3\tva_list ap;4\tva_start(ap, x);5\tchar* str = va_arg(ap, char*); // repeatedly...6\tva_end(ap); // necessary!7}1complex::complex(double r, double i): re{r}, im{i} {}2complex::complex(double r): complex{r, 0} {} // interesing!3complex::complex(): complex{0,0} {} // interesting!And we can even more:1complex::complex(double r={}, double i={}): re{r}, im{i} {}Note\nOnly = syntax for defaults!\nFrom AI\nDefaults are substituted in place of calling!\nExample with static default:1class X{2public:3\tstatic int def_arg;4\tvoid f(int =def_arg); // possible without name (!)5\t// In fact, ^^^^^^^ is &amp;X::def_arg6\t//...7};89int X::def_arg = 7;1011void g(X&amp; a)12{13\ta.f(); // f(7) or f(0) (!)14\ta.def_arg = 9;15\ta.f(); // f(9)16}So, advice\nAvoid default arguments that can change value! Default arguments may be provided for trailing arguments only\nDefault argument cannot be repeated or change in the same scope:1void f(int x = 7);2void f(int x = 7); // or = 9 ERROR: redefinition of the default argument34void g()5{6\tvoid f(int x = 9); // valid! Hides global scope declarations 7}Note: it's error-prone technique.Important\nWhen the compiler cannot to determine the best match, compile-time error occurs:\n1void print(double);2void print(long);34int main()5{6\tprint(1L); // print(long)7\tprint(1.0); // print(double)8\tprint(1); // error9}Approximated rules of AOR (in order):\nExact match (with a few possible trivial conversions: array-&gt;pointer, func-&gt;func*, T-&gt;constT)\nMatch with promotions (bool/char/short -&gt; int, unsigned promotions, float -&gt; double)\nMath with std conversions (e.g., int-&gt;double, double-&gt;int, double-&gt;long double, Derived -&gt; Base, T -&gt; void, int -&gt; unsigned int)\nMatch with user-defined conversions (e.g., double -&gt; complex&lt;double&gt;)\nMatch using the ellipsis ... (c-style) in a function declaration Overloading does not work with return type.\nOverloading works only with an overload set. By default, that means the functions of a single scope.Note\nAny name is searched in sequential order until first match:\nis in local? -[no]-&gt; is in enclosing? -[no]-&gt; is in global?\nIf name is defined, it \"is here\", and then AOR is occurring \"here\", not much more.\nAnd even more info from AI:From standard\nWhen a name is declared in a local scope, it hides any declaration of that name in outer scopes. Hidden declarations are not considered during overload resolution. Example:\n1void f(int);2void f(double);34void g() {5 void f(double);6 f(2); // call f(double)7}89void h() {10\tusing ::f; // pay the attention! it forces to grabs global declarations11 void f(double);12 f(2); // call f(int)13}Between classes in hierarchy (and namespaces) there is no overloading! If you want to, you need use using declarations, directives or Argument-dependent lookup (ADL). For example (provided by AI):1namespace A {2 struct X {};3 void f(X) { std::cout &lt;&lt; \"A::f(X)\\n\"; }4 void g(int) { std::cout &lt;&lt; \"A::g(int)\\n\"; }5}67namespace B {8 struct Y {};9 void f(Y) { std::cout &lt;&lt; \"B::f(Y)\\n\"; }10 void g(double) { std::cout &lt;&lt; \"B::g(double)\\n\"; }11}1213using A::g; // using-declaration14using namespace B; // using-directive1516struct Base {17 void h(int) { std::cout &lt;&lt; \"Base::h(int)\\n\"; }18};1920struct Derived : Base {21 using Base::h; 22 void h(double) { std::cout &lt;&lt; \"Derived::h(double)\\n\"; }23};2425int main() {26 A::X x; B::Y y;2728 f(x); // ADL ‚Üí A::f(X)29 f(y); // ADL ‚Üí B::f(Y)3031 g(42); // using-declaration ‚Üí A::g(int)32 g(3.14); // using-directive ‚Üí B::g(double)3334 Derived d;35 d.h(10); // using Base::h ‚Üí Base::h(int)36 d.h(2.71); // Derived::h(double)37}Rule is:\nA function that is the best match for one arg and not worse for all others is called.\nConsider ambiguity:1void f(char);2void f(long);34void work(int i)5{6\tf(i); // ?! Ambiguity7}You can solve this with:1inline void f(int i) { f(long{i}); }2// or3f(static_cast&lt;long&gt;(123));Tip\nYou can appreciate frequently ambiguity error reports as useful indicator of design error\nDocumenting preconditions and postconditions is important! In fact, it is usually hard to check correctness.Hint\nYou can call function by its address. So, dereferencing is optional. Similarly, using &amp; to get address of a function is optional.\nYou can use the nastiest cast reinterpret_cast to change type of a function pointed to:1int (*f)(int*);2void (*g)(void) = reinterpret_cast&lt;void (*)(void)&gt;(f);Caution: unpredictable, system-dependent!Warn\nIf function is overloaded, auto can fail on type deducing!\n1auto funcpointer = f; // may fail if f is overloadedRemember: pointer to member-function has a quite different semantic.Danger!\nA pointer to a noexcept function should be declared noexcept if you want to preserve useful information:\n1void f(int) noexcept;23void (*fp)(int) noexcept = f;You must\nYou must reflect the linkage of a function in a pointer to it. And it's impossible in alias:\n1using cfp = extern \"C\" void(int); // error!2// ^^^^^^^^^^ must be specifiedInteresting\nBecause macros rearrange text of the program before the compiler sees it, they are a major problem for support tools.\nIf you use macros, you can expect inferior service from: debuggers\ncross-reference tools\nprofilers Note\nMacros cannot have: overloads\nrecursion Useful techniques:\n#define CASE break;case\n#define FOREVER for(;;)\n`#define INCR_xx (::xx)++\nTip\nYou should use /* */ comments rather than // in macros for backward compatibility.\nReminder\nTokenizer does its work before preprocessor. Thus, macros work with tokens (not symbols). And the same takes place inside the macro body!\nMacro can be variadic:1#define err_print(...) fprintf(stderr, \"error: %s %d\\n\", __VA_ARGS__)2// __VA_ARGS__ extends to arguments that were actually passed, as a stringThe ellipsis ... means that __VA_ARGS__ represents the argumentsPredefined by compiler:\n__cplusplus standard version (and undefined if in C)\n__DATE__ in format: MM dd yyyy\n__TIME__ in format: hh:mm:ss\n__FILE__ path of current source file\n__LINE__ source line number\n__func__ C-style string name of current function\n__STDC_HOSTED__ is 1 if implementation is hosted, and 0 otherwise\nConditionally predefined by implementation:\n__STDC__ is defined in C, is not in C++\n__STDC_MB_MIGHT_NEQ_WC__ is 1 if possibly 'a' != L'a' (for all in basic character set)\n__STDCPP_STRICT_POINTER_SAFETY__ is 1 if the implementation has strict pointer safety\n__STDCPP_THREADS__ is 1 if a program can have more than one thread of execution, is undefined otherwise\nNote\nMost implementations allow a user to define arbitrary macros on the command line or in some other form of compile-time environment. For example define NDEBUG to turn on macro assert(...)\nImplementations often provide additional facilities. Standardized syntax for enabling is:1#pragma ... ... ...\nkeep functions short\ndon't reference or point to locals\nuse constexpr if func is compile-time computable\nuse attributes (e.g., [[noreturn]])\nuse const!\nuse initializer_list for similar-typed variable length lists\nwhen overload over integers, provide functions to eliminate ambiguities\nprefer functors and lambdas over function pointers\nuse CAPITALIZED_NAMES for macros Any copyable/movable type is valid to be thrown as exception, but you should use user-defined types!\nThe exception-handling mechanism:\nIs an alternative to traditional techniques (which are insufficient, inelegant, error-prone)\nIs complete; it can be used to handle all errors\nAllows to explicitly separate error-handling code from ordinary code\nSupports a more regular style of error handling\nUser-defined type of exception, example:1struct Range_error{};2void f(int n)3{4\tif (n&lt;0 || n&gt;max) throw Range_error{};5\t// ...6}There are some ways:Note: these ways are not general ;(\nNote: in some programs you will find an unsystematic combination of these approaches(\nTip\nnoexcept explicitly make the desire of terminate on exception\nInteresting\n\"Exceptional\" doesn't mean \"almost never happens\" or \"disastrous\"\nNote\nExceptions are not about asynchronous event. For these events there are defined mechanisms such as signals to deal with asynchrony. They are system-dependent.\nThere are programs that for practical and historical reasons cannot use exceptions. For example:\nIn a time-critical component of an embedded system we must use alternative error-handling methods\nIn a large old programs with naked new/delete you often find no throw/catch\nTwo useful techniques for old programs:\nMimic RAII (with .invalid() that returns error code)\nUse pair&lt;Value, Error_code&gt; on return\nTo know\nThe exception-handling mechanism is inherently nonlocal, so you should: adherence to an overall strategy\ntake simple strategy (otherwise it won't be adhered)\nagree on strategy when development starts Tip\nNot every function should be a firewall Too great work to do\nToo great overhead and tendency to overcheck the same errors\nFunctions from other languages won't obey the rules\nPure local reliability leads to huge complexities Different parts should appear to follow general error-handling strategy even if it internally follows a different strategy. So, sometimes you should convert errno to throw ... and vice versa.\nIn principle (but hard doing so):\nException handling can be implemented without overhead when no exceptions are thrown\nIf exception is thrown, it costs not much more than usual function call\nRemember: traditional methods take not less overhead!With C-functions be careful considering they throw or not any exceptions.def\nexception-safe operation is that which leaves the program in a valid state when throws. Often we think: what is a valid state?\nAvoid implicit invariants! The compiler cannot to discover and maintain then.Std library guarantees (one of the following):\nBasic guarantee for all operations: no leaks.\nThe basic invariant of every built-in and std-lib type guarantee that you can destroy and object or assign to it after every std-lib operation\nStrong guarantee for key operations: operation succeeds or has no effect.\nProvided for key operations, such as push_back(), insert(), or uninitialized_copy()\nNothrow guarantee for some operations: them are guaranteed not to throw an exception.\nProvided for a few simple operations, such as swap() or pop_back()\nIn return, these guarantees are presented on the condition that (all of):\nuser-supplied operations do not leave container elements in invalid states\nuser-supplied operations do not leak resources\ndestructors do not throw exceptions Moreover, an operation that throws an exception must not only leave its operands well-defined states but also ensure that every resource that it acquired is (eventually) released.\n(Often guarded by language facility of destructors on throw) Example of system resources: files, locks, network connections, threads.\nTip (from AI)\nMain idea: don't do releasing manually. Let the compiler do work for you.\nException handling mechanisms is friendly to RAII.Must to know\nDestructors are implicitly called only for objects that were correctly constructed! If your constructor fails, it should restore state of program to primal state as far as possible. It can be achieved by RAII members automatically.\nTip\nIf you need dynamically construct an object, use unique_ptr and shared_ptr for RAII.\nRAII can help to realize finally action:1template &lt;typename F&gt;2struct Final_action {3\tFinal_action(F f): clean{f} {}4\t~Final_action() {clean();}5\tF clean;6};78template &lt;typename F&gt;9Final_action&lt;F&gt; finally(F f)10{ return Final_action&lt;F&gt;{f}; }1112// usage:13int main(){14\tauto fact = finally(15 [](){ cout&lt;&lt;\"finally\"&lt;&lt;endl; } // you can capture here ;)16\t);17\tcout &lt;&lt; \"do work...\" &lt;&lt; endl;18}\nNote: it is like an defer in golang\nWhat if precondition fails? There are 2 points of view:\nJust don't do that. Assume that caller ever meet preconditions\nTerminate the program. Just terminate routine\nErrors may be later eliminated by improved design, debugging and testing. First approach improves performance (eliminate millions of tests) but require to deal with many testing errors. Second approach tends to be used in systems where you can just restart (part of a bigger system). In real programs you can find all three ways (exceptions, ingnoring, terminating). You can throw without real expectation of exceptions.Real solution ‚Äî assert!\nchose between compile-time and run-time\nchose action for run-time: throw, ignore, terminate()\nno generate code for assert until there is debug flag, level of checking or mask.\navoid verbose or complicated asserts\nTip\nThe standard offers two simple mechanisms: &lt;cassert&gt; with assert(A) macro working when NDEBUG is undefined. If assertion fails, compiler writes out: cond, func name, file name, line no. and terminates program\nstatic_assert(A, message) provided by language for compile-time\nTip\nAvoid \"ordinary checking code\" like if (debug_level&gt;2 &amp;&amp; ...\n<br>Furthermore, Stroustrup suggest specialized user-defined approach for compile-time omitting high-level assertion. See <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/massert.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/massert.cpp\" target=\"_self\">code</a>.\nIn C++20 I can suggest more elegant variant:1template &lt;int level = 1&gt;2constexpr void assert(bool cond, const char *message = \"Assertion failed\")3{4 if constexpr (!(level &lt; assertion_level)) // this may truncate func5 return;6 else7 {8 if (cond)9 return;10 if (assertion_mode == Mode::throw_)11 throw runtime_error(message);12 if (assertion_mode == Mode::terminate_)13 terminate();14 }15}Tip\nIt is wise to have some tests in the final version of a program with the most-important assertion level. For library general code you should prefer reporting errors over terminating.\nYou can throw an exception of any type that can be copied or moved.\nYou cannot throw typename:1throw MyErrorClass; // invalid!You need to know\nOn throw temporary object is created. In process of stack unwinding this object may be copied, moved, or even be untouched (due to the compiler optimizations)\nStroustrup says:\nThe semantics of exception propagation are those of initialization, so objects of types with move semantics are not expensive to throw.\nFrom AI\nRTTI is active only for: exceptions, virtual classes, and maybe for typeid.\nYou can use std-lib exceptions hierarchy (exception, runtime_error, out_of_range, etc.) with inheritance and .what() or just for instantiating.Used for:\nclarity for programmers\noptimization ability for compiler\nImportant\nOn throw from noexcept destructors of calling function are not invoked. Invocation of local (to throw) destructors is implementation-defined.\nFrom AI\nWays to terminate program: exit, quick_exit, terminate, abort.\nReminder!\nnoexcept can be supplied with additional bool: noexcept(true). You can conditionally define it with any constexpr:\ntemplate&lt;typename T&gt;\nvoid action(T&amp; x) noexcept(Is_pod&lt;T&gt;());\nWow again!\nAlso you can use noexcept as operator with expr: noexcept(expr). It looks at all operations in expr and if all are noexcept returns true (false otherwise). It does not evaluate or look inside definitions of those operations.\nIn older C++ code you may find exception specifications:1void f(int) throw(Bad, Worse);2void g(int) throw(); // may not throw, noexcept equivalentDeprecated, deleted. Don't use itFor:1void f()2{3\ttry { throw E{}; }4\tcatch (H) {...}5}The handler is invoked if: (unambiguous public base) or If H is a reference and (1) or (2) holds for the type to which H refers Also you can declare H as const Wow\nExceptions require memory.\nIt's guaranteed that there is enough memory to hold out_of_memory exception (whatever strategy of exception placement implementation apply).\nImportant (from AI)\nUse &amp; in catch for using polymorphic types!\nFrom AI\nThere is stack of \"waiting exceptions\" if during an exception handling another occurs.\nInstrument\nthrow; rethrows current_exception() if any, terminate() otherwise.\nWarn\nIf you catch and rethrow Base exception, you have sliced exception. Then caller couldn't have caught Derived exception!\nFor std::exception from &lt;stdexcept&gt; you can catch (exception&amp; err). But for any:1catch(...)Important\nUse correct order of catch clauses: from more specific to more general.\nNew construction:1void f()2try {34} catch (...) {56}Especially useful for constructors:1A::A()2try3\t:member1{...}, member2{...} // (1)4{5\t// ... (2)6} catch (...) {78}<br>Note\nIn second case (try before member initializer list :...) if exception occurs in (1) or (2) it would be propagated to caller of constructor (despite we catch)! See <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/ctorcatch.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/ctorcatch.cpp\" target=\"_self\">more</a>.\nMust to know\nSome already-initialized members will be destructed on exception thrown, others ‚Äî won't be constructed at all.\nUseful techniques:\nDon't throw while handling an exception\nDon't throw if that cannot be caught\nSpecific rules for calling terminate() (take note: C++11):\nno suitable catch\nthrow in noexcept\nwhen destructor throws on stack unwinding\nwhen code on throw propagation throws\nthrow; when there is no current_exception()\nwhen destructor for a statically allocated or thread-local object throws\nwhen init for a statically allocated or thread-local object throws\nwhen a function from atexit() throws\nTake a note\nterminate() call abort(). You can redefine it by set_terminate() from &lt;exception&gt;. For example:\n1using termfunc = void(*)();2[[noreturn]] void my_handler()3{ ... }4termfunc old = set_terminate(my_handler);Danger\nIf terminate() is entered, you should assume all program data structures to be corrupted (even cerr). If you try return or throw from terminate ‚Äî abort will be called immediately.\nNote\nabort() indicates abnormal exit. exit() can indicate normal. Don't consider anything about destructors on terminate()\nNote\nThere is no way of catching exceptions thrown during init/del namespace and thread-local variables. (Another reason to avoid globals)\nIf a thread doesn't catch any exception the whole program will be terminated! To avoid use catch(...) or transfer exception to user-thread via current_exception() as packaged_task does:1promise.set_exception(current_exception());<br>See full example <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/vector.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/vector.cpp\" target=\"_self\">here</a>.Useful principles:\nNever let go of a piece of information before its replacement is ready for use\nAlways leave objects in valid states when (re)throwing an exception Even innocent-looking operations might throw (&lt;, =, sort(), etc.)\nProblems you may not sight:\nallocator::allocate may throw if there is no memory left\nT copy-ctor may throw\n(copying of allocator rarely may throw too, if not std)\nImportant techniques from full example:1\t::new (static_cast&lt;void*&gt;(&amp;*p)) T(x);Pay attention to ::new to access global and &amp;*p for iterator that is not a pointer.Use std-lib implementations:1uninitialized_fill(), uninitialized_fill_n(), uninitialized_copy()Stroustrup\nException transparency is often the best policy for templates and other \"thin\" layers of software.\nTip\nAll std lib algorithms (e.g. uninitialized_fill, uninitialized_copy, ...) provide important guarantee: sub-objects (bases, members) that have already been completely constructed will be properly destroyed if any exception occurs.\nPay attention\nThere is self-assignment v=v.\nWarn\nstd::copy does not offer the strong exception-safety guarantee. Thus, after unsuccessful operation you might have some elements copied and some not. However, operands still stay in valid state.\nTip\nstd lib vector has more efficient operator= but with weaker exception-safety guarantee (basic)\nMay be useful\nStd lib provide move_if_noexcept\nMy thought\nIf you don't know what to do about exception-safety, on throw try remain object unchanged or at least valid.\nHelpful\nUse ordering and RAII rather than try/except blocks. develop error-handling strategy early in design\nthrow an exception to indicate you can't perform an assigned task\nuse user-defined types for exceptions\nif you cannot use exceptions, mimic them\n<br>always provide the <a data-tooltip-position=\"top\" aria-label=\"TC++PL (III) > 13.2 Exception Guarantees\" data-href=\"TC++PL (III)#13.2 Exception Guarantees\" href=\"engineering/book-notes/tc++pl-(iii).html\" class=\"internal-link\" target=\"_self\" rel=\"noopener nofollow\">basic guarantee</a>\nalways try for strong guarantee\nlet the constructor establish invariant and throw if it cannot\nrelease locally owned resources before throw\nminimize usage of try/except blocks\nalways prefer compile-time checking\nuse noexcept\ncatch hierarchical exceptions by reference\ndon't assume that every exception is derived from std::exception\nleave operands in valid states before throwing an exception from an assignment\nnever let an exception escape from a destructor\nkeep ordinary code and error-handling one separate\nremember: on throw naked-allocated (new) objects won't be destroyed automatically\nassume that every exception that can be thrown will be thrown\nlibrary should not terminate, use throw and let a caller decide\nlibrary should not log, use throw and let a caller decide\nWe need to cope with name clashes problemExample:1namespace Graphic_lib{2\tclass Shape {...};3\tclass Line : public Shape {...}; // not requires explicit Graphic_lib::4}5namespace Text_lib{6\tclass Line{...};7}Good practice\nPlace names in common namespace when they bring similar facilities. Classes are (kinds of) namespaces, but not literally.\n1using std::string; // means 'string' is 'std::string'Note\nIt introduces synonym into a scope using can be used with class hierarchies\n1using namespace std;Oops\nIt works!\n1namespace A{2\tvoid f(){...}3\tvoid afunc(){...}4}5namespace B{6\tvoid f(){...}7\tvoid bfunc(){...}8}910using namespace A;11using namespace B;12afunc(); // OK13bfunc(); // OK14f(); // errorFor this automatic kind of lookup, namespace and function must be in scope and declared before ADL.When we call function, we find consequently:\nin enclosing scope\nin namespaces of arguments (including classes and bases)\nExample:1namespace Chrono{2\tclass Date {...};3\tbool operator==(const Date&amp;, const string&amp;);4}56void f(Chrono::Date d, string s)7{8\tif (d==s){ // find in f-scope, then in Chrono:: and std::9 ...10\t}11}Note\nThe best match is called\nTo know\nWhen member calls, other members of the same class and its bases are preferred over ADL.\nwarn: operators follow a different rule!\n1namespace N{2\tstruct S{...};3\tvoid f(S);4}5struct Base{6\tvoid f(N::S);7};8struct Derived: Base{9\tvoid g(N::S);10\tvoid work(N::S x)11\t{12 f(x); // Base::f13 g(x); // Derived::g14\t}15};Standard says:\nIf arg is a class member, the associated namespaces are the class itself (and its bases) and the class's enclosing namespaces\nIf arg is a namespace member, the associated namespaces are the enclosing namespaces\nIf arg is a built-in type, there are no associated namespaces\nBe careful\nFor members of namespace don't assume it behaves as for classes:\n1namespace N{2\tclass X{...};3\tvoid f(X, int);4}56namespace SomewhereAway{7\tN::X x;8\tvoid f(N::X, unsigned); // won't called9\tvoid work()10\t{11 f(x, 1); // N::f by overload resolution (!)12\t}13}\nIf replace namespace to struct it will call SomewhereAway::f\nMy research\nFor unqualified name the compiler uses union () of ordinary lookup and ADL and then overload resolution. Except for: class-member lookup!\nFrom AI:\nYou can use anonymous namespace to hide some names from global\nUseful\nSeparate different kinds of interfaces:\n1namespace Parser { // user interface2\tdouble expr(bool);3}4namespace Parser { // implementer interface5\tdouble prim(bool);6\tdouble term(bool);7\tdouble expr(bool);89\tusing namespace Lexer;10\tusing Error::error;11\tusing Table::table;12}So, we have:\nparser (userinterface)parser(implementerinterface)Parser codeDriver codeAlso, we can (but not necessarily) use different names:1namespace Parser {2\tdouble expr(bool);3}4namespace Parser_impl { // changed5\tusing namespace Parser; // key line (!)67\tdouble prim(bool);8\tdouble term(bool);9\tdouble expr(bool);1011\tusing namespace Lexer;12\tusing Error::error;13\tusing Table::table;14}Suddenly!\nSyntax for namespace aliases:\n1namespace SomeLongNamedNamespace{ /*...*/ }2namespace slnn = SomeLongNamedNamespace;Important\nIn qualified lookup the compiler should find the composed fields, but for context where you need actual name it is treated as error:\n1namespace N{2 int f();3}45namespace M{6 using N::f; // or using namespace N7}89int M::f(){} // error: 'f' is not actual member of MYou can use selection (using-declaration) with over composition (using-directive) to resolve name clashes and ambiguities:1namespace A{2\tint common;3\tint a;4}5namespace B{6\tint common;7\tint b;8}9namespace MyLib{10\tusing namespace A;11\tusing namespace B;1213\tusing A::common; // resolve clash for 'common'14\t// can use a (A::a) and b (B::b)15}My important note:1void work(){2\tusing MyLib::common;3\tprint(common); // OK, prints A::common (1)4}5void work_(){6\tusing namespace MyLib;7\tprint(common); // ‚Äî ERROR (2)8\tprint(MyLib::common); // OK (3)9}I've got so:\nUnqualified lookup will gather all names (so we have error in (2))\nQualified lookup does not touch using-directives if not necessary (so all ok in (3))\nReminder\nYou can make template with using:\n1template &lt;typename T&gt;2using Vector = MyLib::Vector&lt;T&gt;;\nThe main point is you can use using namespace std; using namespace estd; (extended std) and let the lookup mechanics to find appropriate sort(...)\nWow!1namespace PopularLib{2\tinline namespace V3_2{3 double f(double);4 // ...5\t}6\tnamespace V3_0{7 double f(double);8\t}9}\ninline namespace extends to be PopularLib itself, that is, using namespace PopularLib; is equivalent to use using namespace PopularLib::V3_2;\nThere is not the best trick for avoiding disadvantages of inline-versioning:1// V3_common.h2\t// ... lots of declarations ...34// V3_2.h5\tnamespace V3_2{6 double f(double);7 #include \"V3_common.h\"8\t}910// V3_0.h11\tnamespace V3_0{12 double f(double);13 #include \"V3_common.h\"14\t}1516// Popular.h17\tnamespace Popular{18 inline19 #include \"V3_2.h\"20 #include \"V3_0.h\"21 #include ...22\t}\nYou should avoid that approach!\nNamespaces can be nested and names lookup works to access enclosing names:1void h();2namespace X{3\tvoid g();4\tnamespace Y{5 void f();6 void ff();7\t}8}910void X::Y::ff()11{12\tf(); g(); h(); // OK13}1415void X::g()16{17\tf(); // no f() in X18\tY::f(); // OK: Y is visible, take Y::f19}Note\nNested structures embed their names to enclosing structure (or class).\nBut namespaces never do!\nFinally\nYou can hide some names from outer access:\n1namespace { // inaccessible from outside2\tint a;3\tvoid f() {...}4}56void work()7{8\tcout &lt;&lt; a &lt;&lt; endl; // valid (!)9}Pay attention!\nThat (!)-line is valid! It's possible because unnamed namespace indeed is extended to:\n1namespace $$${2\t// ...3}4using namespace $$$; // &lt;- WOW!To carefully avoid polluting global namespace C++ wrappers for C (e.g., &lt;cstdio&gt; for &lt;stdio.h&gt;) use using-declarations (not using-directive)\nplace every nonlocal name (except main()) in some namespace\ndesign namespaces avoiding accidentally gaining access to unrelated namespaces (e.g., do not using namespace SomeHugeLib; in your public library namespace)\navoid very short names for namespaces\nuse separate namespaces for interfaces and implementations\nlimit usage of using-directives with: transition, foundational libs (such as std) or within local scopes\ndon't put using-directive in .h files Interesting fact: there are systems that do not use traditional approach: with files.\nKeep in mind\nEven for small change in some dependent file you need to recompile the entire program.\nKeeping program separated by many files allow significantly reduce complete compile time.\ndef\nTranslation unit is a result of preprocessing (i.e. macros done)\nWarning\nLinker is sometimes called a loader\nMy research\nTypes of lib linkage: 1.static linking, 2. dynamic linking, 3. run-time dynamic loading.\n(2) and (3) are also known as load-time dynamic linking and explicit dynamic loading respectively.\nimportant: for both (2) and (3) you need to have declared types in user-program. Moreover, if there is user-defined types in dynlib it's essential to use interfaces (abstract classes) and factory functions.\ndef\nPhysical structure is organization of a program into source files.\nNames of\nfunctions,\nclasses,\ntemplates,\nvariables,\nnamespaces,\nenumerations and enumerators\nmust be used consistently across all translation units (unless the are explicitly specified to be local).\nInteresting note\nAdded linkage specification (e.g., extern \"C\") we have exhaustive list of all top-level entities. My research\nInteresting facts you need to know! Class members are considered declared on class open. Also, member-functions are inline by default:\n1class A{2 public:3 void f(){g();} // you can access g() if it's already declared4 void g(){} // is inline, as well as f()5};Must to know!\nconst and constexpr variables have internal linkage by default! It's very important for declarations in .h files. Use extern explicitly for only once occurrence!\nconstexpr functions implicitly have inline, so they can be safely defined in .h Reminder: finally in result you have only functions and variables for external linkage. No types, templates, namespaces or something else.\nLocal variables and other names which compiler does not see are said to have no linkage.Avoid this banned (but possible) construction:1 extern inline int f();2//^^^^^^^^^^^^^ - bad practiceFor localization use:\nunnamed namespace\nstatic\nAs a rule of thumb, a header (.h) may contain\nnamed namespace\ninline namespace\ntype def\ntemplate decl or/and def\nfunction decl\ninline function def\nconstexpr function def\ndata decl\nconst and constexpr defs\nenums\nname decl (e.g., class Matrix;)\ntype aliases\nstatic asserts\n#include, #define, #ifdef and other macros\ncomments\nStuffs you should ever avoid in headers:\nordinary function def\ndata def\naggregate def (e.g. short table[] = {1,2,3};)\nunnamed namespace\nusing-directives\nRecommendation: #include only complete defs and decls.In fact, this rule \"ODR\" is phrased in more complicated and subtle manner that they can expect.\nYou may have 2 identical definitions of class/template/inline-func if and only if:\nthey appear in different TU, and\nthey are token-for-token identical, and\nthe meaning of those tokens are the same in both TU\nRemember\nChecking against inconsistent class definitions in separate translation units is beyond the ability of most C++ implementations. So it's up to programer not to violate consistence of type definitions between files.\nNote: for std-lib headers #include&lt;...&gt; may not actually find and paste some text!For every C lib like &lt;LIB.h&gt; in C++ there is &lt;cLIB&gt; header.For:1extern \"C\" char* strcpy(char*, const char*);\"C\" does not mean language, but linkage specification only. It may be used for linkage with Fortran or assembly as well (if they conform to the conventions of a C implementation).Note1extern \"C\" int g; // just declaration2extern \"C\" {3\tint g; // (!) definition4\textern int g; // just declaration too, use extern again5}Suddenly1namespace MyLib{2\textern \"C\" double f(double);3}In C++ we should use MyLib::f but for linker this name will still be plain f.When linkage is specified for a declaration, the specified linkage applies to all: function types, function names, variable names introduced by the declaration:1typedef int (*FT)(const void*); // FT has C++ linkage2extern \"C\" typedef int (*CFT)(const void*); // CFT has C linkageIf something waits for extern-C function pointer, you cannot pass &amp; of C++ function, and vice versa.<br>See <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch15/calc_oneh/prg.cpp\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch15/calc_oneh/prg.cpp\" target=\"_self\">full example</a>.<br>See <a data-tooltip-position=\"top\" aria-label=\"file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch15/calc_multh/modules/parser/parser_impl.h\" rel=\"noopener nofollow\" class=\"external-link is-unresolved\" href=\"file:/Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch15/calc_multh/modules/parser/parser_impl.h\" target=\"_self\">full example</a>. Pay attention to including required dependencies in parser_impl.h header, it's a good practice.Useful tip: you can import each header as deep as it indeed is needed.Tip\nUse multi-header organization for large real programs to separate program into relatively small chunk (as small as possible) which programmer could cover in mind. It allow to maintain easier and compile faster. There is dependency analyzers. You can use this tool.\nInteresting approach: have two public interfaces: for average users, and for expert users.In general, approaches and number of headers are dependent on concrete cases.More often it's impractical and tedious to reorganize program to remove redundant declarations from multiple includes. So, we need find way to allow repeated inclusions of headers.Use the standard solution: #ifndef SOME_HEADER, #define SOME_HEADER, #endifRemember\nThere is no namespaces for macros' names, so prefer long and ugly names! Even having include-guards on each header avoid ubiquitous inclusions! Note: if you define main() without args, you can't then use form with args.\nIf there are global variables or uncaught exceptions things with main() are not so simple.You must know:\nThere is no guaranteed order of globals' initialization among different TU\nThere is no possibility to catch an exception on globals' initialization Several techniques exist for enforcing initialization order for globals among different TU, but none are both portable and efficient.\nRemark\nDynamically linked libraries don't coexist happily with globals (that have complicated dependencies)\nOne useful technique:1int&amp; x() // use ref!2{3\tstatic int x_ = 0;4\treturn x_;5}You have x() that is initialized on first invocation.Caution\nUnfortunately, this technique is not thread-safe.\nKeep in mind\nInitialization of local function static variable (since C++11) is thread-safe. But subsequent operations may cause a data race\nBut...\nGlobal and member static initialization isn't thread safe at all! Use constexpr for compile-time initialization.\nPay attention!\nConstexpr variables initialized by constexpr cannot depend on the values from other TU!\nStd\nThe initialization of a statically allocated object with a constexpr (even implicit) is done at link time!\nTo avoid problems of multi-thread access to statically allocated variable before it have finished its initializations you should:\nminimize use of statically allocated objects\nkeep their initializations as simple as possible\navoid dependencies on dynamically initialized objects in other TU\nOther useful techniques in order:\nuse constexpr for initialize\nif use expressions, make sure they have no side effects\ninitialize in a known single-threaded \"startup phase\" of computation\nuse some form of mutual exclusion\nRepeat ways to terminate:\nreturn from main()\nexit()\nabort()\nthrow an uncaught exception\nviolate noexcept (so terminate())\nquick_exit()\nInfo\nexit(), quick_exit(), abort() are declared in &lt;cstdlib&gt; Stroustrup\nThere are other \"bad\" ways to terminate program, e.g. double_val / 0.0 in some old implementations.\nexit() calls destructors of statically allocated objects (that is useful), but try hard not to call exit() in destructors to avoid infinite recursion. Also, there is atexit(void(*)()). Take action to call on exit(), note: atexit() returns int meaning \"has it had problems?\".Rule\norder: T t1() -&gt; atexit(f) -&gt; T t2() -&gt; exit() -&gt; t2.~T() -&gt; f -&gt; t1.~T()\nquick_exit() and at_quick_exit() are similar, except that destructors are not involved.\ninclude header in file with implementation\ndon't define global entities with the same name and similar-but-different meanings in different TU\navoid non-inline functions defs in headers\nuse #include only for global and namespace scopes\n#include only complete declarations\nuse include guards\nmake headers self-contained (make sure they can be compiled by themselves)\ndistinguish between users' interfaces and implementers' interfaces\navoid nonlocal objects that require run-time init. Especially for code intended for use as part of non-C++ programs\n","aliases":[],"inlineTags":[],"frontmatterTags":[],"headers":[{"heading":"6. Types and Declarations","level":1,"id":"6._Types_and_Declarations_0"},{"heading":"The ISO C++ Standard","level":2,"id":"The_ISO_C++_Standard_0"},{"heading":"Implementations","level":2,"id":"Implementations_0"},{"heading":"The Basic Source Character Set","level":2,"id":"The_Basic_Source_Character_Set_0"},{"heading":"Types","level":2,"id":"Types_0"},{"heading":"Boolean","level":2,"id":"Boolean_0"},{"heading":"Char","level":2,"id":"Char_0"},{"heading":"Integer","level":2,"id":"Integer_0"},{"heading":"Float","level":2,"id":"Float_0"},{"heading":"Prefixes and Suffixes","level":2,"id":"Prefixes_and_Suffixes_0"},{"heading":"Sizes","level":2,"id":"Sizes_0"},{"heading":"Alignment","level":2,"id":"Alignment_0"},{"heading":"Declarations","level":2,"id":"Declarations_0"},{"heading":"The Structure of Declarations","level":2,"id":"The_Structure_of_Declarations_0"},{"heading":"Names","level":2,"id":"Names_0"},{"heading":"Scope","level":2,"id":"Scope_0"},{"heading":"Initialization","level":2,"id":"Initialization_0"},{"heading":"Missing Initializers","level":2,"id":"Missing_Initializers_0"},{"heading":"Initializer Lists","level":2,"id":"Initializer_Lists_0"},{"heading":"Deducing: <code class=\"code-styler-inline\">auto</code>, <code class=\"code-styler-inline\">decltype()</code>","level":2,"id":"Deducing_`auto`,_`decltype()`_0"},{"heading":"Objects and Values, Lvalues and Rvalues","level":2,"id":"Objects_and_Values,_Lvalues_and_Rvalues_0"},{"heading":"Type Aliases","level":2,"id":"Type_Aliases_0"},{"heading":"Advice","level":2,"id":"Advice_0"},{"heading":"7. Pointers, Arrays, and References","level":1,"id":"7._Pointers,_Arrays,_and_References_0"},{"heading":"Lvalue references","level":2,"id":"Lvalue_references_0"},{"heading":"Rvalue References","level":2,"id":"Rvalue_References_0"},{"heading":"References to References","level":2,"id":"References_to_References_0"},{"heading":"Pointers and References","level":2,"id":"Pointers_and_References_0"},{"heading":"Advice","level":2,"id":"Advice_1"},{"heading":"8. Structures, Unions, and Enumerations","level":1,"id":"8._Structures,_Unions,_and_Enumerations_0"},{"heading":"Structures","level":2,"id":"Structures_0"},{"heading":"<code class=\"code-styler-inline\">struct</code> Layout","level":2,"id":"`struct`_Layout_0"},{"heading":"<code class=\"code-styler-inline\">struct</code> Names","level":2,"id":"`struct`_Names_0"},{"heading":"Structures and Classes","level":2,"id":"Structures_and_Classes_0"},{"heading":"Structures and Arrays","level":2,"id":"Structures_and_Arrays_0"},{"heading":"Plain Old Data (POD)","level":2,"id":"Plain_Old_Data_(POD)_0"},{"heading":"Fields","level":2,"id":"Fields_0"},{"heading":"Unions","level":2,"id":"Unions_0"},{"heading":"Unions and Classes","level":2,"id":"Unions_and_Classes_0"},{"heading":"Enumerations","level":2,"id":"Enumerations_0"},{"heading":"Plain enums","level":2,"id":"Plain_enums_0"},{"heading":"Advice","level":2,"id":"Advice_2"},{"heading":"9. Statements","level":1,"id":"9._Statements_0"},{"heading":"Statement Summary","level":2,"id":"Statement_Summary_0"},{"heading":"Declarations as Statements, and in Conditions","level":2,"id":"Declarations_as_Statements,_and_in_Conditions_0"},{"heading":"Switch statement","level":2,"id":"Switch_statement_0"},{"heading":"Declarations in Cases","level":2,"id":"Declarations_in_Cases_0"},{"heading":"Iteration Statements","level":2,"id":"Iteration_Statements_0"},{"heading":"Comments","level":2,"id":"Comments_0"},{"heading":"Advice","level":2,"id":"Advice_3"},{"heading":"10. Expressions","level":1,"id":"10._Expressions_0"},{"heading":"My notes","level":2,"id":"My_notes_0"},{"heading":"Command-Line Arguments","level":2,"id":"Command-Line_Arguments_0"},{"heading":"Operator Summary ‚ú®","level":2,"id":"Operator_Summary_‚ú®_0"},{"heading":"Results","level":2,"id":"Results_0"},{"heading":"Order of Evaluation","level":2,"id":"Order_of_Evaluation_0"},{"heading":"Temporary Objects","level":2,"id":"Temporary_Objects_0"},{"heading":"Constant Expressions","level":2,"id":"Constant_Expressions_0"},{"heading":"<code class=\"code-styler-inline\">const</code>s in Constant Expressions","level":2,"id":"`const`s_in_Constant_Expressions_0"},{"heading":"Literal Types","level":2,"id":"Literal_Types_0"},{"heading":"Reference Arguments","level":2,"id":"Reference_Arguments_0"},{"heading":"Promotions","level":2,"id":"Promotions_0"},{"heading":"Conversions","level":2,"id":"Conversions_0"},{"heading":"Floating-Integral Conversions","level":2,"id":"Floating-Integral_Conversions_0"},{"heading":"Usual Arithmetic Conversions","level":2,"id":"Usual_Arithmetic_Conversions_0"},{"heading":"Advice","level":2,"id":"Advice_4"},{"heading":"11. Selected Operations","level":1,"id":"11._Selected_Operations_0"},{"heading":"Memory Management","level":2,"id":"Memory_Management_0"},{"heading":"Getting memory space","level":2,"id":"Getting_memory_space_0"},{"heading":"Overloading <code class=\"code-styler-inline\">new</code>","level":2,"id":"Overloading_`new`_0"},{"heading":"No throw new ‚Äî <code class=\"code-styler-inline\">nothrow new</code>","level":2,"id":"No_throw_new_‚Äî_`nothrow_new`_0"},{"heading":"Lists","level":2,"id":"Lists_0"},{"heading":"Lambda Expressions","level":2,"id":"Lambda_Expressions_0"},{"heading":"Alternatives to Lambdas","level":2,"id":"Alternatives_to_Lambdas_0"},{"heading":"Lambda and Lifetime","level":2,"id":"Lambda_and_Lifetime_0"},{"heading":"Namespace Names","level":2,"id":"Namespace_Names_0"},{"heading":"The Type of a Lambda","level":2,"id":"The_Type_of_a_Lambda_0"},{"heading":"Explicit Type Conversions","level":2,"id":"Explicit_Type_Conversions_0"},{"heading":"Construction","level":2,"id":"Construction_0"},{"heading":"Named Casts","level":2,"id":"Named_Casts_0"},{"heading":"C-Style Cast","level":2,"id":"C-Style_Cast_0"},{"heading":"Function Style Cast","level":2,"id":"Function_Style_Cast_0"},{"heading":"Advice","level":2,"id":"Advice_5"},{"heading":"12. Functions","level":1,"id":"12._Functions_0"},{"heading":"12.1 Function Declarations","level":2,"id":"12.1_Function_Declarations_0"},{"heading":"Parts of a Function Declaration","level":4,"id":"Parts_of_a_Function_Declaration_0"},{"heading":"Function Definitions","level":4,"id":"Function_Definitions_0"},{"heading":"Returning Values","level":4,"id":"Returning_Values_0"},{"heading":"Inline Functions","level":4,"id":"Inline_Functions_0"},{"heading":"Constexpr Functions","level":4,"id":"Constexpr_Functions_0"},{"heading":"Constexpr and References","level":4,"id":"Constexpr_and_References_0"},{"heading":"Conditional Evaluation","level":4,"id":"Conditional_Evaluation_0"},{"heading":"Noreturn Functions","level":4,"id":"Noreturn_Functions_0"},{"heading":"Local Variables","level":4,"id":"Local_Variables_0"},{"heading":"12.2 Argument Passing","level":2,"id":"12.2_Argument_Passing_0"},{"heading":"Reference Arguments","level":4,"id":"Reference_Arguments_1"},{"heading":"Array Arguments","level":4,"id":"Array_Arguments_0"},{"heading":"List Arguments","level":4,"id":"List_Arguments_0"},{"heading":"Unspecified Number of Arguments","level":4,"id":"Unspecified_Number_of_Arguments_0"},{"heading":"Default Arguments","level":4,"id":"Default_Arguments_0"},{"heading":"12.3 Overloaded Functions","level":2,"id":"12.3_Overloaded_Functions_0"},{"heading":"Automatic Overload Resolution (AOR)","level":4,"id":"Automatic_Overload_Resolution_(AOR)_0"},{"heading":"Overloading and Return Type","level":4,"id":"Overloading_and_Return_Type_0"},{"heading":"Overloading and Scope","level":4,"id":"Overloading_and_Scope_0"},{"heading":"Resolution for Multiple Arguments","level":4,"id":"Resolution_for_Multiple_Arguments_0"},{"heading":"Manual Overload Resolution","level":4,"id":"Manual_Overload_Resolution_0"},{"heading":"12.4 Pre- and Postconditions","level":2,"id":"12.4_Pre-_and_Postconditions_0"},{"heading":"12.5 Pointer to Function","level":2,"id":"12.5_Pointer_to_Function_0"},{"heading":"12.6 Macros","level":2,"id":"12.6_Macros_0"},{"heading":"Predefined Macros","level":4,"id":"Predefined_Macros_0"},{"heading":"Pragma","level":4,"id":"Pragma_0"},{"heading":"12.7 Advice","level":2,"id":"12.7_Advice_0"},{"heading":"13. Exception Handling","level":1,"id":"13._Exception_Handling_0"},{"heading":"13.1 Error Handling","level":2,"id":"13.1_Error_Handling_0"},{"heading":"Exceptions","level":4,"id":"Exceptions_0"},{"heading":"Traditional Error Handling","level":4,"id":"Traditional_Error_Handling_0"},{"heading":"When You Can't Use Exceptions","level":4,"id":"When_You_Can't_Use_Exceptions_0"},{"heading":"Hierarchical Error Handling","level":4,"id":"Hierarchical_Error_Handling_0"},{"heading":"Exceptions and Efficiency","level":4,"id":"Exceptions_and_Efficiency_0"},{"heading":"13.2 Exception Guarantees","level":2,"id":"13.2_Exception_Guarantees_0"},{"heading":"13.3 Resource Management","level":2,"id":"13.3_Resource_Management_0"},{"heading":"Finally","level":4,"id":"Finally_0"},{"heading":"13.4 Enforcing Invariants","level":2,"id":"13.4_Enforcing_Invariants_0"},{"heading":"13.5 Throwing and Catching Exceptions","level":2,"id":"13.5_Throwing_and_Catching_Exceptions_0"},{"heading":"Throwing Exceptions","level":4,"id":"Throwing_Exceptions_0"},{"heading":"Noexcept Functions","level":4,"id":"Noexcept_Functions_0"},{"heading":"The <code class=\"code-styler-inline\">noexcept</code> Operator","level":4,"id":"The_`noexcept`_Operator_0"},{"heading":"Exception Specification","level":4,"id":"Exception_Specification_0"},{"heading":"Catching Exceptions","level":4,"id":"Catching_Exceptions_0"},{"heading":"Rethrow","level":4,"id":"Rethrow_0"},{"heading":"Catch Every Exception","level":4,"id":"Catch_Every_Exception_0"},{"heading":"Multiple Handlers","level":4,"id":"Multiple_Handlers_0"},{"heading":"Function <code class=\"code-styler-inline\">try</code>-Blocks","level":4,"id":"Function_`try`-Blocks_0"},{"heading":"Termination","level":4,"id":"Termination_0"},{"heading":"Exceptions and Threads","level":4,"id":"Exceptions_and_Threads_0"},{"heading":"13.6 A <code class=\"code-styler-inline\">vector</code> Implementation","level":2,"id":"13.6_A_`vector`_Implementation_0"},{"heading":"A Simple <code class=\"code-styler-inline\">vector</code>","level":4,"id":"A_Simple_`vector`_0"},{"heading":"Representing Memory Explicitly","level":4,"id":"Representing_Memory_Explicitly_0"},{"heading":"Assignment","level":4,"id":"Assignment_0"},{"heading":"Changing Size","level":4,"id":"Changing_Size_0"},{"heading":"Final Thoughts","level":4,"id":"Final_Thoughts_0"},{"heading":"13.7 Advice","level":2,"id":"13.7_Advice_0"},{"heading":"14. Namespaces","level":1,"id":"14._Namespaces_0"},{"heading":"14.1 Composition Problems","level":2,"id":"14.1_Composition_Problems_0"},{"heading":"14.2 Namespaces","level":2,"id":"14.2_Namespaces_0"},{"heading":"Explicit Qualification","level":4,"id":"Explicit_Qualification_0"},{"heading":"<code class=\"code-styler-inline\">using</code> Declarations","level":4,"id":"`using`_Declarations_0"},{"heading":"<code class=\"code-styler-inline\">using</code> Directives","level":4,"id":"`using`_Directives_0"},{"heading":"ADL (Argument-Dependent Lookup)","level":4,"id":"ADL_(Argument-Dependent_Lookup)_0"},{"heading":"14.3 Modularization and Interfaces","level":2,"id":"14.3_Modularization_and_Interfaces_0"},{"heading":"Interfaces and Implementations","level":4,"id":"Interfaces_and_Implementations_0"},{"heading":"14.4 Composition Using Namespaces","level":2,"id":"14.4_Composition_Using_Namespaces_0"},{"heading":"Namespace Aliases","level":4,"id":"Namespace_Aliases_0"},{"heading":"Namespace Composition","level":4,"id":"Namespace_Composition_0"},{"heading":"Composition and Selection","level":4,"id":"Composition_and_Selection_0"},{"heading":"Namespaces and Overloading","level":4,"id":"Namespaces_and_Overloading_0"},{"heading":"Versioning","level":4,"id":"Versioning_0"},{"heading":"Nested Namespaces","level":4,"id":"Nested_Namespaces_0"},{"heading":"Unnamed Namespaces","level":4,"id":"Unnamed_Namespaces_0"},{"heading":"C Headers","level":4,"id":"C_Headers_0"},{"heading":"14.5 Advice","level":2,"id":"14.5_Advice_0"},{"heading":"15. Source Files and Programs","level":1,"id":"15._Source_Files_and_Programs_0"},{"heading":"15.1 Separate Compilation","level":2,"id":"15.1_Separate_Compilation_0"},{"heading":"15.2 Linkage","level":2,"id":"15.2_Linkage_0"},{"heading":"File-Local Names","level":4,"id":"File-Local_Names_0"},{"heading":"Header Files","level":4,"id":"Header_Files_0"},{"heading":"The One-Definition Rule (ODR)","level":4,"id":"The_One-Definition_Rule_(ODR)_0"},{"heading":"Standard-Library Headers","level":4,"id":"Standard-Library_Headers_0"},{"heading":"Linkage to Non-C++ Code","level":4,"id":"Linkage_to_Non-C++_Code_0"},{"heading":"Linkage and Pointers to Functions","level":4,"id":"Linkage_and_Pointers_to_Functions_0"},{"heading":"15.3 Using Header","level":2,"id":"15.3_Using_Header_0"},{"heading":"Single-Header Organization","level":4,"id":"Single-Header_Organization_0"},{"heading":"Multi-Header Organization","level":4,"id":"Multi-Header_Organization_0"},{"heading":"Use of Headers","level":4,"id":"Use_of_Headers_0"},{"heading":"Include Guards","level":4,"id":"Include_Guards_0"},{"heading":"15.4 Programs","level":2,"id":"15.4_Programs_0"},{"heading":"Initialization of Nonlocal Variables","level":4,"id":"Initialization_of_Nonlocal_Variables_0"},{"heading":"Initialization and Concurrency","level":4,"id":"Initialization_and_Concurrency_0"},{"heading":"Program Termination","level":4,"id":"Program_Termination_0"},{"heading":"15.5 Advice","level":2,"id":"15.5_Advice_0"}],"links":["file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch6/alignment.cpp","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch8/anon_union.cpp","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch10/calculator.cpp","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch10/calculator.cpp","engineering/c++-essentials/‚ûï-operator-summary.html","engineering/c++-essentials/‚ö°Ô∏è-initialization.html","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/massert.cpp","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/ctorcatch.cpp","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/vector.cpp","engineering/book-notes/tc++pl-(iii).html","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch15/calc_oneh/prg.cpp","file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch15/calc_multh/modules/parser/parser_impl.h"],"author":"","coverImageURL":".","fullURL":"tc++pl-(ii).html","pathToRoot":".","attachments":["a9s/screenshot-2025-10-04-at-04.41.40.png","a9s/screenshot-2025-10-04-at-20.06.24.png","a9s/screenshot-2025-10-05-at-01.00.15.png","a9s/screenshot-2025-10-05-at-05.47.03.png","a9s/screenshot-2025-10-05-at-18.26.55.png","a9s/screenshot-2025-10-05-at-18.27.27.png","a9s/screenshot-2025-10-07-at-03.03.28.png","a9s/screenshot-2025-10-11-at-19.25.32.png"],"createdTime":1767013423996,"modifiedTime":1767129584691,"sourceSize":104367,"sourcePath":"engineering/compendium/TC++PL (II).md","exportPath":"tc++pl-(ii).html","showInTree":true,"treeOrder":6,"backlinks":[],"type":"markdown"}},"fileInfo":{"-start-page.html":{"createdTime":1767014780778,"modifiedTime":1767016904330,"sourceSize":99,"sourcePath":"engineering/compendium/- start page.md","exportPath":"-start-page.html","showInTree":true,"treeOrder":0,"backlinks":[],"type":"markdown","data":null},"gopl.html":{"createdTime":1729104493643,"modifiedTime":1767125833398,"sourceSize":51745,"sourcePath":"engineering/compendium/GoPL.md","exportPath":"gopl.html","showInTree":true,"treeOrder":1,"backlinks":[],"type":"markdown","data":null},"k&r-c.html":{"createdTime":1758074369052,"modifiedTime":1767126906847,"sourceSize":25413,"sourcePath":"engineering/compendium/K&R C.md","exportPath":"k&r-c.html","showInTree":true,"treeOrder":2,"backlinks":[],"type":"markdown","data":null},"mastering-go.html":{"createdTime":1767121075514,"modifiedTime":1767122541378,"sourceSize":43922,"sourcePath":"engineering/compendium/Mastering Go.md","exportPath":"mastering-go.html","showInTree":true,"treeOrder":3,"backlinks":[],"type":"markdown","data":null},"py-asyncio.html":{"createdTime":1767267776831,"modifiedTime":1767269216237,"sourceSize":45177,"sourcePath":"engineering/compendium/Py Asyncio.md","exportPath":"py-asyncio.html","showInTree":true,"treeOrder":4,"backlinks":[],"type":"markdown","data":null},"tc++pl-(i).html":{"createdTime":1766961847016,"modifiedTime":1767129569447,"sourceSize":51855,"sourcePath":"engineering/compendium/TC++PL (I).md","exportPath":"tc++pl-(i).html","showInTree":true,"treeOrder":5,"backlinks":[],"type":"markdown","data":null},"tc++pl-(ii).html":{"createdTime":1767013423996,"modifiedTime":1767129584691,"sourceSize":104367,"sourcePath":"engineering/compendium/TC++PL (II).md","exportPath":"tc++pl-(ii).html","showInTree":true,"treeOrder":6,"backlinks":[],"type":"markdown","data":null},"site-lib/html/custom-head-content-content.html":{"createdTime":1767138210339,"modifiedTime":1767141496111,"sourceSize":2138,"sourcePath":"a9s/copy_action.html","exportPath":"site-lib/html/custom-head-content-content.html","showInTree":false,"treeOrder":0,"backlinks":[],"type":"html","data":null},"site-lib/fonts/94f2f163d4b698242fef.otf":{"createdTime":1767269269219,"modifiedTime":1767269269219,"sourceSize":66800,"sourcePath":"","exportPath":"site-lib/fonts/94f2f163d4b698242fef.otf","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/72505e6a122c6acd5471.woff2":{"createdTime":1767269269219,"modifiedTime":1767269269219,"sourceSize":104232,"sourcePath":"","exportPath":"site-lib/fonts/72505e6a122c6acd5471.woff2","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/2d5198822ab091ce4305.woff2":{"createdTime":1767269269219,"modifiedTime":1767269269219,"sourceSize":104332,"sourcePath":"","exportPath":"site-lib/fonts/2d5198822ab091ce4305.woff2","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/c8ba52b05a9ef10f4758.woff2":{"createdTime":1767269269220,"modifiedTime":1767269269220,"sourceSize":98868,"sourcePath":"","exportPath":"site-lib/fonts/c8ba52b05a9ef10f4758.woff2","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/cb10ffd7684cd9836a05.woff2":{"createdTime":1767269269220,"modifiedTime":1767269269220,"sourceSize":106876,"sourcePath":"","exportPath":"site-lib/fonts/cb10ffd7684cd9836a05.woff2","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/293fd13dbca5a3e450ef.woff2":{"createdTime":1767269269220,"modifiedTime":1767269269220,"sourceSize":105924,"sourcePath":"","exportPath":"site-lib/fonts/293fd13dbca5a3e450ef.woff2","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/085cb93e613ba3d40d2b.woff2":{"createdTime":1767269269220,"modifiedTime":1767269269220,"sourceSize":112184,"sourcePath":"","exportPath":"site-lib/fonts/085cb93e613ba3d40d2b.woff2","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/b5f0f109bc88052d4000.woff2":{"createdTime":1767269269221,"modifiedTime":1767269269221,"sourceSize":105804,"sourcePath":"","exportPath":"site-lib/fonts/b5f0f109bc88052d4000.woff2","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/cbe0ae49c52c920fd563.woff2":{"createdTime":1767269269221,"modifiedTime":1767269269221,"sourceSize":106108,"sourcePath":"","exportPath":"site-lib/fonts/cbe0ae49c52c920fd563.woff2","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/535a6cf662596b3bd6a6.woff2":{"createdTime":1767269269221,"modifiedTime":1767269269221,"sourceSize":111708,"sourcePath":"","exportPath":"site-lib/fonts/535a6cf662596b3bd6a6.woff2","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/70cc7ff27245e82ad414.ttf":{"createdTime":1767269269221,"modifiedTime":1767269269221,"sourceSize":192740,"sourcePath":"","exportPath":"site-lib/fonts/70cc7ff27245e82ad414.ttf","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/454577c22304619db035.ttf":{"createdTime":1767269269221,"modifiedTime":1767269269221,"sourceSize":161376,"sourcePath":"","exportPath":"site-lib/fonts/454577c22304619db035.ttf","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/52ac8f3034507f1d9e53.ttf":{"createdTime":1767269269221,"modifiedTime":1767269269221,"sourceSize":191568,"sourcePath":"","exportPath":"site-lib/fonts/52ac8f3034507f1d9e53.ttf","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/05b618077343fbbd92b7.ttf":{"createdTime":1767269269221,"modifiedTime":1767269269221,"sourceSize":155288,"sourcePath":"","exportPath":"site-lib/fonts/05b618077343fbbd92b7.ttf","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/4bb6ac751d1c5478ff3a.woff2":{"createdTime":1767269269218,"modifiedTime":1767269269218,"sourceSize":7876,"sourcePath":"","exportPath":"site-lib/fonts/4bb6ac751d1c5478ff3a.woff2","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/media/6155340132a851f6089e.svg":{"createdTime":1767269269219,"modifiedTime":1767269269219,"sourceSize":315,"sourcePath":"","exportPath":"site-lib/media/6155340132a851f6089e.svg","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"site-lib/media/2308ab1944a6bfa5c5b8.svg":{"createdTime":1767269269219,"modifiedTime":1767269269219,"sourceSize":278,"sourcePath":"","exportPath":"site-lib/media/2308ab1944a6bfa5c5b8.svg","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"site-lib/fonts/mathjax_zero.woff":{"createdTime":1767269268438,"modifiedTime":1767269268438,"sourceSize":1368,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_zero.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_main-regular.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":34160,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_main-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_main-bold.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":34464,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_main-bold.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_math-italic.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":19360,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_math-italic.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_main-italic.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":20832,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_main-italic.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_math-bolditalic.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":19776,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_math-bolditalic.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_size1-regular.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":5792,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_size1-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_size2-regular.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":5464,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_size2-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_size3-regular.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":3244,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_size3-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_size4-regular.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":5148,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_size4-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_ams-regular.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":40808,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_ams-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_calligraphic-regular.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":9600,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_calligraphic-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_calligraphic-bold.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":9908,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_calligraphic-bold.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_fraktur-regular.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":21480,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_fraktur-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_fraktur-bold.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":22340,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_fraktur-bold.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_sansserif-regular.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":12660,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_sansserif-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_sansserif-bold.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":15944,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_sansserif-bold.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_sansserif-italic.woff":{"createdTime":1767269268439,"modifiedTime":1767269268439,"sourceSize":14628,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_sansserif-italic.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_script-regular.woff":{"createdTime":1767269268440,"modifiedTime":1767269268440,"sourceSize":11852,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_script-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_typewriter-regular.woff":{"createdTime":1767269268440,"modifiedTime":1767269268440,"sourceSize":17604,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_typewriter-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_vector-regular.woff":{"createdTime":1767269268440,"modifiedTime":1767269268440,"sourceSize":1136,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_vector-regular.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/fonts/mathjax_vector-bold.woff":{"createdTime":1767269268440,"modifiedTime":1767269268440,"sourceSize":1116,"sourcePath":"","exportPath":"site-lib/fonts/mathjax_vector-bold.woff","showInTree":false,"treeOrder":0,"backlinks":[],"type":"font","data":null},"site-lib/html/file-tree-content.html":{"createdTime":1767269269314,"modifiedTime":1767269269314,"sourceSize":2531,"sourcePath":"","exportPath":"site-lib/html/file-tree-content.html","showInTree":false,"treeOrder":0,"backlinks":[],"type":"html","data":null},"site-lib/scripts/webpage.js":{"createdTime":1767140350854,"modifiedTime":1767140350854,"sourceSize":110729,"sourcePath":"","exportPath":"site-lib/scripts/webpage.js","showInTree":false,"treeOrder":0,"backlinks":[],"type":"script","data":null},"site-lib/media/favicon.png":{"createdTime":1767269269174,"modifiedTime":1767269269174,"sourceSize":1105,"sourcePath":"","exportPath":"site-lib/media/favicon.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"site-lib/styles/snippets.css":{"createdTime":1767269269217,"modifiedTime":1767269269217,"sourceSize":279,"sourcePath":"","exportPath":"site-lib/styles/snippets.css","showInTree":false,"treeOrder":0,"backlinks":[],"type":"style","data":null},"site-lib/styles/obsidian.css":{"createdTime":1767269269240,"modifiedTime":1767269269240,"sourceSize":205827,"sourcePath":"","exportPath":"site-lib/styles/obsidian.css","showInTree":false,"treeOrder":0,"backlinks":[],"type":"style","data":null},"site-lib/styles/other-plugins.css":{"createdTime":1767140350941,"modifiedTime":1767140350941,"sourceSize":26882,"sourcePath":"","exportPath":"site-lib/styles/other-plugins.css","showInTree":false,"treeOrder":0,"backlinks":[],"type":"style","data":null},"site-lib/styles/global-variable-styles.css":{"createdTime":1767269269208,"modifiedTime":1767269269208,"sourceSize":305,"sourcePath":"","exportPath":"site-lib/styles/global-variable-styles.css","showInTree":false,"treeOrder":0,"backlinks":[],"type":"style","data":null},"site-lib/styles/supported-plugins.css":{"createdTime":1767269269208,"modifiedTime":1767269269208,"sourceSize":23838,"sourcePath":"","exportPath":"site-lib/styles/supported-plugins.css","showInTree":false,"treeOrder":0,"backlinks":[],"type":"style","data":null},"site-lib/styles/main-styles.css":{"createdTime":1767140350868,"modifiedTime":1767140350868,"sourceSize":19521,"sourcePath":"","exportPath":"site-lib/styles/main-styles.css","showInTree":false,"treeOrder":0,"backlinks":[],"type":"style","data":null},"a9s/screenshot-2025-10-04-at-04.41.40.png":{"createdTime":1759542102286,"modifiedTime":1759542102286,"sourceSize":112137,"sourcePath":"a9s/Screenshot 2025-10-04 at 04.41.40.png","exportPath":"a9s/screenshot-2025-10-04-at-04.41.40.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-10-04-at-20.06.24.png":{"createdTime":1759597586247,"modifiedTime":1759597586247,"sourceSize":72120,"sourcePath":"a9s/Screenshot 2025-10-04 at 20.06.24.png","exportPath":"a9s/screenshot-2025-10-04-at-20.06.24.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-10-05-at-01.00.15.png":{"createdTime":1759615218481,"modifiedTime":1759615218481,"sourceSize":198306,"sourcePath":"a9s/Screenshot 2025-10-05 at 01.00.15.png","exportPath":"a9s/screenshot-2025-10-05-at-01.00.15.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-10-05-at-05.47.03.png":{"createdTime":1759632425379,"modifiedTime":1759632425379,"sourceSize":65434,"sourcePath":"a9s/Screenshot 2025-10-05 at 05.47.03.png","exportPath":"a9s/screenshot-2025-10-05-at-05.47.03.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-10-05-at-18.26.55.png":{"createdTime":1759678018898,"modifiedTime":1759678018899,"sourceSize":299100,"sourcePath":"a9s/Screenshot 2025-10-05 at 18.26.55.png","exportPath":"a9s/screenshot-2025-10-05-at-18.26.55.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-10-05-at-18.27.27.png":{"createdTime":1759678048776,"modifiedTime":1759678048777,"sourceSize":62431,"sourcePath":"a9s/Screenshot 2025-10-05 at 18.27.27.png","exportPath":"a9s/screenshot-2025-10-05-at-18.27.27.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-10-07-at-03.03.28.png":{"createdTime":1759795410655,"modifiedTime":1759795410656,"sourceSize":13776,"sourcePath":"a9s/Screenshot 2025-10-07 at 03.03.28.png","exportPath":"a9s/screenshot-2025-10-07-at-03.03.28.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-10-11-at-19.25.32.png":{"createdTime":1760199934341,"modifiedTime":1760199934342,"sourceSize":87538,"sourcePath":"a9s/Screenshot 2025-10-11 at 19.25.32.png","exportPath":"a9s/screenshot-2025-10-11-at-19.25.32.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-09-29-at-04.15.37.png":{"createdTime":1759108540340,"modifiedTime":1759108540340,"sourceSize":55619,"sourcePath":"a9s/Screenshot 2025-09-29 at 04.15.37.png","exportPath":"a9s/screenshot-2025-09-29-at-04.15.37.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-09-29-at-15.56.15.png":{"createdTime":1759150577015,"modifiedTime":1759150577016,"sourceSize":70521,"sourcePath":"a9s/Screenshot 2025-09-29 at 15.56.15.png","exportPath":"a9s/screenshot-2025-09-29-at-15.56.15.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-10-01-at-02.55.34.png":{"createdTime":1759276536942,"modifiedTime":1759276536942,"sourceSize":44944,"sourcePath":"a9s/Screenshot 2025-10-01 at 02.55.34.png","exportPath":"a9s/screenshot-2025-10-01-at-02.55.34.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-10-01-at-02.56.03.png":{"createdTime":1759276564362,"modifiedTime":1759276564363,"sourceSize":65780,"sourcePath":"a9s/Screenshot 2025-10-01 at 02.56.03.png","exportPath":"a9s/screenshot-2025-10-01-at-02.56.03.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-10-02-at-01.51.27.png":{"createdTime":1759359089260,"modifiedTime":1759359089260,"sourceSize":139751,"sourcePath":"a9s/Screenshot 2025-10-02 at 01.51.27.png","exportPath":"a9s/screenshot-2025-10-02-at-01.51.27.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-10-02-at-23.54.37.png":{"createdTime":1759438480681,"modifiedTime":1759438480681,"sourceSize":182910,"sourcePath":"a9s/Screenshot 2025-10-02 at 23.54.37.png","exportPath":"a9s/screenshot-2025-10-02-at-23.54.37.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-09-27-at-22.49.48.png":{"createdTime":1759002590474,"modifiedTime":1759002590475,"sourceSize":349951,"sourcePath":"a9s/Screenshot 2025-09-27 at 22.49.48.png","exportPath":"a9s/screenshot-2025-09-27-at-22.49.48.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-09-20-at-01.48.06.png":{"createdTime":1758322089034,"modifiedTime":1758322089035,"sourceSize":108370,"sourcePath":"a9s/Screenshot 2025-09-20 at 01.48.06.png","exportPath":"a9s/screenshot-2025-09-20-at-01.48.06.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-09-20-at-13.23.06.png":{"createdTime":1758363789114,"modifiedTime":1758363789114,"sourceSize":156916,"sourcePath":"a9s/Screenshot 2025-09-20 at 13.23.06.png","exportPath":"a9s/screenshot-2025-09-20-at-13.23.06.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-09-20-at-15.44.51.png":{"createdTime":1758372292824,"modifiedTime":1758372292825,"sourceSize":233985,"sourcePath":"a9s/Screenshot 2025-09-20 at 15.44.51.png","exportPath":"a9s/screenshot-2025-09-20-at-15.44.51.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/screenshot-2025-09-25-at-02.53.33.png":{"createdTime":1758758014598,"modifiedTime":1758758014619,"sourceSize":87168,"sourcePath":"a9s/Screenshot 2025-09-25 at 02.53.33.png","exportPath":"a9s/screenshot-2025-09-25-at-02.53.33.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-14.54.57.png":{"createdTime":1729598102857,"modifiedTime":1729598102857,"sourceSize":199166,"sourcePath":"a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-22 –≤ 14.54.57.png","exportPath":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-14.54.57.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.56.19.png":{"createdTime":1729608983809,"modifiedTime":1729608983809,"sourceSize":74518,"sourcePath":"a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-22 –≤ 17.56.19.png","exportPath":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.56.19.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.57.07.png":{"createdTime":1729609031920,"modifiedTime":1729609031920,"sourceSize":123563,"sourcePath":"a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-22 –≤ 17.57.07.png","exportPath":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.57.07.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-13.44.57.png":{"createdTime":1729680301092,"modifiedTime":1729680301092,"sourceSize":30758,"sourcePath":"a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-23 –≤ 13.44.57.png","exportPath":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-13.44.57.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-16.56.12.png":{"createdTime":1729691777730,"modifiedTime":1729691777731,"sourceSize":171456,"sourcePath":"a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-23 –≤ 16.56.12.png","exportPath":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-16.56.12.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-20.25.22.png":{"createdTime":1729704326726,"modifiedTime":1729704326726,"sourceSize":67288,"sourcePath":"a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-23 –≤ 20.25.22.png","exportPath":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-20.25.22.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-15.56.10.png":{"createdTime":1729774574558,"modifiedTime":1729774574558,"sourceSize":127037,"sourcePath":"a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-24 –≤ 15.56.10.png","exportPath":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-15.56.10.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-22.43.37.png":{"createdTime":1729799021902,"modifiedTime":1729799021902,"sourceSize":98738,"sourcePath":"a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-24 –≤ 22.43.37.png","exportPath":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-22.43.37.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-25-–≤-23.49.27.png":{"createdTime":1729889370954,"modifiedTime":1729889370954,"sourceSize":231780,"sourcePath":"a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-25 –≤ 23.49.27.png","exportPath":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-25-–≤-23.49.27.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.12.07.png":{"createdTime":1730059932411,"modifiedTime":1730059932411,"sourceSize":179920,"sourcePath":"a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-27 –≤ 23.12.07.png","exportPath":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.12.07.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.24.58.png":{"createdTime":1730060701458,"modifiedTime":1730060701458,"sourceSize":310970,"sourcePath":"a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-27 –≤ 23.24.58.png","exportPath":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.24.58.png","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null},"a9s/telegram-cloud-document-2-5312238323056530771.jpg":{"createdTime":1731744949231,"modifiedTime":1731744949231,"sourceSize":140050,"sourcePath":"a9s/telegram-cloud-document-2-5312238323056530771.jpg","exportPath":"a9s/telegram-cloud-document-2-5312238323056530771.jpg","showInTree":false,"treeOrder":0,"backlinks":[],"type":"media","data":null}},"sourceToTarget":{"engineering/compendium/- start page.md":"-start-page.html","engineering/compendium/GoPL.md":"gopl.html","engineering/compendium/K&R C.md":"k&r-c.html","engineering/compendium/Mastering Go.md":"mastering-go.html","engineering/compendium/Py Asyncio.md":"py-asyncio.html","engineering/compendium/TC++PL (I).md":"tc++pl-(i).html","engineering/compendium/TC++PL (II).md":"tc++pl-(ii).html","a9s/copy_action.html":"site-lib/html/custom-head-content-content.html","":"site-lib/styles/main-styles.css","a9s/Screenshot 2025-10-04 at 04.41.40.png":"a9s/screenshot-2025-10-04-at-04.41.40.png","a9s/Screenshot 2025-10-04 at 20.06.24.png":"a9s/screenshot-2025-10-04-at-20.06.24.png","a9s/Screenshot 2025-10-05 at 01.00.15.png":"a9s/screenshot-2025-10-05-at-01.00.15.png","a9s/Screenshot 2025-10-05 at 05.47.03.png":"a9s/screenshot-2025-10-05-at-05.47.03.png","a9s/Screenshot 2025-10-05 at 18.26.55.png":"a9s/screenshot-2025-10-05-at-18.26.55.png","a9s/Screenshot 2025-10-05 at 18.27.27.png":"a9s/screenshot-2025-10-05-at-18.27.27.png","a9s/Screenshot 2025-10-07 at 03.03.28.png":"a9s/screenshot-2025-10-07-at-03.03.28.png","a9s/Screenshot 2025-10-11 at 19.25.32.png":"a9s/screenshot-2025-10-11-at-19.25.32.png","a9s/Screenshot 2025-09-29 at 04.15.37.png":"a9s/screenshot-2025-09-29-at-04.15.37.png","a9s/Screenshot 2025-09-29 at 15.56.15.png":"a9s/screenshot-2025-09-29-at-15.56.15.png","a9s/Screenshot 2025-10-01 at 02.55.34.png":"a9s/screenshot-2025-10-01-at-02.55.34.png","a9s/Screenshot 2025-10-01 at 02.56.03.png":"a9s/screenshot-2025-10-01-at-02.56.03.png","a9s/Screenshot 2025-10-02 at 01.51.27.png":"a9s/screenshot-2025-10-02-at-01.51.27.png","a9s/Screenshot 2025-10-02 at 23.54.37.png":"a9s/screenshot-2025-10-02-at-23.54.37.png","a9s/Screenshot 2025-09-27 at 22.49.48.png":"a9s/screenshot-2025-09-27-at-22.49.48.png","a9s/Screenshot 2025-09-20 at 01.48.06.png":"a9s/screenshot-2025-09-20-at-01.48.06.png","a9s/Screenshot 2025-09-20 at 13.23.06.png":"a9s/screenshot-2025-09-20-at-13.23.06.png","a9s/Screenshot 2025-09-20 at 15.44.51.png":"a9s/screenshot-2025-09-20-at-15.44.51.png","a9s/Screenshot 2025-09-25 at 02.53.33.png":"a9s/screenshot-2025-09-25-at-02.53.33.png","a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-22 –≤ 14.54.57.png":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-14.54.57.png","a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-22 –≤ 17.56.19.png":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.56.19.png","a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-22 –≤ 17.57.07.png":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-22-–≤-17.57.07.png","a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-23 –≤ 13.44.57.png":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-13.44.57.png","a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-23 –≤ 16.56.12.png":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-16.56.12.png","a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-23 –≤ 20.25.22.png":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-23-–≤-20.25.22.png","a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-24 –≤ 15.56.10.png":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-15.56.10.png","a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-24 –≤ 22.43.37.png":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-24-–≤-22.43.37.png","a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-25 –≤ 23.49.27.png":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-25-–≤-23.49.27.png","a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-27 –≤ 23.12.07.png":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.12.07.png","a9s/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-10-27 –≤ 23.24.58.png":"a9s/—Å–Ω–∏–º–æ–∫-—ç–∫—Ä–∞–Ω–∞-2024-10-27-–≤-23.24.58.png","a9s/telegram-cloud-document-2-5312238323056530771.jpg":"a9s/telegram-cloud-document-2-5312238323056530771.jpg"},"featureOptions":{"backlinks":{"featureId":"backlinks","enabled":true,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"featurePlacement":{"selector":".footer","type":"start","info_selector":{"show":true,"name":"","description":"CSS selector for an element. The feature will be placed relative to this element.","placeholder":""},"info_type":{"show":true,"name":"","description":"Will this feature be placed before, after, or inside (at the beggining or end).","placeholder":"","dropdownOptions":{"Before":"before","After":"after","Start":"start","End":"end"}}},"info_featurePlacement":{"show":true,"name":"","description":"Where to place this feature on the page. (Relative to the selector)","placeholder":""},"displayTitle":"Backlinks","info_displayTitle":{"show":true,"name":"","description":"Descriptive title to show above the feature","placeholder":""}},"tags":{"featureId":"tags","enabled":true,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"featurePlacement":{"selector":".header .data-bar","type":"end","info_selector":{"show":true,"name":"","description":"CSS selector for an element. The feature will be placed relative to this element.","placeholder":""},"info_type":{"show":true,"name":"","description":"Will this feature be placed before, after, or inside (at the beggining or end).","placeholder":"","dropdownOptions":{"Before":"before","After":"after","Start":"start","End":"end"}}},"info_featurePlacement":{"show":true,"name":"","description":"Where to place this feature on the page. (Relative to the selector)","placeholder":""},"displayTitle":"","info_displayTitle":{"show":true,"name":"","description":"Descriptive title to show above the feature","placeholder":""},"showInlineTags":true,"showFrontmatterTags":true,"info_showInlineTags":{"show":true,"name":"","description":"Show tags defined inside the document at the top of the page.","placeholder":""},"info_showFrontmatterTags":{"show":true,"name":"","description":"Show tags defined in the frontmatter of the document at the top of the page.","placeholder":""}},"alias":{"featureId":"aliases","enabled":true,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"featurePlacement":{"selector":".header .data-bar","type":"start","info_selector":{"show":true,"name":"","description":"CSS selector for an element. The feature will be placed relative to this element.","placeholder":""},"info_type":{"show":true,"name":"","description":"Will this feature be placed before, after, or inside (at the beggining or end).","placeholder":"","dropdownOptions":{"Before":"before","After":"after","Start":"start","End":"end"}}},"info_featurePlacement":{"show":true,"name":"","description":"Where to place this feature on the page. (Relative to the selector)","placeholder":""},"displayTitle":"Aliases","info_displayTitle":{"show":true,"name":"","description":"Descriptive title to show above the feature","placeholder":""}},"properties":{"featureId":"properties","enabled":true,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"featurePlacement":{"selector":".header","type":"start","info_selector":{"show":true,"name":"","description":"CSS selector for an element. The feature will be placed relative to this element.","placeholder":""},"info_type":{"show":true,"name":"","description":"Will this feature be placed before, after, or inside (at the beggining or end).","placeholder":"","dropdownOptions":{"Before":"before","After":"after","Start":"start","End":"end"}}},"info_featurePlacement":{"show":true,"name":"","description":"Where to place this feature on the page. (Relative to the selector)","placeholder":""},"displayTitle":"Properties","info_displayTitle":{"show":true,"name":"","description":"Descriptive title to show above the feature","placeholder":""},"info_hideProperties":{"show":true,"name":"","description":"A list of properties to hide from the properties view","placeholder":""}},"fileNavigation":{"featureId":"file-navigation","enabled":true,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"featurePlacement":{"selector":"#left-sidebar-content","type":"end","info_selector":{"show":true,"name":"","description":"CSS selector for an element. The feature will be placed relative to this element.","placeholder":""},"info_type":{"show":true,"name":"","description":"Will this feature be placed before, after, or inside (at the beggining or end).","placeholder":"","dropdownOptions":{"Before":"before","After":"after","Start":"start","End":"end"}}},"info_featurePlacement":{"show":true,"name":"","description":"Where to place this feature on the page. (Relative to the selector)","placeholder":""},"info_includePath":{"show":false,"name":"","description":"","placeholder":""},"showCustomIcons":false,"showDefaultFolderIcons":false,"showDefaultFileIcons":false,"defaultFolderIcon":"lucide//folder","defaultFileIcon":"lucide//file","defaultMediaIcon":"lucide//file-image","exposeStartingPath":true,"info_showCustomIcons":{"show":true,"name":"","description":"Show custom icons for files and folders","placeholder":""},"info_showDefaultFolderIcons":{"show":true,"name":"","description":"Show a default icon of a folder for every folder in the tree","placeholder":""},"info_showDefaultFileIcons":{"show":true,"name":"","description":"Show a default icon of a file for every file in the tree","placeholder":""},"info_defaultFolderIcon":{"show":true,"name":"","description":"The icon to use for folders. Prefix with 'lucide//' to use a Lucide icon","placeholder":""},"info_defaultFileIcon":{"show":true,"name":"","description":"The icon to use for files. Prefix with 'lucide//' to use a Lucide icon","placeholder":""},"info_defaultMediaIcon":{"show":true,"name":"","description":"The icon to use for media files. Prefix with 'lucide//' to use a Lucide icon","placeholder":""},"info_exposeStartingPath":{"show":true,"name":"","description":"Whether or not to show the current file in the file tree when the page is first loaded","placeholder":""},"includePath":"site-lib/html/file-tree.html"},"search":{"featureId":"search","enabled":true,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"featurePlacement":{"selector":"#left-sidebar .topbar-content","type":"start","info_selector":{"show":true,"name":"","description":"CSS selector for an element. The feature will be placed relative to this element.","placeholder":""},"info_type":{"show":true,"name":"","description":"Will this feature be placed before, after, or inside (at the beggining or end).","placeholder":"","dropdownOptions":{"Before":"before","After":"after","Start":"start","End":"end"}}},"info_featurePlacement":{"show":true,"name":"","description":"Where to place this feature on the page. (Relative to the selector)","placeholder":""},"displayTitle":"Search...","info_displayTitle":{"show":true,"name":"","description":"Descriptive title to show above the feature","placeholder":""}},"outline":{"featureId":"outline","enabled":true,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"featurePlacement":{"selector":"#right-sidebar-content","type":"end","info_selector":{"show":true,"name":"","description":"CSS selector for an element. The feature will be placed relative to this element.","placeholder":""},"info_type":{"show":true,"name":"","description":"Will this feature be placed before, after, or inside (at the beggining or end).","placeholder":"","dropdownOptions":{"Before":"before","After":"after","Start":"start","End":"end"}}},"info_featurePlacement":{"show":true,"name":"","description":"Where to place this feature on the page. (Relative to the selector)","placeholder":""},"displayTitle":"Outline","info_displayTitle":{"show":true,"name":"","description":"Descriptive title to show above the feature","placeholder":""},"startCollapsed":true,"minCollapseDepth":"2","info_startCollapsed":{"show":true,"name":"","description":"Should the outline start collapsed?","placeholder":""},"info_minCollapseDepth":{"show":true,"name":"","description":"Only allow outline items to be collapsed if they are at least this many levels deep in the tree.","placeholder":"","dropdownOptions":{"1":1,"2":2,"No Collapse":100}}},"themeToggle":{"featureId":"theme-toggle","enabled":true,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"featurePlacement":{"selector":"#right-sidebar .topbar-content","type":"start","info_selector":{"show":true,"name":"","description":"CSS selector for an element. The feature will be placed relative to this element.","placeholder":""},"info_type":{"show":true,"name":"","description":"Will this feature be placed before, after, or inside (at the beggining or end).","placeholder":"","dropdownOptions":{"Before":"before","After":"after","Start":"start","End":"end"}}},"info_featurePlacement":{"show":true,"name":"","description":"Where to place this feature on the page. (Relative to the selector)","placeholder":""},"displayTitle":"","info_displayTitle":{"show":true,"name":"","description":"Descriptive title to show above the feature","placeholder":""}},"graphView":{"featureId":"graph-view","enabled":false,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"featurePlacement":{"selector":"#right-sidebar-content","type":"start","info_selector":{"show":true,"name":"","description":"CSS selector for an element. The feature will be placed relative to this element.","placeholder":""},"info_type":{"show":true,"name":"","description":"Will this feature be placed before, after, or inside (at the beggining or end).","placeholder":"","dropdownOptions":{"Before":"before","After":"after","Start":"start","End":"end"}}},"info_featurePlacement":{"show":true,"name":"","description":"Where to place this feature on the page. (Relative to the selector)","placeholder":""},"displayTitle":"Graph View","info_displayTitle":{"show":true,"name":"","description":"Descriptive title to show above the feature","placeholder":""},"showOrphanNodes":true,"showAttachments":false,"allowGlobalGraph":true,"allowExpand":true,"attractionForce":1,"linkLength":15,"repulsionForce":80,"centralForce":2,"edgePruning":100,"minNodeRadius":3,"maxNodeRadius":7,"info_showOrphanNodes":{"show":true,"name":"","description":"Show nodes that are not connected to any other nodes.","placeholder":""},"info_showAttachments":{"show":true,"name":"","description":"Show attachments like images and PDFs as nodes in the graph.","placeholder":""},"info_allowGlobalGraph":{"show":true,"name":"","description":"Allow the user to view the global graph of all nodes.","placeholder":""},"info_allowExpand":{"show":true,"name":"","description":"Allow the user to pop-out the graph view to take up the whole screen","placeholder":""},"info_attractionForce":{"show":true,"name":"","description":"How much should linked nodes attract each other? This will make the graph appear more clustered.","placeholder":""},"info_linkLength":{"show":true,"name":"","description":"How long should the links between nodes be? The shorter the links the more connected nodes will cluster together.","placeholder":""},"info_repulsionForce":{"show":true,"name":"","description":"How much should nodes repel each other? This will make disconnected parts more spread out.","placeholder":""},"info_centralForce":{"show":true,"name":"","description":"How much should nodes be attracted to the center? This will make the graph appear more dense and circular.","placeholder":""},"info_edgePruning":{"show":true,"name":"","description":"Edges with a length above this threshold will not be rendered, however they will still contribute to the simulation. This can help large tangled graphs look more organised. Hovering over a node will still display these links.","placeholder":""},"info_minNodeRadius":{"show":true,"name":"","description":"How small should the smallest nodes be? The smaller a node is the less it will attract other nodes.","placeholder":""},"info_maxNodeRadius":{"show":true,"name":"","description":"How large should the largest nodes be? Nodes are sized by how many links they have. The larger a node is the more it will attract other nodes. This can be used to create a good grouping around the most important nodes.","placeholder":""}},"sidebar":{"featureId":"sidebar","enabled":true,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"allowResizing":true,"allowCollapsing":true,"rightDefaultWidth":"20em","leftDefaultWidth":"20em","info_allowResizing":{"show":true,"name":"","description":"Whether or not to allow the sidebars to be resized","placeholder":""},"info_allowCollapsing":{"show":true,"name":"","description":"Whether or not to allow the sidebars to be collapsed","placeholder":""},"info_rightDefaultWidth":{"show":true,"name":"","description":"The default width of the right sidebar","placeholder":""},"info_leftDefaultWidth":{"show":true,"name":"","description":"The default width of the left sidebar","placeholder":""}},"customHead":{"featureId":"custom-head","enabled":true,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"featurePlacement":{"selector":"head","type":"end","info_selector":{"show":true,"name":"","description":"CSS selector for an element. The feature will be placed relative to this element.","placeholder":""},"info_type":{"show":true,"name":"","description":"Will this feature be placed before, after, or inside (at the beggining or end).","placeholder":"","dropdownOptions":{"Before":"before","After":"after","Start":"start","End":"end"}}},"info_featurePlacement":{"show":true,"name":"","description":"Where to place this feature on the page. (Relative to the selector)","placeholder":""},"info_includePath":{"show":false,"name":"","description":"","placeholder":""},"sourcePath":"a9s/copy_action.html","info_sourcePath":{"show":true,"name":"","description":"The local path to the source .html file which will be included.","placeholder":"","fileInputOptions":{"makeRelativeToVault":true,"browseButton":true}},"includePath":"site-lib/html/custom-head.html"},"document":{"featureId":"obsidian-document","enabled":true,"unavailable":false,"alwaysEnabled":true,"hideSettingsButton":false,"allowFoldingLists":true,"allowFoldingHeadings":true,"documentWidth":"40em","info_allowFoldingLists":{"show":true,"name":"","description":"Whether or not to allow lists to be folded","placeholder":""},"info_allowFoldingHeadings":{"show":true,"name":"","description":"Whether or not to allow headings to be folded","placeholder":""},"info_documentWidth":{"show":true,"name":"","description":"The width of the document","placeholder":""}},"rss":{"featureId":"rss","enabled":false,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":false,"siteUrl":"","authorName":"","info_siteUrl":{"show":true,"name":"","description":"The url that this site will be hosted at","placeholder":"https://example.com/mysite"},"info_authorName":{"show":true,"name":"","description":"The name of the author of the site","placeholder":""}},"linkPreview":{"featureId":"link-preview","enabled":true,"unavailable":false,"alwaysEnabled":false,"hideSettingsButton":true}},"modifiedTime":1767269269240,"siteName":"Compendium","vaultName":"Vault","exportRoot":"engineering/compendium","baseURL":"","pluginVersion":"1.9.2","themeName":"","bodyClasses":"publish css-settings-manager show-inline-title show-ribbon code-styler-style-inline code-styler code-styler-gutter-highlight is-focused","hasFavicon":false}