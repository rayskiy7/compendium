<!DOCTYPE html> <html lang="en"><head>
<title>TC++PL (I)</title>
<base href=".">
<meta name="pathname" content="tc++pl-(i).html">
<meta name="description" content="Compendium - TC++PL (I)">
<meta property="og:title" content="TC++PL (I)">
<meta property="og:description" content="Compendium - TC++PL (I)">
<meta property="og:type" content="website">
<meta property="og:url" content="tc++pl-(i).html">
<meta property="og:image" content="a9s/screenshot-2025-09-29-at-04.15.37.png">
<meta charset="UTF-8"><meta property="og:site_name" content="Compendium"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="preload" href="site-lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/snippets.css"></noscript><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/other-plugins.css"></noscript><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:calc(2.3em + 2 * var(--sidebar-margin));width:var(--sidebar-width);padding:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row;border-top-right-radius:var(--radius-l)}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse;border-top-left-radius:var(--radius-l)}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:1px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#navbar:not(:empty){display:flex;align-items:center;justify-content:space-between;padding:.5em 1em;width:100%}#main{display:flex;flex-direction:column;height:100%;width:100%;align-items:stretch;justify-content:center}#main-horizontal{display:flex;flex-direction:row;flex-grow:1;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6,li):has(> :is(.math,table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const n=await fetch(e);if(!n.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await n.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let n=document.createRange().createContextualFragment(o);t.before(n),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(n){let l=o[n],c=n+1;l?(l&&"true"!=l.getAttribute("loaded")||n<o.length&&e(c),n<o.length&&l.addEventListener("load",(()=>e(c)))):n<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager show-inline-title show-ribbon code-styler-style-inline code-styler code-styler-gutter-highlight is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="main"><div id="navbar"></div><div id="main-horizontal"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles">mjx-c.mjx-c2200::before{padding:.694em .556em .022em 0;content:"∀"}mjx-texatom{display:inline-block;text-align:left}mjx-c.mjx-c1D43A.TEX-I::before{padding:.705em .786em .022em 0;content:"G"}mjx-c.mjx-c1D443.TEX-I::before{padding:.683em .751em 0 0;content:"P"}mjx-c.mjx-c1D434.TEX-I::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c1D447.TEX-I::before{padding:.677em .704em 0 0;content:"T"}mjx-c.mjx-c2014::before{padding:.285em 1em 0 0;content:"—"}mjx-c.mjx-c1D451.TEX-I::before{padding:.694em .52em .01em 0;content:"d"}mjx-c.mjx-c1D452.TEX-I::before{padding:.442em .466em .011em 0;content:"e"}mjx-c.mjx-c1D453.TEX-I::before{padding:.705em .55em .205em 0;content:"f"}mjx-c.mjx-c1D456.TEX-I::before{padding:.661em .345em .011em 0;content:"i"}mjx-c.mjx-c1D460.TEX-I::before{padding:.442em .469em .01em 0;content:"s"}mjx-c.mjx-c1D461.TEX-I::before{padding:.626em .361em .011em 0;content:"t"}mjx-c.mjx-c210E.TEX-I::before{padding:.694em .576em .011em 0;content:"h"}mjx-c.mjx-c1D464.TEX-I::before{padding:.443em .716em .011em 0;content:"w"}mjx-c.mjx-c1D45F.TEX-I::before{padding:.442em .451em .011em 0;content:"r"}mjx-c.mjx-c1D45D.TEX-I::before{padding:.442em .503em .194em 0;content:"p"}mjx-c.mjx-c1D44E.TEX-I::before{padding:.441em .529em .01em 0;content:"a"}mjx-c.mjx-c1D450.TEX-I::before{padding:.442em .433em .011em 0;content:"c"}mjx-c.mjx-c1D466.TEX-I::before{padding:.442em .49em .205em 0;content:"y"}mjx-c.mjx-c1D442.TEX-I::before{padding:.704em .763em .022em 0;content:"O"}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c1D459.TEX-I::before{padding:.694em .298em .011em 0;content:"l"}mjx-c.mjx-c1D45C.TEX-I::before{padding:.441em .485em .011em 0;content:"o"}mjx-c.mjx-c1D454.TEX-I::before{padding:.442em .477em .205em 0;content:"g"}mjx-c.mjx-c1D45B.TEX-I::before{padding:.442em .6em .011em 0;content:"n"}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;font-size-adjust:none;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-msup{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-mi{display:inline-block;text-align:left}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("site-lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("site-lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("site-lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("site-lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("site-lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("site-lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("site-lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("site-lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("site-lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("site-lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("site-lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("site-lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("site-lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("site-lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("site-lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("site-lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("site-lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("site-lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("site-lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("site-lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("site-lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("site-lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c5B::before{padding:.75em .278em .25em 0;content:"["}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c1D458.TEX-I::before{padding:.694em .521em .011em 0;content:"k"}mjx-c.mjx-c2C::before{padding:.121em .278em .194em 0;content:","}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c5D::before{padding:.75em .278em .25em 0;content:"]"}mjx-c.mjx-c30::before{padding:.666em .5em .022em 0;content:"0"}mjx-c.mjx-c1D43B.TEX-I::before{padding:.683em .888em 0 0;content:"H"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c1D438.TEX-I::before{padding:.68em .764em 0 0;content:"E"}mjx-c.mjx-c2287::before{padding:.636em .778em .138em 0;content:"⊇"}mjx-c.mjx-c2217::before{padding:.465em .5em 0 0;content:"∗"}mjx-c.mjx-c222A::before{padding:.598em .667em .022em 0;content:"∪"}</style><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="TC++PL_(I)_0">TC++PL (I)</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-p"><p dir="auto">This is my notes for the book:<br>
<strong>The C++ Programming Language</strong> — <em>Bjarne Stroustrup</em><br>
Tome I: Introduction</p></div><div class="el-h1"><h1 data-heading="1. Notes to the Reader" dir="auto" class="heading" id="1._Notes_to_the_Reader_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>1. Notes to the Reader</h1></div><div class="el-h2"><h2 data-heading="The Design of C++" dir="auto" class="heading" id="The_Design_of_C++_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The Design of C++</h2></div><div class="el-p"><p dir="auto">C++ is based on the idea of providing both:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><em>direct mappings of build-in operations and types ti hardware</em> to provide efficient memory use and efficient low-level operations, and</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><em>affordable and flexible abstractions mechanisms</em> to provide user-defined types with the same notation support, range of uses&lt; and performance as build-in types.</li>
</ul></div><div class="el-blockquote"><blockquote dir="auto">
<p>C++ is a language for developing and using elegant and efficient abstractions.</p>
</blockquote></div><div class="el-blockquote"><blockquote dir="auto">
<p>C++ concentrates on <em>system programming</em>.</p>
</blockquote></div><div class="el-blockquote"><blockquote dir="auto">
<p>C++ follows zero-overhead principle.</p>
</blockquote></div><div class="el-h2"><h2 data-heading="Suggestions for C Programmers" dir="auto" class="heading" id="Suggestions_for_C_Programmers_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Suggestions for C Programmers</h2></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Don't assume that something laboriously written in C style is more efficient than a shorter alternative. Often, the opposite is true.</p>
</div></div></div><div class="el-h2"><h2 data-heading="The 2011 Standard" dir="auto" class="heading" id="The_2011_Standard_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The 2011 Standard</h2></div><div class="el-p"><p dir="auto">Aims for the C++11 effort were:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Make C++ a better language for systems programming and library building</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Make C++ easier to teach and learn<br>
Also to introduce concurrent systems programming type-safe and portable (new memory model, facilities for lock-free programming)</li>
</ul></div><div class="el-p"><p dir="auto">Most widely useful features of C++11:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">=delete</code>, <code class="code-styler-inline">=default</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">auto</code> (type deducing)</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">constexpr</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>move semantic</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">noexcept</code></li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>range-for statement</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">final</code> and <code class="code-styler-inline">override</code></li>
<li data-line="7" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">enum class</code></li>
</ul></div><div class="el-h2"><h2 data-heading="Standard Library" dir="auto" class="heading" id="Standard_Library_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Standard Library</h2></div><div class="el-p"><p dir="auto">About new features of standard library:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">unordered_map</code> and so on</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">thread</code>, <code class="code-styler-inline">mutex</code>, <code class="code-styler-inline">lock</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">future</code>, <code class="code-styler-inline">promise</code>, <code class="code-styler-inline">async()</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>garbage collector interface</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">regexp</code></li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>random numbers</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">unique_ptr</code> (originally called <code class="code-styler-inline">move_ptr</code>, <code class="code-styler-inline">auto_ptr</code>)</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">shared_ptr</code> (originally <code class="code-styler-inline">counted_ptr</code>)</li>
<li data-line="8" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">tuple</code></li>
<li data-line="9" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">bind()</code></li>
<li data-line="10" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">function</code> type</li>
</ul></div><div class="el-h2"><h2 data-heading="What is C++ used for?" dir="auto" class="heading" id="What_is_C++_used_for?_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>What is C++ used for?</h2></div><div class="el-p"><p dir="auto">C++ is considerable to have unique strengths in the area of infrastructure software.</p></div><div class="el-h2"><h2 data-heading="Advice" dir="auto" class="heading" id="Advice_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advice</h2></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">represent ideas directly in code</li>
<li data-line="1" dir="auto">aim: elegant and efficient</li>
<li data-line="2" dir="auto">don't overabstract</li>
<li data-line="3" dir="auto">try elegant and efficient abstractions from libraries</li>
<li data-line="4" dir="auto">represent relations directly in code</li>
<li data-line="5" dir="auto">represent independent ideas separately in code</li>
<li data-line="6" dir="auto">C++ is not just object-oriented</li>
<li data-line="7" dir="auto">C++ is not just for generic programming</li>
<li data-line="8" dir="auto">prefer solutions that can be statically checked (compile-time preference)</li>
<li data-line="9" dir="auto">make resources explicit (as class objects)</li>
<li data-line="10" dir="auto">express simple ideas simply</li>
<li data-line="11" dir="auto">use libraries. don't build everything from scratch</li>
<li data-line="12" dir="auto">use type-rich style of programming</li>
<li data-line="13" dir="auto">don't avoid high-level abstractions out of <strong>fear of performance problems</strong></li>
<li data-line="14" dir="auto">if data has an invariant — encapsulate it</li>
<li data-line="15" dir="auto">C++ is not just C with a few extensions</li>
</ol></div><div class="el-h1"><h1 data-heading="2. A Tour of C++: The Basics" dir="auto" class="heading" id="2._A_Tour_of_C++_The_Basics_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2. A Tour of C++: The Basics</h1></div><div class="el-h2"><h2 data-heading="The Basics" dir="auto" class="heading" id="The_Basics_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The Basics</h2></div><div class="el-p"><p dir="auto">The ISO C++ standard defines two kinds of entities:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><em>Core language features</em> (build-in types, loops, etc.)</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><em>Standard-library components</em> (containers, I/O operations)</li>
</ul></div><div class="el-p"><p dir="auto">see: <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch2/helloworld.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch2/helloworld.cpp" target="_self">hello world</a>.</p></div><div class="el-h2"><h2 data-heading="Types, Variables, Arithmetic" dir="auto" class="heading" id="Types,_Variables,_Arithmetic_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Types, Variables, Arithmetic</h2></div><div class="el-p"><p dir="auto">C++ introduces <code class="code-styler-inline">bool</code> type.</p></div><div class="el-p"><p dir="auto">Different ways to initialize:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2.3</span><span class="token punctuation">;</span> <span class="token comment">// truncates to 2</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">int</span> i <span class="token punctuation">{</span><span class="token number">2.3</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// error</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">2.3</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// error</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>Don't introduce a name until you have a suitable value for it! Even using user-defined types</p>
</blockquote></div><div class="el-p"><p dir="auto">type can be deduced from the initializer:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">auto</span> b <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">auto</span> ch <span class="token operator">=</span> <span class="token char">'x'</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">auto</span> i <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">auto</span> d <span class="token operator">=</span> <span class="token number">1.2</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">auto</span> z <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// gets type from sqrt result</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Contrary</div></div><div class="callout-content">
<p dir="auto">With <code class="code-styler-inline">auto</code> we use <code class="code-styler-inline">=</code>, not <code class="code-styler-inline">{}</code> syntax for init</p>
</div></div></div><div class="el-p"><p dir="auto">Specific reasons to use explicit type declaration:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>for readability (in large scopes)</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>be explicit about range or precision (e.g., <code class="code-styler-inline">double</code> rather than <code class="code-styler-inline">float</code>)</li>
</ul></div><div class="el-h2"><h2 data-heading="Constants" dir="auto" class="heading" id="Constants_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Constants</h2></div><div class="el-p"><p dir="auto">There are two notions of immutability:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">const</code> — "I promise not to change this value"</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">constexpr</code> — "To be evaluated at compile time"</li>
</ul></div><div class="el-p"><p dir="auto">It's possible to define <code class="code-styler-inline">constexpr</code> functions:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">double</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> x<span class="token operator">*</span>x<span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">It calls will be evaluated on compile time</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warning</div></div><div class="callout-content">
<p dir="auto">To be a <code class="code-styler-inline">constexpr</code> function must include only return statement. (But see also <code class="code-styler-inline">consteval</code> in C++20)</p>
</div></div></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">constexpr</code> functions may be called with no-<code class="code-styler-inline">constexpr</code> args.</p></div><div class="el-p"><p dir="auto">In few places it must be <code class="code-styler-inline">constexpr</code>:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>array bounds</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>case labels</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>some template arguments</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>constants declared using <code class="code-styler-inline">constexpr</code></li>
</ul></div><div class="el-h2"><h2 data-heading="Pointers, Arrays, and Loops" dir="auto" class="heading" id="Pointers,_Arrays,_and_Loops_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Pointers, Arrays, and Loops</h2></div><div class="el-p"><p dir="auto">New range-for-statement:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> v<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> x <span class="token operator">:</span> v<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> x <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// even for in-place defined arrays</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">It's also possible to have the objects themself, not copy:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> v<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> x <span class="token operator">:</span> v<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token operator">++</span>x<span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">About <code class="code-styler-inline">&amp;</code></div></div><div class="callout-content">
<p dir="auto">A reference cannot be made to refer to a different object after its initialization</p>
</div></div></div><div class="el-p"><p dir="auto">C++ introduces <code class="code-styler-inline">nullprt</code>:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">double</span><span class="token operator">*</span> dp <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">Link<span class="token operator">&lt;</span>Record<span class="token operator">&gt;</span><span class="token operator">*</span> lst <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">In declaration operators <code class="code-styler-inline">&amp;</code>, <code class="code-styler-inline">*</code>, <code class="code-styler-inline">[]</code>, <code class="code-styler-inline">()</code> (invokation) are called <em>declarator operators</em>.<br>
<mark>Built-in types</mark> — fundamental types and their derivatives built from them, <code class="code-styler-inline">const</code> and <em>declarator operators</em>.</p></div><div class="el-h2"><h2 data-heading="Structures" dir="auto" class="heading" id="Structures_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Structures</h2></div><div class="el-p"><p dir="auto">Unlike in C, in C++ struct types can be referred just by name:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">Vector</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">int</span> sz<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">double</span><span class="token operator">*</span> elem<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">Vector v<span class="token punctuation">;</span> <span class="token comment">// not `struct Vector v;`</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">A way to dynamically allocate memory and init Vector:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">vector_init</span><span class="token punctuation">(</span>Vector<span class="token operator">&amp;</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> s<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	v<span class="token punctuation">.</span>elem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	v<span class="token punctuation">.</span>sz <span class="token operator">=</span> s<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">new</code> allocates from <em>the free storage</em> | <em>dynamic memory</em> | <em>heap</em>.</p></div><div class="el-h2"><h2 data-heading="Classes" dir="auto" class="heading" id="Classes_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Classes</h2></div><div class="el-p"><p dir="auto">Example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Vector</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span> <span class="token operator">:</span> elem<span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> sz<span class="token punctuation">{</span>s<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">double</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> elem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment">// no `&amp;`?</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> sz<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">private</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">double</span><span class="token operator">*</span> elem<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token keyword">int</span> sz<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token comment">//usage:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">Vector <span class="token function">v</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Enumerations" dir="auto" class="heading" id="Enumerations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Enumerations</h2></div><div class="el-p"><p dir="auto">C++ introduces <code class="code-styler-inline">enum class</code> that is not just <code class="code-styler-inline">enum</code> (plain <code class="code-styler-inline">enum</code>) from C, but is its extended version:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span>red<span class="token punctuation">,</span> blue<span class="token punctuation">,</span> green<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">Light</span> <span class="token punctuation">{</span>green<span class="token punctuation">,</span> yellow<span class="token punctuation">,</span> red<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token comment">// usage:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">Color c <span class="token operator">=</span> Color<span class="token double-colon punctuation">::</span>red<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">Light l <span class="token operator">=</span> Light<span class="token double-colon punctuation">::</span>red<span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">An enumeration is a user-defined type so we can define operators for it:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">Light<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span>Light<span class="token operator">&amp;</span> l<span class="token punctuation">)</span> <span class="token comment">// prefix form(!)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">switch</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">case</span> Light<span class="token double-colon punctuation">::</span>green<span class="token operator">:</span>  <span class="token keyword">return</span> l <span class="token operator">=</span> Light<span class="token double-colon punctuation">::</span>yellow<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">case</span> Light<span class="token double-colon punctuation">::</span>yellow<span class="token operator">:</span> <span class="token keyword">return</span> l <span class="token operator">=</span> Light<span class="token double-colon punctuation">::</span>red<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">case</span> Light<span class="token double-colon punctuation">::</span>red<span class="token operator">:</span>    <span class="token keyword">return</span> l <span class="token operator">=</span> Light<span class="token double-colon punctuation">::</span>green<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token comment">//usage:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">Light l <span class="token operator">=</span> Light<span class="token double-colon punctuation">::</span>yellow<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">Light next <span class="token operator">=</span> <span class="token operator">++</span>l<span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Modularity" dir="auto" class="heading" id="Modularity_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Modularity</h2></div><div class="el-p"><p dir="auto">DS says: a program consists of entities: <mark>variables</mark>, <mark>functions</mark>, <mark>types</mark>. Declaration — all that compiler needs.</p></div><div class="el-p"><p dir="auto">Example without any <em>definitions</em>. There are only <em>declaration</em> (interface):</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">double</span> <span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Vector</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token function">Vector</span> <span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">double</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">private</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token keyword">int</span> sz<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token keyword">double</span><span class="token operator">*</span> elem<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Namespaces" dir="auto" class="heading" id="Namespaces_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Namespaces</h2></div><div class="el-p"><p dir="auto">DS says: inside a namespace you can put everything you can put into global space.</p></div><div class="el-p"><p dir="auto">For not to conflict with global names from std you can use namespaces. Example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> My_code <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">class</span> <span class="token class-name">complex</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	complex <span class="token function">sqrt</span><span class="token punctuation">(</span>complex<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token class-name">My_code</span><span class="token double-colon punctuation">::</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	complex z1 <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// not My_code::complex, just complex</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token keyword">auto</span> z2 <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>z1<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token class-name">My_code</span><span class="token double-colon punctuation">::</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">using-<strong>directive</strong>:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Exceptions" dir="auto" class="heading" id="Exceptions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Exceptions</h2></div><div class="el-p"><p dir="auto">You can just <code class="code-styler-inline">throw</code> in critical section:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">double</span><span class="token operator">&amp;</span> Vector<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">&gt;=</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		<span class="token keyword">throw</span> out_of_range<span class="token punctuation">{</span><span class="token string">"Vector::operator[]"</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">return</span> elem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token comment">// usage, later:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">try</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	v<span class="token punctuation">[</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">// throws exception</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token keyword">catch</span> <span class="token punctuation">(</span>out_of_range<span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// handle exception</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Invariants" dir="auto" class="heading" id="Invariants_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Invariants</h2></div><div class="el-p"><p dir="auto">Some stable state of correct class object must be observed. It's work for a constructor to set invariant, and public methods must to maintain the invariant (at least on the return). And then destructor can rely on that invariant.</p></div><div class="el-h2"><h2 data-heading="Assertions" dir="auto" class="heading" id="Assertions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Assertions</h2></div><div class="el-p"><p dir="auto">On the compile time:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token comment">// first arg must be constexpr</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">static_assert</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"integers are too small"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check type size</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Often used in generic programming for make assertions about concrete types.</p></div><div class="el-h2"><h2 data-heading="Advice" dir="auto" class="heading" id="Advice_1"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advice</h2></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>You don't have to know every detail of C++ to write good programs</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Focus on programming techniques, not on language features</li>
</ul></div><div class="el-h1"><h1 data-heading="3. A tour of C++: Abstraction Mechanisms" dir="auto" class="heading" id="3._A_tour_of_C++_Abstraction_Mechanisms_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>3. A tour of C++: Abstraction Mechanisms</h1></div><div class="el-h2"><h2 data-heading="Introduction" dir="auto" class="heading" id="Introduction_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Introduction</h2></div><div class="el-p"><p dir="auto">Classes in C++ divided on:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><em>abstract classes</em></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><em>concrete classes</em></li>
</ul></div><div class="el-h2"><h2 data-heading="An Arithmetic Type" dir="auto" class="heading" id="An_Arithmetic_Type_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>An Arithmetic Type</h2></div><div class="el-p"><p dir="auto">There is an ordinary example. Pay attention to <code class="code-styler-inline">const</code> method of class, such one can not to change object at all:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">complex</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">double</span> re<span class="token punctuation">,</span> im<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token function">complex</span><span class="token punctuation">(</span><span class="token keyword">double</span> r<span class="token punctuation">,</span> <span class="token keyword">double</span> i<span class="token punctuation">)</span> <span class="token operator">:</span> re<span class="token punctuation">{</span>r<span class="token punctuation">}</span><span class="token punctuation">,</span> im<span class="token punctuation">{</span>i<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token function">complex</span><span class="token punctuation">(</span><span class="token keyword">double</span> r<span class="token punctuation">)</span>           <span class="token operator">:</span> re<span class="token punctuation">{</span>r<span class="token punctuation">}</span><span class="token punctuation">,</span> im<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token function">complex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                   <span class="token operator">:</span> re<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> im<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">real</span><span class="token punctuation">(</span><span class="token keyword">double</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>re<span class="token operator">=</span>d<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">imag</span><span class="token punctuation">(</span><span class="token keyword">double</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>im<span class="token operator">=</span>d<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token keyword">double</span> <span class="token function">real</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> re<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token keyword">double</span> <span class="token function">imag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> im<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	complex<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span>complex z<span class="token punctuation">)</span> <span class="token punctuation">{</span>re<span class="token operator">+=</span>z<span class="token punctuation">.</span>re<span class="token punctuation">,</span> im<span class="token operator">+=</span>z<span class="token punctuation">.</span>im<span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	complex<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">-=</span><span class="token punctuation">(</span>complex z<span class="token punctuation">)</span> <span class="token punctuation">{</span>re<span class="token operator">-=</span>z<span class="token punctuation">.</span>re<span class="token punctuation">,</span> im<span class="token operator">-=</span>z<span class="token punctuation">.</span>im<span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">	complex<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">*=</span><span class="token punctuation">(</span>complex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// just declaration</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">	complex<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">/=</span><span class="token punctuation">(</span>complex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// just declaration</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Wow</div></div><div class="callout-content">
<p dir="auto">Function defined (not declared) in a class are inlined by default!</p>
</div></div></div><div class="el-p"><p dir="auto">see about <code class="code-styler-inline">inline</code>: <a data-href="🔗 С++ all modifiers#^inlinevar" href="engineering/c++-essentials/🔗-с++-all-modifiers.html" class="internal-link" target="_self" rel="noopener nofollow">🔗 С++ all modifiers &gt; ^inlinevar</a></p></div><div class="el-blockquote"><blockquote dir="auto">
<p>By defining a default constructor you eliminate the possibility of uninitialized variables of that type (<code class="code-styler-inline">complex</code>).</p>
</blockquote></div><div class="el-p"><p dir="auto">Operations that don't require direct access to the representation can be defined separately (out of class):</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">complex <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span>complex a<span class="token punctuation">,</span> complex b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token operator">+=</span>b<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">complex <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span>complex a<span class="token punctuation">,</span> complex b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token operator">-=</span>b<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">complex <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span>complex a<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token operator">-</span>a<span class="token punctuation">.</span><span class="token function">real</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span>a<span class="token punctuation">.</span><span class="token function">imag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment">// unary minus</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">bool</span>   <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span>complex a<span class="token punctuation">,</span> complex b<span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">real</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>b<span class="token punctuation">.</span><span class="token function">real</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span><span class="token function">imag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>b<span class="token punctuation">.</span><span class="token function">imag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Note: <code class="code-styler-inline">a+=b</code> doesn't change the original because param <code class="code-styler-inline">a</code> is considered as a copy.</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token comment">//usage:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">complex a <span class="token punctuation">{</span><span class="token number">2.3</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">complex b <span class="token punctuation">{</span><span class="token number">1</span><span class="token operator">/</span>a<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// copy?</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">complex c <span class="token punctuation">{</span>a <span class="token operator">+</span> z<span class="token operator">*</span>complex<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2.3</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token operator">!=</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">see <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch3/mycomplex.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch3/mycomplex.cpp" target="_self">example</a>.</p></div><div class="el-h2"><h2 data-heading="A container" dir="auto" class="heading" id="A_container_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>A container</h2></div><div class="el-p"><p dir="auto">Destructor example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Vector</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">private</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">double</span><span class="token operator">*</span> elem<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">int</span> sz<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span> <span class="token operator">:</span> elem<span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> sz<span class="token punctuation">{</span>s<span class="token punctuation">}</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">!=</span>s<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> elem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token operator">~</span><span class="token function">Vector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elem<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token keyword">double</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark>RAII</mark> (Resource Acquisition Is Initialization) — the technique of acquiring resources in a constructor and releasing them in a destructor</p>
</div></div></div><div class="el-h2"><h2 data-heading="Initializing Containers" dir="auto" class="heading" id="Initializing_Containers_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Initializing Containers</h2></div><div class="el-p"><p dir="auto">For use <code class="code-styler-inline">{1, 2, 3}</code> form you need use <code class="code-styler-inline">std::initializer_list&lt;T&gt;</code>. Example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Vector</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token function">Vector</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>initializer_list<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Also you can use stream:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">Vector <span class="token function">read</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	Vector v<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">double</span> d<span class="token punctuation">;</span> is<span class="token operator">&gt;&gt;</span>d<span class="token punctuation">;</span> <span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">return</span> v<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Abstract Types" dir="auto" class="heading" id="Abstract_Types_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Abstract Types</h2></div><div class="el-p"><p dir="auto">DS says:<br>
<span alt="Screenshot 2025-09-29 at 04.15.37.png" src="a9s/screenshot-2025-09-29-at-04.15.37.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 300px; max-width: 100%;"><img alt="Screenshot 2025-09-29 at 04.15.37.png" src="a9s/screenshot-2025-09-29-at-04.15.37.png" target="_self" style="width: 300px; max-width: 100%;"></span></p></div><div class="el-blockquote"><blockquote dir="auto">
<p>For abstract classes we must allocate objects on the heap and access them through references or pointers, because we do not even know the size of an object.</p>
</blockquote></div><div class="el-p"><p dir="auto">Abstract class example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Container</span> <span class="token punctuation">{</span> <span class="token comment">// this class is a pure interface</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">virtual</span> <span class="token keyword">double</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// pure virtual func</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">virual</code> means "may be redefined lated in a class derived from this one".</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>pure virtual</em></mark> function <code class="code-styler-inline">=0</code> means that some class derived from Container <em>must</em> define the function.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark>Abstract class</mark> is a class with a <strong>pure</strong> virtual function.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark>Polymorphic type</mark> is a class with a virtual function.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content">
<p dir="auto">Polymorphic types have a virtual destructor because they (their instances) tend to be manipulated through references/pointers, and someone destroying an instance (with ref type) has no idea what resources must be released.</p>
</div></div></div><div class="el-p"><p dir="auto">Realization example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">VectorC</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Container</span></span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	Vector v<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token function">VectorC</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">v</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token operator">~</span><span class="token function">VectorC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// override</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">double</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment">// override</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment">// override</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Member (<code class="code-styler-inline">v</code>) destructor <code class="code-styler-inline">~Vector()</code> is implicitly invoked by its class's destructor (<code class="code-styler-inline">~VectorC()</code>)</p>
</div></div></div><div class="el-p"><p dir="auto">Usage:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span>Container<span class="token operator">&amp;</span> c<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">const</span> <span class="token keyword">int</span> sz <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">!=</span>sz<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		cout <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	VectorC vc <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token function">use</span><span class="token punctuation">(</span>vc<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// as Container&amp;, not VectorC&amp;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Virtual Functions" dir="auto" class="heading" id="Virtual_Functions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Virtual Functions</h2></div><div class="el-p"><p dir="auto">The usual implementation technique for selecting the right realization of the virtual function is converting of virtual function names into indices into a table of pointers to functions. This table is called the <em>virtual function table</em> or just <code class="code-styler-inline">vtbl</code>. Each class with virtual functions has its own <code class="code-styler-inline">vtbl</code> identifying its virtual functions.<br>
Graphically:<br>
<span alt="Screenshot 2025-09-29 at 15.56.15.png" src="a9s/screenshot-2025-09-29-at-15.56.15.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 600px; max-width: 100%;"><img alt="Screenshot 2025-09-29 at 15.56.15.png" src="a9s/screenshot-2025-09-29-at-15.56.15.png" target="_self" style="width: 600px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">This mechanism is almost as efficient as the <em>normal</em> function call, but is slower within 25%.<br>
About memory: +1<code class="code-styler-inline">[]</code> for each class and +1<code class="code-styler-inline">*</code> for each instance.</p></div><div class="el-h2"><h2 data-heading="Class Hierarchies" dir="auto" class="heading" id="Class_Hierarchies_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Class Hierarchies</h2></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">Helpful to know!</div></div><div class="callout-content">
<p dir="auto">GPT says: in general, all functions from base-class and in derived-class, even if they have the same signatures (override), are different in the machine code</p>
</div></div></div><div class="el-p"><p dir="auto">For hierarchy <code class="code-styler-inline">Shape -&gt; Circle -&gt; Smiley</code> you can access super-classes:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token class-name">Smiley</span><span class="token double-colon punctuation">::</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token class-name">Circle</span><span class="token double-colon punctuation">::</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> p<span class="token operator">:</span> eyes<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		p<span class="token operator">-&gt;</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Shape::draw</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	mounth<span class="token operator">-&gt;</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Shape::draw</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>Note: virtual destructor is necessary, because <code class="code-styler-inline">delete</code> is often used with pointer to a base class.<br>
Note: concrete destructor (called by <code class="code-styler-inline">vtbl</code>) implicitly invokes the destructors of base classes and members.</p>
</blockquote></div><div class="el-p"><p dir="auto">A class hierarchy offers two kinds of benefits:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><em>Interface inheritance</em></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><em>Implementation inheritance</em></li>
</ul></div><div class="el-p"><p dir="auto">If user of Shapes forget to <code class="code-styler-inline">delete</code> them, it cause memory leak. For this case there is:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">auto</span> s <span class="token operator">=</span> unique_ptr<span class="token operator">&lt;</span>Shape<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">new</span> Circle<span class="token punctuation">{</span>p<span class="token punctuation">,</span> r<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">}</span> <span class="token comment">// s is deleted here</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Copy and Move" dir="auto" class="heading" id="Copy_and_Move_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Copy and Move</h2></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span>complex z1<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	complex z2<span class="token punctuation">{</span>z1<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// copy initialization</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	complex z3<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	z3 <span class="token operator">=</span> z2<span class="token punctuation">;</span> <span class="token comment">// copy assignment</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">For simple types memberwise copy is often used. But for some Containers it is not the right semantic, and for abstract types it almost never is.</p></div><div class="el-h2"><h2 data-heading="Copying Containers" dir="auto" class="heading" id="Copying_Containers_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Copying Containers</h2></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Strong hint</div></div><div class="callout-content">
<p dir="auto">The fact that <code class="code-styler-inline">Vector</code> has a destructor hints that the default (memberwise) copy semantic is wrong</p>
</div></div></div><div class="el-p"><p dir="auto">Copying of objects is defined by:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Vector</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">private</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">double</span><span class="token operator">*</span> elem<span class="token punctuation">;</span> <span class="token comment">// 1st to init</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">int</span> sz<span class="token punctuation">;</span>       <span class="token comment">// 2nd to init</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token operator">~</span><span class="token function">Vector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elem<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">const</span> Vector<span class="token operator">&amp;</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// copy constructor</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	Vector<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Vector<span class="token operator">&amp;</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// copy assignment</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token keyword">double</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// for commmon objects</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token keyword">const</span> <span class="token keyword">double</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>   <span class="token comment">// for const objects</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Realization examples:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token class-name">Vector</span><span class="token double-colon punctuation">::</span><span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">const</span> Vector<span class="token operator">&amp;</span> a<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token operator">:</span>elem<span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span>a<span class="token punctuation">.</span>sz<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	sz<span class="token punctuation">{</span>a<span class="token punctuation">.</span>sz<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">!=</span>sz<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">		elem<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">Vector<span class="token operator">&amp;</span> Vector<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Vector<span class="token operator">&amp;</span> a<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	doubple<span class="token operator">*</span> p <span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span>a<span class="token punctuation">.</span>sz<span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">!=</span>a<span class="token punctuation">.</span>sz<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">		p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elem<span class="token punctuation">;</span> <span class="token comment">// IMPORTANT</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">	elem <span class="token operator">=</span> p<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">	sz <span class="token operator">=</span> a<span class="token punctuation">.</span>sz<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// predefined Class* this;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Moving Containers" dir="auto" class="heading" id="Moving_Containers_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Moving Containers</h2></div><div class="el-p"><p dir="auto">On return from function <code class="code-styler-inline">Vector ...(...)...{...return v;}</code> object Vector is copied, and for large data it is pointless. To state intent we want to move it rather than copy there is:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Vector</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">const</span> Vector<span class="token operator">&amp;</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// copy constructor</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	Vector<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Vector<span class="token operator">&amp;</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// copy assignment</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	</div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token function">Vector</span><span class="token punctuation">(</span>Vector<span class="token operator">&amp;&amp;</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// move constructor</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	Vector<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>Vector<span class="token operator">&amp;&amp;</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// move assignment</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token class-name">Vecto</span><span class="token double-colon punctuation">::</span><span class="token function">Vector</span><span class="token punctuation">(</span>Vector<span class="token operator">&amp;&amp;</span> a<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token operator">:</span>elem<span class="token punctuation">{</span>a<span class="token punctuation">.</span>elem<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// "grab the element" from a</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	sz<span class="token punctuation">{</span>a<span class="token punctuation">.</span>sz<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// "grab the element" from a</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	a<span class="token punctuation">.</span>elem <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span> <span class="token comment">// now `a` has no elements</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">	a<span class="token punctuation">.</span>sz <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">For that definition compiler will chose the <em>move constructor</em> to implement the transfer of the return value out of the function.</p></div><div class="el-p"><p dir="auto">For clarifying various types, GPT+DS says:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token operator">*</span>  — pointer</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token operator">&amp;</span>  — lvalue<span class="token operator">-</span>reference</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token operator">&amp;&amp;</span> — rvalue<span class="token operator">-</span>reference</div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token comment">// special rule:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">const</span> T<span class="token operator">&amp;</span> — can be attached to rvalue</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token function">NRVO</span> <span class="token punctuation">(</span>Named Return Value Optimization<span class="token punctuation">)</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content">
<p dir="auto">After a move, a moved-from object (grabbed) should be in state that allows a destructor to be run.<br>
Typically, we should also allow assignment to a moved-from (grabbed) object.</p>
</div></div></div><div class="el-p"><p dir="auto">If value will not be used again (that is not obvious for the compiler), you can:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">Vector <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	Vector <span class="token function">a</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	Vector <span class="token function">y</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	Vector <span class="token function">z</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	z <span class="token operator">=</span> x<span class="token punctuation">;</span>            <span class="token comment">// move</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	y <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// move (specified), returns an Vector&amp;&amp;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token keyword">return</span> z<span class="token punctuation">;</span>         <span class="token comment">// move</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">On return <code class="code-styler-inline">x</code> is empty from line 7, <code class="code-styler-inline">z</code> is empty from line 8, and then <code class="code-styler-inline">x,y,z</code> are destroed.</p></div><div class="el-h2"><h2 data-heading="Resource Management" dir="auto" class="heading" id="Resource_Management_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Resource Management</h2></div><div class="el-p"><p dir="auto">Vector, std::thread — resource handles, and move semantic makes its an alternative to using pointers in many cases.</p></div><div class="el-p"><p dir="auto">In fact, <code class="code-styler-inline">unique_ptr</code> and others are themselves resource handles.</p></div><div class="el-p"><p dir="auto">Replacing <code class="code-styler-inline">new</code>/<code class="code-styler-inline">delete</code> with move semantic may achieve <em>strong resource safety</em>; that is we can eliminate resource leaks for a general notion of resource (e.g., vectors for data, threads for sys threads, and fstreams for file handles)</p></div><div class="el-h2"><h2 data-heading="Suppressing Operations" dir="auto" class="heading" id="Suppressing_Operations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Suppressing Operations</h2></div><div class="el-p"><p dir="auto">One (but not the only) example when we don't wanna copy object: base class in class hierarchy. Then the best thing to do is usually to <em>delete</em> the default copy/move constructors:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Shape</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token function">Shape</span><span class="token punctuation">(</span><span class="token keyword">const</span> Shape<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span> <span class="token comment">// no copy constr</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	Shape<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Shape<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span> <span class="token comment">// no copy assign</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token function">Shape</span><span class="token punctuation">(</span>Shape<span class="token operator">&amp;&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span> <span class="token comment">// no move constr</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	Shape<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>Shape<span class="token operator">&amp;&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span> <span class="token comment">// no move assign</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token operator">~</span><span class="token function">Shape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- (read note below)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">If user has explicitly declared destructor, the compile will not <em>implicitly generate</em> <code class="code-styler-inline">move</code> operations. Furthermore:<br>
<code class="code-styler-inline">move</code> — not generated!<br>
<code class="code-styler-inline">copy</code> — generated, but deprecated! (will warn)</p>
</div></div></div><div class="el-h2"><h2 data-heading="Templates" dir="auto" class="heading" id="Templates_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Templates</h2></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>template</em></mark> is a class or function that we parametrize with a set of types or values</p>
</div></div></div><div class="el-h2"><h2 data-heading="Parameterized Types" dir="auto" class="heading" id="Parameterized_Types_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Parameterized Types</h2></div><div class="el-p"><p dir="auto">Example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Vector</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">private</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	T<span class="token operator">*</span> elem<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">int</span> sz<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token operator">~</span><span class="token function">Vector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elem<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token comment">// copy/move operations</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	T<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token keyword">const</span> T<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> sz<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Defining member functions:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token class-name">Vector</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> Negative_size<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	elem <span class="token operator">=</span> <span class="token keyword">new</span> T<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	sz <span class="token operator">=</span> s<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token keyword">const</span> T<span class="token operator">&amp;</span> Vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token keyword">const</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span>i<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">		<span class="token keyword">throw</span> out_of_range<span class="token punctuation">{</span><span class="token string">"Vector::operator[]"</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token keyword">return</span> elem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">And now we can use generic objects:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">Vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span> <span class="token function">vc</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 200 chars</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">Vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token function">vs</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 17 strings</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">Vector<span class="token operator">&lt;</span>list<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">vli</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 45 lists of ints</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">(About C++98 you couldn't use <code class="code-styler-inline">&gt;&gt;</code>, then they used additional blank: <code class="code-styler-inline">&lt; list&lt;int&gt; &gt;</code>)</p></div><div class="el-p"><p dir="auto">For support <em>for-range</em> loop you must define <code class="code-styler-inline">begin()</code> and <code class="code-styler-inline">end()</code>:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">T<span class="token operator">*</span> <span class="token function">begin</span><span class="token punctuation">(</span>Vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> x<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">return</span> x<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">&amp;</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">T<span class="token operator">*</span> <span class="token function">end</span><span class="token punctuation">(</span>Vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> x<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token function">begin</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> x<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Then use:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">const</span> Vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> vs<span class="token punctuation">)</span> <span class="token comment">// strings vector</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> s<span class="token operator">:</span> vs<span class="token punctuation">)</span> <span class="token comment">// for-range</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		cout <span class="token operator">&lt;&lt;</span> s <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Function Templates" dir="auto" class="heading" id="Function_Templates_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Function Templates</h2></div><div class="el-p"><p dir="auto">Function compile-time type parametrization:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">templace<span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">Container</span><span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">Value</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">Value <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">const</span> Container<span class="token operator">&amp;</span> c<span class="token punctuation">,</span> Value v<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> x <span class="token operator">:</span> c<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		v<span class="token operator">+=</span>x<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">return</span> v<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Usage:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span>Vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> vi<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>complex<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> vc<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">double</span> s <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>vi<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// add to double</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token comment">// note: not sum&lt;Vector&lt;int&gt;, double&gt;(...), just sum(...)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">auto</span> z <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>vc<span class="token punctuation">,</span> complex<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">note again: type arguments for sum are deduced from call arguments.</p></div><div class="el-h2"><h2 data-heading="Function Objects" dir="auto" class="heading" id="Function_Objects_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Function Objects</h2></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>function object</em></mark> as known as <mark><em>functor</em></mark> is object that can be called like functions.</p>
</div></div></div><div class="el-p"><p dir="auto">Example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Complt</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">const</span> T val<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token function">Compwith</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> v<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">val</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">bool</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> x<span class="token operator">&lt;</span>val<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token comment">// use as predicate:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">C</span><span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">P</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">const</span> C<span class="token operator">&amp;</span> c<span class="token punctuation">,</span> P predicate<span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	<span class="token keyword">int</span> cnt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> x<span class="token operator">:</span> c<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">predicate</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">			<span class="token operator">++</span>cnt<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	<span class="token keyword">return</span> cnt<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">	<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text">	string s <span class="token operator">=</span> <span class="token string">"Backus"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text">	Complt<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> lti<span class="token punctuation">{</span>x<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// def: policy object</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text">	Complt<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> lts<span class="token punctuation">{</span>s<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// too</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text">	<span class="token keyword">const</span> Vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> vi <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text">	<span class="token keyword">const</span> list<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> ls <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">28</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">29</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> <span class="token function">count</span><span class="token punctuation">(</span>vi<span class="token punctuation">,</span> lti<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">30</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> <span class="token function">count</span><span class="token punctuation">(</span>ls<span class="token punctuation">,</span> lts<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">31</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">32</div><div class="code-styler-line-text">	<span class="token comment">// or in-place with lambdas:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">33</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> <span class="token function">count</span><span class="token punctuation">(</span>vi<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token operator">&lt;</span>x<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">34</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> <span class="token function">count</span><span class="token punctuation">(</span>ls<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token operator">&lt;</span>s<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">35</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p><code class="code-styler-inline">[&amp;]</code> in <em>lambda expression</em> is called a <em>capture list</em>, that specifies that local names used (as <code class="code-styler-inline">x</code>) will be passed by reference.</p>
</blockquote></div><div class="el-p"><p dir="auto">Possible types of capture:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">[&amp;x]</code> — concrete by reference</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">[=x]</code> — concrete by copy</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">[]</code> — capture nothing</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">[&amp;]</code> — all local names by reference</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">[=]</code> — all local names by value</li>
</ul></div><div class="el-p"><p dir="auto">We can separate the traversal of our container from the specification of what is to be done with each element:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token comment">// class ≈ typename</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Oper</span><span class="token operator">&gt;</span> <span class="token comment">// assume C is a Container of pointers</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">for_all</span><span class="token punctuation">(</span>C<span class="token operator">&amp;</span> c<span class="token punctuation">,</span> Oper op<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> x<span class="token operator">:</span> c<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">		<span class="token function">op</span><span class="token punctuation">(</span><span class="token operator">*</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x is T* and is taken by reference(&amp;), so *x is just x</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	vector<span class="token operator">&lt;</span>unique_ptr<span class="token operator">&lt;</span>Shape<span class="token operator">&gt;&gt;</span> v<span class="token punctuation">;</span> <span class="token comment">// may be vector&lt;Shape*&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token keyword">while</span> <span class="token punctuation">(</span>cin<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">		v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">read_shape</span><span class="token punctuation">(</span>cin<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token function">for_all</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>Shpae<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">{</span>s<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x is got by reference(&amp;)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">	<span class="token function">for_all</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>Shape<span class="token operator">&amp;</span> p<span class="token punctuation">)</span><span class="token punctuation">{</span>s<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Variadic Templates" dir="auto" class="heading" id="Variadic_Templates_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Variadic Templates</h2></div><div class="el-p"><p dir="auto">As known as <em>variadics</em>.<br>
Example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// do nothing</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Tail<span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span>T head<span class="token punctuation">,</span> Tail<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> tail<span class="token punctuation">)</span> <span class="token comment">// `func` name again!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token function">g</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// do something, in fact, on each argument</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token function">func</span><span class="token punctuation">(</span>tail<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// try again with tail, at some time here is f()</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Aliases" dir="auto" class="heading" id="Aliases_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Aliases</h2></div><div class="el-p"><p dir="auto">GPT says: <mark><em>SFINAE</em></mark> — Substitution Failure Is Not An Error.</p></div><div class="el-p"><p dir="auto">Examples:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">using</span> size_t <span class="token operator">=</span> insigned <span class="token keyword">int</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token comment">// Every std contained defines such this:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Vector</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">using</span> value_type <span class="token operator">=</span> T<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token comment">// type of element:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">C</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token keyword">using</span> eltype <span class="token operator">=</span> <span class="token keyword">typename</span> <span class="token class-name">C</span><span class="token double-colon punctuation">::</span>value_type<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token comment">// and then:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">templace<span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">Cont</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span>Cont<span class="token operator">&amp;</span> c<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">	Vector<span class="token operator">&lt;</span>eltype<span class="token operator">&lt;</span>Cont<span class="token operator">&gt;&gt;</span> vec<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">	<span class="token comment">// or explicit: Vector&lt;typename Cont::value_type&gt; vec;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text"><span class="token comment">// predefined types:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">V</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text"><span class="token keyword">using</span> stringmap <span class="token operator">=</span> Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text"><span class="token comment">//and then:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text">stringmap<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> m<span class="token punctuation">;</span> <span class="token comment">// m has type: Map&lt;string, int&gt;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Advice" dir="auto" class="heading" id="Advice_2"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advice</h2></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">express ideas directly in code</li>
<li data-line="1" dir="auto">define classes to represent concepts</li>
<li data-line="2" dir="auto">use <em>concrete classes</em> to represent simple concepts and performance-critical components</li>
<li data-line="3" dir="auto">avoid naked <code class="code-styler-inline">new</code>/<code class="code-styler-inline">delete</code></li>
<li data-line="4" dir="auto">use resource handles and RAII to manage resources</li>
<li data-line="5" dir="auto">use abstract classes to fully separate interface from implementation</li>
<li data-line="6" dir="auto">use class hierarchies to represent hierarchical concepts</li>
<li data-line="7" dir="auto">using hierarchy you should distinguish between implementation inheritance and interface inheritance (impl-inher / interf-inher)</li>
<li data-line="8" dir="auto">control constr/copy/move/destr of your class</li>
<li data-line="9" dir="auto">return containers by value (relying on move for efficiency)</li>
<li data-line="10" dir="auto">provide strong resource safety (never leak resources)</li>
<li data-line="11" dir="auto">use container for resource handles</li>
<li data-line="12" dir="auto">use templates for general algo/data</li>
<li data-line="13" dir="auto">use functors/lambdas to represent policies/actions</li>
<li data-line="14" dir="auto">use type aliases and template aliases</li>
</ol></div><div class="el-h1"><h1 data-heading="4. A Tour of C++: Containers and Algorithms" dir="auto" class="heading" id="4._A_Tour_of_C++_Containers_and_Algorithms_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>4. A Tour of C++: Containers and Algorithms</h1></div><div class="el-h2"><h2 data-heading="Standard-Library Overview" dir="auto" class="heading" id="Standard-Library_Overview_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Standard-Library Overview</h2></div><div class="el-p"><p dir="auto">The facilities provided by the standard library can be classified like this:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>run-time language support (allocation, run-time type info)</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>the C standard library</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>strings, i/o streams (are extensible framework), localization</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>containers framework, types/algorithms — called <mark>STL</mark>, is extensible</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>numerical computations (math funcs, complex, vectors with arithmetic, random)</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>regex</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>concurrency (<code class="code-styler-inline">thread</code>, <code class="code-styler-inline">lock</code>). It is foundational (so you can add support for new models)</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>utilities to support <em>templates</em>, STL-style generic programming, generals (clock and others)</li>
<li data-line="8" dir="auto"><span class="list-bullet"></span>"smart pointers", interface for GC</li>
<li data-line="9" dir="auto"><span class="list-bullet"></span>Special-purpose containers (array, bitset, tuple)</li>
</ul></div><div class="el-p"><p dir="auto">All of them included because:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>helpful to almost every C++ programmer</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>provided in a general form and have not significant overhead</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>simple to use, easy to learn (but solves complex tasks)</li>
</ul></div><div class="el-h2"><h2 data-heading="The Standard-library Headers and Namespace" dir="auto" class="heading" id="The_Standard-library_Headers_and_Namespace_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The Standard-library Headers and Namespace</h2></div><div class="el-p"><p dir="auto">The standard library is defined in a namespace called <code class="code-styler-inline">std</code> for all headers (<code class="code-styler-inline">#include</code> string, list, complex and others...)</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Standardized C++98 introduce new headers without <code class="code-styler-inline">.h</code> extension, so: <code class="code-styler-inline">string.h</code> — old C code, <code class="code-styler-inline">string</code> — new modern code of C++</p>
</blockquote></div><div class="el-p"><p dir="auto">Selection of std headers:<br>
<span alt="Screenshot 2025-10-01 at 02.55.34.png" src="a9s/screenshot-2025-10-01-at-02.55.34.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 400px; max-width: 100%;"><img alt="Screenshot 2025-10-01 at 02.55.34.png" src="a9s/screenshot-2025-10-01-at-02.55.34.png" target="_self" style="width: 400px; max-width: 100%;"></span><br>
<span alt="Screenshot 2025-10-01 at 02.56.03.png" src="a9s/screenshot-2025-10-01-at-02.56.03.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 600px; max-width: 100%;"><img alt="Screenshot 2025-10-01 at 02.56.03.png" src="a9s/screenshot-2025-10-01-at-02.56.03.png" target="_self" style="width: 600px; max-width: 100%;"></span></p></div><div class="el-h2"><h2 data-heading="Strings" dir="auto" class="heading" id="Strings_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Strings</h2></div><div class="el-p"><p dir="auto">Standard strings are mutable (<code class="code-styler-inline">s+="tail"</code>) and have move constructor (so it is efficient to return strings by value).<br>
Some useful methods:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">.substr(...)</code> returns new string</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">.replace(...)</code> modify string&amp;</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">operator==(...)</code></li>
</ul></div><div class="el-h2"><h2 data-heading="Output" dir="auto" class="heading" id="Output_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Output</h2></div><div class="el-p"><p dir="auto">The output can be extended for user-defined types (easier than input)</p></div><div class="el-p"><p dir="auto">There are two out streams: <code class="code-styler-inline">cout</code> and <code class="code-styler-inline">cerr</code>.</p></div><div class="el-h2"><h2 data-heading="Input" dir="auto" class="heading" id="Input_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Input</h2></div><div class="el-blockquote"><blockquote dir="auto">
<p>A whitespace character by default terminates the read.</p>
</blockquote></div><div class="el-p"><p dir="auto">For reading whole line use:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">string std<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token function">getline</span><span class="token punctuation">(</span>cin<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cin == "Hello world";</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="error" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">getline(...)</code> reads and terminating <code class="code-styler-inline">\n</code> char, but not include it in the result.</p>
</div></div></div><div class="el-h2"><h2 data-heading="I/O of User-Defined Types" dir="auto" class="heading" id="I/O_of_User-Defined_Types_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>I/O of User-Defined Types</h2></div><div class="el-p"><p dir="auto">GPT: It should be said: <code class="code-styler-inline">struct</code> and <code class="code-styler-inline">class</code> are almost equivalent. Differences:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>by default <code class="code-styler-inline">struct</code> fields are public, <code class="code-styler-inline">class</code> fields — private. The same is with default inheritance</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">struct</code> without private members, constructors and destructors allow aggregate initialization: <code class="code-styler-inline">Point p{10, 20};</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>use <code class="code-styler-inline">struct</code> for simple data, and <code class="code-styler-inline">class</code> for objects with encapsulation and logic</li>
</ul></div><div class="el-p"><p dir="auto">Define io for custom types:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">Entry</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	string name<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">int</span> number<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">const</span> Entry<span class="token operator">&amp;</span> e<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token keyword">return</span> os <span class="token operator">&lt;&lt;</span> <span class="token string">"{\""</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>name <span class="token operator">&lt;&lt;</span> <span class="token string">"\", "</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>number <span class="token operator">&lt;&lt;</span> <span class="token string">"}"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">,</span> Entry<span class="token operator">&amp;</span> e<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	<span class="token keyword">char</span> c<span class="token punctuation">,</span> c2<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>is<span class="token operator">&gt;&gt;</span>c <span class="token operator">&amp;&amp;</span> c<span class="token operator">==</span><span class="token char">'{'</span> <span class="token operator">&amp;&amp;</span> is<span class="token operator">&gt;&gt;</span>c2 <span class="token operator">&amp;&amp;</span> c2<span class="token operator">==</span><span class="token char">'"'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">		string name<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">		<span class="token keyword">while</span> <span class="token punctuation">(</span>is<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> c<span class="token operator">!=</span><span class="token char">'"'</span><span class="token punctuation">)</span>  <span class="token comment">// analogue of C getchar(char *)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">			name <span class="token operator">+=</span> c<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">			</div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">		<span class="token keyword">if</span> <span class="token punctuation">(</span>is<span class="token operator">&gt;&gt;</span>c <span class="token operator">&amp;&amp;</span> c<span class="token operator">==</span><span class="token char">','</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text">			<span class="token keyword">int</span> number <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">			<span class="token keyword">if</span> <span class="token punctuation">(</span>is <span class="token operator">&gt;&gt;</span> number <span class="token operator">&gt;&gt;</span> c <span class="token operator">&amp;&amp;</span> c<span class="token operator">==</span><span class="token char">'}'</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text">				e <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> number<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text">				<span class="token keyword">return</span> is<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text">			<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text">		<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text">	is<span class="token punctuation">.</span><span class="token function">setstate</span><span class="token punctuation">(</span>ios_base<span class="token double-colon punctuation">::</span>failbit<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">28</div><div class="code-styler-line-text">	<span class="token keyword">return</span> is<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">29</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">30</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">31</div><div class="code-styler-line-text"><span class="token comment">// now available:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">32</div><div class="code-styler-line-text"><span class="token keyword">for</span> <span class="token punctuation">(</span>Entry e<span class="token punctuation">;</span> cin<span class="token operator">&gt;&gt;</span>e<span class="token punctuation">;</span> <span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">33</div><div class="code-styler-line-text">	count <span class="token operator">&lt;&lt;</span> e <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Remember</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">is &gt;&gt; c</code> skips whitespace by default</p>
</div></div></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">if (is &gt;&gt; c)</code> test whether input was successfully read.</p></div><div class="el-h2"><h2 data-heading="Vector" dir="auto" class="heading" id="Vector_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Vector</h2></div><div class="el-p"><p dir="auto">Vector example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span>Entry<span class="token operator">&gt;</span> book <span class="token operator">=</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token punctuation">{</span><span class="token string">"Jane"</span><span class="token punctuation">,</span> <span class="token number">625</span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token punctuation">{</span><span class="token string">"Dima Prima"</span><span class="token punctuation">,</span> <span class="token number">93041</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// trailing comma is allowed in many cases</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token comment">// add entries:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">for</span> <span class="token punctuation">(</span>Entry e<span class="token punctuation">;</span> cin<span class="token operator">&gt;&gt;</span>e<span class="token punctuation">;</span> <span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	book<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span>Entry<span class="token operator">&gt;</span> <span class="token function">book2</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 50 entries {"", 0}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span>Entry<span class="token operator">&gt;</span> <span class="token function">book3</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30 entries {"x", 123}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> e<span class="token operator">:</span> book<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> e <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">On insert an element std vector <strong>copies</strong> that value.</p></div><div class="el-p"><p dir="auto">Std vector does not check the range. For example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> n <span class="token operator">=</span> book<span class="token punctuation">[</span>book<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>number<span class="token punctuation">;</span> <span class="token comment">// index is out of range</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warn</div></div><div class="callout-content">
<p dir="auto">This code may not produce error, but fills the n with garbage. This is critical.</p>
</div></div></div><div class="el-p"><p dir="auto">There is a way to eliminate out-of-range problem with vector::at. Adaptor:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Vec</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> std<span class="token double-colon punctuation">::</span><span class="token class-name">vector</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">using</span> vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>vector<span class="token punctuation">;</span> <span class="token comment">// use constructors from base</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	T<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token class-name">vector</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">at</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">const</span> T<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token class-name">vector</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">at</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Some implementations save you the bother of defining adaptors (e.g., as a compiler option).</p></div><div class="el-p"><p dir="auto">A way to minimize surprises from uncaught exceptions:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">try</span> <span class="token punctuation">{</span>  <span class="token comment">// NO BODY. Immediate try-block</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	book<span class="token punctuation">[</span>book<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"Joe"</span><span class="token punctuation">,</span> <span class="token number">999999</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">catch</span> <span class="token punctuation">(</span>out_of_range<span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"range error\n"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"unknown exception thrown\n"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="List" dir="auto" class="heading" id="List_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>List</h2></div><div class="el-p"><p dir="auto">List is double-linked.</p></div><div class="el-p"><p dir="auto">Every std container provides:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">begin()</code> — returns iterator to the first element</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">end()</code> — returns iterator to the one-past-the-last element
<div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">In fact</div></div><div class="callout-content">
<p dir="auto">Compiler realizes for-range with <code class="code-styler-inline">begin</code> and <code class="code-styler-inline">end</code></p>
</div></div>
</li>
</ul></div><div class="el-p"><p dir="auto">Traverse the list:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">get_number</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">=</span> book<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> p<span class="token operator">!=</span>book<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>p<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		<span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>name<span class="token operator">==</span>s<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">			<span class="token keyword">return</span> p<span class="token operator">-&gt;</span>number<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// as error</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Insertion and erasion are performed by iterator:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">e <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// some Entry obj</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">list<span class="token operator">&lt;</span>Entry<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator p <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">list<span class="token operator">&lt;</span>Entry<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator q <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">book<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">book<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Map" dir="auto" class="heading" id="Map_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Map</h2></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Info</div></div><div class="callout-content">
<p dir="auto">in C++:</p>
<ul class="has-list-bullet">
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">map</code> is a red-black tree with asymptotic <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D442 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D459 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45C TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D454 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math></mjx-container></span></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">unordered_map</code> is a hash-table with asymptotic <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D442 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math></mjx-container></span></li>
</ul>
</div></div></div><div class="el-p"><p dir="auto">Indexing <code class="code-styler-inline">[]</code> of a <code class="code-styler-inline">map</code> returns associated value or zero-value of a type. To avoid this behavior on missing elements you should use <code class="code-styler-inline">find()</code> and <code class="code-styler-inline">insert()</code>.</p></div><div class="el-p"><p dir="auto">An example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> book<span class="token punctuation">{</span> <span class="token comment">// or unordered_map</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token punctuation">{</span><span class="token string">"Dima"</span><span class="token punctuation">,</span> <span class="token number">635</span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token punctuation">{</span><span class="token string">"Sasha"</span><span class="token punctuation">,</span> <span class="token number">900</span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Std lib provide default hash function for <code class="code-styler-inline">string</code>. You can (and should) provide your own.</p></div><div class="el-h2"><h2 data-heading="Container Overview" dir="auto" class="heading" id="Container_Overview_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Container Overview</h2></div><div class="el-p"><p dir="auto"><span alt="Screenshot 2025-10-02 at 01.51.27.png" src="a9s/screenshot-2025-10-02-at-01.51.27.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 600px; max-width: 100%;"><img alt="Screenshot 2025-10-02 at 01.51.27.png" src="a9s/screenshot-2025-10-02-at-01.51.27.png" target="_self" style="width: 600px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">Std lib provides adaptors: <code class="code-styler-inline">queue&lt;T&gt;</code>, <code class="code-styler-inline">stack&lt;T&gt;</code>, <code class="code-styler-inline">deque&lt;T&gt;</code>, <code class="code-styler-inline">priority_queue&lt;T&gt;</code>, and more specialized container-like types: <code class="code-styler-inline">array&lt;T, N&gt;</code>, <code class="code-styler-inline">bitset&lt;N&gt;</code>.</p></div><div class="el-p"><p dir="auto">Std containers have notational and semantical uniformity.</p></div><div class="el-h2"><h2 data-heading="Algorithms" dir="auto" class="heading" id="Algorithms_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Algorithms</h2></div><div class="el-p"><p dir="auto">Example for sort and unique:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Entry<span class="token operator">&amp;</span> x<span class="token punctuation">,</span> <span class="token keyword">const</span> Entry<span class="token operator">&amp;</span> y<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">return</span> x<span class="token punctuation">.</span>name <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>name<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">sort_and_unique</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Entry<span class="token operator">&gt;</span><span class="token operator">&amp;</span> vec<span class="token punctuation">,</span> list<span class="token operator">&lt;</span>Entry<span class="token operator">&gt;</span><span class="token operator">&amp;</span> lst<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token function">sort</span><span class="token punctuation">(</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vec<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token function">unique_copy</span><span class="token punctuation">(</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vec<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lst<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Caution</div></div><div class="callout-content">
<p dir="auto">At this example you should know: <code class="code-styler-inline">unique_copy</code> remove only adjacent equal elements, and lst must have enough space for insertion.</p>
</div></div></div><div class="el-p"><p dir="auto">Inserting in newly created collection can be realized with <code class="code-styler-inline">back_inserter</code>:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">list<span class="token operator">&lt;</span>Entry<span class="token operator">&gt;</span> <span class="token function">getunique</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Entry<span class="token operator">&gt;</span><span class="token operator">&amp;</span> vec<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	list<span class="token operator">&lt;</span>Entry<span class="token operator">&gt;</span> res<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token function">sort</span><span class="token punctuation">(</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vec<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token function">unique_copy</span><span class="token punctuation">(</span>vec<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vec<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">back_inserter</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">return</span> res<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Use if Iterators" dir="auto" class="heading" id="Use_if_Iterators_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Use if Iterators</h2></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">find</code> examples:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">bool</span> <span class="token function">has_c</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">,</span> <span class="token keyword">char</span> c<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">auto</span> p <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token operator">!=</span>s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">else</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token comment">// or</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token keyword">bool</span> <span class="token function">has_c</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">,</span> <span class="token keyword">char</span> c<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">!=</span> s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Example (UP: generalized) for find_all with STL:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">C</span><span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">V</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">C</span><span class="token double-colon punctuation">::</span>iterator<span class="token operator">&gt;</span> <span class="token function">find_all</span><span class="token punctuation">(</span>C<span class="token operator">&amp;</span> c<span class="token punctuation">,</span> V c<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	vector<span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">C</span><span class="token double-colon punctuation">::</span>iterator<span class="token operator">&gt;</span> res<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> p<span class="token operator">!=</span>s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>p<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token operator">==</span>c<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">			res<span class="token punctuation">.</span><span class="token function">push_bak</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token keyword">return</span> res<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warn</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">typename</code> for reference to <code class="code-styler-inline">typename C::iterator</code> is necessary. It informs the compiler that <code class="code-styler-inline">C</code>'s <code class="code-styler-inline">iterator</code> is supposed to be a type and not a value of some type, say, the integer 7.</p>
</div></div></div><div class="el-p"><p dir="auto">We can hide this necessity by <code class="code-styler-inline">using</code> type alias:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">using</span> Iterator<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token double-colon punctuation">::</span>iterator<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">C</span><span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">V</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span>Iterator<span class="token operator">&lt;</span>C<span class="token operator">&gt;&gt;</span> <span class="token function">find_all</span><span class="token punctuation">(</span>C<span class="token operator">&amp;</span> c<span class="token punctuation">,</span> V v<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	vector <span class="token operator">&lt;</span>Iterator<span class="token operator">&lt;</span>C<span class="token operator">&gt;&gt;</span> res<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	— <span class="token operator">||</span> — <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">When matches are found by <code class="code-styler-inline">find_all</code> you can use <code class="code-styler-inline">insert(it, x)</code> or <code class="code-styler-inline">erase(it)</code> or do it manually:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> vs <span class="token punctuation">{</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> p<span class="token operator">:</span> <span class="token function">find_all</span><span class="token punctuation">(</span>vs<span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token operator">*</span>p <span class="token operator">=</span> <span class="token string">"replaced"</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Don't pay attention to interior organization of iterator. Just know some agreements:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">.begin()</code> and <code class="code-styler-inline">.end()</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">p++</code> or <code class="code-styler-inline">p--</code> for move</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">*p</code> for access to element</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">::iterator</code> to get iterator, <code class="code-styler-inline">::const_iterator</code> to get iterator to immutable values</li>
</ul></div><div class="el-h2"><h2 data-heading="Stream iterators" dir="auto" class="heading" id="Stream_iterators_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Stream iterators</h2></div><div class="el-p"><p dir="auto">Iterators find their application not only in interaction with collections. For example, <code class="code-styler-inline">stdin</code> and <code class="code-styler-inline">stdout</code> have "sequential work" too:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">ostream_iterator<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> oo<span class="token punctuation">{</span>cout<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token operator">*</span>oo <span class="token operator">=</span> <span class="token string">"Hello, "</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token operator">++</span>oo<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token operator">*</span>oo <span class="token operator">=</span> <span class="token string">"world!\n"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">istream_iterator<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> ii<span class="token punctuation">{</span>cin<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">istream_iterator<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> eos<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// to indicate EOF on ii == eos</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">These iterator types are not often used directly. It's a simple way to use them with std algorithms. For example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token comment">/*</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">* read in-file, sort words, eliminate duplicates, write resutl to out-file</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token comment">*/</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	string from<span class="token punctuation">,</span> to<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	cin <span class="token operator">&gt;&gt;</span> from <span class="token operator">&gt;&gt;</span> to<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	</div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	ifstream is<span class="token punctuation">{</span>from<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// is an istream</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	istream_iterator<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> ii<span class="token punctuation">{</span>is<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	istream_iterator<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> eos<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	ofstream os<span class="token punctuation">{</span>to<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// is an ostream</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">	ostream_iterator<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> oo<span class="token punctuation">{</span>os<span class="token punctuation">,</span> <span class="token string">"\n"</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// delimiter</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> b<span class="token punctuation">{</span>ii<span class="token punctuation">,</span> eos<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// init with iterators</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">	<span class="token function">sort</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text">	<span class="token function">unique_copy</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> oo<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token operator">!</span>is<span class="token punctuation">.</span><span class="token function">eof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>os<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">We can shorten the program by using set (ordered, that uses red-black tree):</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	string from<span class="token punctuation">,</span> to<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	cin <span class="token operator">&gt;&gt;</span> from <span class="token operator">&gt;&gt;</span> to<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	ifstream is<span class="token punctuation">{</span>from<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	ofstream os<span class="token punctuation">{</span>to<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	set<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> b <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">		istream_iterator<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">{</span>is<span class="token punctuation">}</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">		istream_iterator<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	<span class="token function">copy</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ostream_iterator<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">{</span>os<span class="token punctuation">,</span> <span class="token string">"\n"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token operator">!</span>is<span class="token punctuation">.</span><span class="token function">eof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>os<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Predicates" dir="auto" class="heading" id="Predicates_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Predicates</h2></div><div class="el-p"><p dir="auto">Example for find:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">GT</span> <span class="token punctuation">{</span> <span class="token comment">// for functor</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">int</span> val<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token function">Greater_than</span><span class="token punctuation">(</span><span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token operator">:</span> val<span class="token punctuation">{</span>v<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		<span class="token keyword">return</span> r<span class="token punctuation">.</span>second<span class="token operator">&gt;</span>val<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token comment">// usage:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> m <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token keyword">auto</span> p <span class="token operator">=</span> <span class="token function">find_if</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">gebin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> GT<span class="token punctuation">{</span><span class="token number">42</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token comment">// or with lambda:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token keyword">int</span> cx <span class="token operator">=</span> <span class="token function">count_if</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> r<span class="token punctuation">.</span>second <span class="token operator">&gt;</span> <span class="token number">42</span><span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Algorithm Overview" dir="auto" class="heading" id="Algorithm_Overview_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Algorithm Overview</h2></div><div class="el-p"><p dir="auto">Features of algorithm:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>finiteness</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>definiteness</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>input</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>output</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>effectiveness</li>
</ul></div><div class="el-p"><p dir="auto"><span alt="Screenshot 2025-10-02 at 23.54.37.png" src="a9s/screenshot-2025-10-02-at-23.54.37.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 600px; max-width: 100%;"><img alt="Screenshot 2025-10-02 at 23.54.37.png" src="a9s/screenshot-2025-10-02-at-23.54.37.png" target="_self" style="width: 600px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">You can provide shorthand for containers to avoid <code class="code-styler-inline">.begin()</code>/<code class="code-styler-inline">.end()</code> calls:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">C</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span>C<span class="token operator">&amp;</span> c<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token function">sort</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">begon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Pred</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span>C<span class="token operator">&amp;</span> c<span class="token punctuation">,</span> Pred p<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token function">sort</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Advice" dir="auto" class="heading" id="Advice_3"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advice</h2></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">Use libraries! (Don't reinvent the wheel)</li>
<li data-line="1" dir="auto">Having choice, prefer std lib against others</li>
<li data-line="2" dir="auto">However, don't think std is ideal for everything</li>
<li data-line="3" dir="auto">Don't forget <code class="code-styler-inline">#include</code></li>
<li data-line="4" dir="auto">Don't forget <code class="code-styler-inline">std::</code></li>
<li data-line="5" dir="auto">Prefer <code class="code-styler-inline">string</code> rather than <code class="code-styler-inline">cstring</code></li>
<li data-line="6" dir="auto">iostreams are type sensitive, type-safe, and extensible</li>
<li data-line="7" dir="auto">Prefer <code class="code-styler-inline">vector</code>, <code class="code-styler-inline">map</code>, and <code class="code-styler-inline">unordered_map</code></li>
<li data-line="8" dir="auto">Know concrete containers and their tradeoffs</li>
<li data-line="9" dir="auto">Use <code class="code-styler-inline">vector</code> by default</li>
<li data-line="10" dir="auto">Prefer compact data structures</li>
<li data-line="11" dir="auto">If in doubt, use a range-checked <code class="code-styler-inline">vector</code> (<code class="code-styler-inline">.at</code>)</li>
<li data-line="12" dir="auto">Use <code class="code-styler-inline">push_back</code> or <code class="code-styler-inline">back_inserter</code> to add elements</li>
<li data-line="13" dir="auto">Use <code class="code-styler-inline">push_back</code> on a <code class="code-styler-inline">vector</code> rather than <code class="code-styler-inline">realloc()</code> on an array</li>
<li data-line="14" dir="auto">Catch common exceptions in <code class="code-styler-inline">main()</code></li>
<li data-line="15" dir="auto">Prefer std algorithms rather than handwritten loops</li>
<li data-line="16" dir="auto">If iterator use gets tedious, define shorthand for container algorithm</li>
</ol></div><div class="el-h1"><h1 data-heading="5. A Tour of C++: Concurrency and Utilities" dir="auto" class="heading" id="5._A_Tour_of_C++_Concurrency_and_Utilities_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>5. A Tour of C++: Concurrency and Utilities</h1></div><div class="el-p"><p dir="auto">The main aim of the std library is not "everything for everyone". It aims to cover needs of intersection rather than union. That is, std library provides components that are useful to most people in most application areas.</p></div><div class="el-h2"><h2 data-heading="Resource Management" dir="auto" class="heading" id="Resource_Management_1"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Resource Management</h2></div><div class="el-p"><p dir="auto">The most important aspect of good programs is resource management, and of course the std library is designed to not leak resources.</p></div><div class="el-p"><p dir="auto">Example, the technique is used for the std library lock classes:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">mutex m<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	unique_lock<span class="token operator">&lt;</span>mutex<span class="token operator">&gt;</span> lck<span class="token punctuation">{</span>m<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">unique_lock</code>'s destructor release the <code class="code-styler-inline">mutex</code> when the thread of control leaves <code class="code-styler-inline">f()</code> (either by <code class="code-styler-inline">return</code> or by <code class="code-styler-inline">throw</code>)</p>
</div></div></div><div class="el-p"><p dir="auto">This is an application of the <em>RAII technique</em>. This technique is fundamental to the idiomatic handling of resources in C++, and many std libs do so (containers, strings, iostreams and others).</p></div><div class="el-h2"><h2 data-heading="`unique_ptr` and `shared_ptr`" dir="auto" class="heading" id="`unique_ptr`_and_`shared_ptr`_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><code class="code-styler-inline">unique_ptr</code> and <code class="code-styler-inline">shared_ptr</code></h2></div><div class="el-p"><p dir="auto">To help manage objects allocated on the <em>free store</em> (heap) std <code class="code-styler-inline">&lt;memory&gt;</code> provides two "smart pointers":</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">unique_ptr</code> to represent unique ownership</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">shared_ptr</code> to represent shared ownership</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>both use RAII</li>
</ul></div><div class="el-p"><p dir="auto">Example of careless programming that may cause memory leaks:</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="bug" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-bug"><path d="m8 2 1.88 1.88"></path><path d="M14.12 3.88 16 2"></path><path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"></path><path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"></path><path d="M12 20v-9"></path><path d="M6.53 9C4.6 8.8 3 7.1 3 5"></path><path d="M6 13H2"></path><path d="M3 21c0-2.1 1.7-3.9 3.8-4"></path><path d="M20.97 5c0 2.1-1.6 3.8-3.5 4"></path><path d="M22 13h-4"></path><path d="M17.2 17c2.1.1 3.8 1.9 3.8 4"></path></svg></div><div class="callout-title-inner">Bad code</div></div></div></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	X<span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">new</span> X<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	unique_ptr<span class="token operator">&lt;</span>X<span class="token operator">&gt;</span> sp<span class="token punctuation">{</span><span class="token keyword">new</span> X<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">99</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">		<span class="token keyword">throw</span> Z<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// leak by p</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> <span class="token number">77</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">		<span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// leak by p</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	p<span class="token operator">-&gt;</span><span class="token function">do_something</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	sp<span class="token operator">-&gt;</span><span class="token function">do_something</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	<span class="token keyword">delete</span> p<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Ironically, we could have solved the problem simply by not using a pointer and not using <code class="code-styler-inline">new</code>.</p></div><div class="el-p"><p dir="auto">Smart pointers can be used for passing addresses in/out functions:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">unique_ptr<span class="token operator">&lt;</span>X<span class="token operator">&gt;</span> <span class="token function">make_X</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">return</span> unique_ptr<span class="token operator">&lt;</span>X<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">new</span> X<span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Inmportant</div></div><div class="callout-content">
<p dir="auto">On passing objects of smart pointer types we have:<br>
<code class="code-styler-inline">unique_ptr</code> is moved<br>
<code class="code-styler-inline">shared_ptr</code> is copied</p>
</div></div></div><div class="el-p"><p dir="auto">The object that is under <code class="code-styler-inline">shared_ptr</code>s control is destroyed when last of its <code class="code-styler-inline">shared_ptr</code>s is destroyed.<br>
Example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>shared_ptr<span class="token operator">&lt;</span>fstream<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span>shared_ptr<span class="token operator">&lt;</span>fstream<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> ios_base<span class="token double-colon punctuation">::</span>openmode mode<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	shared_ptr<span class="token operator">&lt;</span>fstream<span class="token operator">&gt;</span> fp<span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token function">fstream</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mode<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">*</span>fp<span class="token punctuation">)</span> <span class="token keyword">throw</span> No_file<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token function">f</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// after return unique_ptr fp would be destroyed</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token function">g</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this call would be unavailable if fp were unique_ptr</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Usage of smart pointer is neither cost free nor exorbitantly expensive.</p></div><div class="el-p"><p dir="auto">In fact, <code class="code-styler-inline">shared_ptr</code>s do not in themselves provide any rules for which of their owners can read/write the shared object.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">The smart pointers don't solve data races and other form of confusion (it's not enough just eliminate the resource management issues).</p>
</div></div></div><div class="el-p"><p dir="auto">Not every time you should use smart pointers (e.g., there is no need when you use containers or <code class="code-styler-inline">thread</code>). Smart pointers are needed when we need pointer semantics:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>we share an object (maybe with unique ownership)</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>we refer to a polymorphic object (with unique or shared ownership)</li>
</ul></div><div class="el-h2"><h2 data-heading="Concurrency" dir="auto" class="heading" id="Concurrency_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Concurrency</h2></div><div class="el-p"><p dir="auto">My own concurrency classification:</p></div><div class="el-pre code-styler-pre-parent"><pre class="code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">concurrency — several tasks simultaneously</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	asynchronous — 1-2-1-2-1-2</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	parallelism - 12-12-12</div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		multithreading - several threads</div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		multiprocessing - several processes</div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Worth to note</div></div><div class="callout-content">
<p dir="auto">The std lib mostly supports system-level concurrency.<br>
It does not aim to directly provide sophisticated higher-level concurrency models.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Even more interesting</div></div><div class="callout-content">
<p dir="auto">In fact, on lowest level C++ provides a suitable (for concurrency) memory model and a set of atomic operations — it is the basis of the concurrency.<br>
However, most users will see concurrency only in terms of the std lib and higher-level libs.</p>
</div></div></div><div class="el-p"><p dir="auto">Main std lib concurrency facilities:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">thread</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">mutex</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">lock()</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">packaged_task</code></li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">future</code>
<blockquote dir="auto">
<p>C++ concurrency std lib features do not incur performance penalties compared with operating system's offerings</p>
</blockquote>
</li>
</ul></div><div class="el-h2"><h2 data-heading="Tasks and `thread`s" dir="auto" class="heading" id="Tasks_and_`thread`s_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Tasks and <code class="code-styler-inline">thread</code>s</h2></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>task</em></mark> is a computation that can potentially be executed concurrently. In C++ it is function or functor.<br>
<mark><em>thread</em></mark> is the system-level representation of a <em>task</em> in a program.</p>
</div></div></div><div class="el-p"><p dir="auto">Example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">F</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	thread t1<span class="token punctuation">{</span>f<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// is launched immediately</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	thread t2<span class="token punctuation">{</span><span class="token function">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// is launched immediately</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// wait for finish</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Threads can communicate through shared data, that is typically controlled by locks or other synchronization mechanism.</p></div><div class="el-p"><p dir="auto">Example of communication:</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="bug" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-bug"><path d="m8 2 1.88 1.88"></path><path d="M14.12 3.88 16 2"></path><path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"></path><path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"></path><path d="M12 20v-9"></path><path d="M6.53 9C4.6 8.8 3 7.1 3 5"></path><path d="M6 13H2"></path><path d="M3 21c0-2.1 1.7-3.9 3.8-4"></path><path d="M20.97 5c0 2.1-1.6 3.8-3.5 4"></path><path d="M22 13h-4"></path><path d="M17.2 17c2.1.1 3.8 1.9 3.8 4"></path></svg></div><div class="callout-title-inner">Bad code</div></div><div class="callout-content">
<p dir="auto">Not synchronized <code class="code-styler-inline">cout</code></p>
</div></div></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	thread t1<span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Hello world!\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	thread t2<span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Parallel World!\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Out is unpredictable!</p></div><div class="el-p"><p dir="auto">Our main aim in concurrent program is to keep tasks completely separate except where they communicate in <strong>simple and obvious way</strong>.</p></div><div class="el-h2"><h2 data-heading="Passing Arguments" dir="auto" class="heading" id="Passing_Arguments_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Passing Arguments</h2></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">F</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> v<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token function">F</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> vv<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">v</span><span class="token punctuation">(</span>vv<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> v1<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> v2<span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	thread t1<span class="token punctuation">{</span>f<span class="token punctuation">,</span> v1<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// copy of v1</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	thread t2<span class="token punctuation">{</span>F<span class="token punctuation">{</span>v2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// will work with original v2</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">	t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">With <code class="code-styler-inline">thread t1{f, v1};</code> the compiler constructs the functor (as Stroustrup says) and stores a <em>copy</em> of <code class="code-styler-inline">v1</code>. On the actual call in the thread, <code class="code-styler-inline">f</code> is invoked with <code class="code-styler-inline">std::move</code> of this copy. Therefore, for <code class="code-styler-inline">f</code>'s arguments (without templates and without <code class="code-styler-inline">std::ref</code>), valid parameter types are: <code class="code-styler-inline">T</code> (by value), <code class="code-styler-inline">const T&amp;</code>, and <code class="code-styler-inline">T&amp;&amp;</code>, but <strong>not <code class="code-styler-inline">T&amp;</code></strong>, since a true lvalue reference to the original object (and to its copy in thread) is never provided.</p>
</div></div></div><div class="el-h2"><h2 data-heading="Returning Results" dir="auto" class="heading" id="Returning_Results_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Returning Results</h2></div><div class="el-p"><p dir="auto">For return you can pass the location of a place to deposit the result as a separate pointer argument. It is not a particularly elegant way.</p></div><div class="el-h2"><h2 data-heading="Sharing Data" dir="auto" class="heading" id="Sharing_Data_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Sharing Data</h2></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>mutex</em></mark> — mutual exclusion object</p>
</div></div></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">mutex m<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">int</span> sh<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	unique_lock<span class="token operator">&lt;</span>mutex<span class="token operator">&gt;</span> lck<span class="token punctuation">{</span>m<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// call to m.lock()</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	sh <span class="token operator">+=</span> <span class="token number">7</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span> <span class="token comment">// mutex is released by unique_lock, call to m.unlock()</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Correspondence based on convention (i.e., which mutex protects which data) — error-prone. A better way is to make it clear using various language mechanisms:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Record</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	mutex rm<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">To avoid deadlock on acquiring many mutex std lib offers:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	unique_lock lck1<span class="token punctuation">{</span>m1<span class="token punctuation">,</span> defer_lock<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// defer_lock — special flag (emp str)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	unique_lock lck2<span class="token punctuation">{</span>m2<span class="token punctuation">,</span> defer_lock<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	unique_lock lck3<span class="token punctuation">{</span>m3<span class="token punctuation">,</span> defer_lock<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token function">lock</span><span class="token punctuation">(</span>lck1<span class="token punctuation">,</span> lck2<span class="token punctuation">,</span> lck3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// smart algorithm to lock all three</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span> <span class="token comment">// release all three by unique_lock</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Locking and unlocking are relatively expensive operations. Do not choose shared data for communication between threads solely for "efficiency"; on modern machines, it can be faster to copy and pass data between threads. Always measure before assuming shared data is more efficient.<br>
The main idea is that you can allow you to copy data to create 2 independent copy for each thread, instead of using shared data.</p></div><div class="el-h2"><h2 data-heading="Waiting for Events" dir="auto" class="heading" id="Waiting_for_Events_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Waiting for Events</h2></div><div class="el-p"><p dir="auto">An chrono sleeping example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token double-colon punctuation">::</span>chrono<span class="token punctuation">;</span> <span class="token comment">// chrono is a namespace</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">auto</span> t0 <span class="token operator">=</span> high_resolution_clock<span class="token double-colon punctuation">::</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">this_thread<span class="token double-colon punctuation">::</span><span class="token function">sleep_for</span><span class="token punctuation">(</span>milliseconds<span class="token punctuation">{</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this_thread is a namespace</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">auto</span> t1 <span class="token operator">=</span> high_resolution_clock<span class="token double-colon punctuation">::</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">cout <span class="token operator">&lt;&lt;</span> <span class="token generic-function"><span class="token function">duration_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>nanoseconds<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>t1<span class="token operator">-</span>t0<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token operator">&lt;&lt;</span> <span class="token string">"nanoseconds passed\n"</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">For communicating with external events threads use <code class="code-styler-inline">conditional_variable</code> (using it supports many forms of elegant and efficient sharing, but can be rather tricky). Example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">queue<span class="token operator">&lt;</span>Message<span class="token operator">&gt;</span> q<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">condition_variable cond<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">mutex mtx<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">		unique_lock<span class="token operator">&lt;</span>mutex<span class="token operator">&gt;</span> lck<span class="token punctuation">{</span>mtx<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">		cond<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>lck<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">		<span class="token comment">// ^^^^^^^^^^^^^ release lock and wait signal, then reacquire</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">		<span class="token keyword">auto</span> m <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">		lck<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">		<span class="token comment">// process m</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text">		Message m <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text">		unique_lock<span class="token operator">&lt;</span>mutex<span class="token operator">&gt;</span> lck<span class="token punctuation">{</span>mtx<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text">		q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text">		cond<span class="token punctuation">.</span><span class="token function">notify_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">See working <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/prodcons.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/prodcons.cpp" target="_self">example</a>.</p></div><div class="el-h2"><h2 data-heading="Communicating Tasks" dir="auto" class="heading" id="Communicating_Tasks_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Communicating Tasks</h2></div><div class="el-p"><p dir="auto">The std lib provide a few facilities to allow higher-level of concurrency abstraction:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">future</code> and <code class="code-styler-inline">promise</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">packaged_task</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">async()</code><br>
They are found in <code class="code-styler-inline">&lt;future&gt;</code>.</li>
</ul></div><div class="el-h4"><h4 data-heading="Future and Promise" dir="auto" class="heading" id="Future_and_Promise_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Future and Promise</h4></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">.get()</code> on future may throw an exception (from the system, or transmitted from the task we try <code class="code-styler-inline">.get()</code> from).</p></div><div class="el-p"><p dir="auto">Schematically:<br>
</p><div class="excalidraw-svg"><div style="max-width:400px; " class="excalidraw-svg excalidraw-embedded-img excalidraw-canvas-immersive" filesource="a9s/2025.10.03.md" w="400" draggable="false" oncanvas="false"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 608.74609375 298.5234375" filter="invert(93%) hue-rotate(180deg)" class="excalidraw-svg"><!-- svg-source:excalidraw --><metadata></metadata><defs><style class="style-fonts">
      @font-face { font-family: Nunito; src: url(data:font/woff2;base64,d09GMgABAAAAAAioAA8AAAAAESwAAAhMAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGkIbg3wcgRoGYD9TVEFURABUEQgKkgiOOAswAAE2AiQDXAQgBYQkByAbKQ6jopRx2pL9xYHd5uMFSKQtk58WCzhY5DX/Q6XUMgB3MQQMV48FG2ywoJFkHcTTftq83U24yL89oBJTkjK61J6Rp0+oqsqzqBgUIQ89V/szu5EGFlgvPvnGlgs8kIsu5MASu2Z4ttnD1nra8BSjFhEosUhwZSwqOX9fZzv90Q26sRKrpduCICI/CmsEA63S//9+rr6L+W+cPm0QGjRKp5T3bdvbw+xtHnd+wkQTVNYWEi5phyR2ungnE+JCxl40NRjNXDg2coobSZ/99tdrQUAm8AInJV44oUSLIQyJOvSkougIOctxiyL0t70iwO2qUnrY3DlI9PZ4Z43ozre3QTQD+A8Bspvf2cAJBAhDcVIRxE0FGMhIYvFyu+X+1zP4OsEBA6H0hi9KiOCJr29Cnj0dxT2WZ0TTbMUiKlnpRlIJc9JTXAc7wQFFRYIDytuA1J9sZkuByBfP7O91DYZzioFIIsg5KeHOuSg7KC7RkNzOwbBxiSAYFc1t8zAg0lTEscO5wIGDRprDjPK79bxUQ8BI5rIIHhZV20wGVt7FAyQQbVepNir4cujl+vFk3t9hcasPqrf8FM6quuVFH9HdZmCNUCAAhFCy2YfACSdNRH3Fyy5G8YimCssLOwElRBlqgvpMFssXDdRROYEO9EUWJEcGt7RC+FfR18AZPgfN5/8WmIFkWuQEIO+8Biy6A0WB6Dc6X++wuLQnwJ+tzEJZoxmWU0V6F0FyCunJFwAKaBB9orCVWuCV9ddYsGzdloMC+CxZs2mnqFttuS+2uTaRaRDh0TCgcW/IbpgI9YF+RsVEMzPVE4SqemJgzIoJocClI10nvPJYIjMyROgVYplSYXQOKcmxIcq4KV7bfI9Hpr3weviQe777ouAz/oInNwSedj1eM2Pl7vXrN4AL3qzO5CTqjb1r74eFv/Gq2zffYwTQrsQ27QCl7IMUbwfnNATd7uEFXq9M8/Dmu90EJ5vlcUYoq5m5at3alTvR/bd3eXcvejjrvhO9ZtfWId/rrsS7NgNPN5lpOhxfufUguuzZfRguLywIIehjT2w01Fv2rNs2fz+sm/CcHOB7ImrkOMLzsVtnpTzk5lNAu+DdBW6fN2xT6X1iykxPew75EHSwFvKhQYpht41CnEjhqXGNv2ANWLMKuswMWbmTkw/WQd+GloKvt5UwqmiY5ba8ln0fAbYUGHz3GPkE9zoqhmrEq+dYs0+5bm9IiHJCz2tmrV6/Yc0e5NwkWfUJPO18mv221pmRC4jul3sIBS+l2toQe5YFK5wJixp0NUPjj9rDT1wrX3myp0cZ9MzhheGEZHXJUXczurGa9RsKSu9SVvNqN+wp87ZO7ly7dymD9oTwkMCo4Xyezxu95vT0j17tJ0FJZeExOVFp9a9jffFZsYxTkKQLb04IW6mNHM3+NdOQJ6n4fPC6fZfbsqfs0jCqMiKyig4CDkTeCQqCx06RaqjASddTfxx2gk4U4cAImEDQCWDg/1ZPUlQTnjLEMqkjjbitIJqMNFmznUwtHUNGGIO7r4NUinstmSNslr7WTDoNGSYGCdpTlfd9851hqyJ0Tp+MjLZZm4oUlml3Kr5Pad/9RwkC+SCb8NQRhk0Zwh0pqp78jW8AHSg6AUYA1/5atdu+aKCiC2LISGNXKBpMiP0/IlmHcPMQU4oP9xB5iaz+VbUzQ6yX2rMIQYq2cFdMQk6MqSw1oMZWW66nRZ9+Gfw/Zc2bATUKaHkoB1y4NEksSZTa5oQ2N7TVBn70UXJl7gdby07W4RGPR2WJEnGSrMMVD43bVfBLIyhsyDRnl0SF2qgA0ImiHIApVTpZyuZ8y9I1iAssUUz9glMVS0A3Wqf6VoF9rdLcxxQPSxpAHylhnFW/S+78Q8r2iOCnTVs3ITI/4xtiiOsO1l4Z0gFs28KqsrMtJVkPhGgdYUnPjzJV0QGAQ1AO+JAXUjJpNu/rYRjjGHYECrvNmcNMlr7OTNmNaQkYCqrvP1XLMuOnCIcyvdm9A9Ru+72eoqlGPHWIZVJGbEGU139Rbvdftps4x9jb+8/w/nGYad8fE3x90igxFZBfQHwNOqEfxdbIXbtnhnxAn24vlISkcwY121knfc9CJscm0A5TZgyL/n66Lfe9its3zlLTuo0YnF4nJQUUnpLbw0JS2WxkmDXrd9KyNch+MIGiHaDfZdMxXN+ne1Nlq3lvPJIJZ984MQH9XplGX8SvqWGABUvDi630d/EAvjY+Bu0EjquZThyCk51YtW9BU3azXELM2DhdvXX6qFUmMWS/vn/hrBvfypZNda21QddgvDXvA/6xGeas1aklaJdiPqgGqAuMe1zxfg3YuwrsbUxt+sesSbigUJ5VYnuVyv3Z2Pu4gF3sHtPHDhw8MQhYLdTXuZlX6fqer6lbBOhrirf/ozGs8itf/RbwIO4vwOP8D3BQaTJNOGCnAAh+KZAxgRxzIG7bx8UX+RlDYXbQFrdlIn6i2F1iEJ2VtPlEpU+QUB9Z9ZopOjKXTC5ZdwLXC1mx8P8zlZa0E5/l6DxB438SEGeSzQrTrZTcz+M6TVoXcMOPSC1y3VIroU7VWqODnoZW2ySaVNlly64k4JUBIKGxYAt1P6V03KDfpnU+G7rMm7Ns37o2e3zWLAsYMW/ZoiV7uu3bsGzPpiZH9uzw6aR6ZwnoD5u3Y/ezmzZYCmQrlis/SFqhW49uTV0pDP1kEcga3XunXv/WNrVFGjhsy/HaSC0rX648hSyDGZhvQ5D12kGyUkgDXFZnH6xLNidotVyWYHu2Eqxczp0u1iNLHMUvW0BnoYBs3ssvWjNvQReyxyY5aOxIcYV2S+9/SAYAAAA=); }</style></defs><rect x="0" y="0" width="608.74609375" height="298.5234375" fill="#f1f1f1"></rect><g stroke-linecap="round" transform="translate(16.46484375 10) rotate(0 77.677734375 28.37890625)"><path d="M14.19 0 C49.05 0, 83.91 0, 141.17 0 C150.63 0, 155.36 4.73, 155.36 14.19 C155.36 20.6, 155.36 27.01, 155.36 42.57 C155.36 52.03, 150.63 56.76, 141.17 56.76 C108.57 56.76, 75.98 56.76, 14.19 56.76 C4.73 56.76, 0 52.03, 0 42.57 C0 34.58, 0 26.6, 0 14.19 C0 4.73, 4.73 0, 14.19 0" stroke="none" stroke-width="0" fill="#ebebeb"></path><path d="M14.19 0 C42.23 0, 70.26 0, 141.17 0 M14.19 0 C52.68 0, 91.17 0, 141.17 0 M141.17 0 C150.63 0, 155.36 4.73, 155.36 14.19 M141.17 0 C150.63 0, 155.36 4.73, 155.36 14.19 M155.36 14.19 C155.36 23.87, 155.36 33.56, 155.36 42.57 M155.36 14.19 C155.36 23.92, 155.36 33.66, 155.36 42.57 M155.36 42.57 C155.36 52.03, 150.63 56.76, 141.17 56.76 M155.36 42.57 C155.36 52.03, 150.63 56.76, 141.17 56.76 M141.17 56.76 C97.83 56.76, 54.48 56.76, 14.19 56.76 M141.17 56.76 C92.42 56.76, 43.67 56.76, 14.19 56.76 M14.19 56.76 C4.73 56.76, 0 52.03, 0 42.57 M14.19 56.76 C4.73 56.76, 0 52.03, 0 42.57 M0 42.57 C0 36.15, 0 29.73, 0 14.19 M0 42.57 C0 31.55, 0 20.54, 0 14.19 M0 14.19 C0 4.73, 4.73 0, 14.19 0 M0 14.19 C0 4.73, 4.73 0, 14.19 0" stroke="#000000" stroke-width="2" fill="none"></path></g><g transform="translate(69.24261474609375 25.87890625) rotate(0 24.89996337890625 12.5)"><text x="24.89996337890625" y="19.08" font-family="Nunito, sans-serif, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">caller</text></g><g stroke-linecap="round" transform="translate(264.66015625 11.6015625) rotate(0 94.94140625 27.10546875)"><path d="M13.55 0 C46.4 0, 79.24 0, 176.33 0 C185.37 0, 189.88 4.52, 189.88 13.55 C189.88 22.41, 189.88 31.26, 189.88 40.66 C189.88 49.69, 185.37 54.21, 176.33 54.21 C122.74 54.21, 69.15 54.21, 13.55 54.21 C4.52 54.21, 0 49.69, 0 40.66 C0 34.34, 0 28.03, 0 13.55 C0 4.52, 4.52 0, 13.55 0" stroke="none" stroke-width="0" fill="#ebebeb"></path><path d="M13.55 0 C56.98 0, 100.41 0, 176.33 0 M13.55 0 C56.78 0, 100.02 0, 176.33 0 M176.33 0 C185.37 0, 189.88 4.52, 189.88 13.55 M176.33 0 C185.37 0, 189.88 4.52, 189.88 13.55 M189.88 13.55 C189.88 21.51, 189.88 29.46, 189.88 40.66 M189.88 13.55 C189.88 19.67, 189.88 25.8, 189.88 40.66 M189.88 40.66 C189.88 49.69, 185.37 54.21, 176.33 54.21 M189.88 40.66 C189.88 49.69, 185.37 54.21, 176.33 54.21 M176.33 54.21 C122.1 54.21, 67.86 54.21, 13.55 54.21 M176.33 54.21 C130.53 54.21, 84.74 54.21, 13.55 54.21 M13.55 54.21 C4.52 54.21, 0 49.69, 0 40.66 M13.55 54.21 C4.52 54.21, 0 49.69, 0 40.66 M0 40.66 C0 33.53, 0 26.4, 0 13.55 M0 40.66 C0 34.53, 0 28.41, 0 13.55 M0 13.55 C0 4.52, 4.52 0, 13.55 0 M0 13.55 C0 4.52, 4.52 0, 13.55 0" stroke="#000000" stroke-width="2" fill="none"></path></g><g transform="translate(332.40159606933594 26.20703125) rotate(0 27.199966430664062 12.5)"><text x="27.199966430664062" y="19.08" font-family="Nunito, sans-serif, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">future</text></g><g stroke-linecap="round" transform="translate(458.7109375 75.30078125) rotate(0 70.017578125 65)"><path d="M88.75 16.5 C98.04 25.65, 107.34 34.79, 122.29 49.5 C140.04 66, 140.04 66, 122.29 82.5 C112.14 91.88, 101.99 101.26, 88.75 113.5 C71 130, 71 130, 53.25 113.5 C41.23 103, 29.21 92.51, 17.75 82.5 C0 66, 0 66, 17.75 49.5 C29.68 38.41, 41.61 27.32, 53.25 16.5 C71 0, 71 0, 88.75 16.5" stroke="none" stroke-width="0" fill="#ebebeb"></path><path d="M88.75 16.5 C98.28 25.88, 107.81 35.26, 122.29 49.5 M88.75 16.5 C97.33 24.94, 105.91 33.39, 122.29 49.5 M122.29 49.5 C140.04 66, 140.04 66, 122.29 82.5 M122.29 49.5 C140.04 66, 140.04 66, 122.29 82.5 M122.29 82.5 C110.05 93.81, 97.81 105.12, 88.75 113.5 M122.29 82.5 C111.86 92.14, 101.44 101.77, 88.75 113.5 M88.75 113.5 C71 130, 71 130, 53.25 113.5 M88.75 113.5 C71 130, 71 130, 53.25 113.5 M53.25 113.5 C45.54 106.76, 37.82 100.03, 17.75 82.5 M53.25 113.5 C40.43 102.31, 27.62 91.12, 17.75 82.5 M17.75 82.5 C0 66, 0 66, 17.75 49.5 M17.75 82.5 C0 66, 0 66, 17.75 49.5 M17.75 49.5 C26.13 41.71, 34.52 33.92, 53.25 16.5 M17.75 49.5 C30.91 37.27, 44.07 25.04, 53.25 16.5 M53.25 16.5 C71 0, 71 0, 88.75 16.5 M53.25 16.5 C71 0, 71 0, 88.75 16.5" stroke="#000000" stroke-width="2" fill="none"></path></g><g transform="translate(515.2997436523438 127.80078125) rotate(0 13.41998291015625 12.5)"><text x="13.41998291015625" y="19.08" font-family="Nunito, sans-serif, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">val</text></g><g stroke-linecap="round" transform="translate(279.890625 223.92578125) rotate(0 95.083984375 30.27734375)"><path d="M15.14 0 C48.41 0, 81.69 0, 175.03 0 C185.12 0, 190.17 5.05, 190.17 15.14 C190.17 26.74, 190.17 38.35, 190.17 45.42 C190.17 55.51, 185.12 60.55, 175.03 60.55 C114.57 60.55, 54.1 60.55, 15.14 60.55 C5.05 60.55, 0 55.51, 0 45.42 C0 38.68, 0 31.94, 0 15.14 C0 5.05, 5.05 0, 15.14 0" stroke="none" stroke-width="0" fill="#ebebeb"></path><path d="M15.14 0 C71.86 0, 128.58 0, 175.03 0 M15.14 0 C73.3 0, 131.46 0, 175.03 0 M175.03 0 C185.12 0, 190.17 5.05, 190.17 15.14 M175.03 0 C185.12 0, 190.17 5.05, 190.17 15.14 M190.17 15.14 C190.17 22.98, 190.17 30.81, 190.17 45.42 M190.17 15.14 C190.17 24.63, 190.17 34.12, 190.17 45.42 M190.17 45.42 C190.17 55.51, 185.12 60.55, 175.03 60.55 M190.17 45.42 C190.17 55.51, 185.12 60.55, 175.03 60.55 M175.03 60.55 C137.33 60.55, 99.62 60.55, 15.14 60.55 M175.03 60.55 C135.9 60.55, 96.77 60.55, 15.14 60.55 M15.14 60.55 C5.05 60.55, 0 55.51, 0 45.42 M15.14 60.55 C5.05 60.55, 0 55.51, 0 45.42 M0 45.42 C0 37.66, 0 29.9, 0 15.14 M0 45.42 C0 36.94, 0 28.45, 0 15.14 M0 15.14 C0 5.05, 5.05 0, 15.14 0 M0 15.14 C0 5.05, 5.05 0, 15.14 0" stroke="#000000" stroke-width="2" fill="none"></path></g><g transform="translate(338.77464294433594 241.703125) rotate(0 36.19996643066406 12.5)"><text x="36.19996643066406" y="19.08" font-family="Nunito, sans-serif, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">promise</text></g><g stroke-linecap="round" transform="translate(10 220.28515625) rotate(0 82.939453125 34.119140625)"><path d="M17.06 0 C57.93 0, 98.8 0, 148.82 0 C160.19 0, 165.88 5.69, 165.88 17.06 C165.88 29.37, 165.88 41.68, 165.88 51.18 C165.88 62.55, 160.19 68.24, 148.82 68.24 C100.47 68.24, 52.11 68.24, 17.06 68.24 C5.69 68.24, 0 62.55, 0 51.18 C0 44.01, 0 36.85, 0 17.06 C0 5.69, 5.69 0, 17.06 0" stroke="none" stroke-width="0" fill="#ebebeb"></path><path d="M17.06 0 C46.03 0, 75 0, 148.82 0 M17.06 0 C61.02 0, 104.98 0, 148.82 0 M148.82 0 C160.19 0, 165.88 5.69, 165.88 17.06 M148.82 0 C160.19 0, 165.88 5.69, 165.88 17.06 M165.88 17.06 C165.88 24.4, 165.88 31.74, 165.88 51.18 M165.88 17.06 C165.88 24.96, 165.88 32.86, 165.88 51.18 M165.88 51.18 C165.88 62.55, 160.19 68.24, 148.82 68.24 M165.88 51.18 C165.88 62.55, 160.19 68.24, 148.82 68.24 M148.82 68.24 C98.31 68.24, 47.81 68.24, 17.06 68.24 M148.82 68.24 C100.59 68.24, 52.36 68.24, 17.06 68.24 M17.06 68.24 C5.69 68.24, 0 62.55, 0 51.18 M17.06 68.24 C5.69 68.24, 0 62.55, 0 51.18 M0 51.18 C0 39.43, 0 27.69, 0 17.06 M0 51.18 C0 43.57, 0 35.97, 0 17.06 M0 17.06 C0 5.69, 5.69 0, 17.06 0 M0 17.06 C0 5.69, 5.69 0, 17.06 0" stroke="#000000" stroke-width="2" fill="none"></path></g><g transform="translate(47.139503479003906 241.904296875) rotate(0 45.799949645996094 12.5)"><text x="45.799949645996094" y="19.08" font-family="Nunito, sans-serif, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">subthread</text></g><g stroke-linecap="round"><g transform="translate(176.8203125 38.278906250000006) rotate(0 41.419921875 0.1640625)"><path d="M0 0 C20.27 0.08, 40.55 0.16, 82.84 0.33 M0 0 C25.9 0.1, 51.8 0.21, 82.84 0.33" stroke="#000000" stroke-width="2" fill="none"></path></g><g transform="translate(176.8203125 38.278906250000006) rotate(0 41.419921875 0.1640625)"><path d="M82.84 0.33 L69.22 6.61 L69.27 -6.06 L82.84 0.33" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M82.84 0.33 C79.51 1.87, 76.17 3.4, 69.22 6.61 M82.84 0.33 C78.58 2.29, 74.32 4.26, 69.22 6.61 M69.22 6.61 C69.24 1.74, 69.26 -3.14, 69.27 -6.06 M69.22 6.61 C69.23 3.65, 69.24 0.69, 69.27 -6.06 M69.27 -6.06 C72.96 -4.32, 76.66 -2.58, 82.84 0.33 M69.27 -6.06 C73.78 -3.94, 78.28 -1.82, 82.84 0.33 M82.84 0.33 C82.84 0.33, 82.84 0.33, 82.84 0.33 M82.84 0.33 C82.84 0.33, 82.84 0.33, 82.84 0.33" stroke="#000000" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(454.5427984030043 66.10528746560865) rotate(0 37.0428586112614 -12.63135067906805)"><path d="M0 0 C8.54 0, 17.07 0, 26 0 M0 0 C7.55 0, 15.11 0, 26 0 M26 0 C36.67 0, 42 -5.33, 42 -16 M26 0 C36.67 0, 42 -5.33, 42 -16 M42 -16 C42 -16.51, 42 -17.01, 42 -17.63 M42 -16 C42 -16.37, 42 -16.74, 42 -17.63 M42 -17.63 C42 -28.3, 47.33 -33.63, 58 -33.63 M42 -17.63 C42 -28.3, 47.33 -33.63, 58 -33.63 M58 -33.63 C58.02 -33.63, 58.05 -33.63, 58.09 -33.63 M58 -33.63 C58.03 -33.63, 58.06 -33.63, 58.09 -33.63 M58.09 -33.63 C68.75 -33.63, 74.09 -28.3, 74.09 -17.63 M58.09 -33.63 C68.75 -33.63, 74.09 -28.3, 74.09 -17.63 M74.09 -17.63 C74.09 -10.57, 74.09 -3.52, 74.09 8.37 M74.09 -17.63 C74.09 -9.79, 74.09 -1.94, 74.09 8.37" stroke="#000000" stroke-width="2" fill="none"></path></g><g transform="translate(454.5427984030043 66.10528746560865) rotate(0 37.0428586112614 -12.63135067906805)"><path d="M74.09 8.37 L67.75 -5.23 L80.42 -5.23 L74.09 8.37" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M74.09 8.37 C72 3.9, 69.92 -0.56, 67.75 -5.23 M74.09 8.37 C72.24 4.42, 70.4 0.47, 67.75 -5.23 M67.75 -5.23 C71.7 -5.23, 75.66 -5.23, 80.42 -5.23 M67.75 -5.23 C71.78 -5.23, 75.82 -5.23, 80.42 -5.23 M80.42 -5.23 C78.48 -1.05, 76.53 3.13, 74.09 8.37 M80.42 -5.23 C78.35 -0.78, 76.28 3.67, 74.09 8.37 M74.09 8.37 C74.09 8.37, 74.09 8.37, 74.09 8.37 M74.09 8.37 C74.09 8.37, 74.09 8.37, 74.09 8.37" stroke="#000000" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(475.05859375 259.29296875) rotate(0 26.78496093776033 -26.582671518270587)"><path d="M0 0 C9.71 0, 19.43 0, 37.57 0 M0 0 C13.28 0, 26.56 0, 37.57 0 M37.57 0 C48.24 0, 53.57 -5.33, 53.57 -16 M37.57 0 C48.24 0, 53.57 -5.33, 53.57 -16 M53.57 -16 C53.57 -30.36, 53.57 -44.72, 53.57 -53.17 M53.57 -16 C53.57 -23.53, 53.57 -31.06, 53.57 -53.17" stroke="#000000" stroke-width="2" fill="none"></path></g><g transform="translate(475.05859375 259.29296875) rotate(0 26.78496093776033 -26.582671518270587)"><path d="M53.57 -53.17 L59.91 -39.57 L47.23 -39.57 L53.57 -53.17" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M53.57 -53.17 C55.21 -49.65, 56.85 -46.14, 59.91 -39.57 M53.57 -53.17 C55.81 -48.36, 58.05 -43.55, 59.91 -39.57 M59.91 -39.57 C57.01 -39.57, 54.11 -39.57, 47.23 -39.57 M59.91 -39.57 C55.4 -39.57, 50.89 -39.57, 47.23 -39.57 M47.23 -39.57 C48.57 -42.43, 49.9 -45.29, 53.57 -53.17 M47.23 -39.57 C49.56 -44.56, 51.88 -49.55, 53.57 -53.17 M53.57 -53.17 C53.57 -53.17, 53.57 -53.17, 53.57 -53.17 M53.57 -53.17 C53.57 -53.17, 53.57 -53.17, 53.57 -53.17" stroke="#000000" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(180.87890625 254.304296875) rotate(0 47.005859375 -0.1005859375)"><path d="M0 0 C34.18 -0.07, 68.35 -0.15, 94.01 -0.2 M0 0 C27.38 -0.06, 54.76 -0.12, 94.01 -0.2" stroke="#000000" stroke-width="2" fill="none"></path></g><g transform="translate(180.87890625 254.304296875) rotate(0 47.005859375 -0.1005859375)"><path d="M94.01 -0.2 L80.43 6.17 L80.4 -6.51 L94.01 -0.2" stroke="none" stroke-width="0" fill="#000000" fill-rule="evenodd"></path><path d="M94.01 -0.2 C89.07 2.11, 84.14 4.43, 80.43 6.17 M94.01 -0.2 C90.06 1.65, 86.1 3.51, 80.43 6.17 M80.43 6.17 C80.42 1.78, 80.41 -2.61, 80.4 -6.51 M80.43 6.17 C80.42 1.99, 80.41 -2.2, 80.4 -6.51 M80.4 -6.51 C84.18 -4.76, 87.96 -3.01, 94.01 -0.2 M80.4 -6.51 C84.95 -4.4, 89.5 -2.29, 94.01 -0.2 M94.01 -0.2 C94.01 -0.2, 94.01 -0.2, 94.01 -0.2 M94.01 -0.2 C94.01 -0.2, 94.01 -0.2, 94.01 -0.2" stroke="#000000" stroke-width="2" fill="none"></path></g></g><mask></mask></svg></div></div><p></p></div><div class="el-p"><p dir="auto">Example to put in promise:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>promise<span class="token operator">&lt;</span>X<span class="token operator">&gt;</span><span class="token operator">&amp;</span> px<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">try</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		X res <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span> <span class="token comment">// compute res</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		px<span class="token punctuation">.</span><span class="token function">set_value</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">		px<span class="token punctuation">.</span><span class="token function">set_exception</span><span class="token punctuation">(</span><span class="token function">current_exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// lib func</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Example to get future:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span>future<span class="token operator">&lt;</span>X<span class="token operator">&gt;</span><span class="token operator">&amp;</span> fx<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">try</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		X v <span class="token operator">=</span> fx<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		<span class="token comment">// use v...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">		<span class="token comment">// handle error...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="Packaged Task" dir="auto" class="heading" id="Packaged_Task_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Packaged Task</h4></div><div class="el-p"><p dir="auto">This type is provided to simplify setting up tasks connected with <code class="code-styler-inline">future</code>s and <code class="code-styler-inline">promise</code>s to be run on <code class="code-styler-inline">thread</code>s.</p></div><div class="el-p"><p dir="auto">For example, consider how to accumulate vector by 2 halves:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">double</span> <span class="token function">accum</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token operator">*</span> beg<span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token operator">*</span> end<span class="token punctuation">,</span> <span class="token keyword">double</span> init<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>beg<span class="token punctuation">,</span> end<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">double</span> <span class="token function">comp2</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> v<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token keyword">using</span> Task_type <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token keyword">double</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	packaged_task<span class="token operator">&lt;</span>Task_type<span class="token operator">&gt;</span> pt0<span class="token punctuation">{</span>accum<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	packaged_task<span class="token operator">&lt;</span>Task_type<span class="token operator">&gt;</span> pt1<span class="token punctuation">{</span>accum<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	future<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> f0 <span class="token punctuation">{</span>pt0<span class="token punctuation">.</span><span class="token function">get_future</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	future<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> f1 <span class="token punctuation">{</span>pt1<span class="token punctuation">.</span><span class="token function">get_future</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">	<span class="token keyword">double</span><span class="token operator">*</span> first <span class="token operator">=</span> <span class="token operator">&amp;</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">	thread t1 <span class="token punctuation">{</span>std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>pt0<span class="token punctuation">)</span><span class="token punctuation">,</span> first<span class="token punctuation">,</span> first<span class="token operator">+</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	thread t2 <span class="token punctuation">{</span>std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>pt1<span class="token punctuation">)</span><span class="token punctuation">,</span> first<span class="token operator">+</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> first<span class="token operator">+</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">	<span class="token keyword">return</span> f0<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> f1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">We pass pt0/pt1 in threads by <code class="code-styler-inline">std::move</code> because packaged_task cannot be copied!<br>
Btw, you should use explicit <code class="code-styler-inline">std::</code> for avoid compiler warn.</p>
</div></div></div><div class="el-h4"><h4 data-heading="Async — `async()`" dir="auto" class="heading" id="Async_—_`async()`_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Async — <code class="code-styler-inline">async()</code></h4></div><div class="el-p"><p dir="auto">The main idea of concurrency is to treat a task as a function that may happen to tun concurrently with other tasks (without more complicated work with shared data).</p></div><div class="el-p"><p dir="auto">Another way to run task potentially asynchronously:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">double</span> <span class="token function">comp4</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> v<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">auto</span> sz <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">auto</span> v0 <span class="token operator">=</span> <span class="token operator">&amp;</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v1<span class="token operator">=</span>v0<span class="token operator">+</span>sz<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">,</span> v2<span class="token operator">=</span>v0<span class="token operator">+</span>sz<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> v3<span class="token operator">=</span>v0<span class="token operator">+</span>sz<span class="token operator">*</span><span class="token number">3</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">,</span> v4<span class="token operator">=</span>v0<span class="token operator">+</span>sz<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">auto</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">		f0 <span class="token operator">=</span> <span class="token function">async</span><span class="token punctuation">(</span>accum<span class="token punctuation">,</span> v0<span class="token punctuation">,</span> v1<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">		f1 <span class="token operator">=</span> <span class="token function">async</span><span class="token punctuation">(</span>accum<span class="token punctuation">,</span> v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">		f2 <span class="token operator">=</span> <span class="token function">async</span><span class="token punctuation">(</span>accum<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">		f3 <span class="token operator">=</span> <span class="token function">async</span><span class="token punctuation">(</span>accum<span class="token punctuation">,</span> v3<span class="token punctuation">,</span> v4<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token keyword">return</span> f0<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>f1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>f2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>f3<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">See full <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/async.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/async.cpp" target="_self">example</a>.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warn</div></div><div class="callout-content">
<p dir="auto">Using <code class="code-styler-inline">async()</code> you don't even know how many threads will be used, because this function observe available system resources. <strong>Don't even think</strong> of using <code class="code-styler-inline">async()</code> for tasks that share resources needing locking.</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p><code class="code-styler-inline">async()</code> is not just for parallel computation (and increase performance). It can also be used to spawn a task for user-input, leaving "main thread" active with something else!</p>
</blockquote></div><div class="el-h2"><h2 data-heading="Small Utility Components" dir="auto" class="heading" id="Small_Utility_Components_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Small Utility Components</h2></div><div class="el-p"><p dir="auto">There are not only "big" libs, such as containers or I/O.<br>
Other widely useful components are:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">clock</code>, <code class="code-styler-inline">duration</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>type functions (for gaining info about types), such as <code class="code-styler-inline">iterator_traits</code> and <code class="code-styler-inline">is_arithmetic</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">pair</code>, <code class="code-styler-inline">tuple</code></li>
</ul></div><div class="el-h2"><h2 data-heading="Time" dir="auto" class="heading" id="Time_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Time</h2></div><div class="el-p"><p dir="auto">Use subnamespace <code class="code-styler-inline">std::chrono</code> from <code class="code-styler-inline">&lt;chrono&gt;</code>. Useful names:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">high_resolution_clock::now()</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">duration_cast&lt;T&gt;(duration)</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">Duration::count()</code></li>
</ul></div><div class="el-h2"><h2 data-heading="Type Functions" dir="auto" class="heading" id="Type_Functions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Type Functions</h2></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>type function</em></mark> is a function that is evaluated at compile-time (takes type as arg, or returns one)</p>
</div></div></div><div class="el-p"><p dir="auto">Compile-time instruments are very efficient for final machine-code!</p></div><div class="el-p"><p dir="auto">Examples:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">float</span> min <span class="token operator">=</span> <span class="token class-name">numeric_limits</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// from &lt;limits&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">int</span> szi <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">static_assert</span><span class="token punctuation">(</span>numeric_limits<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>is_signed<span class="token punctuation">,</span> <span class="token string">"unsigned chars!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto">This style of programming is called <mark><em>metaprogramming</em></mark> or <mark><em>template metaprogramming</em></mark> (when templates are involved).</p>
</div></div></div><div class="el-p"><p dir="auto">Some algorithms take only <em>random-access iterators</em> (i.e., <code class="code-styler-inline">sort()</code>), and others take <em>forward iterators</em> as well (i.e., <code class="code-styler-inline">for-range</code>).<br>
So, we can realize universal <code class="code-styler-inline">sort</code> function to sort container with any type of iterator (random-access or forward). It's convenient to use:</p></div><div class="el-table" dir="ltr" style="overflow-x: auto;"><table>
<thead>
<tr>
<th dir="ltr">Mechanism</th>
<th dir="ltr">What does it do</th>
</tr>
</thead>
<tbody>
<tr>
<td dir="ltr"><code class="code-styler-inline">typename C::iterator</code></td>
<td dir="ltr">returns type of iterator of collection <code class="code-styler-inline">C</code></td>
</tr>
<tr>
<td dir="ltr"><code class="code-styler-inline">typename iterator_traits&lt;IT&gt;::iterator_category</code></td>
<td dir="ltr">returns category of iterator type <code class="code-styler-inline">IT</code></td>
</tr>
<tr>
<td dir="ltr"><code class="code-styler-inline">typename iterator_traits&lt;IT&gt;::value_type</code></td>
<td dir="ltr">returns type of elements of iterator <code class="code-styler-inline">IT</code></td>
</tr>
<tr>
<td dir="ltr"><code class="code-styler-inline">decltype(arg)</code></td>
<td dir="ltr">returns declared type of <code class="code-styler-inline">arg</code><br>e.g., given <code class="code-styler-inline">int* x;</code> we have:<br><code class="code-styler-inline">decltype(*x)</code> -&gt; <code class="code-styler-inline">int&amp;</code></td>
</tr>
<tr>
<td dir="ltr"><code class="code-styler-inline">random_access_iterator_tag</code><br><br><code class="code-styler-inline">forward_iterator_tag</code></td>
<td dir="ltr">tags representing <code class="code-styler-inline">iterator_category</code><br>In fact, they are empty structures</td>
</tr>
</tbody>
</table></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">C</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">using</span> Iterator_type <span class="token operator">=</span> <span class="token keyword">typename</span> <span class="token class-name">C</span><span class="token double-colon punctuation">::</span>iterator<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">IT</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">using</span> Iterator_category <span class="token operator">=</span> <span class="token keyword">typename</span> <span class="token class-name">iterator_traits</span><span class="token operator">&lt;</span>IT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator_category<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">IT</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">using</span> Value_type <span class="token operator">=</span> <span class="token keyword">typename</span> <span class="token class-name">iterator_traits</span><span class="token operator">&lt;</span>IT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>value_type<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">RI</span><span class="token operator">&gt;</span> <span class="token comment">// random-access iterator</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">sort_helper</span><span class="token punctuation">(</span>RI beg<span class="token punctuation">,</span> RI end<span class="token punctuation">,</span> random_access_iterator_tag<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">    <span class="token function">sort</span><span class="token punctuation">(</span>beg<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">FI</span><span class="token operator">&gt;</span> <span class="token comment">// forward iterator</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">sort_helper</span><span class="token punctuation">(</span>FI beg<span class="token punctuation">,</span> FI end<span class="token punctuation">,</span> forward_iterator_tag<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">    vector<span class="token operator">&lt;</span>Value_type<span class="token operator">&lt;</span>FI<span class="token operator">&gt;&gt;</span> v<span class="token punctuation">{</span>beg<span class="token punctuation">,</span> end<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">    <span class="token function">sort</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">    <span class="token function">copy</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> beg<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">C</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span>C <span class="token operator">&amp;</span>c<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text">    <span class="token keyword">using</span> Iter <span class="token operator">=</span> Iterator_type<span class="token operator">&lt;</span>C<span class="token operator">&gt;</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text">    <span class="token function">sort_helper</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Iterator_category<span class="token operator">&lt;</span>Iter<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text">	<span class="token comment">// ^^^ here we use tag dispatch technique</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">28</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">29</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">30</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">&amp;</span>v<span class="token punctuation">,</span> forward_list<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span>lst<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">31</div><div class="code-styler-line-text"><span class="token punctuation">{</span> <span class="token function">sort</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">sort</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">decltype</code> is inconvenient on line 17 because it yields <code class="code-styler-inline">int&amp;</code> instead of <code class="code-styler-inline">int</code>.</p>
</div></div></div><div class="el-p"><p dir="auto">See full working <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/unsort.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch5/unsort.cpp" target="_self">code</a>.</p></div><div class="el-h2"><h2 data-heading="Type Predicates" dir="auto" class="heading" id="Type_Predicates_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Type Predicates</h2></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>type predicate</em></mark> is a simple type function that answers a fundamental questions about type.</p>
</div></div></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">&lt;type_traits&gt;</code> provides:<br>
<code class="code-styler-inline">is_arithmetic, is_class, is_pod, is_literal_type, has_virtual_destructor, is_base_of</code> and others.</p></div><div class="el-p"><p dir="auto">Example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">bool</span> <span class="token function">Is_arithmetic</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">return</span> is_arithmetic<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>value<span class="token punctuation">;</span> <span class="token comment">// contains true or false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token comment">// for simple variables:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">bool</span> b <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Is_arithmetic</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token comment">// for restricted type templates</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">Scalar</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">complex</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	Scalar re<span class="token punctuation">,</span> im<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">	<span class="token keyword">static_assert</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">Is_arithmetic</span><span class="token generic class-name"><span class="token operator">&lt;</span>Scalar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Arithmetic types only!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Pair and Tuple — `pair`, `tuple`" dir="auto" class="heading" id="Pair_and_Tuple_—_`pair`,_`tuple`_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Pair and Tuple — <code class="code-styler-inline">pair</code>, <code class="code-styler-inline">tuple</code></h2></div><div class="el-p"><p dir="auto">They provides std realizations for many-values plain data objects.</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;utility&gt;</span> <span class="token comment">// for type `pair` and others</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span>Record<span class="token operator">&gt;</span> v<span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// sorted!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">auto</span> er <span class="token operator">=</span> <span class="token function">equal_range</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Record<span class="token punctuation">{</span><span class="token string">"Reg"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> Record<span class="token operator">&amp;</span> r1<span class="token punctuation">,</span> <span class="token keyword">const</span> Record<span class="token operator">&amp;</span> r2<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> r1<span class="token punctuation">.</span>name <span class="token operator">&lt;</span> r2<span class="token punctuation">.</span>name<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">)</span> <span class="token comment">// returns pair</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">=</span> er<span class="token punctuation">.</span>first<span class="token punctuation">;</span> p <span class="token operator">!=</span> er<span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token operator">++</span>p<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>p<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token keyword">auto</span> p <span class="token operator">=</span> <span class="token function">make_pair</span><span class="token punctuation">(</span>Record<span class="token punctuation">{</span><span class="token string">"Gabe"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">398</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// auto deduce types of elements</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">tuple<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token operator">&gt;</span> <span class="token function">t1</span><span class="token punctuation">(</span><span class="token string">"Sild"</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">auto</span> t2 <span class="token operator">=</span> <span class="token function">make_tuple</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Herring"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token comment">// for access:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">string s <span class="token operator">=</span> <span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token comment">// a bit ugly syntax 😞</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Helpful</div></div><div class="callout-content">
<p dir="auto">Pairs and tuples can be assigned and compared (<code class="code-styler-inline">=</code>, <code class="code-styler-inline">==</code>, <code class="code-styler-inline">&lt;</code>) if their elements can be</p>
</div></div></div><div class="el-h2"><h2 data-heading="Regular Expressions" dir="auto" class="heading" id="Regular_Expressions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Regular Expressions</h2></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner"><em>Raw string literal</em></div></div><div class="callout-content">
<p dir="auto">Starts with <code class="code-styler-inline">R"(</code> and ends with <code class="code-styler-inline">)"</code>. Example: <code class="code-styler-inline">R"(\d{4}-\d{2}(-d{2})?)"</code></p>
</div></div></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;regex&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">regex pat<span class="token punctuation">{</span><span class="token raw-string string">R"(\d{4}-\d{2}(-d{2})?)"</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">int</span> lineno <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">for</span> <span class="token punctuation">(</span>string line<span class="token punctuation">;</span> <span class="token function">getline</span><span class="token punctuation">(</span>cin<span class="token punctuation">,</span> line<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token operator">++</span>lineno<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	smatch matches<span class="token punctuation">;</span> <span class="token comment">// smatch - s'match - sub matches</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">regex_search</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> matches<span class="token punctuation">,</span> pat<span class="token punctuation">)</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">		cout <span class="token operator">&lt;&lt;</span> lineno <span class="token operator">&lt;&lt;</span> <span class="token string">": "</span> <span class="token operator">&lt;&lt;</span> matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token char">'\n'</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Math" dir="auto" class="heading" id="Math_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Math</h2></div><div class="el-p"><p dir="auto">In <code class="code-styler-inline">&lt;cmath&gt;</code> we find usual math functions.</p></div><div class="el-p"><p dir="auto">Useful utilities:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;numeric&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">list<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> lst <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">auto</span> s <span class="token operator">=</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>lst<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lst<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">For <code class="code-styler-inline">complex&lt;ScalarT&gt;</code> the most common math functions are supported, e.g.: <code class="code-styler-inline">+</code>, <code class="code-styler-inline">sqrt</code>, <code class="code-styler-inline">/</code>, <code class="code-styler-inline">pow</code>, and others.</p></div><div class="el-p"><p dir="auto">C++ std <code class="code-styler-inline">&lt;random&gt;</code> consists of two parts:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>an <em>engine</em> that produces (pseudo) random values</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>a <em>distribution</em> that maps those values into a mathematical distribution in a range</li>
</ul></div><div class="el-p"><p dir="auto">Consider the following approach:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">using</span> engine <span class="token operator">=</span> default_random_engine<span class="token punctuation">;</span> <span class="token comment">// type of engine</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">using</span> distribution <span class="token operator">=</span> uniform_int_distribution<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// type of distribution</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token comment">//     `int` is default type from definition ^^</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">engine re<span class="token punctuation">{</span>random_device<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">distribution d1_6 <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">auto</span> gen <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>d1_6<span class="token punctuation">,</span> re<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// gen() ≈ d1_6(re)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">cout <span class="token operator">&lt;&lt;</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">For more compact usage you can define your own class:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Rand_int</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	default_random_engine re<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	uniform_int_distribution<span class="token operator">&lt;</span><span class="token operator">&gt;</span> dist<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token function">Rand_int</span><span class="token punctuation">(</span><span class="token keyword">int</span> low<span class="token punctuation">,</span> <span class="token keyword">int</span> high<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">		<span class="token operator">:</span>dist<span class="token punctuation">{</span>low<span class="token punctuation">,</span> high<span class="token punctuation">}</span><span class="token punctuation">,</span> re<span class="token punctuation">{</span>random_device<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">int</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">dist</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token comment">// then</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">Rand_int gen<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -&gt; ?</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">For vector arithmetic in C++ predefined <code class="code-styler-inline">valarray</code> class that supports usual arithmetic operations and the most common mathematical functions. For example:</p></div><div class="el-pre code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>valarray<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> a<span class="token punctuation">,</span> valarray<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> b<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	valarray<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> c <span class="token operator">=</span> a<span class="token operator">*</span><span class="token number">3.14</span> <span class="token operator">+</span> b<span class="token operator">/</span>a<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	b <span class="token operator">+=</span> a<span class="token operator">*</span><span class="token number">3.14</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	c <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">double</span> x <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>Also <code class="code-styler-inline">valarray</code> supports stride access (as python's slices)</p>
</blockquote></div><div class="el-h2"><h2 data-heading="Advice" dir="auto" class="heading" id="Advice_4"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advice</h2></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">use RAII</li>
<li data-line="1" dir="auto">use <code class="code-styler-inline">unique_ptr</code> for polymorphic type objects</li>
<li data-line="2" dir="auto">use <code class="code-styler-inline">shared_ptr</code> to refer to shared objects</li>
<li data-line="3" dir="auto">use type-safe mechanisms for concurrency</li>
<li data-line="4" dir="auto">minimize the use of shared data</li>
<li data-line="5" dir="auto">don't choose shared data (between <code class="code-styler-inline">threads</code>)  because of naive "efficiency"</li>
<li data-line="6" dir="auto">think in terms of tasks, rather than threads</li>
<li data-line="7" dir="auto">a lib doesn't have to be large or complicated to be useful</li>
<li data-line="8" dir="auto">time your programs before making claims about efficiency</li>
<li data-line="9" dir="auto">you can write code to explicitly depend on properties of types</li>
<li data-line="10" dir="auto">use regex</li>
<li data-line="11" dir="auto">don't try serious numeric computation using only the language; use libs</li>
<li data-line="12" dir="auto">properties of numeric types are accessible through <code class="code-styler-inline">numeric_limits</code></li>
</ol></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all is-collapsed" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#TC++PL_(I)_0" data-path="#TC++PL_(I)_0"><div class="tree-item-inner heading-link" heading-name="TC++PL (I)">TC++PL (I)</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#1._Notes_to_the_Reader_0" data-path="#1._Notes_to_the_Reader_0"><div class="tree-item-inner heading-link" heading-name="1. Notes to the Reader">1. Notes to the Reader</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#The_Design_of_C++_0" data-path="#The_Design_of_C++_0"><div class="tree-item-inner heading-link" heading-name="The Design of C++">The Design of C++</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Suggestions_for_C_Programmers_0" data-path="#Suggestions_for_C_Programmers_0"><div class="tree-item-inner heading-link" heading-name="Suggestions for C Programmers">Suggestions for C Programmers</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#The_2011_Standard_0" data-path="#The_2011_Standard_0"><div class="tree-item-inner heading-link" heading-name="The 2011 Standard">The 2011 Standard</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Standard_Library_0" data-path="#Standard_Library_0"><div class="tree-item-inner heading-link" heading-name="Standard Library">Standard Library</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#What_is_C++_used_for?_0" data-path="#What_is_C++_used_for?_0"><div class="tree-item-inner heading-link" heading-name="What is C++ used for?">What is C++ used for?</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Advice_0" data-path="#Advice_0"><div class="tree-item-inner heading-link" heading-name="Advice">Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#2._A_Tour_of_C++_The_Basics_0" data-path="#2._A_Tour_of_C++_The_Basics_0"><div class="tree-item-inner heading-link" heading-name="2. A Tour of C++: The Basics">2. A Tour of C++: The Basics</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#The_Basics_0" data-path="#The_Basics_0"><div class="tree-item-inner heading-link" heading-name="The Basics">The Basics</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Types,_Variables,_Arithmetic_0" data-path="#Types,_Variables,_Arithmetic_0"><div class="tree-item-inner heading-link" heading-name="Types, Variables, Arithmetic">Types, Variables, Arithmetic</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Constants_0" data-path="#Constants_0"><div class="tree-item-inner heading-link" heading-name="Constants">Constants</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Pointers,_Arrays,_and_Loops_0" data-path="#Pointers,_Arrays,_and_Loops_0"><div class="tree-item-inner heading-link" heading-name="Pointers, Arrays, and Loops">Pointers, Arrays, and Loops</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Structures_0" data-path="#Structures_0"><div class="tree-item-inner heading-link" heading-name="Structures">Structures</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Classes_0" data-path="#Classes_0"><div class="tree-item-inner heading-link" heading-name="Classes">Classes</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Enumerations_0" data-path="#Enumerations_0"><div class="tree-item-inner heading-link" heading-name="Enumerations">Enumerations</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Modularity_0" data-path="#Modularity_0"><div class="tree-item-inner heading-link" heading-name="Modularity">Modularity</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Namespaces_0" data-path="#Namespaces_0"><div class="tree-item-inner heading-link" heading-name="Namespaces">Namespaces</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Exceptions_0" data-path="#Exceptions_0"><div class="tree-item-inner heading-link" heading-name="Exceptions">Exceptions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Invariants_0" data-path="#Invariants_0"><div class="tree-item-inner heading-link" heading-name="Invariants">Invariants</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Assertions_0" data-path="#Assertions_0"><div class="tree-item-inner heading-link" heading-name="Assertions">Assertions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Advice_1" data-path="#Advice_1"><div class="tree-item-inner heading-link" heading-name="Advice">Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#3._A_tour_of_C++_Abstraction_Mechanisms_0" data-path="#3._A_tour_of_C++_Abstraction_Mechanisms_0"><div class="tree-item-inner heading-link" heading-name="3. A tour of C++: Abstraction Mechanisms">3. A tour of C++: Abstraction Mechanisms</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Introduction_0" data-path="#Introduction_0"><div class="tree-item-inner heading-link" heading-name="Introduction">Introduction</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#An_Arithmetic_Type_0" data-path="#An_Arithmetic_Type_0"><div class="tree-item-inner heading-link" heading-name="An Arithmetic Type">An Arithmetic Type</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#A_container_0" data-path="#A_container_0"><div class="tree-item-inner heading-link" heading-name="A container">A container</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Initializing_Containers_0" data-path="#Initializing_Containers_0"><div class="tree-item-inner heading-link" heading-name="Initializing Containers">Initializing Containers</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Abstract_Types_0" data-path="#Abstract_Types_0"><div class="tree-item-inner heading-link" heading-name="Abstract Types">Abstract Types</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Virtual_Functions_0" data-path="#Virtual_Functions_0"><div class="tree-item-inner heading-link" heading-name="Virtual Functions">Virtual Functions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Class_Hierarchies_0" data-path="#Class_Hierarchies_0"><div class="tree-item-inner heading-link" heading-name="Class Hierarchies">Class Hierarchies</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Copy_and_Move_0" data-path="#Copy_and_Move_0"><div class="tree-item-inner heading-link" heading-name="Copy and Move">Copy and Move</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Copying_Containers_0" data-path="#Copying_Containers_0"><div class="tree-item-inner heading-link" heading-name="Copying Containers">Copying Containers</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Moving_Containers_0" data-path="#Moving_Containers_0"><div class="tree-item-inner heading-link" heading-name="Moving Containers">Moving Containers</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Resource_Management_0" data-path="#Resource_Management_0"><div class="tree-item-inner heading-link" heading-name="Resource Management">Resource Management</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Suppressing_Operations_0" data-path="#Suppressing_Operations_0"><div class="tree-item-inner heading-link" heading-name="Suppressing Operations">Suppressing Operations</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Templates_0" data-path="#Templates_0"><div class="tree-item-inner heading-link" heading-name="Templates">Templates</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Parameterized_Types_0" data-path="#Parameterized_Types_0"><div class="tree-item-inner heading-link" heading-name="Parameterized Types">Parameterized Types</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Function_Templates_0" data-path="#Function_Templates_0"><div class="tree-item-inner heading-link" heading-name="Function Templates">Function Templates</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Function_Objects_0" data-path="#Function_Objects_0"><div class="tree-item-inner heading-link" heading-name="Function Objects">Function Objects</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Variadic_Templates_0" data-path="#Variadic_Templates_0"><div class="tree-item-inner heading-link" heading-name="Variadic Templates">Variadic Templates</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Aliases_0" data-path="#Aliases_0"><div class="tree-item-inner heading-link" heading-name="Aliases">Aliases</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Advice_2" data-path="#Advice_2"><div class="tree-item-inner heading-link" heading-name="Advice">Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#4._A_Tour_of_C++_Containers_and_Algorithms_0" data-path="#4._A_Tour_of_C++_Containers_and_Algorithms_0"><div class="tree-item-inner heading-link" heading-name="4. A Tour of C++: Containers and Algorithms">4. A Tour of C++: Containers and Algorithms</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Standard-Library_Overview_0" data-path="#Standard-Library_Overview_0"><div class="tree-item-inner heading-link" heading-name="Standard-Library Overview">Standard-Library Overview</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#The_Standard-library_Headers_and_Namespace_0" data-path="#The_Standard-library_Headers_and_Namespace_0"><div class="tree-item-inner heading-link" heading-name="The Standard-library Headers and Namespace">The Standard-library Headers and Namespace</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Strings_0" data-path="#Strings_0"><div class="tree-item-inner heading-link" heading-name="Strings">Strings</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Output_0" data-path="#Output_0"><div class="tree-item-inner heading-link" heading-name="Output">Output</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Input_0" data-path="#Input_0"><div class="tree-item-inner heading-link" heading-name="Input">Input</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#I/O_of_User-Defined_Types_0" data-path="#I/O_of_User-Defined_Types_0"><div class="tree-item-inner heading-link" heading-name="I/O of User-Defined Types">I/O of User-Defined Types</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Vector_0" data-path="#Vector_0"><div class="tree-item-inner heading-link" heading-name="Vector">Vector</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#List_0" data-path="#List_0"><div class="tree-item-inner heading-link" heading-name="List">List</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Map_0" data-path="#Map_0"><div class="tree-item-inner heading-link" heading-name="Map">Map</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Container_Overview_0" data-path="#Container_Overview_0"><div class="tree-item-inner heading-link" heading-name="Container Overview">Container Overview</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Algorithms_0" data-path="#Algorithms_0"><div class="tree-item-inner heading-link" heading-name="Algorithms">Algorithms</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Use_if_Iterators_0" data-path="#Use_if_Iterators_0"><div class="tree-item-inner heading-link" heading-name="Use if Iterators">Use if Iterators</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Stream_iterators_0" data-path="#Stream_iterators_0"><div class="tree-item-inner heading-link" heading-name="Stream iterators">Stream iterators</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Predicates_0" data-path="#Predicates_0"><div class="tree-item-inner heading-link" heading-name="Predicates">Predicates</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Algorithm_Overview_0" data-path="#Algorithm_Overview_0"><div class="tree-item-inner heading-link" heading-name="Algorithm Overview">Algorithm Overview</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Advice_3" data-path="#Advice_3"><div class="tree-item-inner heading-link" heading-name="Advice">Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#5._A_Tour_of_C++_Concurrency_and_Utilities_0" data-path="#5._A_Tour_of_C++_Concurrency_and_Utilities_0"><div class="tree-item-inner heading-link" heading-name="5. A Tour of C++: Concurrency and Utilities">5. A Tour of C++: Concurrency and Utilities</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Resource_Management_1" data-path="#Resource_Management_1"><div class="tree-item-inner heading-link" heading-name="Resource Management">Resource Management</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#`unique_ptr`_and_`shared_ptr`_0" data-path="#`unique_ptr`_and_`shared_ptr`_0"><div class="tree-item-inner heading-link" heading-name="`unique_ptr` and `shared_ptr`"><code class="code-styler-inline">unique_ptr</code> and <code>shared_ptr</code></div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Concurrency_0" data-path="#Concurrency_0"><div class="tree-item-inner heading-link" heading-name="Concurrency">Concurrency</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Tasks_and_`thread`s_0" data-path="#Tasks_and_`thread`s_0"><div class="tree-item-inner heading-link" heading-name="Tasks and `thread`s">Tasks and <code class="code-styler-inline">thread</code>s</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Passing_Arguments_0" data-path="#Passing_Arguments_0"><div class="tree-item-inner heading-link" heading-name="Passing Arguments">Passing Arguments</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Returning_Results_0" data-path="#Returning_Results_0"><div class="tree-item-inner heading-link" heading-name="Returning Results">Returning Results</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Sharing_Data_0" data-path="#Sharing_Data_0"><div class="tree-item-inner heading-link" heading-name="Sharing Data">Sharing Data</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Waiting_for_Events_0" data-path="#Waiting_for_Events_0"><div class="tree-item-inner heading-link" heading-name="Waiting for Events">Waiting for Events</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="tc++pl-(i).html#Communicating_Tasks_0" data-path="#Communicating_Tasks_0"><div class="tree-item-icon collapse-icon is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Communicating Tasks">Communicating Tasks</div></a><div class="tree-item-children" style="display: none;"><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Future_and_Promise_0" data-path="#Future_and_Promise_0"><div class="tree-item-inner heading-link" heading-name="Future and Promise">Future and Promise</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Packaged_Task_0" data-path="#Packaged_Task_0"><div class="tree-item-inner heading-link" heading-name="Packaged Task">Packaged Task</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Async_—_`async()`_0" data-path="#Async_—_`async()`_0"><div class="tree-item-inner heading-link" heading-name="Async — `async()`">Async — <code class="code-styler-inline">async()</code></div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Small_Utility_Components_0" data-path="#Small_Utility_Components_0"><div class="tree-item-inner heading-link" heading-name="Small Utility Components">Small Utility Components</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Time_0" data-path="#Time_0"><div class="tree-item-inner heading-link" heading-name="Time">Time</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Type_Functions_0" data-path="#Type_Functions_0"><div class="tree-item-inner heading-link" heading-name="Type Functions">Type Functions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Type_Predicates_0" data-path="#Type_Predicates_0"><div class="tree-item-inner heading-link" heading-name="Type Predicates">Type Predicates</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Pair_and_Tuple_—_`pair`,_`tuple`_0" data-path="#Pair_and_Tuple_—_`pair`,_`tuple`_0"><div class="tree-item-inner heading-link" heading-name="Pair and Tuple — `pair`, `tuple`">Pair and Tuple — <code class="code-styler-inline">pair</code>, <code>tuple</code></div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Regular_Expressions_0" data-path="#Regular_Expressions_0"><div class="tree-item-inner heading-link" heading-name="Regular Expressions">Regular Expressions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Math_0" data-path="#Math_0"><div class="tree-item-inner heading-link" heading-name="Math">Math</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="tc++pl-(i).html#Advice_4" data-path="#Advice_4"><div class="tree-item-inner heading-link" heading-name="Advice">Advice</div></a><div class="tree-item-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></div></body></html>