<!DOCTYPE html> <html lang="en"><head>
<title>TC++PL (II)</title>
<base href=".">
<meta name="pathname" content="tc++pl-(ii).html">
<meta name="description" content="Compendium - TC++PL (II)">
<meta property="og:title" content="TC++PL (II)">
<meta property="og:description" content="Compendium - TC++PL (II)">
<meta property="og:type" content="website">
<meta property="og:url" content="tc++pl-(ii).html">
<meta property="og:image" content="a9s/screenshot-2025-10-04-at-04.41.40.png">
<meta charset="UTF-8"><meta property="og:site_name" content="Compendium"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="preload" href="site-lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/snippets.css"></noscript><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/other-plugins.css"></noscript><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:calc(2.3em + 2 * var(--sidebar-margin));width:var(--sidebar-width);padding:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row;border-top-right-radius:var(--radius-l)}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse;border-top-left-radius:var(--radius-l)}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:1px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#navbar:not(:empty){display:flex;align-items:center;justify-content:space-between;padding:.5em 1em;width:100%}#main{display:flex;flex-direction:column;height:100%;width:100%;align-items:stretch;justify-content:center}#main-horizontal{display:flex;flex-direction:row;flex-grow:1;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6,li):has(> :is(.math,table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const n=await fetch(e);if(!n.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await n.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let n=document.createRange().createContextualFragment(o);t.before(n),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(n){let l=o[n],c=n+1;l?(l&&"true"!=l.getAttribute("loaded")||n<o.length&&e(c),n<o.length&&l.addEventListener("load",(()=>e(c)))):n<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager show-inline-title show-ribbon code-styler code-styler-style-inline code-styler-gutter-highlight is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="main"><div id="navbar"></div><div id="main-horizontal"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles">mjx-c.mjx-c2200::before{padding:.694em .556em .022em 0;content:"âˆ€"}mjx-c.mjx-c2283::before{padding:.54em .778em .04em 0;content:"âŠƒ"}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c1D459.TEX-I::before{padding:.694em .298em .011em 0;content:"l"}mjx-c.mjx-c1D454.TEX-I::before{padding:.442em .477em .205em 0;content:"g"}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-c.mjx-c222A::before{padding:.598em .667em .022em 0;content:"âˆª"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c1D438.TEX-I::before{padding:.68em .764em 0 0;content:"E"}mjx-c.mjx-c2287::before{padding:.636em .778em .138em 0;content:"âŠ‡"}mjx-c.mjx-c2217::before{padding:.465em .5em 0 0;content:"âˆ—"}mjx-msup{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-c.mjx-c5B::before{padding:.75em .278em .25em 0;content:"["}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"âˆ’"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c2C::before{padding:.121em .278em .194em 0;content:","}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c5D::before{padding:.75em .278em .25em 0;content:"]"}mjx-c.mjx-c30::before{padding:.666em .5em .022em 0;content:"0"}mjx-c.mjx-c1D451.TEX-I::before{padding:.694em .52em .01em 0;content:"d"}mjx-c.mjx-c1D452.TEX-I::before{padding:.442em .466em .011em 0;content:"e"}mjx-c.mjx-c1D453.TEX-I::before{padding:.705em .55em .205em 0;content:"f"}mjx-c.mjx-c1D456.TEX-I::before{padding:.661em .345em .011em 0;content:"i"}mjx-c.mjx-c1D45B.TEX-I::before{padding:.442em .6em .011em 0;content:"n"}mjx-c.mjx-c1D460.TEX-I::before{padding:.442em .469em .01em 0;content:"s"}mjx-c.mjx-c1D461.TEX-I::before{padding:.626em .361em .011em 0;content:"t"}mjx-c.mjx-c210E.TEX-I::before{padding:.694em .576em .011em 0;content:"h"}mjx-c.mjx-c1D464.TEX-I::before{padding:.443em .716em .011em 0;content:"w"}mjx-c.mjx-c1D45C.TEX-I::before{padding:.441em .485em .011em 0;content:"o"}mjx-c.mjx-c1D45F.TEX-I::before{padding:.442em .451em .011em 0;content:"r"}mjx-c.mjx-c1D458.TEX-I::before{padding:.694em .521em .011em 0;content:"k"}mjx-c.mjx-c1D45D.TEX-I::before{padding:.442em .503em .194em 0;content:"p"}mjx-c.mjx-c1D44E.TEX-I::before{padding:.441em .529em .01em 0;content:"a"}mjx-c.mjx-c1D450.TEX-I::before{padding:.442em .433em .011em 0;content:"c"}mjx-c.mjx-c1D466.TEX-I::before{padding:.442em .49em .205em 0;content:"y"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;font-size-adjust:none;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mi{display:inline-block;text-align:left}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-texatom{display:inline-block;text-align:left}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("site-lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("site-lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("site-lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("site-lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("site-lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("site-lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("site-lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("site-lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("site-lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("site-lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("site-lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("site-lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("site-lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("site-lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("site-lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("site-lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("site-lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("site-lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("site-lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("site-lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("site-lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("site-lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c1D43A.TEX-I::before{padding:.705em .786em .022em 0;content:"G"}mjx-c.mjx-c1D442.TEX-I::before{padding:.704em .763em .022em 0;content:"O"}mjx-c.mjx-c1D443.TEX-I::before{padding:.683em .751em 0 0;content:"P"}mjx-c.mjx-c1D434.TEX-I::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c1D447.TEX-I::before{padding:.677em .704em 0 0;content:"T"}mjx-c.mjx-c1D43B.TEX-I::before{padding:.683em .888em 0 0;content:"H"}mjx-c.mjx-c2014::before{padding:.285em 1em 0 0;content:"â€”"}</style><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="TC++PL_(II)_0">TC++PL (II)</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-p"><p dir="auto">This is my notes for the book:<br>
<strong>The C++ Programming Language</strong> â€” <em>Bjarne Stroustrup</em><br>
Tome II: Basic Facilities</p></div><div class="el-h1"><h1 data-heading="6. Types and Declarations" dir="auto" class="heading" id="6._Types_and_Declarations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>6. Types and Declarations</h1></div><div class="el-h3"><h3 data-heading="The ISO C++ Standard" dir="auto" class="heading" id="The_ISO_C++_Standard_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The ISO C++ Standard</h3></div><div class="el-p"><p dir="auto">Many important things are deemed <em>implementation-defined</em> by the standard. For example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">unsigned</span> <span class="token keyword">char</span> c1 <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">;</span> <span class="token comment">// well defined</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> c2 <span class="token operator">=</span> <span class="token number">1256</span><span class="token punctuation">;</span> <span class="token comment">// implementation-defined, truncation</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Other behaviors are <em>unspecified</em> (e.g., exact value returned by <code class="code-styler-inline">new</code>, or value of a variable assigned to from two threads without synchronization).</p></div><div class="el-p"><p dir="auto">To maximize portability it is wise to be explicit about implementation-defined provisions. To support such technique, the std lib provides <code class="code-styler-inline">numeric_limits</code>.</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">static_assert</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">&lt;=</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"sizeof(int) is too small"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Constructions that is <em>undefined</em> by the standard behave very badly:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">const</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">4</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> page<span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	page<span class="token punctuation">[</span>size<span class="token operator">+</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">// undefined, may cause disaster</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="Implementations" dir="auto" class="heading" id="Implementations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Implementations</h3></div><div class="el-p"><p dir="auto">Kinds of implementation:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><em>hosted</em> includes all the stdlib facilities as described in std</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><em>freestanding</em> may provide fewer stdlib facilities, as long as the following are provided:<br>
<span alt="Screenshot 2025-10-04 at 04.41.40.png" src="a9s/screenshot-2025-10-04-at-04.41.40.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 600px; max-width: 100%;"><img alt="Screenshot 2025-10-04 at 04.41.40.png" src="a9s/screenshot-2025-10-04-at-04.41.40.png" target="_self" style="width: 600px; max-width: 100%;"></span></li>
</ul></div><div class="el-p"><p dir="auto">Freestanding implementation is often used for bare-metal programs.<br>
Many implementations also provide an option for not using <code class="code-styler-inline">exceptions</code> for really minimal, close-to-the-hardware, programs.</p></div><div class="el-h3"><h3 data-heading="The Basic Source Character Set" dir="auto" class="heading" id="The_Basic_Source_Character_Set_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The Basic Source Character Set</h3></div><div class="el-blockquote"><blockquote dir="auto">
<p>C++ use 7-bit characters set ASCII (ISO 646-1983, ANSI 3.4-1968).</p>
</blockquote></div><div class="el-h3"><h3 data-heading="Types" dir="auto" class="heading" id="Types_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Types</h3></div><div class="el-p"><p dir="auto">Every name (identifier) in C++ has a type!<br>
</p><div class="excalidraw-svg"><img style="max-width:800px; " class="excalidraw-svg excalidraw-embedded-img excalidraw-canvas-immersive is-unresolved" src="blob:app://obsidian.md/19adc1f1-b2df-4822-823a-6c451eac2a60" filesource="a9s/2025.10.04.md" w="800" draggable="false" oncanvas="false" target="_self"></div><p></p></div><div class="el-h3"><h3 data-heading="Boolean" dir="auto" class="heading" id="Boolean_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Boolean</h3></div><div class="el-p"><p dir="auto">Booleans are converted to <code class="code-styler-inline">int</code> in expressions (arithmetic and logical):</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">bool</span> b<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
cout<span class="token operator">&lt;&lt;</span>b<span class="token operator">+</span><span class="token number">5</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span> <span class="token comment">// out: 6</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="Char" dir="auto" class="heading" id="Char_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Char</h3></div><div class="el-p"><p dir="auto">C++ provides a variety of character types:<br>
<code class="code-styler-inline">char, signed char, unsigned char, wchar_t, char8_t, char16_t, char32_t</code></p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Danger</div></div><div class="callout-content">
<p dir="auto">It's <em>not</em> safe to assume that the alphabetic characters are contiguous. If your source file is encoded with EBCDIC the test <code class="code-styler-inline">'a'&lt;c &amp;&amp; c&lt;'z'</code> may be incorrect.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warn</div></div><div class="callout-content">
<p dir="auto">Remember, that C++ leaves open the possibility of existence one's-complement systems; e.g., where <code class="code-styler-inline">char</code> can has values -127...127 (not -128...127)</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>Reminder: most common characters is in range 0...127</p>
</blockquote></div><div class="el-p"><p dir="auto">You cannot cast between pointers to <code class="code-styler-inline">char</code>, <code class="code-styler-inline">unsigned char</code>, <code class="code-styler-inline">signed char</code> â€” because they are three distinct types.</p></div><div class="el-p"><p dir="auto"><span alt="Screenshot 2025-10-04 at 20.06.24.png" src="a9s/screenshot-2025-10-04-at-20.06.24.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 500px; max-width: 100%;"><img alt="Screenshot 2025-10-04 at 20.06.24.png" src="a9s/screenshot-2025-10-04-at-20.06.24.png" target="_self" style="width: 500px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">It's possible but should be avoided:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token char">'ab'</span><span class="token punctuation">;</span> <span class="token comment">// a='\0x61' b='\0x62' -&gt; 0x6162 (big-endian)</span>
              <span class="token comment">//                        0x6261 (little-endian)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Additional char types literals:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">wchar_t</span> wc <span class="token operator">=</span> L<span class="token char">'ab'</span><span class="token punctuation">;</span> <span class="token comment">// implementation-defined :(</span>
<span class="token keyword">char16_t</span> c16 <span class="token operator">=</span> u<span class="token char">'\uHHHH'</span><span class="token punctuation">;</span> <span class="token comment">// 4 bytes char</span>
<span class="token keyword">char32_t</span> c32 <span class="token operator">=</span> U<span class="token char">'\UHHHHHHHH'</span><span class="token punctuation">;</span> <span class="token comment">// 8 bytes char</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="Integer" dir="auto" class="heading" id="Integer_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Integer</h3></div><div class="el-p"><p dir="auto">Synonyms:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">int</span> <span class="token operator">=</span> <span class="token keyword">signed</span> <span class="token operator">=</span> <span class="token keyword">signed</span> <span class="token keyword">int</span>
<span class="token keyword">unsigned</span> <span class="token operator">=</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span>
<span class="token keyword">short</span> <span class="token operator">=</span> <span class="token keyword">short</span> <span class="token keyword">int</span>
<span class="token keyword">long</span> <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">int</span>
<span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token keyword">int</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">For more detailed integers you can use <code class="code-styler-inline">&lt;cstdint&gt;</code>:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">int64_t</code> â€” signed int with exactly 64 bits</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">uint_fast16_t</code> â€” 16-bit unsigned int, supposedly the fastest such integer</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">int_least32_t</code> â€” just like plain int</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>and others...</li>
</ul></div><div class="el-p"><p dir="auto">Hex and octal notations sets bits directly and can surprise on some types and machines:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token comment">// on two's-complement architecture</span>
<span class="token keyword">int16_t</span> x <span class="token operator">=</span> <span class="token number">0xffff</span><span class="token punctuation">;</span> <span class="token comment">// == -1</span>
<span class="token keyword">int32_t</span> y <span class="token operator">=</span> <span class="token number">0xffff</span><span class="token punctuation">;</span> <span class="token comment">// == 65'535</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Type of integer literal deduced in order (to first in which can be represented):</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token number">1347</span> <span class="token operator">-&gt;</span> I <span class="token operator">-&gt;</span> LI <span class="token operator">-&gt;</span> LLI
<span class="token number">1347L</span> <span class="token operator">-&gt;</span> LI <span class="token operator">-&gt;</span> LLI
<span class="token number">1347LL</span> <span class="token operator">-&gt;</span> LLI
<span class="token number">0.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">-&gt;</span> I <span class="token operator">-&gt;</span> UI <span class="token operator">-&gt;</span> LI <span class="token operator">-&gt;</span> ULI <span class="token operator">-&gt;</span> LLI <span class="token operator">-&gt;</span> ULLI
<span class="token number">0.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>L <span class="token operator">-&gt;</span> LI <span class="token operator">-&gt;</span> ULI <span class="token operator">-&gt;</span> LLI <span class="token operator">-&gt;</span> ULLI
<span class="token number">0.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>LL <span class="token operator">-&gt;</span> LLI <span class="token operator">-&gt;</span> ULLI
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>U <span class="token operator">-&gt;</span> UI <span class="token operator">-&gt;</span> ULI <span class="token operator">-&gt;</span> ULLI
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>UL <span class="token operator">-&gt;</span> ULI <span class="token operator">-&gt;</span> ULLI
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>ULL <span class="token operator">-&gt;</span> ULLI
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="Float" dir="auto" class="heading" id="Float_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Float</h3></div><div class="el-p"><p dir="auto">Remember about scientific notation: <code class="code-styler-inline">1.2e10 or 1.23e-15</code></p></div><div class="el-h3"><h3 data-heading="Prefixes and Suffixes" dir="auto" class="heading" id="Prefixes_and_Suffixes_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Prefixes and Suffixes</h3></div><div class="el-p"><p dir="auto"><span alt="Screenshot 2025-10-05 at 01.00.15.png" src="a9s/screenshot-2025-10-05-at-01.00.15.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 600px; max-width: 100%;"><img alt="Screenshot 2025-10-05 at 01.00.15.png" src="a9s/screenshot-2025-10-05-at-01.00.15.png" target="_self" style="width: 600px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">you can use delimiter:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token raw-string string">R"x("(hello!)")x"</span><span class="token punctuation">;</span> <span class="token comment">// "(hello!)"</span>
<span class="token comment">//                  ^            ^ â€” optional delimiter</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner"><em>Critically to note!</em></div></div><div class="callout-content">
<p dir="auto">Note the dramatic difference in the meaning of u prefix for char <code class="code-styler-inline">u''</code> and string <code class="code-styler-inline">u""</code>!<br>
For example, invalid: <code class="code-styler-inline">u'ðŸ¤£'</code> (doesn't fit into memory), but valid: <code class="code-styler-inline">u"ðŸ¤£"</code> (stored as 2 code units of <code class="code-styler-inline">char16_t</code>).</p>
</div></div></div><div class="el-p"><p dir="auto">You can define your own suffixes (<em>user-defined literals</em>):</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded">KM x <span class="token operator">=</span> <span class="token number">123</span>_km<span class="token punctuation">;</span>
G s  <span class="token operator">=</span> <span class="token string">"hello!"</span>_gr<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">(use names started with <code class="code-styler-inline">_</code>)</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">string literal suffix:</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">string s = "hello"s;</code></p>
</div></div></div><div class="el-h3"><h3 data-heading="Sizes" dir="auto" class="heading" id="Sizes_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Sizes</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Remember</div></div><div class="callout-content">
<p dir="auto">You should know C++ is not the implementation. The C++ is the standard!<br>
Think so and avoid implementation-dependent aspects.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">Program you don't want to port today may be ported some day! Compatibility is important!</p>
</div></div></div><div class="el-p"><p dir="auto">It's easier to limit impact of implementation-dependent language feature. Limiting the impact of system-dependent library facilities is far harder. And therefore:</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content">
<p dir="auto">Use std lib wherever feasible!<br>
Think about your library portability!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">sizeof(char) == 1</code> by definition. You may assume it is 1 byte, but on different machines it may differ!</p>
</div></div></div><div class="el-p"><p dir="auto">Guaranteed about sizes:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token number">1</span>byte â‰¡ <span class="token keyword">char</span> â‰¤ <span class="token keyword">short</span> â‰¤ <span class="token keyword">int</span> â‰¤ <span class="token keyword">long</span> â‰¤ <span class="token keyword">long</span> <span class="token keyword">long</span>
<span class="token number">1</span>byte â‰¤ <span class="token keyword">bool</span> â‰¤ <span class="token keyword">long</span>
<span class="token keyword">char</span> â‰¤ <span class="token keyword">wchar_t</span> â‰¤ <span class="token keyword">long</span>
<span class="token keyword">float</span> â‰¤ <span class="token keyword">double</span> â‰¤ <span class="token keyword">long</span> <span class="token keyword">double</span>
N â‰¡ <span class="token keyword">signed</span> N â‰¡ <span class="token keyword">unsigned</span> N

<span class="token keyword">char</span> â‰¥ <span class="token number">8</span>bits
<span class="token keyword">short</span> â‰¥ <span class="token number">16</span>bits
<span class="token keyword">long</span> â‰¥ <span class="token number">32</span>bits
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">To define real values use <code class="code-styler-inline">&lt;limits&gt;</code> (which functions is <code class="code-styler-inline">constexpr</code>) and <code class="code-styler-inline">sizeof</code>.</p></div><div class="el-p"><p dir="auto">Best practice: avoid conversions that are not value-preserving.</p></div><div class="el-h3"><h3 data-heading="Alignment" dir="auto" class="heading" id="Alignment_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Alignment</h3></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">alignof</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// minimal alignment for correct access in memory</span>

<span class="token comment">// you can also define specific alignment for data</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> v<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">constexpr</span> <span class="token keyword">int</span> bufmax <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span>
	<span class="token keyword">alignas</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token keyword">char</span> buffer<span class="token punctuation">[</span>bufmax<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// uninitialized</span>

	<span class="token keyword">const</span> <span class="token keyword">int</span> max_els <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bufmax<span class="token operator">/</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">uninitialized_copy</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> max_els<span class="token punctuation">,</span> <span class="token punctuation">(</span>T<span class="token operator">*</span><span class="token punctuation">)</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">alignas(T)</code> align buffer by alignment of T, i.e. by <code class="code-styler-inline">alignof(T)</code></p>
</div></div></div><div class="el-p"><p dir="auto">see <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch6/alignment.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch6/alignment.cpp" target="_self">example</a>.</p></div><div class="el-h3"><h3 data-heading="Declarations" dir="auto" class="heading" id="Declarations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Declarations</h3></div><div class="el-p"><p dir="auto">The "value" of the following is permanent:<br>
types, aliases, templates, functions, constants</p></div><div class="el-h3"><h3 data-heading="The Structure of Declarations" dir="auto" class="heading" id="The_Structure_of_Declarations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The Structure of Declarations</h3></div><div class="el-p"><p dir="auto">With some simplification, declaration has five parts:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">optional prefix specifiers (<code class="code-styler-inline">static</code>, <code class="code-styler-inline">virtual</code>, ...)</li>
<li data-line="1" dir="auto">a base type (<code class="code-styler-inline">vector&lt;double&gt;</code>, <code class="code-styler-inline">const int</code>, ...)</li>
<li data-line="2" dir="auto">a declarator optionally including a name (<code class="code-styler-inline">p[7]</code>, <code class="code-styler-inline">*(*)[]</code>, ...)</li>
<li data-line="3" dir="auto">optional suffix function specifiers (<code class="code-styler-inline">const</code>, <code class="code-styler-inline">noexcept</code>, ...)</li>
<li data-line="4" dir="auto">an optional initializer or function body (<code class="code-styler-inline">={7,5,3}</code>, <code class="code-styler-inline">{return x;}</code>,...)</li>
</ol></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">declarations are terminated by <code class="code-styler-inline">;</code> except for functions and namespaces</p>
</div></div></div><div class="el-p"><p dir="auto"><span alt="Screenshot 2025-10-05 at 05.47.03.png" src="a9s/screenshot-2025-10-05-at-05.47.03.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 500px; max-width: 100%;"><img alt="Screenshot 2025-10-05 at 05.47.03.png" src="a9s/screenshot-2025-10-05-at-05.47.03.png" target="_self" style="width: 500px; max-width: 100%;"></span></p></div><div class="el-h3"><h3 data-heading="Names" dir="auto" class="heading" id="Names_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Names</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Crit</div></div><div class="callout-content">
<p dir="auto">You <em>must not</em> use names:</p>
<ul class="has-list-bullet">
<li data-line="2" dir="auto"><span class="list-bullet"></span>starting with <code class="code-styler-inline">_</code> in global space</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>starting with <code class="code-styler-inline">__</code> or <code class="code-styler-inline">_C</code> (uppercase) in any space</li>
</ul>
</div></div></div><div class="el-p"><p dir="auto"> Select descriptive names for large scope symbols and conventional short names for locals.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Recommendation</div></div><div class="callout-content">
<p dir="auto">Use CAPITALIZED names only for macros, not even for constants</p>
</div></div></div><div class="el-p"><p dir="auto">Keywords:<br>
<span alt="Screenshot 2025-10-05 at 18.26.55.png" src="a9s/screenshot-2025-10-05-at-18.26.55.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 400px; max-width: 100%;"><img alt="Screenshot 2025-10-05 at 18.26.55.png" src="a9s/screenshot-2025-10-05-at-18.26.55.png" target="_self" style="width: 400px; max-width: 100%;"></span><br>
And special meaning identifiers:<br>
<span alt="Screenshot 2025-10-05 at 18.27.27.png" src="a9s/screenshot-2025-10-05-at-18.27.27.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 300px; max-width: 100%;"><img alt="Screenshot 2025-10-05 at 18.27.27.png" src="a9s/screenshot-2025-10-05-at-18.27.27.png" target="_self" style="width: 300px; max-width: 100%;"></span></p></div><div class="el-h3"><h3 data-heading="Scope" dir="auto" class="heading" id="Scope_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Scope</h3></div><div class="el-p"><p dir="auto">Stroustrup says that names of class scope can't be accessed from other translation units unlike namespace's names that can. It is because namespace variables are considered as "real data" whereas class's variables are not a real data.</p></div><div class="el-p"><p dir="auto">Global names are always accessible even within <em>shadowing</em> by global namespace:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token double-colon punctuation">::</span> x <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">// get global x</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Very important</div></div><div class="callout-content">
<p dir="auto">The scope of a name <em>starts</em> after complete declaration and before initializer. Thus possible:<br>
<code class="code-styler-inline">void f(){int x = x;}</code><br>
It may seems odd, but it makes sense: <code class="code-styler-inline">x</code> contains garbage immediately after declaration.<br>
This does not apply to constructors.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Declaration is not an expression.<br>
Declaration can't exist without its block <code class="code-styler-inline">{}</code>. For example:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">if</span> <span class="token punctuation">(</span>cond<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// error</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">else</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">float</span> y<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// error</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="Initialization" dir="auto" class="heading" id="Initialization_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Initialization</h3></div><div class="el-p"><p dir="auto">Forms:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">T x1 <span class="token punctuation">{</span>v<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// strongly recommended form!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">T x2 <span class="token operator">=</span> <span class="token punctuation">{</span>v<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">T x3 <span class="token operator">=</span> v<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">T <span class="token function">x4</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Most vexing parse</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token comment">// last can be treated as function declaration...</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><em>List initialization</em> (<code class="code-styler-inline">T x1 {v};</code>) does not allow narrowing.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">A trap</div></div><div class="callout-content">
<p dir="auto">Using <code class="code-styler-inline">auto</code> with <em>list initialization</em> can suprise:<br>
<code class="code-styler-inline">auto x {99};</code> â€” deduced as <code class="code-styler-inline">initializer_list&lt;int&gt;</code>, not <code class="code-styler-inline">int</code> (Except for C++17!)<br>
So, for <code class="code-styler-inline">auto</code> it's better to use <code class="code-styler-inline">=</code>-initialization</p>
</div></div></div><div class="el-p"><p dir="auto">initializer_list constructor is preferred.</p></div><div class="el-h3"><h3 data-heading="Missing Initializers" dir="auto" class="heading" id="Missing_Initializers_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Missing Initializers</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Reminder</div></div><div class="callout-content">
<p dir="auto"><mark><em>static objects</em></mark> (global, namespace, local static, static member) are initialized to <code class="code-styler-inline">{}</code> by default!</p>
</div></div></div><div class="el-p"><p dir="auto">If array or structure is initialized to <code class="code-styler-inline">{}</code>, nested fields are initialized to <code class="code-styler-inline">{}</code> too.</p></div><div class="el-h3"><h3 data-heading="Initializer Lists" dir="auto" class="heading" id="Initializer_Lists_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Initializer Lists</h3></div><div class="el-p"><p dir="auto">Be careful:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">T <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// always function declaration, not empty-args constructor</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Deducing: `auto`, `decltype()`" dir="auto" class="heading" id="Deducing_`auto`,_`decltype()`_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Deducing: <code class="code-styler-inline">auto</code>, <code class="code-styler-inline">decltype()</code></h3></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">auto</code> is used for deducing type on initialization simply. Use for var, const, constexpr<br>
<code class="code-styler-inline">decltype()</code> is used for deducing type of something more complicated. It's suitable not only for declarations.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Important about <code class="code-styler-inline">auto</code></div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">auto</code> often omit references and cv-qualifiers because in expression they are dereferenced and lose cv-qualifiers. So, you may (and need sometimes) do so:<br>
<code class="code-styler-inline">const auto&amp; x = ...</code></p>
</div></div></div><div class="el-p"><p dir="auto">As I've got on practice:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">auto</span> x<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// int 1</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">auto</span> x<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// ERROR! Ambiguous type</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">auto</span> x <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// initializer_list&lt;int&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">auto</span> x <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// initializer_list&lt;int&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">decltype</code> is more "smart" and can be used in more specific places (not with specific initializer):</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">auto</span> <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">const</span> Matrix<span class="token operator">&lt;</span>T1<span class="token operator">&gt;</span><span class="token operator">&amp;</span> m1<span class="token punctuation">,</span> <span class="token keyword">const</span> Matrix<span class="token operator">&lt;</span>T2<span class="token operator">&gt;</span><span class="token operator">&amp;</span> m2<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token operator">-&gt;</span> Matrix<span class="token operator">&lt;</span><span class="token keyword">decltype</span><span class="token punctuation">(</span>T1<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> T2<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	Matrix<span class="token operator">&lt;</span><span class="token keyword">decltype</span><span class="token punctuation">(</span>T1<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> T2<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> res<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Objects and Values, Lvalues and Rvalues" dir="auto" class="heading" id="Objects_and_Values,_Lvalues_and_Rvalues_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Objects and Values, Lvalues and Rvalues</h3></div><div class="el-p"><p dir="auto">Consider 2 properties:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><em>Has identity</em> â€” the program has the name of, pointer to, or reference to the object</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><em>Movable</em> â€” the object may be moved (to another location without copying, leaving origin location in a valid but unspecified state)</li>
</ul></div><div class="el-p"><p dir="auto">Let's use <code class="code-styler-inline">i</code> for "has identity" and <code class="code-styler-inline">m</code> for "movable".</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Note: there are no {<code class="code-styler-inline">i</code>=no, <code class="code-styler-inline">m</code>=no} objects at all (they don't make sense)</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Finally</div></div><div class="callout-content">
<p dir="auto">We can precisely describe the C++ language rules:<br>
</p><div class="excalidraw-svg"><img style="max-width:600px; " class="excalidraw-svg excalidraw-embedded-img excalidraw-canvas-immersive is-unresolved" src="blob:app://obsidian.md/d040f65a-c58f-4386-9d80-8363842e6885" filesource="a9s/2025.10.06.md" w="600" draggable="false" oncanvas="false" target="_self"></div><br>
Note: you use 3 top types in real program<p></p>
</div></div></div><div class="el-p"><p dir="auto">where:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>lvalue - locator value</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>glvalue - generalized lvalue</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>xvalue - extraordinary, expiring value</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>rvalue - read value</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>prvalue - pure rvalue</li>
</ul></div><div class="el-blockquote"><blockquote dir="auto">
<p>Note: Every expression is either an lvalue or an rvalue, but not both.</p>
</blockquote></div><div class="el-p"><p dir="auto">Objects classification by lifetime:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><em>automatic</em></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><em>static</em></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><em>free store</em></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><em>temporary objects</em> (temporary objects live until the end of the full expression of which they are part)</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><em>thread-local objects</em></li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def, note</div></div><div class="callout-content">
<p dir="auto"><em><mark>full expression</mark></em> is an expression that is not part of another expression.</p>
</div></div></div><div class="el-h3"><h3 data-heading="Type Aliases" dir="auto" class="heading" id="Type_Aliases_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Type Aliases</h3></div><div class="el-p"><p dir="auto">Useful technique:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">vector</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">using</span> value_type <span class="token operator">=</span> T<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">It makes parameter-type <code class="code-styler-inline">T</code> accessible outside: <code class="code-styler-inline">typename Container::value_type</code>. Moreover, now <code class="code-styler-inline">value_type</code> is like namespace member of class <code class="code-styler-inline">vector</code>.</p></div><div class="el-p"><p dir="auto">Can be generalized with templates:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">using</span> Vector <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> My_allocator<span class="token operator">&lt;</span>T<span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>Specifiers cannot be applied to type aliases</p>
</blockquote></div><div class="el-h3"><h3 data-heading="Advice" dir="auto" class="heading" id="Advice_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advice</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>you can see ISO C++</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>avoid magic constants (like <code class="code-styler-inline">__FILE__</code>)</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>prefer <code class="code-styler-inline">char</code> rather than <code class="code-styler-inline">unsigned char</code> or <code class="code-styler-inline">signed char</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>avoid multiple declaration</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>prefer <code class="code-styler-inline">{}</code> for init with a named type</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>prefer <code class="code-styler-inline">=</code> for init with usage of <code class="code-styler-inline">auto</code></li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>use <code class="code-styler-inline">using</code> type alias for generalization (with an eye to the future)</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>use <code class="code-styler-inline">enum</code> and <code class="code-styler-inline">class</code> for not alias but new type</li>
</ul></div><div class="el-h1"><h1 data-heading="7. Pointers, Arrays, and References" dir="auto" class="heading" id="7._Pointers,_Arrays,_and_References_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7. Pointers, Arrays, and References</h1></div><div class="el-p"><p dir="auto">There are machines that cannot to access individual bytes, it is the reason why <code class="code-styler-inline">sizeof(char)</code> if assumed as <code class="code-styler-inline">1</code>.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Suggestion</div></div><div class="callout-content">
<p dir="auto">For more compact data you can use: 1. bitwise logic, 2. bit-fields, 3. <code class="code-styler-inline">bitset</code>.</p>
</div></div></div><div class="el-p"><p dir="auto">There is possibility to point to class members:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">T</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">    <span class="token keyword">int</span> a<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span> cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span> <span class="token operator">-&gt;</span> a <span class="token operator">&lt;&lt;</span> T<span class="token double-colon punctuation">::</span>a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">int</span> T<span class="token double-colon punctuation">::</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>T<span class="token double-colon punctuation">::</span>a<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token punctuation">(</span>T<span class="token double-colon punctuation">::</span><span class="token operator">*</span>fp<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>T<span class="token double-colon punctuation">::</span>f<span class="token punctuation">;</span> <span class="token comment">// `&amp;` may not be omitted</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">                            <span class="token comment">// as may be for usual func names (not in class)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token comment">// usage example:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">    T t<span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">    T <span class="token operator">*</span>tp <span class="token operator">=</span> <span class="token operator">&amp;</span>t<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">    <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">    <span class="token punctuation">(</span>tp<span class="token operator">-&gt;</span><span class="token operator">*</span>fp<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	<span class="token comment">// output:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">	<span class="token comment">// 2 55</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">void*</code> variable may not be assigned with function pointer or member pointer!</p>
</div></div></div><div class="el-p"><p dir="auto">Use <code class="code-styler-inline">static_cast&lt;TT*&gt;(void_pointer)</code> to get pointer to TargetType(<code class="code-styler-inline">TT</code>).</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">In C++ array size must be constant expression.</p>
</div></div></div><div class="el-p"><p dir="auto">Reminder:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">arr <span class="token operator">==</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// error! Can't assign to array</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">Avoid array in interfaces (e.g., as function arguments)</p>
</div></div></div><div class="el-p"><p dir="auto">There is no built-in copy <strong>operation</strong> for arrays (but copy functions are).</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">When you need assignment to a collection use: <code class="code-styler-inline">vector</code>, or <code class="code-styler-inline">array</code> (not <code class="code-styler-inline">[]</code>), or <code class="code-styler-inline">valarray</code></p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Caution</div></div><div class="callout-content">
<p dir="auto">In old code you may meet <code class="code-styler-inline">char* str = "some text";</code> but in modern C++ it won't be compiled.<br>
The reason is: (in C) <code class="code-styler-inline">"hi"</code> has type <code class="code-styler-inline">char [3]</code>, (in C++) it has type <code class="code-styler-inline">const char [3]</code>.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">WOW</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">string</code> literals are statically allocated, so you can:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">error_message</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token string">"range error"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Interesting (you may not assume whether two identical string literals are allocated as one):</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token string">"Equal text"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> q <span class="token operator">=</span> <span class="token string">"Equal text"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">cout <span class="token operator">&lt;&lt;</span> p<span class="token operator">==</span>q <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// result is implementation-defined</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">For multiline:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> s1 <span class="token operator">=</span> <span class="token string">"hello\n\</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token string">world!\n"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> s2 <span class="token operator">=</span> <span class="token string">"hello\n"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">				 <span class="token string">"world!\n"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> s3 <span class="token operator">=</span> <span class="token raw-string string">R"(hello</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token raw-string string">world</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token raw-string string">)"</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Fully defined</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">R"***(...)***"</code> â€” contains custom pattern <code class="code-styler-inline">***</code> for open and close raw-string literal.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Strings have <code class="code-styler-inline">u8""</code> literal, but there is no <code class="code-styler-inline">u8''</code></p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>Note again: it's valid to point to the element one beyond last (pointers on arrays). Other deviations are UB by the standard.</p>
</blockquote></div><div class="el-p"><p dir="auto">You can declare C-code:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">extern</span> <span class="token string">"C"</span> <span class="token keyword">int</span> <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">// avoids names mangling</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Reminder</div></div><div class="callout-content">
<p dir="auto">It's not possible to return array from function!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">So funny ðŸ¤£</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">a[i] == *(a+i) == *(i+a) == i[a]</code><br>
Ð¡ommutativity of addition of numbers and pointers allows <code class="code-styler-inline">i[a]</code>, but of course you should avoid this in prod</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>Standard prescribes that subtraction of pointers is defined only when both pointers point to elements of the same array (and does not check that fact!)</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">range-for</code> works for a known-size arrays</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">&amp;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">    <span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">    <span class="token keyword">char</span> arr<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> x<span class="token operator">:</span> arr<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">        <span class="token function">init</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Some compilers suggest range checking, but avoid it in production</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warning</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">operator,</code> (comma) is not allowed in constant expression:<br>
<code class="code-styler-inline">int arr[3, 5]; // ERROR!</code></p>
</div></div></div><div class="el-p"><p dir="auto"><strong>Some words about multidimensional arrays</strong></p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">First, reminder:</li>
</ol></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> â‰¡ <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> â‰¡ <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-ol"><ol start="2">
<li data-line="0" dir="auto">Second, techninque:</li>
</ol></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> dim1<span class="token punctuation">,</span> <span class="token keyword">int</span> dim2<span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>dim1<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>dim2<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">			<span class="token function">do_smth</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span>i<span class="token operator">*</span>dim2 <span class="token operator">+</span> j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// not m[i][j]</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-ol"><ol start="3">
<li data-line="0" dir="auto">Third, don't be fooled by C's variable-length arrays (VLA):</li>
</ol></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> dim1<span class="token punctuation">,</span> <span class="token keyword">int</span> dim2<span class="token punctuation">,</span> <span class="token keyword">int</span> arr<span class="token punctuation">[</span>dim1<span class="token punctuation">]</span><span class="token punctuation">[</span>dim2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ERROR</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Remember</div></div><div class="callout-content">
<p dir="auto">In C++ any array <strong>must have</strong> constexpr length. No non-const var can be used!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">const</code> values must be initialized on declaration (non extern)</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>Note that <code class="code-styler-inline">const</code> modifies a type, it restricts the ways of use, rather than specifying how the constants is to be allocated.</p>
</blockquote></div><div class="el-p"><p dir="auto">Remember: a pointer may be <code class="code-styler-inline">nullptr</code> or point to an unexpected object.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Reference always refers to object to which it was initialized. There is not <code class="code-styler-inline">nullref</code></p>
</blockquote></div><div class="el-p"><p dir="auto">References is divided on:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><em>lvalue references</em></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><em><code class="code-styler-inline">const</code> references</em></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><em>rvalue references</em></li>
</ul></div><div class="el-h3"><h3 data-heading="Lvalue references" dir="auto" class="heading" id="Lvalue_references_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Lvalue references</h3></div><div class="el-p"><p dir="auto">Possibly:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">extern</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> a<span class="token punctuation">;</span> <span class="token comment">// legal: initialized elsewhere</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Need to know</div></div><div class="callout-content">
<p dir="auto">We cannot have a pointer to a reference. We cannot define an array of references. In that sense, a reference is not an object.</p>
</div></div></div><div class="el-p"><p dir="auto">Illustration for code:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> var <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">int</span><span class="token operator">&amp;</span> rr<span class="token punctuation">{</span>var<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token operator">++</span>rr<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">int</span><span class="token operator">*</span> pp <span class="token operator">=</span> <span class="token operator">&amp;</span>rr<span class="token punctuation">;</span> <span class="token comment">// == &amp;var, not &amp;rr (there is no rr indeed)</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto"><span alt="Screenshot 2025-10-07 at 03.03.28.png" src="a9s/screenshot-2025-10-07-at-03.03.28.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 500px; max-width: 100%;"><img alt="Screenshot 2025-10-07 at 03.03.28.png" src="a9s/screenshot-2025-10-07-at-03.03.28.png" target="_self" style="width: 500px; max-width: 100%;"></span></p></div><div class="el-p"><p dir="auto">The initializer for a <code class="code-styler-inline">const T&amp;</code> need not be an lvalue or even of type <code class="code-styler-inline">T</code>. In such case:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">First, implicit type conversion to <code class="code-styler-inline">T</code> is applied if necessary</li>
<li data-line="1" dir="auto">Then, the resulting value is placed on a temporary variable of type <code class="code-styler-inline">T</code></li>
<li data-line="2" dir="auto">Finally, this temporary variable is used as the value of the initializer<br>
So, you can:</li>
</ol></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">const</span> <span class="token keyword">double</span><span class="token operator">&amp;</span> cdr<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// double tmp = double{1}; const double&amp; cdr {temp};</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">note: lifetime of tmp longs until the end of its reference's scope.</p></div><div class="el-p"><p dir="auto">Recommendation: if you're going to modify T&amp; arg in function, function's name should give a strong hist that the reference argument is modified.</p></div><div class="el-p"><p dir="auto">You can return T&amp; from functions to provide access to modify some object. For example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">V</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Map</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	V<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// return res. Then you can: res = ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Rvalue References" dir="auto" class="heading" id="Rvalue_References_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Rvalue References</h3></div><div class="el-p"><p dir="auto">Consider common swap:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">swap</span> <span class="token punctuation">(</span>T<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	T tmp<span class="token punctuation">{</span>a<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	a <span class="token operator">=</span> b<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	b <span class="token operator">=</span> tmp<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">There have been made 3 copy operations!<br>
A better way:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">swap2</span> <span class="token punctuation">(</span>T<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	T tmp<span class="token punctuation">{</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&amp;&amp;</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// candidate to move!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	a <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&amp;&amp;</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// candidate to move!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	b <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&amp;&amp;</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// candidate to move!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Note, swap2 can't so: <code class="code-styler-inline">swap2(v, vector&lt;int&gt;{1,2,3});</code>. Solution is to define overloads:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span> <span class="token keyword">void</span> <span class="token function">swap2</span><span class="token punctuation">(</span>T<span class="token operator">&amp;&amp;</span>a<span class="token punctuation">,</span> T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span> <span class="token keyword">void</span> <span class="token function">swap2</span><span class="token punctuation">(</span>T<span class="token operator">&amp;</span>a<span class="token punctuation">,</span> T<span class="token operator">&amp;&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token comment">// now possible:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token function">swap2</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Otherwise, the std lib takes a different approach: it just defines special functions for the most used second argument in swap (duplicate end empty instance):</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> v<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token comment">// make s.capacity() == s.size()</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	s<span class="token punctuation">.</span><span class="token function">shrink_to_fit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// or...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> string<span class="token punctuation">{</span>s<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token comment">// clear v</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	v<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// or...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token function">swap</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// or...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	v <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Feel difference:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">vector</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token comment">//...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token function">vector</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&amp;</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// copy constructor   (1)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token function">vector</span><span class="token punctuation">(</span>vector<span class="token operator">&amp;&amp;</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// move constructor        (2)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> s<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> s2<span class="token punctuation">{</span>s<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// s is lvalue, so use (1)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> s3<span class="token punctuation">{</span>s<span class="token operator">+</span><span class="token string">" tail"</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// expr is rvalue so use (2)</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Yes! Move!</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">static_cast&lt;T&amp;&amp;&gt;(x)</code> has alias <code class="code-styler-inline">std::move(x)</code><br>
(where <code class="code-styler-inline">T</code> is <code class="code-styler-inline">typeof(x)</code>)</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Yeah!</div></div><div class="callout-content">
<p dir="auto">Since <code class="code-styler-inline">move(x)</code> does not move <code class="code-styler-inline">x</code> (just produces rvalue reference to <code class="code-styler-inline">x</code>), it would have been better if <code class="code-styler-inline">move()</code> had been called <code class="code-styler-inline">rval()</code>, but by now <code class="code-styler-inline">move()</code> has been used for years.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Also</div></div><div class="callout-content">
<p dir="auto">Rvalue references can be used to provide perfect forwarding</p>
</div></div></div><div class="el-h3"><h3 data-heading="References to References" dir="auto" class="heading" id="References_to_References_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>References to References</h3></div><div class="el-p"><p dir="auto">Consider interesting example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">using</span> rr <span class="token operator">=</span> <span class="token keyword">int</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">using</span> r <span class="token operator">=</span> <span class="token keyword">int</span><span class="token operator">&amp;</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token comment">// *reference collapse*</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">using</span> rr_rr <span class="token operator">=</span> rr<span class="token operator">&amp;&amp;</span><span class="token punctuation">;</span> <span class="token comment">// `int &amp;&amp; &amp;&amp;` -&gt; `int&amp;&amp;`</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">using</span> rr_r <span class="token operator">=</span> rr<span class="token operator">&amp;</span><span class="token punctuation">;</span>   <span class="token comment">// `int &amp;&amp; &amp; ` -&gt; `int&amp;`</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">using</span> r_rr <span class="token operator">=</span> r<span class="token operator">&amp;&amp;</span><span class="token punctuation">;</span>   <span class="token comment">// `int &amp; &amp;&amp; ` -&gt; `int&amp;`</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">using</span> r_r  <span class="token operator">=</span> r<span class="token operator">&amp;</span><span class="token punctuation">;</span>    <span class="token comment">// `int &amp; &amp;  ` -&gt; `int$`</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Simple mnemonic:</div></div><div class="callout-content">
<p dir="auto">Â« <code class="code-styler-inline">lvalue</code> always wins! Â»<br>
This makes sense: nothing we can do with types can change the fact that an lvalue reference refers to an lvalue.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">int &amp;&amp; &amp; r = ...; // invalid syntax!</code><br>
Reference to reference can only happen as the result of an alias or a template type argument!</p>
</div></div></div><div class="el-h3"><h3 data-heading="Pointers and References" dir="auto" class="heading" id="Pointers_and_References_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Pointers and References</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Remember</div></div><div class="callout-content">
<p dir="auto">You may have reference to pointer <code class="code-styler-inline">int* &amp;p = ...;</code> but you may not have a pointer (and therefore array) to reference.</p>
</div></div></div><div class="el-p"><p dir="auto">Be careful! There is trick to create null-reference, but it generates an error on runtime:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">ident</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> p<span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">char</span><span class="token operator">&amp;</span> r <span class="token punctuation">{</span><span class="token operator">*</span><span class="token function">ident</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// possible, but disaster</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Advice" dir="auto" class="heading" id="Advice_1"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advice</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>avoid nontrivial pointer arithmetic</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>prefer not to use multidimensional arrays; use suitable containers instead</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>prefer <code class="code-styler-inline">string</code> rather than C-strings</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>keep pointers that represent ownership inside handle classes</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>prefer <code class="code-styler-inline">&amp;</code> args over <code class="code-styler-inline">*</code> args, except where "no object" is a reasonable option</li>
</ul></div><div class="el-h1"><h1 data-heading="8. Structures, Unions, and Enumerations" dir="auto" class="heading" id="8._Structures,_Unions,_and_Enumerations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>8. Structures, Unions, and Enumerations</h1></div><div class="el-h3"><h3 data-heading="Structures" dir="auto" class="heading" id="Structures_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Structures</h3></div><div class="el-blockquote"><blockquote dir="auto">
<p>Some operators (e.g., <code class="code-styler-inline">==</code> and <code class="code-styler-inline">!=</code>) are not available by default for structures.</p>
</blockquote></div><div class="el-h3"><h3 data-heading="`struct` Layout" dir="auto" class="heading" id="`struct`_Layout_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><code class="code-styler-inline">struct</code> Layout</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Rule</div></div><div class="callout-content">
<p dir="auto">An object of a <code class="code-styler-inline">struct</code> holds its members in the order they are declared.</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>For optimize <code class="code-styler-inline">struct</code> size (due to alignment) you can reorder members from largest to smallest.<br>
But usually best to order members for readability.</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">EMERGENCY</div></div><div class="callout-content">
<p dir="auto">Use of multiple access specifiers (<code class="code-styler-inline">public</code>/<code class="code-styler-inline">private</code>/<code class="code-styler-inline">protected</code>) can affect layout!</p>
</div></div></div><div class="el-h3"><h3 data-heading="`struct` Names" dir="auto" class="heading" id="`struct`_Names_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><code class="code-styler-inline">struct</code> Names</h3></div><div class="el-p"><p dir="auto">Remember about self-reference and cross-reference abilities:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">B</span><span class="token punctuation">;</span> <span class="token comment">// incomplete but declared type</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">A</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	A<span class="token operator">*</span> a<span class="token punctuation">;</span> <span class="token comment">// possible with a pointer</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	B<span class="token operator">*</span> b<span class="token punctuation">;</span> <span class="token comment">// possible with a pointer</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">int</span> data<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">B</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	A<span class="token operator">*</span> a<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Incomplete type allows many optional (as long as that use does not require members' size of the size of type):</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">S</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">extern</span> S a<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">S<span class="token operator">*</span> p<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">S <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">S<span class="token operator">*</span> <span class="token function">h</span><span class="token punctuation">(</span>S<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">S<span class="token operator">*</span> q <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token comment">// ERRORS:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">S a<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token function">g</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">p<span class="token operator">-&gt;</span>m <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">You should avoid equality of names of <code class="code-styler-inline">struct</code> and non-<code class="code-styler-inline">struct</code> even while it is possible with disambiguation in C-style:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">stat</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">stat</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// is non-struct acceess</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">stat</span> s<span class="token punctuation">;</span> <span class="token comment">// struct access (as in C)</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Info</div></div><div class="callout-content">
<p dir="auto">The same is true for <code class="code-styler-inline">class</code>, <code class="code-styler-inline">union</code>, <code class="code-styler-inline">enum</code></p>
</div></div></div><div class="el-p"><p dir="auto">My research:</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="example" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></div><div class="callout-title-inner">Remember</div></div><div class="callout-content">
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">enum</code> is a type (not alias), and simultaneously defines int constants!</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>C++ allows nested types (with block-space). So you can define enum or class in function or another class.</li>
</ul>
</div></div></div><div class="el-h3"><h3 data-heading="Structures and Classes" dir="auto" class="heading" id="Structures_and_Classes_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Structures and Classes</h3></div><div class="el-blockquote"><blockquote dir="auto">
<p>Structures are classes indeed, but with public members and inheritance by default.</p>
</blockquote></div><div class="el-p"><p dir="auto">By default, structure provide initialization of members in order:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">Point p<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// inited as {0, 0}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">Point q<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// inited as {2, {}}, i.e. {2, 0}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Structures and Arrays" dir="auto" class="heading" id="Structures_and_Arrays_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Structures and Arrays</h3></div><div class="el-p"><p dir="auto">You can define constant size array inside struct (for pass through func) adapted for range-for:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> size_t N<span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">array</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	T elem<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	T<span class="token operator">*</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><span class="token keyword">return</span> elem<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">const</span> T<span class="token operator">*</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">noexcept</span> <span class="token punctuation">{</span><span class="token keyword">return</span> elem<span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token comment">// ... and a few more</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token keyword">constexpr</span> size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">We can't deduce number of elements:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">array<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> points <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// error, N not given</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Keep in mind</div></div><div class="callout-content">
<ol>
<li data-line="1" dir="auto">Two structures are different types even when have the same members</li>
<li data-line="2" dir="auto">Also invalid: <code class="code-styler-inline">struct S{int x;} s; int i = s;</code></li>
<li data-line="3" dir="auto">Every <code class="code-styler-inline">struct</code> must have a unique definition (same as function must)</li>
</ol>
</div></div></div><div class="el-h3"><h3 data-heading="Plain Old Data (POD)" dir="auto" class="heading" id="Plain_Old_Data_(POD)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Plain Old Data (POD)</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><em><mark>plain old data (POD)</mark></em> â€” just data, a contiguous sequence of bytes in memory</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">std::memcopy</code> typically simply uses a block-move machine instruction (that is very efficient). They should use "such trick" only for optimized low-level code and avoid this in higher-level code.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span><mark><em>trivially copyable type</em></mark> â€” has trivial copy/move ctors/ops and trivial destructor. Has no virtual functions/bases. Recursively for subobjects.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><mark><em>trivial type</em></mark> â€” <em>trivially copyable</em> type with trivial default constructor</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><mark><em>standard-layout type</em></mark> â€” has no virtual functions/bases. Non-static fields has the same access level. Has no reference-members. Has no non-static data members in more than one base (or in base and in derived). Has no the same type base and first non-static member.</li>
</ul>
</div></div></div><div class="el-p"><p dir="auto">You can compile-timed check for time for optimization:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">mycopy</span><span class="token punctuation">(</span>T<span class="token operator">*</span> to<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">*</span> from<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token keyword">constexpr</span><span class="token punctuation">(</span>is_pod<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>value<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		<span class="token function">memcpy</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> count<span class="token operator">*</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">else</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">!=</span>count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">			to<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>from<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Fields" dir="auto" class="heading" id="Fields_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Fields</h3></div><div class="el-p"><p dir="auto">Example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">PPN</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> PFN <span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">int</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// offset</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> CCA <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">bool</span> nonreachable <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">bool</span> dirty <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">bool</span> valid <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token keyword">bool</span> global <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">part_of_VM_system</span><span class="token punctuation">(</span>PPN<span class="token operator">*</span> p<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	<span class="token comment">//...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>dirty<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// contents changed</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">		<span class="token comment">//copy to disk...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">		p<span class="token operator">-&gt;</span>dirty <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Type of a bit-field may be only integral or enum.</p>
</div></div></div><div class="el-h3"><h3 data-heading="Unions" dir="auto" class="heading" id="Unions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Unions</h3></div><div class="el-p"><p dir="auto">Example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">enum</span> <span class="token class-name">Type</span> <span class="token punctuation">{</span>str<span class="token punctuation">,</span> num<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">union</span> Value<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">int</span> i<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">Entry</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">char</span><span class="token operator">*</span> name<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	Type t<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	Value v<span class="token punctuation">;</span> <span class="token comment">// use v.s if t==str, v.i otherwise</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Unions and Classes" dir="auto" class="heading" id="Unions_and_Classes_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Unions and Classes</h3></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">union</code> is a kind of a <code class="code-styler-inline">struct</code> which in turn is a kind of a <code class="code-styler-inline">class</code>.<br>
However, there are some restrictions imposed on <code class="code-styler-inline">union</code>s:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">A union cannot have a virtual functions</li>
<li data-line="1" dir="auto">A union cannot have members of reference type</li>
<li data-line="2" dir="auto">A union cannot have base classes</li>
<li data-line="3" dir="auto">A union cannot be used as a base class</li>
<li data-line="4" dir="auto">A union has deleted <code class="code-styler-inline">()</code>, <code class="code-styler-inline">==</code>, <code class="code-styler-inline">=&lt;-</code>, <code class="code-styler-inline">~()</code> if its member has custom one! <mark>UP</mark>: <em>I've found that for unnamed union nested in class it behaves not so way.</em></li>
<li data-line="5" dir="auto">At most one member of a union can have an in-class initializer</li>
</ol></div><div class="el-p"><p dir="auto">Rule (4) is for avoid "hidden costs" on derived classes.</p></div><div class="el-p"><p dir="auto">Rule (5) keeps simple unions simple. For complicated operations it forces the programmer to explicitly provide them. In fact, compiler does not know which constructors or copy operations to call, or which destructors to call.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Wow!</div></div><div class="callout-content">
<p dir="auto">There is anonymous nested types injection! (see <code class="code-styler-inline">tagged union</code> in example below). </p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">Entry</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">private</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">Tag</span> <span class="token punctuation">{</span>number<span class="token punctuation">,</span> text<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	Tag type<span class="token punctuation">;</span> <span class="token comment">//discriminant</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">union</span> <span class="token punctuation">{</span> <span class="token comment">// tagged (or discriminated union)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">		<span class="token keyword">int</span> i<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">		string s<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token keyword">struct</span> <span class="token class-name">Bad_entry</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// for exceptions</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	string name<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	<span class="token comment">// Many of important are avoided!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">set_number</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">		<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> Tag<span class="token double-colon punctuation">::</span>text<span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">			s<span class="token punctuation">.</span><span class="token operator">~</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// explicitly destroy string</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text">			type <span class="token operator">=</span> Tag<span class="token double-colon punctuation">::</span>number<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">		<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text">		i <span class="token operator">=</span> n<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">set_text</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text">	<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text">		<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> Tag<span class="token double-colon punctuation">::</span>text<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">28</div><div class="code-styler-line-text">			s <span class="token operator">=</span> str<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">29</div><div class="code-styler-line-text">		<span class="token keyword">else</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">30</div><div class="code-styler-line-text">			<span class="token comment">// placement new: explicitly construct string</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">31</div><div class="code-styler-line-text">			<span class="token keyword">new</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span> string<span class="token punctuation">{</span>str<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">32</div><div class="code-styler-line-text">			type <span class="token operator">=</span> Tag<span class="token double-colon punctuation">::</span>text<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">33</div><div class="code-styler-line-text">		<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">34</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">35</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">See <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch8/anon_union.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch8/anon_union.cpp" target="_self">full example</a>.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">The <code class="code-styler-inline">placement new</code></div></div><div class="callout-content">
<p dir="auto">Form of the <code class="code-styler-inline">new</code> that places object in already allocated memory and doesn't cause additional allocation</p>
</div></div></div><div class="el-h3"><h3 data-heading="Enumerations" dir="auto" class="heading" id="Enumerations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Enumerations</h3></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">Color</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	red<span class="token punctuation">,</span>  <span class="token comment">// called enumerator</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	green<span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	blue</div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">It's possible to define underlying type for enum:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">Warning</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">char</span></span> <span class="token punctuation">{</span>none<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> green<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> yellow<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> orange<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> red<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">// sizeof(Warning) == 1</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">You can define operators for enum types:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> Warning <span class="token keyword">operator</span><span class="token operator">|</span><span class="token punctuation">(</span>Warning a<span class="token punctuation">,</span> Warning b<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Warning<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		<span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>b<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Note: with <code class="code-styler-inline">constexpr</code> you now can use it in constant expressions:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">switch</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">case</span> Warning<span class="token double-colon punctuation">::</span>green<span class="token operator">|</span>Warning<span class="token double-colon punctuation">::</span>yellow<span class="token operator">:</span> <span class="token comment">// for green and yellow</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">break</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Warn: for bool test you need to compare with none:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>Warning w<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>w<span class="token operator">&amp;</span><span class="token punctuation">(</span>Warning<span class="token double-colon punctuation">::</span>yellow <span class="token operator">|</span> Warning<span class="token double-colon punctuation">::</span>orange<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span>Warning<span class="token double-colon punctuation">::</span>none<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// for yellow or orange</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">It's possible to declare (not defined awhile) <code class="code-styler-inline">enum class</code>:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">Color</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">char</span></span><span class="token punctuation">;</span> <span class="token comment">// declaration</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Plain enums" dir="auto" class="heading" id="Plain_enums_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Plain enums</h3></div><div class="el-blockquote"><blockquote dir="auto">
<p>Names injecting can also be called as <em>namespace pollution</em></p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Pay the attention!</div></div><div class="callout-content">
<p dir="auto">You can declare forwarding declaration enum only with setting the underlying type!<br>
<code class="code-styler-inline">enum Color; //error!</code><br>
<code class="code-styler-inline">enum Color: int; //ok</code></p>
</div></div></div><div class="el-p"><p dir="auto">The underlying type for contain values is calculated by range <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-msup><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-script style="vertical-align: 0.363em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msup space="2"><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-script style="vertical-align: 0.363em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo></mjx-math></mjx-container></span> for signed and <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msup space="2"><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-script style="vertical-align: 0.363em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo></mjx-math></mjx-container></span> for unsigned to contain at least min and max enumerators.</p></div><div class="el-h3"><h3 data-heading="Advice" dir="auto" class="heading" id="Advice_2"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advice</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>when you need to compact data place larger before smaller (for compact alignment)</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>use bit-fields to represent hardware-imposed data layouts</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>don't try naively optimize with bitwise games</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>use unions to save space and never for type conversion</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>use enums to represent sets of named constants</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>prefer <code class="code-styler-inline">enum class</code> over plain <code class="code-styler-inline">enum</code> to minimize surprises</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>define operations on enums for safe and simple use</li>
</ul></div><div class="el-h1"><h1 data-heading="9. Statements" dir="auto" class="heading" id="9._Statements_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>9. Statements</h1></div><div class="el-p"><p dir="auto">Note:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>declaration is a statement</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>expression terminated with <code class="code-styler-inline">;</code> is a statement</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Reminder</div></div><div class="callout-content">
<p dir="auto">The compiler may reorder code to improve performance as long as the observer behavior persists.</p>
</div></div></div><div class="el-h3"><h3 data-heading="Statement Summary" dir="auto" class="heading" id="Statement_Summary_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Statement Summary</h3></div><div class="el-p"><p dir="auto">There are not so many statements:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">;</code> â€” <em>empty statement</em></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>declaration</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>expression<code class="code-styler-inline">;</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">{}</code> â€” <em>compound statement</em> or <em>block</em></li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">try {} catch {}</code></li>
<li data-line="5" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">case &lt;constexpr&gt; : statement</code></li>
<li data-line="6" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">default : statement</code></li>
<li data-line="7" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">identifier : statement</code></li>
<li data-line="8" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">break</code>, <code class="code-styler-inline">continue</code>, <code class="code-styler-inline">goto &lt;identifier&gt;</code>, (<mark>throw</mark>, but it's not a statement)</li>
<li data-line="9" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">return &lt;expression&gt;;</code></li>
<li data-line="10" dir="auto"><span class="list-bullet"></span>selection (<code class="code-styler-inline">if</code>, <code class="code-styler-inline">switch</code>)</li>
<li data-line="11" dir="auto"><span class="list-bullet"></span>iteration (<code class="code-styler-inline">for</code>, <code class="code-styler-inline">while</code>, <code class="code-styler-inline">do</code>)</li>
</ul></div><div class="el-blockquote"><blockquote dir="auto">
<p>Note: <code class="code-styler-inline">=</code> (assignment) and <code class="code-styler-inline">()</code> (function call) are <em>expressions</em>, not <em>statements</em></p>
</blockquote></div><div class="el-h3"><h3 data-heading="Declarations as Statements, and in Conditions" dir="auto" class="heading" id="Declarations_as_Statements,_and_in_Conditions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Declarations as Statements, and in Conditions</h3></div><div class="el-p"><p dir="auto">For <em>condition</em> in test statements argument implicitly converts to <code class="code-styler-inline">bool</code>:<br>
<code class="code-styler-inline">if (arg) == if(static_cast&lt;bool&gt;(arg))</code></p></div><div class="el-p"><p dir="auto">Reminder:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">if</span> <span class="token punctuation">(</span>cond<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">int</span> x <span class="token operator">=</span> val<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// invalid! You may not only declare. Use {} at least</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">For <code class="code-styler-inline">for</code> loops we have:</p></div><div class="el-pre code-styler-pre-parent"><pre class="code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">1st form:</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">for</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	(&lt;for-init-statement&gt; [&lt;condition&gt;]; [&lt;expression&gt;])</div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		&lt;statement&gt;</div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">2nd form:</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">for</div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	(&lt;for-init-declaration&gt; : &lt;expression&gt;)</div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">		&lt;statement&gt;</div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><em>for-init-statement</em> may be either a declaration or en expression-statement (both end with a semicolon <code class="code-styler-inline">;</code>)</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><em>for-init-declaration</em> must be the declaration of a single uninitialized variable.</li>
</ul></div><div class="el-p"><p dir="auto">For tests we have:</p></div><div class="el-pre code-styler-pre-parent"><pre class="code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">1st form:</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">if (&lt;condition&gt;)</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	&lt;statement&gt;</div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">2nd form:</div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">while (&lt;condition&gt;)</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	&lt;statement&gt;</div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">3rd form:</div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">do &lt;statement&gt;</div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	while (&lt;expression&gt;);</div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>condition may be expression or <code class="code-styler-inline">[&lt;init&gt;]; expression</code>.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>if <code class="code-styler-inline">&lt;init&gt;</code> provided, it must declare and init a single variable.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>note: for <code class="code-styler-inline">do ... while ();</code> you may not to declare in <code class="code-styler-inline">while(...)</code></li>
</ul></div><div class="el-h3"><h3 data-heading="Switch statement" dir="auto" class="heading" id="Switch_statement_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Switch statement</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">It's not possible to repeat the same value in cases:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">switch</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		<span class="token keyword">break</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">:</span> <span class="token comment">// error: multiple usages</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">		<span class="token keyword">break</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">The compiler may optimize <code class="code-styler-inline">switch</code>es with jump-table or binary-lookup.</p></div><div class="el-p"><p dir="auto">The compiler often warn if you switch not all <code class="code-styler-inline">enum</code> values:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span>red<span class="token punctuation">,</span> blue<span class="token punctuation">,</span> green<span class="token punctuation">,</span> black<span class="token punctuation">,</span> white<span class="token punctuation">,</span> orange<span class="token punctuation">,</span> purple<span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">extern</span> Color c<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">switch</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">		<span class="token keyword">case</span> Color<span class="token double-colon punctuation">::</span>red<span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">			<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">		<span class="token keyword">case</span> Color<span class="token double-colon punctuation">::</span>blue<span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">			<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">		<span class="token keyword">case</span> Color<span class="token double-colon punctuation">::</span>green<span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">			<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">		<span class="token keyword">case</span> Color<span class="token double-colon punctuation">::</span>black<span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">			<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">		<span class="token keyword">case</span> Color<span class="token double-colon punctuation">::</span>white<span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">			<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">		<span class="token keyword">case</span> Color<span class="token double-colon punctuation">::</span>orange<span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">			<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">		<span class="token comment">// is `Color::purple` missing?</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text"><span class="token comment">// Output:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text"><span class="token comment">// ../wl.cpp:10:9: warning: enumeration value 'purple' not handled in switch [-Wswitch]</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text"><span class="token comment">//   10 |         switch(c){</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text"><span class="token comment">//      |                ^</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text"><span class="token comment">// ../wl.cpp:10:9: note: add missing switch cases</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">28</div><div class="code-styler-line-text"><span class="token comment">//   10 |         switch(c){</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">This type of errors occur when someone adds new enumerator in <code class="code-styler-inline">enum</code> def!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">test impossible values separately.</p>
</div></div></div><div class="el-h3"><h3 data-heading="Declarations in Cases" dir="auto" class="heading" id="Declarations_in_Cases_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Declarations in Cases</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Pay the attention</div></div><div class="callout-content">
<p dir="auto">Scope of different <code class="code-styler-inline">case</code>s' is common! Thus, there is many possible errors:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">switch</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">int</span> x<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	string s<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token comment">// fallthrough</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token comment">// jump bypasses initialization of y, s</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token operator">++</span>x<span class="token punctuation">;</span> <span class="token comment">// warning: using garbage!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token operator">++</span>y<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	s <span class="token operator">=</span> <span class="token string">"nasty!"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Note:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>for uninitialized primitives you can use but garbage...</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>for initialized primitives you get a error on compile</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>for all user-defined you get a error on IDE
<div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">Avoid cross-references between <code class="code-styler-inline">case</code> areas. Ot use additional <code class="code-styler-inline">{}</code> blocks</p>
</div></div>
</li>
</ul></div><div class="el-h3"><h3 data-heading="Iteration Statements" dir="auto" class="heading" id="Iteration_Statements_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Iteration Statements</h3></div><div class="el-p"><p dir="auto">For form <code class="code-styler-inline">for( auto x : v ) {...}</code> object <code class="code-styler-inline">v</code> must provide <code class="code-styler-inline">begin</code> and <code class="code-styler-inline">end</code> in either:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">v.begin()</code>, <code class="code-styler-inline">v.end()</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">begin(v)</code>, <code class="code-styler-inline">end(v)</code></li>
</ul></div><div class="el-blockquote"><blockquote dir="auto">
<p>Note: element <code class="code-styler-inline">x</code> is <code class="code-styler-inline">*p</code>, where <code class="code-styler-inline">p</code> returned by <code class="code-styler-inline">.begin()</code></p>
</blockquote></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// prefer this</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token comment">// infinit loop</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// error! expression is expected</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token comment">// infinit loop</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">goto</code> is prohibited for jump past an initializer or into an exception handler!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">goto</code> doesn't cause enclosing loop's increment or condition, but correctly exit the scope, thus counter-variable will be destroyed.</p>
</div></div></div><div class="el-h3"><h3 data-heading="Comments" dir="auto" class="heading" id="Comments_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Comments</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Advice</div></div><div class="callout-content">
<p dir="auto">Do not state something in comment, if this is stated in language itself!</p>
</div></div></div><div class="el-h3"><h3 data-heading="Advice" dir="auto" class="heading" id="Advice_3"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advice</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Don't declare before you have a value to initialize</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Prefer <code class="code-styler-inline">switch</code> ti <code class="code-styler-inline">if</code> when there is a choice</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Avoid <code class="code-styler-inline">goto</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Keep comments crisp (Ñ‡ÐµÑ‚ÐºÐ¸Ð¼Ð¸)</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>State intent in comments</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>Maintain a consistent indentation style</li>
</ul></div><div class="el-h1"><h1 data-heading="10. Expressions" dir="auto" class="heading" id="10._Expressions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>10. Expressions</h1></div><div class="el-p"><p dir="auto">Let's overview the calculator program!<br>
There are some important and interesting notes about language facilities and others below.<br>
Full exercise is done in <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch10/calculator.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch10/calculator.cpp" target="_self">the file</a>.</p></div><div class="el-h3"><h3 data-heading="My notes" dir="auto" class="heading" id="My_notes_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>My notes</h3></div><div class="el-p"><p dir="auto"><em>Recursive descent</em> â€” popular and straightforward top-down technique for syntax analysis.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">YOU MUST</div></div><div class="callout-content">
<p dir="auto">You must declare subsequent function even if its definition is in the same file!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="fail" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></div><div class="callout-title-inner">Most vexing parse (MVP)</div></div><div class="callout-content">
<p dir="auto">All that can be interpreted as a function declaration will be so.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Clarifying</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">sizeof</code> and C-style cast are operators, not statements.<br>
reminder, correct forms:</p>
<ul class="has-list-bullet">
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">sizeof object</code> or <code class="code-styler-inline">sizeof (object)</code></li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">sizeof (typename)</code> â€” preferred form</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">typename (expr)</code></li>
<li data-line="6" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">(typename) expr</code> â€” preferred form</li>
</ul>
</div></div></div><div class="el-p"><p dir="auto">In <code class="code-styler-inline">Token_stream</code> we use useful and general technique for classes that hold a pointer to a resource requiring destruction:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token class-name">Token_stream</span><span class="token double-colon punctuation">::</span><span class="token function">Token_stream</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> s<span class="token punctuation">)</span> <span class="token operator">:</span> ip<span class="token punctuation">{</span><span class="token operator">&amp;</span>s<span class="token punctuation">}</span><span class="token punctuation">,</span> owns<span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token class-name">Token_stream</span><span class="token double-colon punctuation">::</span><span class="token function">Token_stream</span><span class="token punctuation">(</span>istream<span class="token operator">*</span> p<span class="token punctuation">)</span> <span class="token operator">:</span> ip<span class="token punctuation">{</span>p<span class="token punctuation">}</span><span class="token punctuation">,</span> owns<span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="cite" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-quote"><path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path><path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path></svg></div><div class="callout-title-inner">Stroustrup</div></div><div class="callout-content">
<p dir="auto">In general, dealing with complete objects is clearer and less error-prone than manipulating data members individually.</p>
</div></div></div><div class="el-p"><p dir="auto">Next functions use hash-search and are completely efficient!</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token function">isalpha</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">isdigit</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">isalnum</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">isspace</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Curious!</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">std::cerr</code> is an <em>unbuffered</em> output stream!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">New facility â€” Structured bindings</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">auto [x, y] = Point{2, 3.8}; // double x = 2, y = 3.8</code>.<br>
Supported for any object with <code class="code-styler-inline">tuple_size</code>, <code class="code-styler-inline">get</code>, <code class="code-styler-inline">tuple_element</code></p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">If you don't explicitly return value from func â€” UB, but just warn on compile.</p>
</div></div></div><div class="el-h3"><h3 data-heading="Command-Line Arguments" dir="auto" class="heading" id="Command-Line_Arguments_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Command-Line Arguments</h3></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">With <code class="code-styler-inline">&lt;sstreams&gt;</code> you can use <code class="code-styler-inline">new istringstream{argv[1]};</code> to form <code class="code-styler-inline">istream</code> from <code class="code-styler-inline">string</code><br>
For more details see <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch10/calculator.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch10/calculator.cpp" target="_self">main(...)</a>.</p></div><div class="el-h3"><h3 data-heading="Operator Summary âœ¨" dir="auto" class="heading" id="Operator_Summary_âœ¨_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Operator Summary âœ¨</h3></div><div class="el-p"><p dir="auto">â—ï¸Must see:<br>
<a data-tooltip-position="top" aria-label="âž• Operator Summary > By Stroustrup" data-href="âž• Operator Summary#By Stroustrup" href="engineering/c++-essentials/âž•-operator-summary.html" class="internal-link" target="_self" rel="noopener nofollow">Full Operator Summary</a></p></div><div class="el-p"><p dir="auto">Interesting operators for me:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token double-colon punctuation">::</span>x  <span class="token comment">// access global x</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">typeid</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token comment">// type identification</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">typeid</span><span class="token punctuation">(</span>expr<span class="token punctuation">)</span> <span class="token comment">// run-time type identification</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">sizeof</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>Args<span class="token punctuation">)</span> of <span class="token keyword">sizeof</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token comment">// number of type args or func args</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token comment">// Forms of alloc/delete:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">new</span> type <span class="token comment">// allocate</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">new</span> <span class="token function">type</span> <span class="token punctuation">(</span>expr<span class="token operator">-</span>list<span class="token punctuation">)</span> <span class="token comment">// allocate and init</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token keyword">new</span> type <span class="token punctuation">{</span>expr<span class="token operator">-</span>list<span class="token punctuation">}</span> <span class="token comment">// allocate and init</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token keyword">new</span> <span class="token punctuation">(</span>expr<span class="token operator">-</span>list<span class="token punctuation">)</span> type <span class="token comment">// place</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token keyword">new</span> <span class="token punctuation">(</span>expr<span class="token operator">-</span>list<span class="token punctuation">)</span> <span class="token function">type</span> <span class="token punctuation">(</span>expr<span class="token operator">-</span>list<span class="token punctuation">)</span> <span class="token comment">// place and init</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token keyword">new</span> <span class="token punctuation">(</span>expr<span class="token operator">-</span>list<span class="token punctuation">)</span> type <span class="token punctuation">{</span>expr<span class="token operator">-</span>list<span class="token punctuation">}</span> <span class="token comment">// place and init</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token keyword">delete</span> pointer <span class="token comment">// dealloc</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text"><span class="token keyword">delete</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>pointer <span class="token comment">// dealloc array</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text"><span class="token keyword">noexcept</span> <span class="token punctuation">(</span>expr<span class="token punctuation">)</span> <span class="token comment">// &lt;- not specifier, just evaluatable operator</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text"><span class="token comment">// note</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text">object<span class="token punctuation">.</span><span class="token operator">*</span>ptomem <span class="token comment">// has lower precedence than object.member (!)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text">pointer<span class="token operator">-&gt;</span><span class="token operator">*</span>ptomem <span class="token comment">// has lower precedence than pointer-&gt;member (!)</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Lambdas in C++ is objects of anonymous class with overloaded <code class="code-styler-inline">operator()</code>. Just syntax sugar.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Unaries and assignments are <em>right-associative</em><br>
Others are <em>left-associative</em></p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Warning</div></div><div class="callout-content">
<p dir="auto">A few grammar rules cannot be expressed in terms of precedence (also known as <mark><em>binding strength</em></mark>) and associativity.<br>
Example: <code class="code-styler-inline">a=b&lt;c?d=e:f=g</code> â€”&gt; <code class="code-styler-inline">a=((b&lt;c)?(d=e):(f=g))</code></p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip!</div></div><div class="callout-content">
<p dir="auto">There is <mark><em>Max Munch rule</em></mark> in C++:<br>
Â«To make a token the longest possible sequence of characters is chosenÂ». Example:<br>
<code class="code-styler-inline">&amp;&amp;</code> â€”&gt; <code class="code-styler-inline">'&amp;&amp;'</code> not <code class="code-styler-inline">'&amp;' '&amp;'</code><br>
<code class="code-styler-inline">a+++1</code> â€”&gt; <code class="code-styler-inline">'a' '++' '+' '1'</code> i.e. <code class="code-styler-inline">(a++) + 1</code></p>
</div></div></div><div class="el-p"><p dir="auto">All tokens of C++:<br>
<span alt="Screenshot 2025-10-11 at 19.25.32.png" src="a9s/screenshot-2025-10-11-at-19.25.32.png" class="internal-embed media-embed image-embed is-loaded" target="_self" style="width: 500px; max-width: 100%;"><img alt="Screenshot 2025-10-11 at 19.25.32.png" src="a9s/screenshot-2025-10-11-at-19.25.32.png" target="_self" style="width: 500px; max-width: 100%;"></span></p></div><div class="el-h3"><h3 data-heading="Results" dir="auto" class="heading" id="Results_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Results</h3></div><div class="el-p"><p dir="auto">Result type of arithmetic operators are determined by a set of rules known as</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Â«The usual arithmetic conversionsÂ»</div></div><div class="callout-content">
<p dir="auto">The overall aim is to produce a result of the "largest" operand type</p>
</div></div></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>types less than <code class="code-styler-inline">int</code> are converted to <code class="code-styler-inline">int</code> before evaluation.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>logical operator always produce <code class="code-styler-inline">bool</code> result (but you can override for your class)</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note!</div></div><div class="callout-content">
<p dir="auto">The result is <code class="code-styler-inline">lvalue</code> if it logically feasible:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> j <span class="token operator">=</span> x <span class="token operator">=</span> y<span class="token punctuation">;</span>        <span class="token comment">// (x=y) -&gt; x, not just value of x</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token operator">++</span>x<span class="token punctuation">;</span>        <span class="token comment">// (++x) â€”&gt; x, not just value of x</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">int</span><span class="token operator">*</span> q <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>x<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// error! (x++) -&gt; tmp value</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">int</span><span class="token operator">*</span> p2 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>x<span class="token operator">&gt;</span>y<span class="token operator">?</span>x<span class="token operator">:</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// `?:` â€”&gt; lvalue of largest, not just value</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">int</span><span class="token operator">&amp;</span> r <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">&lt;</span>y<span class="token punctuation">)</span><span class="token operator">?</span>x<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">;</span>   <span class="token comment">// error! `?:` â€”&gt; tmp value because of 1</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Oh My God!!!</div></div><div class="callout-content">
<p dir="auto">Underflow, overflow, zero-division do not throw exceptions! Result just is UB</p>
</div></div></div><div class="el-h3"><h3 data-heading="Order of Evaluation" dir="auto" class="heading" id="Order_of_Evaluation_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Order of Evaluation</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Important reminder</div></div><div class="callout-content">
<p dir="auto">The order of evaluation is undefined!</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// what is first? f or g?</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">v<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// UB v[i] = i or v[i+1] = i?</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token function">f</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// UB what is first?</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Temporary Objects" dir="auto" class="heading" id="Temporary_Objects_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Temporary Objects</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Attention about temporary objects</div></div><div class="callout-content">
<p dir="auto">See dangerous example:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> s1<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> s2<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> s3<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> cs <span class="token operator">=</span> <span class="token punctuation">(</span>s1<span class="token operator">+</span>s2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> cs<span class="token punctuation">;</span> <span class="token comment">// Danger! cs may already point to released memory</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>cs<span class="token operator">=</span><span class="token punctuation">(</span>s2<span class="token operator">+</span>s3<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">8</span> <span class="token operator">&amp;&amp;</span> cs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token char">'a'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// safe</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">		<span class="token comment">// use cs</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">		<span class="token comment">// Danger! the same problem</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Constant Expressions" dir="auto" class="heading" id="Constant_Expressions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Constant Expressions</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>
<p><code class="code-styler-inline">constexpr</code> may not have side-effects</p>
</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>
<p><code class="code-styler-inline">constexpr</code> starts out with integral, floating or enum value</p>
</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>
<p><code class="code-styler-inline">constexpr</code> can use some addresses</p>
</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>
<p>language requires <code class="code-styler-inline">constexpr</code> for array sizes, <code class="code-styler-inline">case</code> labels, and <code class="code-styler-inline">template</code> value arguments</p>
</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>
<p>for embedded systems you should prefer <code class="code-styler-inline">.rodata</code> because this memory is cheaper (in terms of cost and energy consumption), more plentiful, and immune to most system crashes</p>
</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>
<p>if something is initialized in compile-time, there can be no data races on that object</p>
</li>
</ul></div><div class="el-p"><p dir="auto">For C++11 it's only possibility to state <code class="code-styler-inline">return</code> in <code class="code-styler-inline">constexpr</code> function, so you can't use <code class="code-styler-inline">while</code>. It that time <code class="code-styler-inline">sqrt</code> was calculated as:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">int</span> <span class="token function">isqrt_helper</span><span class="token punctuation">(</span><span class="token keyword">int</span> sq<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span> <span class="token keyword">return</span> sq <span class="token operator">&lt;=</span> a <span class="token operator">?</span> <span class="token function">isqrt_helper</span><span class="token punctuation">(</span>sq<span class="token operator">+</span>d<span class="token punctuation">,</span> d<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token operator">:</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">int</span> <span class="token function">isqrt</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">isqrt_helper</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">But in modern C++ you can:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">int</span> <span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">int</span> base <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">while</span> <span class="token punctuation">(</span>base<span class="token operator">*</span>base <span class="token operator">&lt;=</span> x<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		base<span class="token operator">++</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">return</span> base<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">The parts of <code class="code-styler-inline">?:</code> or <code class="code-styler-inline">&amp;&amp;</code> or <code class="code-styler-inline">||</code> that is not evaluated may not be an <code class="code-styler-inline">constexpr</code>!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Some notes by me and AI</div></div></div></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">constexpr</code> in C++20 can do quite a lot, if not everything. Strict rules are not found, but you can think about: transitive chain of <code class="code-styler-inline">constexpr</code> calculations and no access to run-time environment.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">constexpr</code> works like an interpreter, but clever one (with memoization and other optimizations)</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">consteval</code> is another form of exactly <code class="code-styler-inline">constexpr</code> but with strictly-compile-time evaluation. This can be used <em>only with functions</em></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">if constexpr</code> necessarily executed in compile-time (not recommendation)</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">if consteval {...}</code> is special construction for to check how enclosing <code class="code-styler-inline">constexpr</code> function is called (run-time or compile-time)</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">constinit</code> new feature for ensure possibility compile-time initialization. Good for local-static variables (removes overhead of init-check), good for thread_local variables (removes guard usage).</li>
</ul></div><div class="el-h3"><h3 data-heading="`const`s in Constant Expressions" dir="auto" class="heading" id="`const`s_in_Constant_Expressions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><code class="code-styler-inline">const</code>s in Constant Expressions</h3></div><div class="el-blockquote"><blockquote dir="auto">
<p>The main idea is that <code class="code-styler-inline">const</code>  is not an <code class="code-styler-inline">constexpr</code> necessarily</p>
</blockquote></div><div class="el-h3"><h3 data-heading="Literal Types" dir="auto" class="heading" id="Literal_Types_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Literal Types</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>literal type</em></mark> is a class with <code class="code-styler-inline">constexpr</code> constructor</p>
</div></div></div><div class="el-p"><p dir="auto">Note: empty constructor can be considered as <code class="code-styler-inline">constexpr</code><br>
For example, we can:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">Point</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">int</span> x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token comment">// const here can be omitted â†“ but my compiler says no</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">constexpr</span> Point <span class="token function">up</span><span class="token punctuation">(</span><span class="token keyword">int</span> h<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token operator">+</span>h<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">constexpr</span> Point <span class="token function">move</span><span class="token punctuation">(</span><span class="token keyword">int</span> dx<span class="token punctuation">,</span> <span class="token keyword">int</span> dy<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span>x<span class="token operator">+</span>dx<span class="token punctuation">,</span> y<span class="token operator">+</span>dy<span class="token punctuation">,</span> z<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> Point orig<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// -&gt; Point{0,0,0}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">int</span> z <span class="token operator">=</span> orig<span class="token punctuation">.</span>x<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> Point a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	orig<span class="token punctuation">,</span> Point<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Point<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> orig<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">int</span> x <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Reference Arguments" dir="auto" class="heading" id="Reference_Arguments_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Reference Arguments</h3></div><div class="el-p"><p dir="auto">In old time compile-time programming in C++ was impoverished (no functions, only ints).<br>
In C++11 we already can more, and even:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">complex</span><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">explicit</span> <span class="token keyword">constexpr</span> <span class="token function">complex</span><span class="token punctuation">(</span><span class="token keyword">const</span> complex<span class="token operator">&lt;</span><span class="token keyword">long</span> <span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">There is cast-constructor that takes a reference argument!</p></div><div class="el-p"><p dir="auto">Even more, with modern C++ we can use full-fledged reference operations! For example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&amp;</span> a<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span> a<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">int</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// will be modified in compile-time</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">return</span> x<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// initialized with 6</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Complicated moment</div></div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> p   <span class="token operator">=</span> str<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// Stroustrup says it's impossible</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">char</span> c          <span class="token operator">=</span> str<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">In fact, char <code class="code-styler-inline">c</code> can be evaluated at compile-time from literal, but address <code class="code-styler-inline">p</code> is unknown. Modern standard is able to understand shifted address as <code class="code-styler-inline">const&lt;str+2&gt;</code></p></div><div class="el-h3"><h3 data-heading="Promotions" dir="auto" class="heading" id="Promotions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Promotions</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span>If you can convert value and then convert the result back to its original type and get the original value, this conversion is called <mark><em>promotion</em></mark>, that is value-preserving conversion.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>If not, it is <mark><em>narrowing conversion</em></mark>.</li>
</ul>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">WOW. You must memorize it forever!</div></div><div class="callout-content">
<p dir="auto">C++ have implicit promotion for all arithmetic. There are:</p>
<ul class="has-list-bullet">
<li data-line="2" dir="auto"><span class="list-bullet"></span>all types shorter than <code class="code-styler-inline">int</code> are promoted to <code class="code-styler-inline">int</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>for floating-point computations in older versions they were promoted to <code class="code-styler-inline">double</code></li>
</ul>
</div></div></div><div class="el-p"><p dir="auto">Promotions are performed to bring operands to the "natural" size for arithmetic operations.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Integral promotions. Comprehensive list.</div></div><div class="callout-content">
<p dir="auto">They are promoted in order (until first enough space):</p>
</div></div></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">char</code>, <code class="code-styler-inline">signed char</code>, <code class="code-styler-inline">unsigned char</code>, <code class="code-styler-inline">short</code>, <code class="code-styler-inline">unsigned short</code> â€”&gt; <code class="code-styler-inline">I</code> â€”&gt; <code class="code-styler-inline">UI</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">char16_t</code>, <code class="code-styler-inline">char32_t</code>, <code class="code-styler-inline">wchar_t</code>, <code class="code-styler-inline">enum</code> â€”&gt; <code class="code-styler-inline">I</code> â€”&gt; <code class="code-styler-inline">UI</code> â€”&gt; <code class="code-styler-inline">L</code> â€”&gt; <code class="code-styler-inline">UL</code> â€”&gt; <code class="code-styler-inline">LL</code> â€”&gt; <code class="code-styler-inline">ULL</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>bit-field â€”&gt; <code class="code-styler-inline">I</code> â€”&gt; <code class="code-styler-inline">UI</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">bool</code> â€”&gt; <code class="code-styler-inline">I</code></li>
</ul></div><div class="el-h3"><h3 data-heading="Conversions" dir="auto" class="heading" id="Conversions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Conversions</h3></div><div class="el-p"><p dir="auto">Fundamental types can be implicitly converted into each other in a bewildering number os ways.</p></div><div class="el-p"><p dir="auto">For integral types:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token operator">-&gt;</span> <span class="token keyword">unsigned</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token comment">// just take last bits</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token operator">-&gt;</span> <span class="token keyword">signed</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>   <span class="token comment">// implementation-defined</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">For floating types:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">src <span class="token operator">-&gt;</span> dst</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">// if src can be represented in dst (maybe in adjacent values) â€” OK</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token comment">// otherwise â€” UB</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">For pointers:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token comment">// except func* or &amp;A::member</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">T<span class="token operator">*</span> <span class="token operator">-&gt;</span> <span class="token keyword">void</span><span class="token operator">*</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token comment">// for class B: A</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">(</span>B<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span>A<span class="token operator">*</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">(</span>B<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span>A<span class="token operator">&amp;</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token number">0</span> <span class="token operator">-&gt;</span> <span class="token keyword">void</span><span class="token operator">*</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">T<span class="token operator">*</span> <span class="token operator">-&gt;</span> <span class="token keyword">const</span> T<span class="token operator">*</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">T<span class="token operator">&amp;</span> <span class="token operator">-&gt;</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">For boolean:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ints<span class="token punctuation">,</span> floats <span class="token operator">-&gt;</span> <span class="token keyword">bool</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Floating-Integral Conversions" dir="auto" class="heading" id="Floating-Integral_Conversions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Floating-Integral Conversions</h3></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">float</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span>trunc<span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token keyword">int</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">// if truncated value doesn't fit â€” UB</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token operator">-&gt;</span> <span class="token keyword">float</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token comment">// with some loss of precision if an integral value cannot be</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token comment">// represented exactly as a value of the floating type</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">You can manually check to avoid data loss:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">char</span> <span class="token function">checked_cast</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">char</span> c <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment">// warn: non portable</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> c<span class="token punctuation">)</span> <span class="token keyword">throw</span> std<span class="token double-colon punctuation">::</span>runtime_error<span class="token punctuation">{</span><span class="token string">"int-to-char check failed"</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">return</span> c<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Usual Arithmetic Conversions" dir="auto" class="heading" id="Usual_Arithmetic_Conversions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Usual Arithmetic Conversions</h3></div><div class="el-p"><p dir="auto">Let <code class="code-styler-inline">up(T)</code> mean: if either operand is of type <code class="code-styler-inline">T</code>, the other is converted to <code class="code-styler-inline">T</code><br>
Let <code class="code-styler-inline">adj(A-&gt;B)</code> mean: if one operand is <code class="code-styler-inline">B</code> and other is <code class="code-styler-inline">A</code>, then if <code class="code-styler-inline">B</code> can represent all the values of <code class="code-styler-inline">A</code>, the <code class="code-styler-inline">A</code> is converted to <code class="code-styler-inline">B</code>.<br>
Rules:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><code class="code-styler-inline">up(long double)</code>
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span>otherwise, <code class="code-styler-inline">up(double)</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>otherwise, <code class="code-styler-inline">up(float)</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>otherwise, integral promotion are performed on both operands</li>
</ul>
</li>
<li data-line="4" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><code class="code-styler-inline">up(ULL)</code>
<ul class="has-list-bullet">
<li data-line="5" dir="auto"><span class="list-bullet"></span>otherwise, <code class="code-styler-inline">adj(UL-&gt;LL)</code> otherwise both <code class="code-styler-inline">-&gt; ULL</code></li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>otherwise, <code class="code-styler-inline">adj(U-&gt;L)</code> otherwise both <code class="code-styler-inline">-&gt;UL</code></li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>otherwise, <code class="code-styler-inline">up(L)</code></li>
<li data-line="8" dir="auto"><span class="list-bullet"></span>otherwise, <code class="code-styler-inline">up(U)</code></li>
<li data-line="9" dir="auto"><span class="list-bullet"></span>otherwise both are <code class="code-styler-inline">I</code><br>
Note <code class="code-styler-inline">adj</code> is implementation-defined. So, avoid mixing unsigned and signed integers.</li>
</ul>
</li>
</ol></div><div class="el-h3"><h3 data-heading="Advice" dir="auto" class="heading" id="Advice_4"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advice</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>use raw input only when you have to</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>always verify input</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>avoid complicated expressions, use <code class="code-styler-inline">()</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>avoid order-undefined expressions</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>avoid narrowing</li>
</ul></div><div class="el-h1"><h1 data-heading="11. Selected Operations" dir="auto" class="heading" id="11._Selected_Operations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>11. Selected Operations</h1></div><div class="el-p"><p dir="auto">Remember, for <code class="code-styler-inline">?:</code> must be common type to which both operands can be implicitly converted.</p></div><div class="el-p"><p dir="auto">One interesting use:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token operator">*</span>p <span class="token operator">:</span> <span class="token keyword">throw</span> std<span class="token double-colon punctuation">::</span>runtime_error<span class="token punctuation">{</span><span class="token string">"unexpected nullptr"</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Reminder</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">expr</code> in <code class="code-styler-inline">expr++</code> / <code class="code-styler-inline">--expr</code> and others is evaluated once only!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">x++</code> and <code class="code-styler-inline">x--</code> return temporary value, but <code class="code-styler-inline">++x</code> and <code class="code-styler-inline">--x</code> return lvalue, <code class="code-styler-inline">&amp;x</code></p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Note: prefer std <code class="code-styler-inline">copy</code> over handmaden <code class="code-styler-inline">*p++=*q++</code></div></div><div class="callout-content">
<p dir="auto">I've measured real difference. Wow! Timings:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token comment">// manual_copy (index): 6.87 ms per copy, 138722.29 MB/s</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">// manual_copy (pointer): 7.07 ms per copy, 134829.35 MB/s</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token comment">// std::memcpy: 0.15 ms per copy, 6574476.63 MB/s</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token comment">// std::copy: 0.13 ms per copy, 7333085.66 MB/s</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Memory Management" dir="auto" class="heading" id="Memory_Management_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Memory Management</h3></div><div class="el-p"><p dir="auto">The main problems with manually controlled free store:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><em>Leaked objects</em></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><em>Premature deletion</em></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><em>Double deletion</em></li>
</ul></div><div class="el-blockquote"><blockquote dir="auto">
<p>Deletion of a pointer doesn't assign its value to <code class="code-styler-inline">nullptr</code></p>
</blockquote></div><div class="el-p"><p dir="auto">Two approaches to avoid free-store problems:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">Prefer scoped variables over using free store</li>
<li data-line="1" dir="auto">Save pointers from heap in <em>manager object</em> (like <code class="code-styler-inline">vector</code>, <code class="code-styler-inline">string</code>, etc.) â€” <strong>RAII</strong></li>
</ol></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">From AI again (incomplete array type, <code class="code-styler-inline">delete[]</code>)</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">T[]</code> and <code class="code-styler-inline">T[10]</code> are different types. First is deduced to <code class="code-styler-inline">T*</code> in many contexts, but <code class="code-styler-inline">T[10]</code> is known-size whole type.<br>
To invoke <code class="code-styler-inline">delete[] p</code> you don't need to know size of array. That size is stored by allocator. But you need to know the type.</p>
</div></div></div><div class="el-p"><p dir="auto">Example of safety array allocation:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	unique_ptr<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> p <span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// calls delete[], not delete</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token comment">// automatically destruct p underlying allocated memory</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Useful rule of thumb</div></div><div class="callout-content">
<p dir="auto">Naked <code class="code-styler-inline">new</code> and <code class="code-styler-inline">delete</code> can appear in constructors/destructors only.<br>
Often external user use <code class="code-styler-inline">new</code> on init of resource handler.</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>For old code with many bad-used <code class="code-styler-inline">new</code> C++ provides std interface to garbage collector</p>
</blockquote></div><div class="el-p"><p dir="auto">Note: free storage managers usually use a few additional memory (a couple of words) to store metadata for deallocation</p></div><div class="el-h3"><h3 data-heading="Getting memory space" dir="auto" class="heading" id="Getting_memory_space_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Getting memory space</h3></div><div class="el-p"><p dir="auto">Note (Argument Dependent Lookup ADL):</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> MyLib <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">    <span class="token keyword">struct</span> <span class="token class-name">Data</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// declared here</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">    MyLib<span class="token double-colon punctuation">::</span>Data d<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">    <span class="token function">process</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// found MyLib::process through ADL</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">The std implementations of <code class="code-styler-inline">operator new()</code> and <code class="code-styler-inline">operator new[]()</code> don't initialize the memory returned.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">New information</div></div><div class="callout-content">
<p dir="auto">In fact, <code class="code-styler-inline">new</code> may not throw exception when real RAM is exhausted, because there is often virtual memory with swap tables (which gives memory on access, not on allocation).</p>
</div></div></div><div class="el-h3"><h3 data-heading="Overloading `new`" dir="auto" class="heading" id="Overloading_`new`_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Overloading <code class="code-styler-inline">new</code></h3></div><div class="el-p"><p dir="auto">You can define your own <code class="code-styler-inline">new</code> with considering that:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span><span class="token operator">*</span> <span class="token keyword">operator</span> <span class="token keyword">new</span><span class="token punctuation">(</span>size_t<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">//                 ^^^^^^ necessary arg</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">T<span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">new</span> T<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token comment">//         ^ implicitly inferred size by sizeof(T)</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">And then, for example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span><span class="token operator">*</span> <span class="token keyword">operator</span> <span class="token keyword">new</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> p<span class="token punctuation">)</span> <span class="token keyword">noexcept</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"custom \"placement\" allocation"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token comment">// ... allocate</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">return</span> p<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token comment">// usage:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">void</span><span class="token operator">*</span> buf <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reinterpret_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">0xF00F</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">T<span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span> T<span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">This code is educational example, in real code it conflict with std global operator new</p>
</div></div></div><div class="el-p"><p dir="auto">There are <em>placement deletions</em>:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token keyword">operator</span> <span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> p<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token keyword">operator</span> <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> p<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span>by default do nothing, except possibly inform a garbage collector about deleted pointer</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>are possibly called when <em>placement new</em> fails</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>do not call the destructors</li>
</ul>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Advice</div></div><div class="callout-content">
<p dir="auto">Avoid explicit destructor calls</p>
</div></div></div><div class="el-h3"><h3 data-heading="No throw new â€” `nothrow new`" dir="auto" class="heading" id="No_throw_new_â€”_`nothrow_new`_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>No throw new â€” <code class="code-styler-inline">nothrow new</code></h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner"><code class="code-styler-inline">new</code> policy:</div></div><div class="callout-content">
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span>Both forms <em>new</em> and <em>noexcept new</em> can fail on allocation, the former with <code class="code-styler-inline">throw bad_alloc</code> and the latter with <code class="code-styler-inline">nullptr</code> returned.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Both forms can successfully return, but later you can get crash on systems with virtual memory system (with lazy allocation)</li>
</ul>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">noexcept</code> - keyword, <code class="code-styler-inline">nothrow</code> - predefined const from <code class="code-styler-inline">&lt;new&gt;</code></p>
</div></div></div><div class="el-p"><p dir="auto">Example of <em>noexcept new</em>:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">(</span>nothrow<span class="token punctuation">)</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token operator">==</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		<span class="token comment">// handle allocation error</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">operator</span> <span class="token keyword">delete</span><span class="token punctuation">(</span>nothrow<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// deallocate</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Lists" dir="auto" class="heading" id="Lists_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Lists</h3></div><div class="el-p"><p dir="auto">Example of unqualified list, which type must be determined from the context:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">S</span><span class="token punctuation">{</span><span class="token keyword">int</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">{</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// OK: f(S)</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">For ambiguous situation you need to provide concrete type:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">S</span><span class="token punctuation">{</span><span class="token keyword">int</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">V</span><span class="token punctuation">{</span><span class="token keyword">double</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">g</span><span class="token punctuation">(</span>V<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// overloaded</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error: ambiguous</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token function">g</span><span class="token punctuation">(</span>S<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok: g(S)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token function">g</span><span class="token punctuation">(</span>V<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok: g(V)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Three parts of <code class="code-styler-inline">{}</code> implementation model:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">If used as constructor arguments, it just passes args to constructor. No copy</li>
<li data-line="1" dir="auto">If used as aggregate initialization, each arg is used to initialize element. No copy</li>
<li data-line="2" dir="auto">If used as <code class="code-styler-inline">initializer_list</code> constructor, args are used to init <em>underlying array</em>.</li>
</ol></div><div class="el-p"><p dir="auto"> Example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> v <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3.14</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token comment">// is interpreted as:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">const</span> <span class="token keyword">double</span> storage<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword">double</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3.14</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">const</span> initializer_list<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> <span class="token function">tmp</span><span class="token punctuation">(</span>storage<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>storage<span class="token punctuation">)</span><span class="token operator">/</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token comment">//                                ^ private constructor ðŸ˜ž</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> <span class="token function">v</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">initializer_list</code> is small object (pointer-like)<br>
<code class="code-styler-inline">initializer_list</code> is immutable</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">You can see on <code class="code-styler-inline">double{3}</code> as on modern way to set type for primitive</p>
</div></div></div><div class="el-p"><p dir="auto">Unqualified list can be used as an expression only as:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>func arg</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>return value</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>right-hand operand for <code class="code-styler-inline">=</code>, <code class="code-styler-inline">+=</code>, etc.</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>subscript<br>
i.e. when type is inferable.</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">To know</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">T obj{...};</code> â€” direct initialization<br>
<code class="code-styler-inline">T obj = {...};</code> â€” copy/move initialization</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Type <code class="code-styler-inline">initializer_list</code> cannot be deduced for templates! It is language restriction. Example:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Reason: It must be type <mark>for</mark> initializer-list, but not <mark>from</mark>.</p></div><div class="el-h3"><h3 data-heading="Lambda Expressions" dir="auto" class="heading" id="Lambda_Expressions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Lambda Expressions</h3></div><div class="el-p"><p dir="auto">Also know as <em>lambda functions</em>, but strictly speaking incorrectly. Result of lambda expression is called <em>closure object</em> or simply a <em>closure</em>.</p></div><div class="el-p"><p dir="auto">Form:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">auto</span> f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">mutable</span> <span class="token keyword">noexcept</span> <span class="token operator">-&gt;</span> type <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">//         ^^ ^^^^^^^ ^^^^^^^^ ^^^^^^^ â€” all are optional</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token comment">//         1      2       3        4</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Notes:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">by default lambda is const</li>
<li data-line="1" dir="auto">returns <code class="code-styler-inline">auto</code> by default (inferred from return expression). If impossible, must be provided</li>
<li data-line="2" dir="auto">if you specify 2, 3, or 4; 1 must be specified too.</li>
</ol></div><div class="el-p"><p dir="auto">An example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">print_modulo</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> v<span class="token punctuation">,</span> ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token function">for_each</span><span class="token punctuation">(</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		<span class="token function">begin</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		<span class="token function">end</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">		<span class="token punctuation">[</span><span class="token operator">&amp;</span>os<span class="token punctuation">,</span> m<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token operator">%</span>m<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> os <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Using <code class="code-styler-inline">[&amp;]</code> (all by reference) may be optimized!</p>
</div></div></div><div class="el-p"><p dir="auto">For capture <code class="code-styler-inline">this</code> state this explicitly:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">//  ^^^^ then in ^ you can use just `field` or `this-&gt;field`</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Interesting feature</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">auto f = +[]{cout &lt;&lt; "hello\n";};</code> will produce function pointer rather than function</p>
</div></div></div><div class="el-h3"><h3 data-heading="Alternatives to Lambdas" dir="auto" class="heading" id="Alternatives_to_Lambdas_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Alternatives to Lambdas</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">You can provide non a functor for <code class="code-styler-inline">for_each</code>, but it fails on compile with long error message, because it sequentially finds for a <code class="code-styler-inline">operator()()</code></p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p><code class="code-styler-inline">[=] and [&amp;]</code> in fact capture only those variable which you use</p>
</blockquote></div><div class="el-p"><p dir="auto">Special forms:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">[&amp;, a, b]</code> - <code class="code-styler-inline">a</code> and <code class="code-styler-inline">b</code> by value, others by reference</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">[=, &amp;a, &amp;b]</code> - <code class="code-styler-inline">a</code> and <code class="code-styler-inline">b</code> by reference, others by value</li>
</ul></div><div class="el-p"><p dir="auto">Lambda with variadics:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Var<span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">algo</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> Var<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> v<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">auto</span> helper <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token operator">&amp;</span>v<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> s<span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">g</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token comment">//                  ^^^^ valid</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Lambda and Lifetime" dir="auto" class="heading" id="Lambda_and_Lifetime_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Lambda and Lifetime</h3></div><div class="el-p"><p dir="auto">Remember: lambda might outlive its caller. So, using <code class="code-styler-inline">[=]</code> is typically best for passing to another thread.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Think of the capture list <code class="code-styler-inline">[...]</code> as the initializer list for the closure object</p>
</blockquote></div><div class="el-h3"><h3 data-heading="Namespace Names" dir="auto" class="heading" id="Namespace_Names_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Namespace Names</h3></div><div class="el-p"><p dir="auto">For body of lambda you don't need to capture global or namespace variables. They will be bound on lambda body definition time.</p></div><div class="el-h3"><h3 data-heading="The Type of a Lambda" dir="auto" class="heading" id="The_Type_of_a_Lambda_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The Type of a Lambda</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Type is closure, function-like object. It is local class type.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Type is unique for each lambda (else template instantiation mechanism might be confused)</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">You can create lambda variable with</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">auto</code> or <code class="code-styler-inline">std::function&lt;R(AL)&gt;</code>, where R â€” return type, AL â€” lambda's arguments list</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Wow!</div></div><div class="callout-content">
<p dir="auto">You can't use <code class="code-styler-inline">auto</code> variable until its type has been deduced!</p>
</div></div></div><div class="el-p"><p dir="auto">So, option with <code class="code-styler-inline">function</code> allows recursion!</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Wow!</div></div><div class="callout-content">
<p dir="auto">The lambda that captures nothing can be assigned to a pointer to function of an appropriate type!<br>
<code class="code-styler-inline">double (*fp)(double) = [](double a){ return sqrt(a); }</code></p>
</div></div></div><div class="el-h3"><h3 data-heading="Explicit Type Conversions" dir="auto" class="heading" id="Explicit_Type_Conversions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Explicit Type Conversions</h3></div><div class="el-p"><p dir="auto">Kinds of explicit conversion:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>type-safe with <code class="code-styler-inline">{}</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>named convertions:
<ul class="has-list-bullet">
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">const_cast</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">static_cast</code></li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">reinterpret_cast</code></li>
<li data-line="5" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">dynamic_cast</code></li>
</ul>
</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>C-style casts</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>Functional notation</li>
</ul></div><div class="el-p"><p dir="auto">Stroustrup tend to use homemade conversions with explicit exceptions!</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">S</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">T <span class="token function">narrow_cast</span><span class="token punctuation">(</span>S v<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">auto</span> res <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>S<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token operator">!=</span>v<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">		<span class="token keyword">throw</span> <span class="token function">runtime_error</span><span class="token punctuation">(</span><span class="token string">"narrow_cast&lt;&gt;() failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">return</span> res<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Construction" dir="auto" class="heading" id="Construction_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Construction</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Warn!</div></div><div class="callout-content">
<p dir="auto">You cannot initialize float from non-constexpr int by <code class="code-styler-inline">{}</code>! But it's possible with constexpr (e.g. with literal) that is fit into float: <code class="code-styler-inline">float f{1234}; // OK</code></p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">In functional style cast you can't use full type without parentheses, use aliases:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span><span class="token operator">*</span> ip<span class="token punctuation">;</span> <span class="token keyword">char</span><span class="token operator">*</span> cp<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">using</span> iptr <span class="token operator">=</span> <span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">ip <span class="token operator">=</span> <span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">(</span>cp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">ip <span class="token operator">=</span> <span class="token function">iptr</span><span class="token punctuation">(</span>cp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="Named Casts" dir="auto" class="heading" id="Named_Casts_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Named Casts</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>cast</em></mark> is explicit type conversion</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>Just <strong>few</strong> <code class="code-styler-inline">reinterpret_cast</code> are portable!</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warn</div></div><div class="callout-content">
<p dir="auto">The result of <code class="code-styler-inline">reinterpret_cast</code> is guaranteed to be usable only if its result is converted back to the exact original type.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">To know</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">reinterpret_cast</code> is the kind of conversion that must be used for pointers to functions.</p>
</div></div></div><div class="el-h3"><h3 data-heading="C-Style Cast" dir="auto" class="heading" id="C-Style_Cast_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>C-Style Cast</h3></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">(T)expr</code> can cast pointer to obj to pointer to its private base. Never do that!</p></div><div class="el-h3"><h3 data-heading="Function Style Cast" dir="auto" class="heading" id="Function_Style_Cast_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Function Style Cast</h3></div><div class="el-p"><p dir="auto">For a built-in types <code class="code-styler-inline">T(expr)</code> is equivalent to <code class="code-styler-inline">(T)expr</code> so it may do cast <code class="code-styler-inline">char* -&gt; int</code>, that is dangerous!<br>
Any other cases can be non portable!<br>
Prefer <code class="code-styler-inline">T{v}</code> conversions and named casts!</p></div><div class="el-h3"><h3 data-heading="Advice" dir="auto" class="heading" id="Advice_5"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advice</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>prefer <code class="code-styler-inline">++lv</code> over <code class="code-styler-inline">lv++</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>use resource handles (to avoid leaks, premature or double deletion)</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>prefer scoped variables over one has been put on free store</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>avoid naked <code class="code-styler-inline">new</code> / <code class="code-styler-inline">delete</code></li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>Use RAII</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>keep lambdas short and avoid their overuse</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>be careful about reference-capture</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>let the compiler deduce the return type of lambdas</li>
<li data-line="8" dir="auto"><span class="list-bullet"></span>use <code class="code-styler-inline">T{v}</code> notation for construction</li>
<li data-line="9" dir="auto"><span class="list-bullet"></span>avoid explicit casts</li>
<li data-line="10" dir="auto"><span class="list-bullet"></span>prefer named casts</li>
<li data-line="11" dir="auto"><span class="list-bullet"></span>consider homemade <code class="code-styler-inline">narrow_cast</code> for safe run-time casts</li>
</ul></div><div class="el-h1"><h1 data-heading="12. Functions" dir="auto" class="heading" id="12._Functions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>12. Functions</h1></div><div class="el-h3"><h3 data-heading="12.1 Function Declarations" dir="auto" class="heading" id="12.1_Function_Declarations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>12.1 Function Declarations</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Strict rule</div></div><div class="callout-content">
<p dir="auto">Any name <strong>must be declared</strong> before its mentioning. No exceptions</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warn</div></div><div class="callout-content">
<p dir="auto">The semantic of argument passing are identical to the semantic of copy initialization! (there can be type checks and implicit types conversions)</p>
</div></div></div><div class="el-h4"><h4 data-heading="Parts of a Function Declaration" dir="auto" class="heading" id="Parts_of_a_Function_Declaration_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Parts of a Function Declaration</h4></div><div class="el-p"><p dir="auto">Parts:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>name</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>params <code class="code-styler-inline">()</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>return type (maybe suffix <code class="code-styler-inline">-&gt; ...</code>)</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">inline</code></li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">constexpr</code></li>
<li data-line="5" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">noexcept</code></li>
<li data-line="6" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">static</code> and others</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">[[noreturn]]</code> to indicate that func will not return using normal mechanism</li>
<li data-line="8" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>and for member-functions:
<ul class="has-list-bullet">
<li data-line="9" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">virtual</code></li>
<li data-line="10" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">override</code></li>
<li data-line="11" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">final</code></li>
<li data-line="12" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">static</code></li>
<li data-line="13" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">const</code></li>
</ul>
</li>
</ul></div><div class="el-h4"><h4 data-heading="Function Definitions" dir="auto" class="heading" id="Function_Definitions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Function Definitions</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Must know</div></div><div class="callout-content">
<p dir="auto">Due to C compatibility a <code class="code-styler-inline">const</code> ignored at the highest level of an argument type:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// interpreted the same</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token comment">// These two DO NOT overload each other</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>Unnamed and unused arguments ensure that callers are not affected by the change</p>
</blockquote></div><div class="el-p"><p dir="auto">Special things that follow most rules defined for functions but technically are not functions:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>constructors
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span>don't return value</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>can initialize bases and members</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>can't have their address taken</li>
</ul>
</li>
<li data-line="4" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>destructors
<ul class="has-list-bullet">
<li data-line="5" dir="auto"><span class="list-bullet"></span>can't be overloaded</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>can't have their address taken</li>
</ul>
</li>
<li data-line="7" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>functors (function objects)
<ul class="has-list-bullet">
<li data-line="8" dir="auto"><span class="list-bullet"></span>are objects</li>
<li data-line="9" dir="auto"><span class="list-bullet"></span>can't be overloaded</li>
</ul>
</li>
<li data-line="10" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>lambda expressions
<ul class="has-list-bullet">
<li data-line="11" dir="auto"><span class="list-bullet"></span>are shorthand for defining functors</li>
</ul>
</li>
</ol></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Useful! (From AI)</div></div><div class="callout-content">
<p dir="auto">You can mark class as final at all: <code class="code-styler-inline">class SomeName final: Base {...};</code></p>
</div></div></div><div class="el-h4"><h4 data-heading="Returning Values" dir="auto" class="heading" id="Returning_Values_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Returning Values</h4></div><div class="el-blockquote"><blockquote dir="auto">
<p>Conversion functions do not contain return value</p>
</blockquote></div><div class="el-blockquote"><blockquote dir="auto">
<p>For <code class="code-styler-inline">void</code> function it is legal: <code class="code-styler-inline">return;</code></p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Semantic of return (as of args passing) is identical to semantic of copy-init.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Finally!</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">return</code> statement <strong>initialize</strong> a variable of the returned type!</p>
</div></div></div><div class="el-p"><p dir="auto">Useful form for templates:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token function">g</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -&gt;void but we can use f()</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Exit function:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">return</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>falling off the end</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">throw</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>uncaught exception in <code class="code-styler-inline">noexcept</code> func calls <code class="code-styler-inline">std::terminate()</code></li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>call to <code class="code-styler-inline">exit()</code></li>
</ul></div><div class="el-blockquote"><blockquote dir="auto">
<p>Function that does not return normally can be marked <code class="code-styler-inline">[[noreturn]]</code></p>
</blockquote></div><div class="el-h4"><h4 data-heading="Inline Functions" dir="auto" class="heading" id="Inline_Functions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Inline Functions</h4></div><div class="el-p"><p dir="auto">Good explanation why <code class="code-styler-inline">inline</code> in not strict command, but compiler's hint:</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>If <code class="code-styler-inline">inline</code> func is recursive it may not terminate at all.</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">To make sure function body has been inlined use <code class="code-styler-inline">constexpr</code></p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Interesting and important!</div></div><div class="callout-content">
<p dir="auto">To inline compiler <strong>must see</strong> definition of inline function (not just have <code class="code-styler-inline">.o</code> file)!<br>
<code class="code-styler-inline">inline</code> functions have address and their <code class="code-styler-inline">static</code> variables!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Warn</div></div><div class="callout-content">
<p dir="auto">If an <code class="code-styler-inline">inline</code> function is defined in more than one translation unit, its definition in the different translation units must be identical!<br>
Have the definitions differed across translation units, the compiler would choose one arbitrarily (UB)!</p>
</div></div></div><div class="el-h4"><h4 data-heading="Constexpr Functions" dir="auto" class="heading" id="Constexpr_Functions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Constexpr Functions</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">constexpr</code> means Â«should be usable in a constant expression when <strong>given constant expressions as arguments</strong>Â»</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warn</div></div><div class="callout-content">
<p dir="auto">Rules for <code class="code-styler-inline">constexpr</code> constructors differ over common. There, only simple initialization of members is allowed.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Reminder</div></div><div class="callout-content">
<p dir="auto">Literal type is a type with <code class="code-styler-inline">constexpr</code> constructor</p>
</div></div></div><div class="el-h4"><h4 data-heading="Constexpr and References" dir="auto" class="heading" id="Constexpr_and_References_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Constexpr and References</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Important!</div></div><div class="callout-content">
<p dir="auto">If some variable is not declared with <code class="code-styler-inline">constexpr</code> but initialized with such one, compiler may interpret its as <code class="code-styler-inline">constexpr</code> for compile-time computations.</p>
</div></div></div><div class="el-h4"><h4 data-heading="Conditional Evaluation" dir="auto" class="heading" id="Conditional_Evaluation_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Conditional Evaluation</h4></div><div class="el-p"><p dir="auto">Reminder: we can have run-time branches, which are not evaluated at compile time:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">int</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">return</span> <span class="token punctuation">(</span>low <span class="token operator">&lt;=</span> a <span class="token operator">&amp;&amp;</span> a <span class="token operator">&lt;</span> high<span class="token punctuation">)</span> <span class="token operator">?</span> a <span class="token operator">:</span> <span class="token function">runtime</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="Noreturn Functions" dir="auto" class="heading" id="Noreturn_Functions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Noreturn Functions</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto">A construct <code class="code-styler-inline">[[...]]</code> is called an <mark><em>attribute</em></mark>. It specifies some implementation-dependent property about the syntactic entity that follows it.</p>
</div></div></div><div class="el-p"><p dir="auto">Std <code class="code-styler-inline">[[noreturn]]</code> indicate that function never returns. <mark>If not â€” UB</mark>!</p></div><div class="el-h4"><h4 data-heading="Local Variables" dir="auto" class="heading" id="Local_Variables_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Local Variables</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Reminder</div></div><div class="callout-content">
<p dir="auto">To initialize local static only once use <code class="code-styler-inline">constinit</code></p>
</div></div></div><div class="el-p"><p dir="auto">Local variables are initialized when execution reaches its definition.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Standard protects local static initialization! It will be initialized only once. But further use-access from many threads is not protected!</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>Avoid recursively defined local static!</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Local static variables are useful for avoiding order dependencies among nonlocal variables (the problem is it's unknown which global static is initialized first)</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>Reminder: the scope of a label (<code class="code-styler-inline">out:</code>) is the complete function</p>
</blockquote></div><div class="el-h3"><h3 data-heading="12.2 Argument Passing" dir="auto" class="heading" id="12.2_Argument_Passing_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>12.2 Argument Passing</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Bible:</div></div><div class="callout-content">
<p dir="auto">The semantic of argument passing are <em>copy-init</em>! see: <a data-href="âš¡ï¸ Initialization" href="engineering/c++-essentials/âš¡ï¸-initialization.html" class="internal-link" target="_self" rel="noopener nofollow">âš¡ï¸ Initialization</a></p>
</div></div></div><div class="el-p"><p dir="auto">Note, there are:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>special rules for passing arrays</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>facility for passing unchecked arguments (c-style variadics)</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>facility for specifying default arguments</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>facility for using <code class="code-styler-inline">{}</code></li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>several ways of passing to template functions</li>
</ul></div><div class="el-h4"><h4 data-heading="Reference Arguments" dir="auto" class="heading" id="Reference_Arguments_1"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Reference Arguments</h4></div><div class="el-p"><p dir="auto">In most cases you should avoid reference-passing arguments, expect for large object for efficiency (then use <code class="code-styler-inline">const T&amp;</code>)</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Note: the arguments passing is <strong>not</strong> an <em>assignment</em> (in contrast of <em>initialization</em>). It's important for <code class="code-styler-inline">const</code> args, <code class="code-styler-inline">&amp;/&amp;&amp;</code> args, and user-defined types.</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">You need to remember</div></div><div class="callout-content">
<p dir="auto">Literal, constant and conversion-requiring arguments can be passed through <code class="code-styler-inline">const T&amp;</code> but not through <code class="code-styler-inline">T&amp;</code>!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">ðŸ‘†ðŸ¼ explanation to study!</div></div><div class="callout-content">
<p dir="auto">When implicit conversion is needed, the compiler may create tmp object! That is why we need <code class="code-styler-inline">const</code> â€” to prevent modification of tmp object!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">So, you must understand</div></div><div class="callout-content">
<p dir="auto">Casts do result into tmp! It does not affect the origin</p>
</div></div></div><div class="el-p"><p dir="auto">So, conversions for non-<code class="code-styler-inline">const</code> reference arguments are disallowed. It helps to avoid the possibility of silly mistakes with temporaries.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Reminder: passing via reference is passing by lvalue-reference!</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Rvalue references are used (in normal way) for changing, so it's extremely rare case of use it with <code class="code-styler-inline">const</code></p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">For template type <code class="code-styler-inline">T</code> param type <code class="code-styler-inline">T&amp;&amp;</code> is not the same as <code class="code-styler-inline">X&amp;&amp;</code> (with certain X)!</p>
</div></div></div><div class="el-p"><p dir="auto">General Â«rules of thumbÂ» for arguments passing:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">use pass-by-value for small objects</li>
<li data-line="1" dir="auto">use pass-by-const-reference to pass large objects for reading only</li>
<li data-line="2" dir="auto">return rather than modify "<code class="code-styler-inline">res</code>-param"</li>
<li data-line="3" dir="auto">use rvalue references to implement move or forwarding</li>
<li data-line="4" dir="auto">use pass-by-pointer if there is "nothing" possible (via <code class="code-styler-inline">nullptr</code>)</li>
<li data-line="5" dir="auto">use pass-by-reference only if you have to (pass by pointer is often less obscure and error-prone when you need modifications)</li>
</ol></div><div class="el-h4"><h4 data-heading="Array Arguments" dir="auto" class="heading" id="Array_Arguments_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Array Arguments</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Reminder</div></div><div class="callout-content">
<p dir="auto">Arrays are passed by pointer! In fact, pointer is passed by value</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Something <strong>incredible</strong> new!</div></div><div class="callout-content">
<p dir="auto">You can pass arrays by reference! It saves the size of an array completely!</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">int</span> N<span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">printarr</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token function">T</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size: "</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token operator">/</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// or just N</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> el <span class="token operator">:</span> arr<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">        cout <span class="token operator">&lt;&lt;</span> el <span class="token operator">&lt;&lt;</span> <span class="token string">", "</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    cout <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Warn: there are as many functions generated by compiler as there are calls to <code class="code-styler-inline">printarr</code> with distinct array types.</p></div><div class="el-h4"><h4 data-heading="List Arguments" dir="auto" class="heading" id="List_Arguments_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>List Arguments</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">initializer_list&lt;T&gt;</code> argument takes priority if there is a possible ambiguity:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>initializer_list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> l<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*...*/</span> <span class="token punctuation">}</span>  <span class="token comment">// (1)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">S</span> <span class="token punctuation">{</span><span class="token keyword">int</span> a<span class="token punctuation">;</span> string s<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>S s<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*...*/</span> <span class="token punctuation">}</span>                    <span class="token comment">// (2)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">int</span> N<span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token function">T</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*...*/</span> <span class="token punctuation">}</span>      <span class="token comment">// (3)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*...*/</span> <span class="token punctuation">}</span>                  <span class="token comment">// (4)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// calls (1)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">	<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// calls (1)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">	<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// calls (1)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"hi"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// calls (2)!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="Unspecified Number of Arguments" dir="auto" class="heading" id="Unspecified_Number_of_Arguments_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Unspecified Number of Arguments</h4></div><div class="el-p"><p dir="auto">There are 3 ways for variadics:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">use variadic template</li>
<li data-line="1" dir="auto">use <code class="code-styler-inline">initializer_list</code> as argument type</li>
<li data-line="2" dir="auto">use <code class="code-styler-inline">&lt;cstdarg&gt;</code> and <code class="code-styler-inline">...</code> param</li>
</ol></div><div class="el-blockquote"><blockquote dir="auto">
<p>Use <code class="code-styler-inline">...</code> only if you have to. There are many alternatives: overloads, default args, <code class="code-styler-inline">initializer_list</code>, variadic template.</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Possible form</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">void f (int a ...); // with no ,</code></p>
</div></div></div><div class="el-p"><p dir="auto">Remind the basic macros for C-style variadics:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">va_list</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">va_start</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">va_arg</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">va_end</code><br>
In-code example:</li>
</ul></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	va_list ap<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token function">va_start</span><span class="token punctuation">(</span>ap<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token function">va_arg</span><span class="token punctuation">(</span>ap<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// repeatedly...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token function">va_end</span><span class="token punctuation">(</span>ap<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// necessary!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="Default Arguments" dir="auto" class="heading" id="Default_Arguments_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Default Arguments</h4></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">complex<span class="token double-colon punctuation">::</span><span class="token function">complex</span><span class="token punctuation">(</span><span class="token keyword">double</span> r<span class="token punctuation">,</span> <span class="token keyword">double</span> i<span class="token punctuation">)</span><span class="token operator">:</span> re<span class="token punctuation">{</span>r<span class="token punctuation">}</span><span class="token punctuation">,</span> im<span class="token punctuation">{</span>i<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">complex<span class="token double-colon punctuation">::</span><span class="token function">complex</span><span class="token punctuation">(</span><span class="token keyword">double</span> r<span class="token punctuation">)</span><span class="token operator">:</span> complex<span class="token punctuation">{</span>r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// interesing!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">complex<span class="token double-colon punctuation">::</span><span class="token function">complex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> complex<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// interesting!</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">And we can even more:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">complex<span class="token double-colon punctuation">::</span><span class="token function">complex</span><span class="token punctuation">(</span><span class="token keyword">double</span> r<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">double</span> i<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> re<span class="token punctuation">{</span>r<span class="token punctuation">}</span><span class="token punctuation">,</span> im<span class="token punctuation">{</span>i<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Only <code class="code-styler-inline">=</code> syntax for defaults!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">From AI</div></div><div class="callout-content">
<p dir="auto">Defaults are substituted in place of calling!</p>
</div></div></div><div class="el-p"><p dir="auto">Example with static default:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">X</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">static</span> <span class="token keyword">int</span> def_arg<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">=</span>def_arg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// possible without name (!)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token comment">// In fact, ^^^^^^^ is &amp;X::def_arg</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token comment">//...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">int</span> X<span class="token double-colon punctuation">::</span>def_arg <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span>X<span class="token operator">&amp;</span> a<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	a<span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// f(7) or f(0) (!)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	a<span class="token punctuation">.</span>def_arg <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">	a<span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// f(9)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">So, advice</div></div><div class="callout-content">
<p dir="auto">Avoid <em>default arguments</em> that can change value!</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>Default arguments may be provided for <strong>trailing arguments only</strong></p>
</blockquote></div><div class="el-p"><p dir="auto">Default argument cannot be repeated or change in the same scope:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// or = 9 ERROR: redefinition of the default argument</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// valid! Hides global scope declarations </span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Note: it's error-prone technique.</p></div><div class="el-h3"><h3 data-heading="12.3 Overloaded Functions" dir="auto" class="heading" id="12.3_Overloaded_Functions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>12.3 Overloaded Functions</h3></div><div class="el-h4"><h4 data-heading="Automatic Overload Resolution (AOR)" dir="auto" class="heading" id="Automatic_Overload_Resolution_(AOR)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Automatic Overload Resolution (AOR)</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content">
<p dir="auto">When the compiler cannot to determine the best match, compile-time error occurs:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token function">print</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// print(long)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token function">print</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// print(double)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token function">print</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Approximated rules of AOR (in order):</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">Exact match (with a few possible trivial conversions: array-&gt;pointer, func-&gt;func*, T-&gt;constT)</li>
<li data-line="1" dir="auto">Match with promotions (bool/char/short -&gt; int, unsigned promotions, float -&gt; double)</li>
<li data-line="2" dir="auto">Math with std conversions (e.g., int-&gt;double, double-&gt;int, double-&gt;long double, Derived<em>     -&gt; Base</em>, T<em> -&gt; void</em>, int -&gt; unsigned int)</li>
<li data-line="3" dir="auto">Match with user-defined conversions (e.g., double -&gt; <code class="code-styler-inline">complex&lt;double&gt;</code>)</li>
<li data-line="4" dir="auto">Match using the ellipsis <code class="code-styler-inline">...</code> (c-style) in a function declaration</li>
</ol></div><div class="el-h4"><h4 data-heading="Overloading and Return Type" dir="auto" class="heading" id="Overloading_and_Return_Type_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Overloading and Return Type</h4></div><div class="el-blockquote"><blockquote dir="auto">
<p>Overloading does not work with return type.</p>
</blockquote></div><div class="el-h4"><h4 data-heading="Overloading and Scope" dir="auto" class="heading" id="Overloading_and_Scope_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Overloading and Scope</h4></div><div class="el-p"><p dir="auto">Overloading works only with an <em>overload set</em>. By default, that means the functions of a single scope.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Any name is searched in sequential order until first match:<br>
<code class="code-styler-inline">is in local? -[no]-&gt; is in enclosing? -[no]-&gt; is in global?</code></p>
</div></div></div><div class="el-p"><p dir="auto">If name is defined, it "is here", and then AOR is occurring "here", not much more.<br>
And even more info from AI:</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">From standard</div></div><div class="callout-content">
<p dir="auto">When a name is declared in a local scope, it hides any declaration of that name in outer scopes. Hidden declarations are not considered during overload resolution. Example:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// call f(double)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token keyword">using</span> <span class="token double-colon punctuation">::</span>f<span class="token punctuation">;</span> <span class="token comment">// pay the attention! it forces to grabs global declarations</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">    <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// call f(int)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Between classes in hierarchy (and namespaces) there is no overloading! If you want to, you need use <code class="code-styler-inline">using</code> declarations, directives or Argument-dependent lookup (ADL). For example (provided by AI):</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> A <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">    <span class="token keyword">struct</span> <span class="token class-name">X</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span> <span class="token punctuation">{</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A::f(X)\n"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A::g(int)\n"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> B <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">    <span class="token keyword">struct</span> <span class="token class-name">Y</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>Y<span class="token punctuation">)</span> <span class="token punctuation">{</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"B::f(Y)\n"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"B::g(double)\n"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token keyword">using</span> A<span class="token double-colon punctuation">::</span>g<span class="token punctuation">;</span>       <span class="token comment">// using-declaration</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token keyword">using</span> <span class="token keyword">namespace</span> B<span class="token punctuation">;</span> <span class="token comment">// using-directive</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base::h(int)\n"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">Derived</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token class-name">Base</span></span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">    <span class="token keyword">using</span> Base<span class="token double-colon punctuation">::</span>h<span class="token punctuation">;</span> </div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Derived::h(double)\n"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text">    A<span class="token double-colon punctuation">::</span>X x<span class="token punctuation">;</span> B<span class="token double-colon punctuation">::</span>Y y<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">28</div><div class="code-styler-line-text">    <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// ADL â†’ A::f(X)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">29</div><div class="code-styler-line-text">    <span class="token function">f</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// ADL â†’ B::f(Y)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">30</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">31</div><div class="code-styler-line-text">    <span class="token function">g</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// using-declaration â†’ A::g(int)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">32</div><div class="code-styler-line-text">    <span class="token function">g</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// using-directive â†’ B::g(double)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">33</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">34</div><div class="code-styler-line-text">    Derived d<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">35</div><div class="code-styler-line-text">    d<span class="token punctuation">.</span><span class="token function">h</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// using Base::h â†’ Base::h(int)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">36</div><div class="code-styler-line-text">    d<span class="token punctuation">.</span><span class="token function">h</span><span class="token punctuation">(</span><span class="token number">2.71</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Derived::h(double)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">37</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="Resolution for Multiple Arguments" dir="auto" class="heading" id="Resolution_for_Multiple_Arguments_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Resolution for Multiple Arguments</h4></div><div class="el-p"><p dir="auto">Rule is:</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>A function that is the best match for one arg and not worse for all others is called.</p>
</blockquote></div><div class="el-h4"><h4 data-heading="Manual Overload Resolution" dir="auto" class="heading" id="Manual_Overload_Resolution_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Manual Overload Resolution</h4></div><div class="el-p"><p dir="auto">Consider ambiguity:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token function">f</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ?! Ambiguity</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">You can solve this with:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">// or</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token function">f</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">long</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">You can appreciate frequently ambiguity error reports as useful indicator of design error</p>
</div></div></div><div class="el-h3"><h3 data-heading="12.4 Pre- and Postconditions" dir="auto" class="heading" id="12.4_Pre-_and_Postconditions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>12.4 Pre- and Postconditions</h3></div><div class="el-p"><p dir="auto">Documenting preconditions and postconditions is important! In fact, it is usually hard to check correctness.</p></div><div class="el-h3"><h3 data-heading="12.5 Pointer to Function" dir="auto" class="heading" id="12.5_Pointer_to_Function_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>12.5 Pointer to Function</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Hint</div></div><div class="callout-content">
<p dir="auto">You can call function by its address. So, dereferencing is optional. Similarly, using <code class="code-styler-inline">&amp;</code> to get address of a function is optional.</p>
</div></div></div><div class="el-p"><p dir="auto">You can use the nastiest cast <code class="code-styler-inline">reinterpret_cast</code> to change type of a function pointed to:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>g<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reinterpret_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Caution: unpredictable, system-dependent!</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warn</div></div><div class="callout-content">
<p dir="auto">If function is overloaded, <code class="code-styler-inline">auto</code> can fail on type deducing!</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">auto</span> funcpointer <span class="token operator">=</span> f<span class="token punctuation">;</span> <span class="token comment">// may fail if f is overloaded</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Remember: pointer to member-function has a quite different semantic.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Danger!</div></div><div class="callout-content">
<p dir="auto">A pointer to a <code class="code-styler-inline">noexcept</code> function should be declared <code class="code-styler-inline">noexcept</code> if you want to preserve useful information:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>fp<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">=</span> f<span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">You must</div></div><div class="callout-content">
<p dir="auto">You must reflect the linkage of a function in a pointer to it. And it's impossible in alias:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">using</span> cfp <span class="token operator">=</span> <span class="token keyword">extern</span> <span class="token string">"C"</span> <span class="token keyword">void</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">//          ^^^^^^^^^^ must be specified</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="12.6 Macros" dir="auto" class="heading" id="12.6_Macros_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>12.6 Macros</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Interesting</div></div><div class="callout-content">
<p dir="auto">Because macros rearrange text of the program before the compiler sees it, they are a major problem for support tools.<br>
If you use macros, you can expect inferior service from:</p>
<ul class="has-list-bullet">
<li data-line="3" dir="auto"><span class="list-bullet"></span>debuggers</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>cross-reference tools</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>profilers</li>
</ul>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Macros cannot have:</p>
<ul class="has-list-bullet">
<li data-line="2" dir="auto"><span class="list-bullet"></span>overloads</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>recursion</li>
</ul>
</div></div></div><div class="el-p"><p dir="auto">Useful techniques:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">#define CASE break;case</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">#define FOREVER for(;;)</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>`#define INCR_xx (::xx)++</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">You should use <code class="code-styler-inline">/* */</code> comments rather than <code class="code-styler-inline">//</code> in macros for backward compatibility.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Reminder</div></div><div class="callout-content">
<p dir="auto">Tokenizer does its work <strong>before</strong> preprocessor. Thus, macros work with tokens (not symbols). And the same takes place inside the macro body!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Macro can be variadic:</div></div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">err_print</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> </span><span class="token string">"error: %s %d\n"</span><span class="token expression"><span class="token punctuation">,</span> __VA_ARGS__<span class="token punctuation">)</span></span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">// __VA_ARGS__ extends to arguments that were actually passed, as a string</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">The ellipsis <code class="code-styler-inline">...</code> means that <code class="code-styler-inline">__VA_ARGS__</code> represents the arguments</p></div><div class="el-h4"><h4 data-heading="Predefined Macros" dir="auto" class="heading" id="Predefined_Macros_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Predefined Macros</h4></div><div class="el-p"><p dir="auto">Predefined by compiler:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">__cplusplus</code> standard version (and undefined if in C)</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">__DATE__</code> in format: <code class="code-styler-inline">MM dd yyyy</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">__TIME__</code> in format: <code class="code-styler-inline">hh:mm:ss</code></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">__FILE__</code> path of current source file</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">__LINE__</code> source line number</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">__func__</code> C-style string name of current function</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">__STDC_HOSTED__</code> is 1 if implementation is hosted, and 0 otherwise</li>
</ul></div><div class="el-p"><p dir="auto">Conditionally predefined by implementation:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">__STDC__</code> is defined in C, is not in C++</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">__STDC_MB_MIGHT_NEQ_WC__</code> is 1 if possibly <code class="code-styler-inline">'a' != L'a'</code> (for all in basic character set)</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">__STDCPP_STRICT_POINTER_SAFETY__</code> is 1 if the implementation has strict pointer safety</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">__STDCPP_THREADS__</code> is 1 if a program can have more than one thread of execution, is undefined otherwise</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Most implementations allow a user to define arbitrary macros on the command line or in some other form of compile-time environment. For example define <code class="code-styler-inline">NDEBUG</code> to turn on macro <code class="code-styler-inline">assert(...)</code></p>
</div></div></div><div class="el-h4"><h4 data-heading="Pragma" dir="auto" class="heading" id="Pragma_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Pragma</h4></div><div class="el-p"><p dir="auto">Implementations often provide additional facilities. Standardized syntax for enabling is:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span></span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="12.7 Advice" dir="auto" class="heading" id="12.7_Advice_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>12.7 Advice</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>keep functions short</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>don't reference or point to locals</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>use <code class="code-styler-inline">constexpr</code> if func is compile-time computable</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>use attributes (e.g., <code class="code-styler-inline">[[noreturn]]</code>)</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>use <code class="code-styler-inline">const</code>!</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>use <code class="code-styler-inline">initializer_list</code> for similar-typed variable length lists</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>when overload over integers, provide functions to eliminate ambiguities</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>prefer functors and lambdas over function pointers</li>
<li data-line="8" dir="auto"><span class="list-bullet"></span>use <code class="code-styler-inline">CAPITALIZED_NAMES</code> for macros</li>
</ul></div><div class="el-h1"><h1 data-heading="13. Exception Handling" dir="auto" class="heading" id="13._Exception_Handling_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>13. Exception Handling</h1></div><div class="el-h3"><h3 data-heading="13.1 Error Handling" dir="auto" class="heading" id="13.1_Error_Handling_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>13.1 Error Handling</h3></div><div class="el-h4"><h4 data-heading="Exceptions" dir="auto" class="heading" id="Exceptions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Exceptions</h4></div><div class="el-blockquote"><blockquote dir="auto">
<p>Any copyable/movable type is valid to be thrown as exception, but you should use user-defined types!</p>
</blockquote></div><div class="el-p"><p dir="auto">The exception-handling mechanism:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Is an alternative to traditional techniques (which are insufficient, inelegant, error-prone)</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Is complete; it can be used to handle all errors</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Allows to explicitly separate error-handling code from ordinary code</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Supports a more regular style of error handling</li>
</ul></div><div class="el-p"><p dir="auto">User-defined type of exception, example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">Range_error</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>n<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span> n<span class="token operator">&gt;</span>max<span class="token punctuation">)</span> <span class="token keyword">throw</span> Range_error<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="Traditional Error Handling" dir="auto" class="heading" id="Traditional_Error_Handling_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Traditional Error Handling</h4></div><div class="el-p"><p dir="auto">There are some ways:</p></div><div class="el-table" dir="ltr" style="overflow-x: auto;"><table>
<thead>
<tr>
<th dir="ltr">The way</th>
<th dir="ltr">Disadvantages</th>
</tr>
</thead>
<tbody>
<tr>
<td dir="ltr"><em>terminate the program</em></td>
<td dir="ltr">A library that doesn't know about environment cannot just <code class="code-styler-inline">exit()</code> or <code class="code-styler-inline">abort()</code></td>
</tr>
<tr>
<td dir="ltr"><em>return an error value</em></td>
<td dir="ltr">Some time there is no acceptable error value at all, or no return. Checking every return blows the size of program. Return is often ignored (e.g., <code class="code-styler-inline">printf</code>)</td>
</tr>
<tr>
<td dir="ltr"><em>return a legal value and leave the program in an "error state"</em></td>
<td dir="ltr">Many <code class="code-styler-inline">errno</code> are ignored by programmers to indicate. While unseen program can do terrible. Furthermore, it's bad approach with concurrency</td>
</tr>
<tr>
<td dir="ltr"><em>call an error-handler function</em></td>
<td dir="ltr">What this function must to do? The same as others? Also, it still isn't able to repair program without external caller...</td>
</tr>
</tbody>
</table></div><div class="el-p"><p dir="auto">Note: these ways are not general ;(</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Note: in some programs you will find an unsystematic combination of these approaches(</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">noexcept</code> explicitly make the desire of <code class="code-styler-inline">terminate</code> on exception</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Interesting</div></div><div class="callout-content">
<p dir="auto">"Exceptional" doesn't mean "almost never happens" or "disastrous"</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Exceptions are not about asynchronous event. For these events there are defined mechanisms such as signals to deal with asynchrony. They are system-dependent.</p>
</div></div></div><div class="el-h4"><h4 data-heading="When You Can't Use Exceptions" dir="auto" class="heading" id="When_You_Can't_Use_Exceptions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>When You Can't Use Exceptions</h4></div><div class="el-p"><p dir="auto">There are programs that for practical and historical reasons cannot use exceptions. For example:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>In a time-critical component of an embedded system we must use alternative error-handling methods</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>In a large old programs with naked new/delete you often find no <code class="code-styler-inline">throw</code>/<code class="code-styler-inline">catch</code></li>
</ul></div><div class="el-p"><p dir="auto">Two useful techniques for old programs:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Mimic RAII (with <code class="code-styler-inline">.invalid()</code> that returns error code)</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Use <code class="code-styler-inline">pair&lt;Value, Error_code&gt;</code> on return</li>
</ul></div><div class="el-h4"><h4 data-heading="Hierarchical Error Handling" dir="auto" class="heading" id="Hierarchical_Error_Handling_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Hierarchical Error Handling</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">To know</div></div><div class="callout-content">
<p dir="auto">The exception-handling mechanism is inherently nonlocal, so you should:</p>
<ul class="has-list-bullet">
<li data-line="2" dir="auto"><span class="list-bullet"></span>adherence to an overall strategy</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>take simple strategy (otherwise it won't be adhered)</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>agree on strategy when development starts</li>
</ul>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">Not every function should be a firewall</p>
</div></div></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">Too great work to do</li>
<li data-line="1" dir="auto">Too great overhead and tendency to overcheck the same errors</li>
<li data-line="2" dir="auto">Functions from other languages won't obey the rules</li>
<li data-line="3" dir="auto">Pure local reliability leads to huge complexities</li>
</ol></div><div class="el-blockquote"><blockquote dir="auto">
<p>Different parts should appear to follow general error-handling strategy even if it internally follows a different strategy. So, sometimes you should convert <code class="code-styler-inline">errno</code> to <code class="code-styler-inline">throw ...</code> and vice versa.</p>
</blockquote></div><div class="el-h4"><h4 data-heading="Exceptions and Efficiency" dir="auto" class="heading" id="Exceptions_and_Efficiency_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Exceptions and Efficiency</h4></div><div class="el-p"><p dir="auto">In principle (but hard doing so):</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Exception handling can be implemented <mark>without overhead</mark> when no exceptions are thrown</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>If exception is thrown, it costs <mark>not much more</mark> than usual function call</li>
</ul></div><div class="el-p"><p dir="auto">Remember: traditional methods take not less overhead!</p></div><div class="el-p"><p dir="auto">With C-functions be careful considering they throw or not any exceptions.</p></div><div class="el-h3"><h3 data-heading="13.2 Exception Guarantees" dir="auto" class="heading" id="13.2_Exception_Guarantees_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>13.2 Exception Guarantees</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>exception-safe</em></mark> operation is that which leaves the program in a valid state when throws. Often we think: what is a <em>valid state</em>?</p>
</div></div></div><div class="el-p"><p dir="auto">Avoid implicit invariants! The compiler cannot to discover and maintain then.</p></div><div class="el-p"><p dir="auto">Std library guarantees (one of the following):</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><em>Basic guarantee</em> for all operations: no leaks.<br>
The basic invariant of every built-in and std-lib type guarantee that you can destroy and object or assign to it after every std-lib operation</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><em>Strong guarantee</em> for key operations: operation succeeds or has no effect.<br>
Provided for key operations, such as <code class="code-styler-inline">push_back()</code>, <code class="code-styler-inline">insert()</code>, or <code class="code-styler-inline">uninitialized_copy()</code></li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><em>Nothrow guarantee</em> for some operations: them are guaranteed not to throw an exception.<br>
Provided for a few simple operations, such as <code class="code-styler-inline">swap()</code> or <code class="code-styler-inline">pop_back()</code></li>
</ul></div><div class="el-p"><p dir="auto">In return, these guarantees are presented on the condition that (all of):</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>user-supplied operations do not leave container elements in invalid states</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>user-supplied operations do not leak resources</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><mark>destructors do not throw exceptions</mark>
<blockquote dir="auto">
<p>Moreover, an operation that throws an exception must not only leave its operands well-defined states but also ensure that every resource that it acquired is (eventually) released.<br>
(Often guarded by language facility of destructors on throw)</p>
</blockquote>
</li>
</ul></div><div class="el-blockquote"><blockquote dir="auto">
<p>Example of system resources: files, locks, network connections, threads.</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip (from AI)</div></div><div class="callout-content">
<p dir="auto">Main idea: don't do releasing manually. Let the compiler do work for you.</p>
</div></div></div><div class="el-h3"><h3 data-heading="13.3 Resource Management" dir="auto" class="heading" id="13.3_Resource_Management_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>13.3 Resource Management</h3></div><div class="el-p"><p dir="auto">Exception handling mechanisms is friendly to <em>RAII</em>.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Must to know</div></div><div class="callout-content">
<p dir="auto">Destructors are implicitly called <strong>only</strong> for objects that were correctly constructed!</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>If your constructor fails, it should restore state of program to primal state as far as possible. It can be achieved by RAII members automatically.</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">If you need dynamically construct an object, use <code class="code-styler-inline">unique_ptr</code> and <code class="code-styler-inline">shared_ptr</code> for RAII.</p>
</div></div></div><div class="el-h4"><h4 data-heading="Finally" dir="auto" class="heading" id="Finally_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Finally</h4></div><div class="el-p"><p dir="auto">RAII can help to realize <code class="code-styler-inline">finally</code> action:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">F</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">Final_action</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token function">Final_action</span><span class="token punctuation">(</span>F f<span class="token punctuation">)</span><span class="token operator">:</span> clean<span class="token punctuation">{</span>f<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token operator">~</span><span class="token function">Final_action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">clean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	F clean<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">F</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">Final_action<span class="token operator">&lt;</span>F<span class="token operator">&gt;</span> <span class="token function">finally</span><span class="token punctuation">(</span>F f<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">{</span> <span class="token keyword">return</span> Final_action<span class="token operator">&lt;</span>F<span class="token operator">&gt;</span><span class="token punctuation">{</span>f<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token comment">// usage:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token keyword">auto</span> fact <span class="token operator">=</span> <span class="token function">finally</span><span class="token punctuation">(</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">		<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> cout<span class="token operator">&lt;&lt;</span><span class="token string">"finally"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// you can capture here ;)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">	<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"do work..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>Note: it is like an <code class="code-styler-inline">defer</code> in golang</p>
</blockquote></div><div class="el-h3"><h3 data-heading="13.4 Enforcing Invariants" dir="auto" class="heading" id="13.4_Enforcing_Invariants_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>13.4 Enforcing Invariants</h3></div><div class="el-p"><p dir="auto">What if precondition fails? There are 2 points of view:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><em>Just don't do that</em>. Assume that caller ever meet preconditions</li>
<li data-line="1" dir="auto"><em>Terminate the program</em>. Just terminate routine<br>
Errors may be later eliminated by improved design, debugging and testing.
<blockquote dir="auto">
<p>First approach improves performance (eliminate millions of tests) but require to deal with many testing errors. Second approach tends to be used in systems where you can just restart (part of a bigger system).</p>
</blockquote>
</li>
</ol></div><div class="el-p"><p dir="auto">In real programs you can find all three ways (exceptions, ingnoring, terminating). You can <code class="code-styler-inline">throw</code> without real expectation of exceptions.</p></div><div class="el-p"><p dir="auto">Real solution â€” <code class="code-styler-inline">assert</code>!</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>chose between compile-time and run-time</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>chose action for run-time: <code class="code-styler-inline">throw</code>, ignore, <code class="code-styler-inline">terminate()</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>no generate code for assert until there is debug flag, level of checking or mask.</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>avoid verbose or complicated asserts</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">The standard offers two simple mechanisms:</p>
</div></div></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">&lt;cassert&gt;</code> with <code class="code-styler-inline">assert(A)</code> macro working when <code class="code-styler-inline">NDEBUG</code> is undefined. If assertion fails, compiler writes out: <code class="code-styler-inline">cond, func name, file name, line no.</code> and terminates program</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">static_assert(A, message)</code> provided by language for compile-time</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">Avoid "ordinary checking code" like <code class="code-styler-inline">if (debug_level&gt;2 &amp;&amp; ...</code></p>
</div></div></div><div class="el-p"><p dir="auto">Furthermore, Stroustrup suggest specialized user-defined approach for compile-time omitting high-level assertion. See <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/massert.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/massert.cpp" target="_self">code</a>.<br>
In C++20 I can suggest more elegant variant:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">int</span> level <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">constexpr</span> <span class="token keyword">void</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">bool</span> cond<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>message <span class="token operator">=</span> <span class="token string">"Assertion failed"</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">    <span class="token keyword">if</span> <span class="token keyword">constexpr</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>level <span class="token operator">&lt;</span> assertion_level<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// this may truncate func</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">        <span class="token keyword">return</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token keyword">else</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">    <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">        <span class="token keyword">if</span> <span class="token punctuation">(</span>cond<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">            <span class="token keyword">return</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">        <span class="token keyword">if</span> <span class="token punctuation">(</span>assertion_mode <span class="token operator">==</span> Mode<span class="token double-colon punctuation">::</span>throw_<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">            <span class="token keyword">throw</span> <span class="token function">runtime_error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">        <span class="token keyword">if</span> <span class="token punctuation">(</span>assertion_mode <span class="token operator">==</span> Mode<span class="token double-colon punctuation">::</span>terminate_<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">            <span class="token function">terminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">    <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">It is wise to have some tests in the final version of a program with the most-important assertion level.</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>For library general code you should prefer reporting errors over terminating.</p>
</blockquote></div><div class="el-h3"><h3 data-heading="13.5 Throwing and Catching Exceptions" dir="auto" class="heading" id="13.5_Throwing_and_Catching_Exceptions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>13.5 Throwing and Catching Exceptions</h3></div><div class="el-h4"><h4 data-heading="Throwing Exceptions" dir="auto" class="heading" id="Throwing_Exceptions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Throwing Exceptions</h4></div><div class="el-p"><p dir="auto">You can throw an exception of any type that can be copied or moved.<br>
You cannot throw typename:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">throw</span> MyErrorClass<span class="token punctuation">;</span> <span class="token comment">// invalid!</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">You need to know</div></div><div class="callout-content">
<p dir="auto">On throw temporary object is created. In process of <em>stack unwinding</em> this object may be copied, moved, or even be untouched (due to the compiler optimizations)</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Stroustrup says:</div></div><div class="callout-content">
<p dir="auto">The semantics of exception propagation are those of initialization, so objects of types with move semantics are not expensive to throw.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">From AI</div></div><div class="callout-content">
<p dir="auto">RTTI is active only for: exceptions, virtual classes, and maybe for <code class="code-styler-inline">typeid</code>.</p>
</div></div></div><div class="el-p"><p dir="auto">You can use std-lib exceptions hierarchy (<code class="code-styler-inline">exception</code>, <code class="code-styler-inline">runtime_error</code>, <code class="code-styler-inline">out_of_range</code>, etc.) with inheritance and <code class="code-styler-inline">.what()</code> or just for instantiating.</p></div><div class="el-h4"><h4 data-heading="Noexcept Functions" dir="auto" class="heading" id="Noexcept_Functions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Noexcept Functions</h4></div><div class="el-p"><p dir="auto">Used for:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>clarity for programmers</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>optimization ability for compiler</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content">
<p dir="auto">On throw from <code class="code-styler-inline">noexcept</code> destructors of calling function are not invoked. Invocation of local (to <code class="code-styler-inline">throw</code>) destructors is implementation-defined.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="cite" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-quote"><path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path><path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path></svg></div><div class="callout-title-inner">From AI</div></div><div class="callout-content">
<p dir="auto">Ways to terminate program: <code class="code-styler-inline">exit</code>, <code class="code-styler-inline">quick_exit</code>, <code class="code-styler-inline">terminate</code>, <code class="code-styler-inline">abort</code>.</p>
</div></div></div><div class="el-h4"><h4 data-heading="The `noexcept` Operator" dir="auto" class="heading" id="The_`noexcept`_Operator_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The <code class="code-styler-inline">noexcept</code> Operator</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Reminder!</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">noexcept</code> can be supplied with additional bool: <code class="code-styler-inline">noexcept(true)</code>. You can conditionally define it with any <code class="code-styler-inline">constexpr</code>:<br>
<code class="code-styler-inline">template&lt;typename T&gt;</code><br>
<code class="code-styler-inline">void action(T&amp; x) noexcept(Is_pod&lt;T&gt;());</code></p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Wow again!</div></div><div class="callout-content">
<p dir="auto">Also you can use <code class="code-styler-inline">noexcept</code> as operator with <code class="code-styler-inline">expr</code>: <code class="code-styler-inline">noexcept(expr)</code>. It looks at all operations in <code class="code-styler-inline">expr</code> and if all are <code class="code-styler-inline">noexcept</code> returns <code class="code-styler-inline">true</code> (<code class="code-styler-inline">false</code> otherwise). It does <strong>not</strong> evaluate or look inside definitions of those operations.</p>
</div></div></div><div class="el-h4"><h4 data-heading="Exception Specification" dir="auto" class="heading" id="Exception_Specification_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Exception Specification</h4></div><div class="el-p"><p dir="auto">In older C++ code you may find <em>exception specifications</em>:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">throw</span><span class="token punctuation">(</span>Bad<span class="token punctuation">,</span> Worse<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">throw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// may not throw, noexcept equivalent</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="fail" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></div><div class="callout-title-inner">Deprecated, deleted. Don't use it</div></div></div></div><div class="el-h4"><h4 data-heading="Catching Exceptions" dir="auto" class="heading" id="Catching_Exceptions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Catching Exceptions</h4></div><div class="el-p"><p dir="auto">For:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">try</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> E<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">catch</span> <span class="token punctuation">(</span>H<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">The handler is invoked if:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D438 TEX-I"></mjx-c></mjx-mi></mjx-math></mjx-container></span></li>
<li data-line="1" dir="auto"><span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2287"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D438 TEX-I"></mjx-c></mjx-mi></mjx-math></mjx-container></span> (unambiguous <strong>public</strong> base)</li>
<li data-line="2" dir="auto"><span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2217"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2217"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D438 TEX-I"></mjx-c></mjx-mi></mjx-math></mjx-container></span> or <span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2217"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2287"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2217"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D438 TEX-I"></mjx-c></mjx-mi></mjx-math></mjx-container></span></li>
<li data-line="3" dir="auto">If H is a reference and (1) or (2) holds for the type to which H refers
<blockquote dir="auto">
<p>Also you can declare H as <code class="code-styler-inline">const</code></p>
</blockquote>
</li>
</ol></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Wow</div></div><div class="callout-content">
<p dir="auto">Exceptions require memory.<br>
It's guaranteed that there is enough memory to hold <code class="code-styler-inline">out_of_memory</code> exception (whatever strategy of exception placement implementation apply).</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Important (from AI)</div></div><div class="callout-content">
<p dir="auto">Use <code class="code-styler-inline">&amp;</code> in catch for using polymorphic types!</p>
</div></div></div><div class="el-h4"><h4 data-heading="Rethrow" dir="auto" class="heading" id="Rethrow_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Rethrow</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">From AI</div></div><div class="callout-content">
<p dir="auto">There is stack of "waiting exceptions" if during an exception handling another occurs.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Instrument</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">throw;</code> rethrows <code class="code-styler-inline">current_exception()</code> if any, <code class="code-styler-inline">terminate()</code> otherwise.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warn</div></div><div class="callout-content">
<p dir="auto">If you catch and rethrow Base exception, you have <em>sliced exception</em>. Then caller couldn't have caught Derived exception!</p>
</div></div></div><div class="el-h4"><h4 data-heading="Catch Every Exception" dir="auto" class="heading" id="Catch_Every_Exception_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Catch Every Exception</h4></div><div class="el-p"><p dir="auto">For <code class="code-styler-inline">std::exception</code> from <code class="code-styler-inline">&lt;stdexcept&gt;</code> you can <code class="code-styler-inline">catch (exception&amp; err)</code>. But for any:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="Multiple Handlers" dir="auto" class="heading" id="Multiple_Handlers_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Multiple Handlers</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content">
<p dir="auto">Use correct order of <code class="code-styler-inline">catch</code> clauses: from more specific to more general.</p>
</div></div></div><div class="el-h4"><h4 data-heading="Function `try`-Blocks" dir="auto" class="heading" id="Function_`try`-Blocks_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Function <code class="code-styler-inline">try</code>-Blocks</h4></div><div class="el-p"><p dir="auto">New construction:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">try</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Especially useful for constructors:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token class-name">A</span><span class="token double-colon punctuation">::</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">try</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token operator">:</span>member1<span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">,</span> member2<span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span> <span class="token comment">// (1)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token comment">// ... (2)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">In second case (<code class="code-styler-inline">try</code> before <em>member initializer list</em> <code class="code-styler-inline">:...</code>) if exception occurs in (1) or (2) it would be propagated to caller of constructor (despite we catch)! See <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/ctorcatch.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/ctorcatch.cpp" target="_self">more</a>.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Must to know</div></div><div class="callout-content">
<p dir="auto">Some already-initialized members will be destructed on exception thrown, others â€” won't be constructed at all.</p>
</div></div></div><div class="el-h4"><h4 data-heading="Termination" dir="auto" class="heading" id="Termination_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Termination</h4></div><div class="el-p"><p dir="auto">Useful techniques:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Don't throw while handling an exception</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Don't throw if that cannot be caught</li>
</ul></div><div class="el-p"><p dir="auto">Specific rules for calling <code class="code-styler-inline">terminate()</code> (take note: C++11):</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>no suitable <code class="code-styler-inline">catch</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">throw</code> in <code class="code-styler-inline">noexcept</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>when destructor throws on stack unwinding</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>when code on <code class="code-styler-inline">throw</code> propagation throws</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">throw;</code> when there is no <code class="code-styler-inline">current_exception()</code></li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>when destructor for a statically allocated or thread-local object throws</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>when init for a statically allocated or thread-local object throws</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>when a function from <code class="code-styler-inline">atexit()</code> throws</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Take a note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">terminate()</code> call <code class="code-styler-inline">abort()</code>. You can redefine it by <code class="code-styler-inline">set_terminate()</code> from <code class="code-styler-inline">&lt;exception&gt;</code>. For example:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">using</span> termfunc <span class="token operator">=</span> <span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">[</span><span class="token punctuation">[</span>noreturn<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">void</span> <span class="token function">my_handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">termfunc old <span class="token operator">=</span> <span class="token function">set_terminate</span><span class="token punctuation">(</span>my_handler<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Danger</div></div><div class="callout-content">
<p dir="auto">If <code class="code-styler-inline">terminate()</code> is entered, you should assume all program data structures to be corrupted (even <code class="code-styler-inline">cerr</code>).</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>If you try <code class="code-styler-inline">return</code> or <code class="code-styler-inline">throw</code> from terminate â€” <code class="code-styler-inline">abort</code> will be called immediately.</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">abort()</code> indicates abnormal exit. <code class="code-styler-inline">exit()</code> can indicate normal.</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>Don't consider anything about destructors on <code class="code-styler-inline">terminate()</code></p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">There is no way of catching exceptions thrown during init/del <em>namespace and thread-local</em> variables. (Another reason to avoid globals)</p>
</div></div></div><div class="el-h4"><h4 data-heading="Exceptions and Threads" dir="auto" class="heading" id="Exceptions_and_Threads_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Exceptions and Threads</h4></div><div class="el-p"><p dir="auto">If a thread doesn't catch any exception the whole program will be terminated! To avoid use <code class="code-styler-inline">catch(...)</code> or transfer exception to user-thread via <code class="code-styler-inline">current_exception()</code> as <code class="code-styler-inline">packaged_task</code> does:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">promise<span class="token punctuation">.</span><span class="token function">set_exception</span><span class="token punctuation">(</span><span class="token function">current_exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="13.6 A `vector` Implementation" dir="auto" class="heading" id="13.6_A_`vector`_Implementation_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>13.6 A <code class="code-styler-inline">vector</code> Implementation</h3></div><div class="el-p"><p dir="auto">See full example <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/vector.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch13/vector.cpp" target="_self">here</a>.</p></div><div class="el-p"><p dir="auto">Useful principles:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Never let go of a piece of information before its replacement is ready for use</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Always leave objects in valid states when (re)throwing an exception</li>
</ul></div><div class="el-blockquote"><blockquote dir="auto">
<p>Even innocent-looking operations might throw (<code class="code-styler-inline">&lt;</code>, <code class="code-styler-inline">=</code>, <code class="code-styler-inline">sort()</code>, etc.)</p>
</blockquote></div><div class="el-h4"><h4 data-heading="A Simple `vector`" dir="auto" class="heading" id="A_Simple_`vector`_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>A Simple <code class="code-styler-inline">vector</code></h4></div><div class="el-p"><p dir="auto">Problems you may not sight:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><code class="code-styler-inline">allocator::allocate</code> may <code class="code-styler-inline">throw</code> if there is no memory left</li>
<li data-line="1" dir="auto"><code class="code-styler-inline">T</code> copy-ctor may <code class="code-styler-inline">throw</code></li>
<li data-line="2" dir="auto">(copying of allocator rarely may throw too, if not std)</li>
</ol></div><div class="el-p"><p dir="auto">Important techniques from full example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">	<span class="token double-colon punctuation">::</span><span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">T</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">Pay attention to <code class="code-styler-inline">::new</code> to access global and <code class="code-styler-inline">&amp;*p</code> for iterator that is not a pointer.</p></div><div class="el-p"><p dir="auto">Use std-lib implementations:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token function">uninitialized_fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">uninitialized_fill_n</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">uninitialized_copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="cite" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-quote"><path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path><path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path></svg></div><div class="callout-title-inner">Stroustrup</div></div><div class="callout-content">
<p dir="auto">Exception transparency is often the best policy for templates and other "thin" layers of software.</p>
</div></div></div><div class="el-h4"><h4 data-heading="Representing Memory Explicitly" dir="auto" class="heading" id="Representing_Memory_Explicitly_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Representing Memory Explicitly</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">All std lib algorithms (e.g. <code class="code-styler-inline">uninitialized_fill</code>, <code class="code-styler-inline">uninitialized_copy</code>, ...) provide important guarantee: sub-objects (bases, members) that have already been completely constructed will be properly destroyed if any exception occurs.</p>
</div></div></div><div class="el-h4"><h4 data-heading="Assignment" dir="auto" class="heading" id="Assignment_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Assignment</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Pay attention</div></div><div class="callout-content">
<p dir="auto">There is self-assignment <code class="code-styler-inline">v=v</code>.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warn</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">std::copy</code> does <em>not</em> offer the strong exception-safety guarantee. Thus, after unsuccessful operation you might have some elements copied and some not. However, operands still stay in valid state.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">std lib <code class="code-styler-inline">vector</code> has more efficient <code class="code-styler-inline">operator=</code> but with weaker exception-safety guarantee (basic)</p>
</div></div></div><div class="el-h4"><h4 data-heading="Changing Size" dir="auto" class="heading" id="Changing_Size_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Changing Size</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">May be useful</div></div><div class="callout-content">
<p dir="auto">Std lib provide <code class="code-styler-inline">move_if_noexcept</code></p>
</div></div></div><div class="el-h4"><h4 data-heading="Final Thoughts" dir="auto" class="heading" id="Final_Thoughts_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Final Thoughts</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="cite" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-quote"><path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path><path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path></svg></div><div class="callout-title-inner">My thought</div></div><div class="callout-content">
<p dir="auto">If you don't know what to do about exception-safety, on throw try remain object unchanged or at least valid.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Helpful</div></div><div class="callout-content">
<p dir="auto">Use ordering and RAII rather than <code class="code-styler-inline">try</code>/<code class="code-styler-inline">except</code> blocks.</p>
</div></div></div><div class="el-h3"><h3 data-heading="13.7 Advice" dir="auto" class="heading" id="13.7_Advice_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>13.7 Advice</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>develop error-handling strategy early in design</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>throw an exception to indicate you can't perform an assigned task</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>use user-defined types for exceptions</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>if you cannot use exceptions, mimic them</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>always provide the <a data-tooltip-position="top" aria-label="TC++PL (III) > 13.2 Exception Guarantees" data-href="TC++PL (III)#13.2 Exception Guarantees" href="engineering/book-notes/tc++pl-(iii).html" class="internal-link" target="_self" rel="noopener nofollow">basic guarantee</a></li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>always try for strong guarantee</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>let the constructor establish invariant and throw if it cannot</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>release locally owned resources before <code class="code-styler-inline">throw</code></li>
<li data-line="8" dir="auto"><span class="list-bullet"></span>minimize usage of <code class="code-styler-inline">try</code>/<code class="code-styler-inline">except</code> blocks</li>
<li data-line="9" dir="auto"><span class="list-bullet"></span>always prefer compile-time checking</li>
<li data-line="10" dir="auto"><span class="list-bullet"></span>use <code class="code-styler-inline">noexcept</code></li>
<li data-line="11" dir="auto"><span class="list-bullet"></span>catch hierarchical exceptions by reference</li>
<li data-line="12" dir="auto"><span class="list-bullet"></span>don't assume that every exception is derived from <code class="code-styler-inline">std::exception</code></li>
<li data-line="13" dir="auto"><span class="list-bullet"></span>leave operands in valid states before throwing an exception from an assignment</li>
<li data-line="14" dir="auto"><span class="list-bullet"></span>never let an exception escape from a destructor</li>
<li data-line="15" dir="auto"><span class="list-bullet"></span>keep ordinary code and error-handling one separate</li>
<li data-line="16" dir="auto"><span class="list-bullet"></span>remember: on <code class="code-styler-inline">throw</code> naked-allocated (<code class="code-styler-inline">new</code>) objects won't be destroyed automatically</li>
<li data-line="17" dir="auto"><span class="list-bullet"></span>assume that every exception that can be thrown will be thrown</li>
<li data-line="18" dir="auto"><span class="list-bullet"></span>library should not <code class="code-styler-inline">terminate</code>, use <code class="code-styler-inline">throw</code> and let a caller decide</li>
<li data-line="19" dir="auto"><span class="list-bullet"></span>library should not <code class="code-styler-inline">log</code>, use <code class="code-styler-inline">throw</code> and let a caller decide</li>
</ul></div><div class="el-h1"><h1 data-heading="14. Namespaces" dir="auto" class="heading" id="14._Namespaces_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>14. Namespaces</h1></div><div class="el-h3"><h3 data-heading="14.1 Composition Problems" dir="auto" class="heading" id="14.1_Composition_Problems_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>14.1 Composition Problems</h3></div><div class="el-p"><p dir="auto">We need to cope with <em>name clashes</em> problem</p></div><div class="el-h3"><h3 data-heading="14.2 Namespaces" dir="auto" class="heading" id="14.2_Namespaces_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>14.2 Namespaces</h3></div><div class="el-p"><p dir="auto">Example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> Graphic_lib<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">class</span> <span class="token class-name">Line</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Shape</span></span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// not requires explicit Graphic_lib::</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> Text_lib<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">class</span> <span class="token class-name">Line</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Good practice</div></div><div class="callout-content">
<p dir="auto">Place names in common namespace when they bring similar facilities.</p>
</div></div></div><div class="el-h4"><h4 data-heading="Explicit Qualification" dir="auto" class="heading" id="Explicit_Qualification_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Explicit Qualification</h4></div><div class="el-blockquote"><blockquote dir="auto">
<p>Classes are (kinds of) namespaces, but not literally.</p>
</blockquote></div><div class="el-h4"><h4 data-heading="`using` Declarations" dir="auto" class="heading" id="`using`_Declarations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><code class="code-styler-inline">using</code> Declarations</h4></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>string<span class="token punctuation">;</span> <span class="token comment">// means 'string' is 'std::string'</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">It introduces synonym into a scope</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p><code class="code-styler-inline">using</code> can be used with class hierarchies</p>
</blockquote></div><div class="el-h4"><h4 data-heading="`using` Directives" dir="auto" class="heading" id="`using`_Directives_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><code class="code-styler-inline">using</code> Directives</h4></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Oops</div></div><div class="callout-content">
<p dir="auto">It works!</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> A<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">afunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> B<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">bfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token keyword">using</span> <span class="token keyword">namespace</span> A<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token keyword">using</span> <span class="token keyword">namespace</span> B<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token function">afunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token function">bfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="ADL (Argument-Dependent Lookup)" dir="auto" class="heading" id="ADL_(Argument-Dependent_Lookup)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>ADL (Argument-Dependent Lookup)</h4></div><div class="el-p"><p dir="auto">For this automatic kind of lookup, namespace and function must be in scope and declared before ADL.</p></div><div class="el-p"><p dir="auto">When we call function, we find consequently:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">in enclosing scope</li>
<li data-line="1" dir="auto">in namespaces of arguments (<strong>including classes and bases</strong>)</li>
</ol></div><div class="el-p"><p dir="auto">Example:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> Chrono<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">class</span> <span class="token class-name">Date</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>Chrono<span class="token double-colon punctuation">::</span>Date d<span class="token punctuation">,</span> string s<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token operator">==</span>s<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// find in f-scope, then in Chrono:: and std::</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">The best match is called</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">To know</div></div><div class="callout-content">
<p dir="auto">When member calls, other members of the same class and its bases are preferred over ADL.<br>
<u>warn</u>: operators follow a different rule!</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> N<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">struct</span> <span class="token class-name">S</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">Base</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>N<span class="token double-colon punctuation">::</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token keyword">struct</span> <span class="token class-name">Derived</span><span class="token operator">:</span> <span class="token base-clause"><span class="token class-name">Base</span></span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span>N<span class="token double-colon punctuation">::</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span>N<span class="token double-colon punctuation">::</span>S x<span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">		<span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Base::f</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">		<span class="token function">g</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Derived::g</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="cite" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-quote"><path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path><path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path></svg></div><div class="callout-title-inner">Standard says:</div></div></div></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>If arg is a class member, the <em>associated namespaces</em> are the class itself (and its bases) and the class's enclosing namespaces</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>If arg is a namespace member, the <em>associated namespaces</em> are the enclosing namespaces</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>If arg is a built-in type, there are no <em>associated namespaces</em></li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Be careful</div></div><div class="callout-content">
<p dir="auto">For members of namespace don't assume it behaves as for classes:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> N<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">class</span> <span class="token class-name">X</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> SomewhereAway<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	N<span class="token double-colon punctuation">::</span>X x<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>N<span class="token double-colon punctuation">::</span>X<span class="token punctuation">,</span> <span class="token keyword">unsigned</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// won't called</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">		<span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// N::f by overload resolution (!)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>If replace <code class="code-styler-inline">namespace</code> to <code class="code-styler-inline">struct</code> it will call SomewhereAway::f</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="example" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></div><div class="callout-title-inner">My research</div></div><div class="callout-content">
<p dir="auto">For unqualified name the compiler uses union (<span class="math math-inline is-loaded"><mjx-container class="MathJax" jax="CHTML"><mjx-math class="MJX-TEX"><mjx-mo class="mjx-n"><mjx-c class="mjx-c222A"></mjx-c></mjx-mo></mjx-math></mjx-container></span>) of ordinary lookup and ADL and then overload resolution. Except for: class-member lookup!</p>
</div></div></div><div class="el-h3"><h3 data-heading="14.3 Modularization and Interfaces" dir="auto" class="heading" id="14.3_Modularization_and_Interfaces_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>14.3 Modularization and Interfaces</h3></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">From AI:</div></div><div class="callout-content">
<p dir="auto">You can use anonymous namespace to hide some names from global</p>
</div></div></div><div class="el-h4"><h4 data-heading="Interfaces and Implementations" dir="auto" class="heading" id="Interfaces_and_Implementations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Interfaces and Implementations</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Useful</div></div><div class="callout-content">
<p dir="auto">Separate different kinds of interfaces:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> Parser <span class="token punctuation">{</span>      <span class="token comment">// user interface</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">double</span> <span class="token function">expr</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> Parser <span class="token punctuation">{</span>      <span class="token comment">// implementer interface</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">double</span> <span class="token function">prim</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">double</span> <span class="token function">term</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">double</span> <span class="token function">expr</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token keyword">using</span> <span class="token keyword">namespace</span> Lexer<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token keyword">using</span> Error<span class="token double-colon punctuation">::</span>error<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token keyword">using</span> Table<span class="token double-colon punctuation">::</span>table<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">So, we have:<br>
</p><div class="excalidraw-svg"><img style="max-width:400px; " class="excalidraw-svg excalidraw-embedded-img excalidraw-canvas-immersive is-unresolved" src="blob:app://obsidian.md/71ccb96c-4ff7-42b6-b6fd-d74eab9aff54" filesource="a9s/2025.10.21.md" w="400" draggable="false" oncanvas="false" target="_self"></div><p></p></div><div class="el-p"><p dir="auto">Also, we can (but not necessarily) use different names:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> Parser <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">double</span> <span class="token function">expr</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> Parser_impl <span class="token punctuation">{</span> <span class="token comment">// changed</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">using</span> <span class="token keyword">namespace</span> Parser<span class="token punctuation">;</span> <span class="token comment">// key line (!)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">double</span> <span class="token function">prim</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token keyword">double</span> <span class="token function">term</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">	<span class="token keyword">double</span> <span class="token function">expr</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token keyword">using</span> <span class="token keyword">namespace</span> Lexer<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token keyword">using</span> Error<span class="token double-colon punctuation">::</span>error<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	<span class="token keyword">using</span> Table<span class="token double-colon punctuation">::</span>table<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h3"><h3 data-heading="14.4 Composition Using Namespaces" dir="auto" class="heading" id="14.4_Composition_Using_Namespaces_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>14.4 Composition Using Namespaces</h3></div><div class="el-h4"><h4 data-heading="Namespace Aliases" dir="auto" class="heading" id="Namespace_Aliases_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Namespace Aliases</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Suddenly!</div></div><div class="callout-content">
<p dir="auto">Syntax for namespace aliases:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> SomeLongNamedNamespace<span class="token punctuation">{</span> <span class="token comment">/*...*/</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> slnn <span class="token operator">=</span> SomeLongNamedNamespace<span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="Namespace Composition" dir="auto" class="heading" id="Namespace_Composition_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Namespace Composition</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content">
<p dir="auto">In qualified lookup the compiler should find the composed fields, but for context where you need actual name it is treated as error:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> N<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">    <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> M<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token keyword">using</span> N<span class="token double-colon punctuation">::</span>f<span class="token punctuation">;</span> <span class="token comment">// or using namespace N</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">int</span> <span class="token class-name">M</span><span class="token double-colon punctuation">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// error: 'f' is not actual member of M</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="Composition and Selection" dir="auto" class="heading" id="Composition_and_Selection_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Composition and Selection</h4></div><div class="el-p"><p dir="auto">You can use <em>selection</em> (using-declaration) with over <em>composition</em> (using-directive) to resolve name clashes and ambiguities:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> A<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">int</span> common<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">int</span> a<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> B<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">int</span> common<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token keyword">int</span> b<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> MyLib<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">	<span class="token keyword">using</span> <span class="token keyword">namespace</span> A<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token keyword">using</span> <span class="token keyword">namespace</span> B<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">	<span class="token keyword">using</span> A<span class="token double-colon punctuation">::</span>common<span class="token punctuation">;</span> <span class="token comment">// resolve clash for 'common'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token comment">// can use a (A::a) and b (B::b)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">My important note:</div></div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">using</span> MyLib<span class="token double-colon punctuation">::</span>common<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token function">print</span><span class="token punctuation">(</span>common<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK, prints A::common (1)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">work_</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">using</span> <span class="token keyword">namespace</span> MyLib<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token function">print</span><span class="token punctuation">(</span>common<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// â€” ERROR (2)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token function">print</span><span class="token punctuation">(</span>MyLib<span class="token double-colon punctuation">::</span>common<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK (3)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="example" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></div><div class="callout-title-inner">I've got so:</div></div><div class="callout-content">
<p dir="auto"><em>Unqualified lookup</em> will gather all names (so we have error in <code class="code-styler-inline">(2)</code>)<br>
<em>Qualified lookup</em> does <strong>not</strong> touch using-directives if not necessary (so all ok in <code class="code-styler-inline">(3)</code>)</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Reminder</div></div><div class="callout-content">
<p dir="auto">You can make template with using:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">using</span> Vector <span class="token operator">=</span> MyLib<span class="token double-colon punctuation">::</span>Vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="Namespaces and Overloading" dir="auto" class="heading" id="Namespaces_and_Overloading_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Namespaces and Overloading</h4></div><div class="el-blockquote"><blockquote dir="auto">
<p>The main point is you can use <code class="code-styler-inline">using namespace std; using namespace estd;</code> (extended std) and let the lookup mechanics to find appropriate <code class="code-styler-inline">sort(...)</code></p>
</blockquote></div><div class="el-h4"><h4 data-heading="Versioning" dir="auto" class="heading" id="Versioning_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Versioning</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Wow!</div></div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> PopularLib<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">inline</span> <span class="token keyword">namespace</span> V3_2<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">		<span class="token keyword">double</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">		<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">	<span class="token keyword">namespace</span> V3_0<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">		<span class="token keyword">double</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p><code class="code-styler-inline">inline namespace</code> extends to be <code class="code-styler-inline">PopularLib</code> itself, that is, <code class="code-styler-inline">using namespace PopularLib;</code> is equivalent to use <code class="code-styler-inline">using namespace PopularLib::V3_2;</code></p>
</blockquote></div><div class="el-p"><p dir="auto">There is not the best trick for avoiding disadvantages of <code class="code-styler-inline">inline</code>-versioning:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token comment">// V3_common.h</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token comment">// ... lots of declarations ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token comment">// V3_2.h</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">	<span class="token keyword">namespace</span> V3_2<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">		<span class="token keyword">double</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">		<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"V3_common.h"</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token comment">// V3_0.h</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">	<span class="token keyword">namespace</span> V3_0<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">		<span class="token keyword">double</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">		<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"V3_common.h"</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token comment">// Popular.h</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	<span class="token keyword">namespace</span> Popular<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">		<span class="token keyword">inline</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">		<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"V3_2.h"</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text">		<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"V3_0.h"</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">		<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token expression"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>You should avoid that approach!</p>
</blockquote></div><div class="el-h4"><h4 data-heading="Nested Namespaces" dir="auto" class="heading" id="Nested_Namespaces_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Nested Namespaces</h4></div><div class="el-p"><p dir="auto">Namespaces can be nested and names lookup works to access enclosing names:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> X<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">namespace</span> Y<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">		<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">		<span class="token keyword">void</span> <span class="token function">ff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">	<span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token keyword">void</span> X<span class="token double-colon punctuation">::</span><span class="token class-name">Y</span><span class="token double-colon punctuation">::</span><span class="token function">ff</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">	<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token class-name">X</span><span class="token double-colon punctuation">::</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">	<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// no f() in X</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">	<span class="token class-name">Y</span><span class="token double-colon punctuation">::</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK: Y is visible, take Y::f</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="Unnamed Namespaces" dir="auto" class="heading" id="Unnamed_Namespaces_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Unnamed Namespaces</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p dir="auto">Nested structures embed their names to enclosing structure (or class).<br>
But namespaces never do!</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="done" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-check"><path d="M20 6 9 17l-5-5"></path></svg></div><div class="callout-title-inner">Finally</div></div><div class="callout-content">
<p dir="auto">You can hide some names from outer access:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> <span class="token punctuation">{</span> <span class="token comment">// inaccessible from outside</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">int</span> a<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">	cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// valid (!)</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Pay attention!</div></div><div class="callout-content">
<p dir="auto">That (!)-line is valid! It's possible because unnamed namespace indeed is extended to:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> $$$<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token comment">// ...</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token keyword">using</span> <span class="token keyword">namespace</span> $$$<span class="token punctuation">;</span> <span class="token comment">// &lt;- WOW!</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="C Headers" dir="auto" class="heading" id="C_Headers_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>C Headers</h4></div><div class="el-p"><p dir="auto">To carefully avoid polluting global namespace C++ wrappers for C (e.g., <code class="code-styler-inline">&lt;cstdio&gt;</code> for <code class="code-styler-inline">&lt;stdio.h&gt;</code>) use using-declarations (not using-directive)</p></div><div class="el-h3"><h3 data-heading="14.5 Advice" dir="auto" class="heading" id="14.5_Advice_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>14.5 Advice</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>place every nonlocal name (except <code class="code-styler-inline">main()</code>) in some namespace</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>design namespaces avoiding accidentally gaining access to unrelated namespaces (e.g., do not <code class="code-styler-inline">using namespace SomeHugeLib;</code> in your public library namespace)</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>avoid very short names for namespaces</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>use separate namespaces for interfaces and implementations</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>limit usage of using-directives with: transition, foundational libs (such as <code class="code-styler-inline">std</code>) or within local scopes</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>don't put using-directive in .h files</li>
</ul></div><div class="el-h1"><h1 data-heading="15. Source Files and Programs" dir="auto" class="heading" id="15._Source_Files_and_Programs_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>15. Source Files and Programs</h1></div><div class="el-h3"><h3 data-heading="15.1 Separate Compilation" dir="auto" class="heading" id="15.1_Separate_Compilation_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>15.1 Separate Compilation</h3></div><div class="el-blockquote"><blockquote dir="auto">
<p>Interesting fact: there are systems that do not use traditional approach: with files.</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Keep in mind</div></div><div class="callout-content">
<p dir="auto">Even for small change in some dependent file you need to recompile the entire program.<br>
Keeping program separated by many files allow significantly reduce complete compile time.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>Translation unit</em></mark> is a result of preprocessing (i.e. macros done)</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warning</div></div><div class="callout-content">
<p dir="auto"><em>Linker</em> is sometimes called a <em>loader</em></p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="example" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></div><div class="callout-title-inner">My research</div></div><div class="callout-content">
<p dir="auto">Types of lib linkage: 1.static linking, 2. dynamic linking, 3. run-time dynamic loading.<br>
(2) and (3) are also known as <em>load-time dynamic linking</em> and <em>explicit dynamic loading</em> respectively.<br>
<u>important</u>: for both (2) and (3) you need to have declared types in user-program. Moreover, if there is user-defined types in dynlib it's essential to use interfaces (abstract classes) and factory functions.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">def</div></div><div class="callout-content">
<p dir="auto"><mark><em>Physical structure</em></mark> is organization of a program into source files.</p>
</div></div></div><div class="el-h3"><h3 data-heading="15.2 Linkage" dir="auto" class="heading" id="15.2_Linkage_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>15.2 Linkage</h3></div><div class="el-p"><p dir="auto">Names of</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>functions,</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>classes,</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>templates,</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>variables,</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>namespaces,</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>enumerations and enumerators<br>
must be used consistently across all translation units (unless the are explicitly specified to be local).
<div data-callout-metadata="" data-callout-fold="" data-callout="example" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></div><div class="callout-title-inner">Interesting note</div></div><div class="callout-content">
<p dir="auto">Added linkage specification (e.g., <code class="code-styler-inline">extern "C"</code>) we have exhaustive list of all top-level entities.</p>
</div></div>
</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="example" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></div><div class="callout-title-inner">My research</div></div><div class="callout-content">
<p dir="auto">Interesting facts you need to know! Class members are considered declared on class open. Also, member-functions are <code class="code-styler-inline">inline</code> by default:</p>
</div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">    <span class="token keyword">public</span><span class="token operator">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment">// you can access g() if it's already declared</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">    <span class="token keyword">void</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// is inline, as well as f()</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Must to know!</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">const</code> and <code class="code-styler-inline">constexpr</code> variables have internal linkage by default! It's very important for declarations in .h files. Use <code class="code-styler-inline">extern</code> explicitly for only once occurrence!</p>
<p dir="auto"><code class="code-styler-inline">constexpr</code> functions implicitly have <code class="code-styler-inline">inline</code>, so they can be safely defined in .h</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>Reminder: finally in result you have <strong>only</strong> functions and variables for external linkage. No types, templates, namespaces or something else.</p>
</blockquote></div><div class="el-p"><p dir="auto">Local variables and other names which compiler does not see are said to have <em>no linkage</em>.</p></div><div class="el-p"><p dir="auto">Avoid this banned (but possible) construction:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">  <span class="token keyword">extern</span> <span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment">//^^^^^^^^^^^^^ - bad practice</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-h4"><h4 data-heading="File-Local Names" dir="auto" class="heading" id="File-Local_Names_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>File-Local Names</h4></div><div class="el-p"><p dir="auto">For localization use:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">unnamed namespace</li>
<li data-line="1" dir="auto"><code class="code-styler-inline">static</code></li>
</ol></div><div class="el-h4"><h4 data-heading="Header Files" dir="auto" class="heading" id="Header_Files_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Header Files</h4></div><div class="el-p"><p dir="auto">As a rule of thumb, a header (.h) may contain</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>named <code class="code-styler-inline">namespace</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">inline namespace</code></li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>type def</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>template decl or/and def</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>function decl</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">inline</code> function def</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">constexpr</code> function def</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>data decl</li>
<li data-line="8" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">const</code> and <code class="code-styler-inline">constexpr</code> defs</li>
<li data-line="9" dir="auto"><span class="list-bullet"></span>enums</li>
<li data-line="10" dir="auto"><span class="list-bullet"></span>name decl (e.g., <code class="code-styler-inline">class Matrix;</code>)</li>
<li data-line="11" dir="auto"><span class="list-bullet"></span>type aliases</li>
<li data-line="12" dir="auto"><span class="list-bullet"></span>static asserts</li>
<li data-line="13" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">#include</code>, <code class="code-styler-inline">#define</code>, <code class="code-styler-inline">#ifdef</code> and other macros</li>
<li data-line="14" dir="auto"><span class="list-bullet"></span>comments</li>
</ul></div><div class="el-p"><p dir="auto">Stuffs you should ever avoid in headers:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>ordinary function def</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>data def</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>aggregate def (e.g. <code class="code-styler-inline">short table[] = {1,2,3};</code>)</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>unnamed namespace</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">using</code>-directives</li>
</ul></div><div class="el-p"><p dir="auto">Recommendation: <code class="code-styler-inline">#include</code> only complete defs and decls.</p></div><div class="el-h4"><h4 data-heading="The One-Definition Rule (ODR)" dir="auto" class="heading" id="The_One-Definition_Rule_(ODR)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>The One-Definition Rule (ODR)</h4></div><div class="el-p"><p dir="auto">In fact, this rule "ODR" is phrased in more complicated and subtle manner that they can expect.<br>
You may have 2 identical definitions of class/template/inline-func if and only if:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>they appear in different TU, and</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>they are token-for-token identical, and</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>the meaning of those tokens are the same in both TU</li>
</ul></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Remember</div></div><div class="callout-content">
<p dir="auto">Checking against inconsistent class definitions in separate translation units is beyond the ability of most C++ implementations. So it's up to programer not to violate consistence of type definitions between files.</p>
</div></div></div><div class="el-h4"><h4 data-heading="Standard-Library Headers" dir="auto" class="heading" id="Standard-Library_Headers_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Standard-Library Headers</h4></div><div class="el-p"><p dir="auto">Note: for std-lib headers <code class="code-styler-inline">#include&lt;...&gt;</code> may not actually find and paste some text!</p></div><div class="el-p"><p dir="auto">For every C lib like <code class="code-styler-inline">&lt;LIB.h&gt;</code> in C++ there is <code class="code-styler-inline">&lt;cLIB&gt;</code> header.</p></div><div class="el-h4"><h4 data-heading="Linkage to Non-C++ Code" dir="auto" class="heading" id="Linkage_to_Non-C++_Code_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Linkage to Non-C++ Code</h4></div><div class="el-p"><p dir="auto">For:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">extern</span> <span class="token string">"C"</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">strcpy</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">"C"</code> does not mean language, but linkage specification only. It may be used for linkage with Fortran or assembly as well (if they conform to the conventions of a C implementation).</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Note</div></div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">extern</span> <span class="token string">"C"</span> <span class="token keyword">int</span> g<span class="token punctuation">;</span> <span class="token comment">// just declaration</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">extern</span> <span class="token string">"C"</span> <span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">int</span> g<span class="token punctuation">;</span> <span class="token comment">// (!) definition</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">extern</span> <span class="token keyword">int</span> g<span class="token punctuation">;</span> <span class="token comment">// just declaration too, use extern again</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Suddenly</div></div></div></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">namespace</span> MyLib<span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	<span class="token keyword">extern</span> <span class="token string">"C"</span> <span class="token keyword">double</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">In C++ we should use <code class="code-styler-inline">MyLib::f</code> but for linker this name will still be plain <code class="code-styler-inline">f</code>.</p></div><div class="el-h4"><h4 data-heading="Linkage and Pointers to Functions" dir="auto" class="heading" id="Linkage_and_Pointers_to_Functions_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Linkage and Pointers to Functions</h4></div><div class="el-p"><p dir="auto">When linkage is specified for a declaration, the specified linkage applies to all: function types, function names, variable names introduced by the declaration:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">typedef</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>FT<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// FT has C++ linkage</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token keyword">extern</span> <span class="token string">"C"</span> <span class="token keyword">typedef</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>CFT<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// CFT has C linkage</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">If something waits for extern-C function pointer, you cannot pass <code class="code-styler-inline">&amp;</code> of C++ function, and vice versa.</p></div><div class="el-h3"><h3 data-heading="15.3 Using Header" dir="auto" class="heading" id="15.3_Using_Header_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>15.3 Using Header</h3></div><div class="el-h4"><h4 data-heading="Single-Header Organization" dir="auto" class="heading" id="Single-Header_Organization_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Single-Header Organization</h4></div><div class="el-p"><p dir="auto">See <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch15/calc_oneh/prg.cpp" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch15/calc_oneh/prg.cpp" target="_self">full example</a>.</p></div><div class="el-h4"><h4 data-heading="Multi-Header Organization" dir="auto" class="heading" id="Multi-Header_Organization_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Multi-Header Organization</h4></div><div class="el-p"><p dir="auto">See <a data-tooltip-position="top" aria-label="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch15/calc_multh/modules/parser/parser_impl.h" rel="noopener nofollow" class="external-link is-unresolved" href="file:///Users/rayskiy7/dev/new_beginning/cpp/Stroustrup_cpp/ch15/calc_multh/modules/parser/parser_impl.h" target="_self">full example</a>. Pay attention to including required dependencies in <code class="code-styler-inline">parser_impl.h</code> header, it's a good practice.</p></div><div class="el-p"><p dir="auto">Useful tip: you can import each header as deep as it indeed is needed.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content">
<p dir="auto">Use multi-header organization for large real programs to separate program into relatively small chunk (as small as possible) which programmer could cover in mind. It allow to maintain easier and compile faster.</p>
</div></div></div><div class="el-h4"><h4 data-heading="Use of Headers" dir="auto" class="heading" id="Use_of_Headers_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Use of Headers</h4></div><div class="el-blockquote"><blockquote dir="auto">
<p>There is dependency analyzers. You can use this tool.</p>
</blockquote></div><div class="el-p"><p dir="auto">Interesting approach: have two public interfaces: for average users, and for expert users.</p></div><div class="el-p"><p dir="auto">In general, approaches and number of headers are dependent on concrete cases.</p></div><div class="el-h4"><h4 data-heading="Include Guards" dir="auto" class="heading" id="Include_Guards_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Include Guards</h4></div><div class="el-p"><p dir="auto">More often it's impractical and tedious to reorganize program to remove redundant declarations from multiple includes. So, we need find way to allow repeated inclusions of headers.</p></div><div class="el-p"><p dir="auto">Use the standard solution: <code class="code-styler-inline">#ifndef SOME_HEADER</code>, <code class="code-styler-inline">#define SOME_HEADER</code>, <code class="code-styler-inline">#endif</code></p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Remember</div></div><div class="callout-content">
<p dir="auto">There is no namespaces for macros' names, so prefer long and ugly names!</p>
</div></div></div><div class="el-blockquote"><blockquote dir="auto">
<p>Even having include-guards on each header avoid ubiquitous inclusions!</p>
</blockquote></div><div class="el-h3"><h3 data-heading="15.4 Programs" dir="auto" class="heading" id="15.4_Programs_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>15.4 Programs</h3></div><div class="el-blockquote"><blockquote dir="auto">
<p>Note: if you define <code class="code-styler-inline">main()</code> without args, you can't then use form with args.</p>
</blockquote></div><div class="el-p"><p dir="auto">If there are global variables or uncaught exceptions things with <code class="code-styler-inline">main()</code> are not so simple.</p></div><div class="el-h4"><h4 data-heading="Initialization of Nonlocal Variables" dir="auto" class="heading" id="Initialization_of_Nonlocal_Variables_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Initialization of Nonlocal Variables</h4></div><div class="el-p"><p dir="auto">You must know:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>There is no guaranteed order of globals' initialization among different TU</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>There is no possibility to catch an exception on globals' initialization</li>
</ul></div><div class="el-blockquote"><blockquote dir="auto">
<p>Several techniques exist for enforcing initialization order for globals among different TU, but none are both portable and efficient.</p>
</blockquote></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Remark</div></div><div class="callout-content">
<p dir="auto">Dynamically linked libraries don't coexist happily with globals (that have complicated dependencies)</p>
</div></div></div><div class="el-p"><p dir="auto">One useful technique:</p></div><div class="el-pre has-run-code-button code-styler-pre-parent"><pre class="language-cpp code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code data-line="0" class="language-cpp is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">int</span><span class="token operator">&amp;</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// use ref!</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">{</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">	<span class="token keyword">static</span> <span class="token keyword">int</span> x_ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">	<span class="token keyword">return</span> x_<span class="token punctuation">;</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token punctuation">}</span></div></div></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><button class="run-code-button">Run</button></pre></div><div class="el-p"><p dir="auto">You have <code class="code-styler-inline">x()</code> that is initialized on first invocation.</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Caution</div></div><div class="callout-content">
<p dir="auto">Unfortunately, this technique is not thread-safe.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Keep in mind</div></div><div class="callout-content">
<p dir="auto">Initialization of local function <code class="code-styler-inline">static</code> variable (since C++11) is thread-safe. But subsequent operations may cause a data race</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">But...</div></div><div class="callout-content">
<p dir="auto">Global and member <code class="code-styler-inline">static</code> initialization isn't thread safe at all! Use <code class="code-styler-inline">constexpr</code> for compile-time initialization.</p>
</div></div></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="danger" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg></div><div class="callout-title-inner">Pay attention!</div></div><div class="callout-content">
<p dir="auto">Constexpr variables <u>initialized</u> by constexpr cannot depend on the values from other TU!</p>
</div></div></div><div class="el-h4"><h4 data-heading="Initialization and Concurrency" dir="auto" class="heading" id="Initialization_and_Concurrency_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Initialization and Concurrency</h4></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Std</div></div><div class="callout-content">
<p dir="auto">The initialization of a statically allocated object with a <code class="code-styler-inline">constexpr</code> (<em>even implicit</em>) is done at link time!</p>
</div></div></div><div class="el-p"><p dir="auto">To avoid problems of multi-thread access to statically allocated variable before it have finished its initializations you should:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>minimize use of statically allocated objects</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>keep their initializations as simple as possible</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>avoid dependencies on dynamically initialized objects in other TU</li>
</ul></div><div class="el-p"><p dir="auto">Other useful techniques in order:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">use constexpr for initialize</li>
<li data-line="1" dir="auto">if use expressions, make sure they have no side effects</li>
<li data-line="2" dir="auto">initialize in a known single-threaded "startup phase" of computation</li>
<li data-line="3" dir="auto">use some form of mutual exclusion</li>
</ol></div><div class="el-h4"><h4 data-heading="Program Termination" dir="auto" class="heading" id="Program_Termination_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Program Termination</h4></div><div class="el-p"><p dir="auto">Repeat ways to terminate:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><code class="code-styler-inline">return</code> from <code class="code-styler-inline">main()</code></li>
<li data-line="1" dir="auto"><code class="code-styler-inline">exit()</code></li>
<li data-line="2" dir="auto"><code class="code-styler-inline">abort()</code></li>
<li data-line="3" dir="auto"><code class="code-styler-inline">throw</code> an uncaught exception</li>
<li data-line="4" dir="auto">violate <code class="code-styler-inline">noexcept</code> (so <code class="code-styler-inline">terminate()</code>)</li>
<li data-line="5" dir="auto"><code class="code-styler-inline">quick_exit()</code>
<div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Info</div></div><div class="callout-content">
<p dir="auto"><code class="code-styler-inline">exit()</code>, <code class="code-styler-inline">quick_exit()</code>, <code class="code-styler-inline">abort()</code> are declared in <code class="code-styler-inline">&lt;cstdlib&gt;</code></p>
</div></div>
</li>
</ol></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="cite" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-quote"><path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path><path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"></path></svg></div><div class="callout-title-inner">Stroustrup</div></div><div class="callout-content">
<p dir="auto">There are other "bad" ways to terminate program, e.g.  <code class="code-styler-inline">double_val / 0.0</code> in some old  implementations.</p>
</div></div></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">exit()</code> calls destructors of statically allocated objects (that is useful), but try hard not to call <code class="code-styler-inline">exit()</code> in destructors to avoid infinite recursion. Also, there is <code class="code-styler-inline">atexit(void(*)())</code>. Take action to call on <code class="code-styler-inline">exit()</code>, note: <code class="code-styler-inline">atexit()</code> returns <code class="code-styler-inline">int</code> meaning "has it had problems?".</p></div><div class="el-div"><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner">Rule</div></div><div class="callout-content">
<p dir="auto">order: <code class="code-styler-inline">T t1() -&gt; atexit(f) -&gt; T t2() -&gt; exit() -&gt; t2.~T() -&gt; f -&gt; t1.~T()</code></p>
</div></div></div><div class="el-p"><p dir="auto"><code class="code-styler-inline">quick_exit()</code> and <code class="code-styler-inline">at_quick_exit()</code> are similar, except that destructors are not involved.</p></div><div class="el-h3"><h3 data-heading="15.5 Advice" dir="auto" class="heading" id="15.5_Advice_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>15.5 Advice</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>include header in file with implementation</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>don't define global entities with the same name and similar-but-different meanings in different TU</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>avoid non-inline functions defs in headers</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>use <code class="code-styler-inline">#include</code> only for global and namespace scopes</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><code class="code-styler-inline">#include</code> only complete declarations</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>use include guards</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>make headers self-contained (make sure they can be compiled by themselves)</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>distinguish between users' interfaces and implementers' interfaces</li>
<li data-line="8" dir="auto"><span class="list-bullet"></span>avoid nonlocal objects that require run-time init. Especially for code intended for use as part of non-C++ programs</li>
</ul></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all is-collapsed" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#TC++PL_(II)_0" data-path="#TC++PL_(II)_0"><div class="tree-item-inner heading-link" heading-name="TC++PL (II)">TC++PL (II)</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#6._Types_and_Declarations_0" data-path="#6._Types_and_Declarations_0"><div class="tree-item-inner heading-link" heading-name="6. Types and Declarations">6. Types and Declarations</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#The_ISO_C++_Standard_0" data-path="#The_ISO_C++_Standard_0"><div class="tree-item-inner heading-link" heading-name="The ISO C++ Standard">The ISO C++ Standard</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Implementations_0" data-path="#Implementations_0"><div class="tree-item-inner heading-link" heading-name="Implementations">Implementations</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#The_Basic_Source_Character_Set_0" data-path="#The_Basic_Source_Character_Set_0"><div class="tree-item-inner heading-link" heading-name="The Basic Source Character Set">The Basic Source Character Set</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Types_0" data-path="#Types_0"><div class="tree-item-inner heading-link" heading-name="Types">Types</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Boolean_0" data-path="#Boolean_0"><div class="tree-item-inner heading-link" heading-name="Boolean">Boolean</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Char_0" data-path="#Char_0"><div class="tree-item-inner heading-link" heading-name="Char">Char</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Integer_0" data-path="#Integer_0"><div class="tree-item-inner heading-link" heading-name="Integer">Integer</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Float_0" data-path="#Float_0"><div class="tree-item-inner heading-link" heading-name="Float">Float</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Prefixes_and_Suffixes_0" data-path="#Prefixes_and_Suffixes_0"><div class="tree-item-inner heading-link" heading-name="Prefixes and Suffixes">Prefixes and Suffixes</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Sizes_0" data-path="#Sizes_0"><div class="tree-item-inner heading-link" heading-name="Sizes">Sizes</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Alignment_0" data-path="#Alignment_0"><div class="tree-item-inner heading-link" heading-name="Alignment">Alignment</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Declarations_0" data-path="#Declarations_0"><div class="tree-item-inner heading-link" heading-name="Declarations">Declarations</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#The_Structure_of_Declarations_0" data-path="#The_Structure_of_Declarations_0"><div class="tree-item-inner heading-link" heading-name="The Structure of Declarations">The Structure of Declarations</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Names_0" data-path="#Names_0"><div class="tree-item-inner heading-link" heading-name="Names">Names</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Scope_0" data-path="#Scope_0"><div class="tree-item-inner heading-link" heading-name="Scope">Scope</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Initialization_0" data-path="#Initialization_0"><div class="tree-item-inner heading-link" heading-name="Initialization">Initialization</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Missing_Initializers_0" data-path="#Missing_Initializers_0"><div class="tree-item-inner heading-link" heading-name="Missing Initializers">Missing Initializers</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Initializer_Lists_0" data-path="#Initializer_Lists_0"><div class="tree-item-inner heading-link" heading-name="Initializer Lists">Initializer Lists</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Deducing_`auto`,_`decltype()`_0" data-path="#Deducing_`auto`,_`decltype()`_0"><div class="tree-item-inner heading-link" heading-name="Deducing: `auto`, `decltype()`">Deducing: <code class="code-styler-inline">auto</code>, <code>decltype()</code></div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Objects_and_Values,_Lvalues_and_Rvalues_0" data-path="#Objects_and_Values,_Lvalues_and_Rvalues_0"><div class="tree-item-inner heading-link" heading-name="Objects and Values, Lvalues and Rvalues">Objects and Values, Lvalues and Rvalues</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Type_Aliases_0" data-path="#Type_Aliases_0"><div class="tree-item-inner heading-link" heading-name="Type Aliases">Type Aliases</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Advice_0" data-path="#Advice_0"><div class="tree-item-inner heading-link" heading-name="Advice">Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#7._Pointers,_Arrays,_and_References_0" data-path="#7._Pointers,_Arrays,_and_References_0"><div class="tree-item-inner heading-link" heading-name="7. Pointers, Arrays, and References">7. Pointers, Arrays, and References</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Lvalue_references_0" data-path="#Lvalue_references_0"><div class="tree-item-inner heading-link" heading-name="Lvalue references">Lvalue references</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Rvalue_References_0" data-path="#Rvalue_References_0"><div class="tree-item-inner heading-link" heading-name="Rvalue References">Rvalue References</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#References_to_References_0" data-path="#References_to_References_0"><div class="tree-item-inner heading-link" heading-name="References to References">References to References</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Pointers_and_References_0" data-path="#Pointers_and_References_0"><div class="tree-item-inner heading-link" heading-name="Pointers and References">Pointers and References</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Advice_1" data-path="#Advice_1"><div class="tree-item-inner heading-link" heading-name="Advice">Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#8._Structures,_Unions,_and_Enumerations_0" data-path="#8._Structures,_Unions,_and_Enumerations_0"><div class="tree-item-inner heading-link" heading-name="8. Structures, Unions, and Enumerations">8. Structures, Unions, and Enumerations</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Structures_0" data-path="#Structures_0"><div class="tree-item-inner heading-link" heading-name="Structures">Structures</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#`struct`_Layout_0" data-path="#`struct`_Layout_0"><div class="tree-item-inner heading-link" heading-name="`struct` Layout"><code class="code-styler-inline">struct</code> Layout</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#`struct`_Names_0" data-path="#`struct`_Names_0"><div class="tree-item-inner heading-link" heading-name="`struct` Names"><code class="code-styler-inline">struct</code> Names</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Structures_and_Classes_0" data-path="#Structures_and_Classes_0"><div class="tree-item-inner heading-link" heading-name="Structures and Classes">Structures and Classes</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Structures_and_Arrays_0" data-path="#Structures_and_Arrays_0"><div class="tree-item-inner heading-link" heading-name="Structures and Arrays">Structures and Arrays</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Plain_Old_Data_(POD)_0" data-path="#Plain_Old_Data_(POD)_0"><div class="tree-item-inner heading-link" heading-name="Plain Old Data (POD)">Plain Old Data (POD)</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Fields_0" data-path="#Fields_0"><div class="tree-item-inner heading-link" heading-name="Fields">Fields</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Unions_0" data-path="#Unions_0"><div class="tree-item-inner heading-link" heading-name="Unions">Unions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Unions_and_Classes_0" data-path="#Unions_and_Classes_0"><div class="tree-item-inner heading-link" heading-name="Unions and Classes">Unions and Classes</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Enumerations_0" data-path="#Enumerations_0"><div class="tree-item-inner heading-link" heading-name="Enumerations">Enumerations</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Plain_enums_0" data-path="#Plain_enums_0"><div class="tree-item-inner heading-link" heading-name="Plain enums">Plain enums</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Advice_2" data-path="#Advice_2"><div class="tree-item-inner heading-link" heading-name="Advice">Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#9._Statements_0" data-path="#9._Statements_0"><div class="tree-item-inner heading-link" heading-name="9. Statements">9. Statements</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Statement_Summary_0" data-path="#Statement_Summary_0"><div class="tree-item-inner heading-link" heading-name="Statement Summary">Statement Summary</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Declarations_as_Statements,_and_in_Conditions_0" data-path="#Declarations_as_Statements,_and_in_Conditions_0"><div class="tree-item-inner heading-link" heading-name="Declarations as Statements, and in Conditions">Declarations as Statements, and in Conditions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Switch_statement_0" data-path="#Switch_statement_0"><div class="tree-item-inner heading-link" heading-name="Switch statement">Switch statement</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Declarations_in_Cases_0" data-path="#Declarations_in_Cases_0"><div class="tree-item-inner heading-link" heading-name="Declarations in Cases">Declarations in Cases</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Iteration_Statements_0" data-path="#Iteration_Statements_0"><div class="tree-item-inner heading-link" heading-name="Iteration Statements">Iteration Statements</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Comments_0" data-path="#Comments_0"><div class="tree-item-inner heading-link" heading-name="Comments">Comments</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Advice_3" data-path="#Advice_3"><div class="tree-item-inner heading-link" heading-name="Advice">Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#10._Expressions_0" data-path="#10._Expressions_0"><div class="tree-item-inner heading-link" heading-name="10. Expressions">10. Expressions</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#My_notes_0" data-path="#My_notes_0"><div class="tree-item-inner heading-link" heading-name="My notes">My notes</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Command-Line_Arguments_0" data-path="#Command-Line_Arguments_0"><div class="tree-item-inner heading-link" heading-name="Command-Line Arguments">Command-Line Arguments</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Operator_Summary_âœ¨_0" data-path="#Operator_Summary_âœ¨_0"><div class="tree-item-inner heading-link" heading-name="Operator Summary âœ¨">Operator Summary âœ¨</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Results_0" data-path="#Results_0"><div class="tree-item-inner heading-link" heading-name="Results">Results</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Order_of_Evaluation_0" data-path="#Order_of_Evaluation_0"><div class="tree-item-inner heading-link" heading-name="Order of Evaluation">Order of Evaluation</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Temporary_Objects_0" data-path="#Temporary_Objects_0"><div class="tree-item-inner heading-link" heading-name="Temporary Objects">Temporary Objects</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Constant_Expressions_0" data-path="#Constant_Expressions_0"><div class="tree-item-inner heading-link" heading-name="Constant Expressions">Constant Expressions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#`const`s_in_Constant_Expressions_0" data-path="#`const`s_in_Constant_Expressions_0"><div class="tree-item-inner heading-link" heading-name="`const`s in Constant Expressions"><code class="code-styler-inline">const</code>s in Constant Expressions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Literal_Types_0" data-path="#Literal_Types_0"><div class="tree-item-inner heading-link" heading-name="Literal Types">Literal Types</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Reference_Arguments_0" data-path="#Reference_Arguments_0"><div class="tree-item-inner heading-link" heading-name="Reference Arguments">Reference Arguments</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Promotions_0" data-path="#Promotions_0"><div class="tree-item-inner heading-link" heading-name="Promotions">Promotions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Conversions_0" data-path="#Conversions_0"><div class="tree-item-inner heading-link" heading-name="Conversions">Conversions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Floating-Integral_Conversions_0" data-path="#Floating-Integral_Conversions_0"><div class="tree-item-inner heading-link" heading-name="Floating-Integral Conversions">Floating-Integral Conversions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Usual_Arithmetic_Conversions_0" data-path="#Usual_Arithmetic_Conversions_0"><div class="tree-item-inner heading-link" heading-name="Usual Arithmetic Conversions">Usual Arithmetic Conversions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Advice_4" data-path="#Advice_4"><div class="tree-item-inner heading-link" heading-name="Advice">Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#11._Selected_Operations_0" data-path="#11._Selected_Operations_0"><div class="tree-item-inner heading-link" heading-name="11. Selected Operations">11. Selected Operations</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Memory_Management_0" data-path="#Memory_Management_0"><div class="tree-item-inner heading-link" heading-name="Memory Management">Memory Management</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Getting_memory_space_0" data-path="#Getting_memory_space_0"><div class="tree-item-inner heading-link" heading-name="Getting memory space">Getting memory space</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Overloading_`new`_0" data-path="#Overloading_`new`_0"><div class="tree-item-inner heading-link" heading-name="Overloading `new`">Overloading <code class="code-styler-inline">new</code></div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#No_throw_new_â€”_`nothrow_new`_0" data-path="#No_throw_new_â€”_`nothrow_new`_0"><div class="tree-item-inner heading-link" heading-name="No throw new â€” `nothrow new`">No throw new â€” <code class="code-styler-inline">nothrow new</code></div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Lists_0" data-path="#Lists_0"><div class="tree-item-inner heading-link" heading-name="Lists">Lists</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Lambda_Expressions_0" data-path="#Lambda_Expressions_0"><div class="tree-item-inner heading-link" heading-name="Lambda Expressions">Lambda Expressions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Alternatives_to_Lambdas_0" data-path="#Alternatives_to_Lambdas_0"><div class="tree-item-inner heading-link" heading-name="Alternatives to Lambdas">Alternatives to Lambdas</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Lambda_and_Lifetime_0" data-path="#Lambda_and_Lifetime_0"><div class="tree-item-inner heading-link" heading-name="Lambda and Lifetime">Lambda and Lifetime</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Namespace_Names_0" data-path="#Namespace_Names_0"><div class="tree-item-inner heading-link" heading-name="Namespace Names">Namespace Names</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#The_Type_of_a_Lambda_0" data-path="#The_Type_of_a_Lambda_0"><div class="tree-item-inner heading-link" heading-name="The Type of a Lambda">The Type of a Lambda</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Explicit_Type_Conversions_0" data-path="#Explicit_Type_Conversions_0"><div class="tree-item-inner heading-link" heading-name="Explicit Type Conversions">Explicit Type Conversions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Construction_0" data-path="#Construction_0"><div class="tree-item-inner heading-link" heading-name="Construction">Construction</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Named_Casts_0" data-path="#Named_Casts_0"><div class="tree-item-inner heading-link" heading-name="Named Casts">Named Casts</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#C-Style_Cast_0" data-path="#C-Style_Cast_0"><div class="tree-item-inner heading-link" heading-name="C-Style Cast">C-Style Cast</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Function_Style_Cast_0" data-path="#Function_Style_Cast_0"><div class="tree-item-inner heading-link" heading-name="Function Style Cast">Function Style Cast</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Advice_5" data-path="#Advice_5"><div class="tree-item-inner heading-link" heading-name="Advice">Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#12._Functions_0" data-path="#12._Functions_0"><div class="tree-item-inner heading-link" heading-name="12. Functions">12. Functions</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#12.1_Function_Declarations_0" data-path="#12.1_Function_Declarations_0"><div class="tree-item-inner heading-link" heading-name="12.1 Function Declarations">12.1 Function Declarations</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Parts_of_a_Function_Declaration_0" data-path="#Parts_of_a_Function_Declaration_0"><div class="tree-item-inner heading-link" heading-name="Parts of a Function Declaration">Parts of a Function Declaration</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Function_Definitions_0" data-path="#Function_Definitions_0"><div class="tree-item-inner heading-link" heading-name="Function Definitions">Function Definitions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Returning_Values_0" data-path="#Returning_Values_0"><div class="tree-item-inner heading-link" heading-name="Returning Values">Returning Values</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Inline_Functions_0" data-path="#Inline_Functions_0"><div class="tree-item-inner heading-link" heading-name="Inline Functions">Inline Functions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Constexpr_Functions_0" data-path="#Constexpr_Functions_0"><div class="tree-item-inner heading-link" heading-name="Constexpr Functions">Constexpr Functions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Constexpr_and_References_0" data-path="#Constexpr_and_References_0"><div class="tree-item-inner heading-link" heading-name="Constexpr and References">Constexpr and References</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Conditional_Evaluation_0" data-path="#Conditional_Evaluation_0"><div class="tree-item-inner heading-link" heading-name="Conditional Evaluation">Conditional Evaluation</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Noreturn_Functions_0" data-path="#Noreturn_Functions_0"><div class="tree-item-inner heading-link" heading-name="Noreturn Functions">Noreturn Functions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Local_Variables_0" data-path="#Local_Variables_0"><div class="tree-item-inner heading-link" heading-name="Local Variables">Local Variables</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#12.2_Argument_Passing_0" data-path="#12.2_Argument_Passing_0"><div class="tree-item-inner heading-link" heading-name="12.2 Argument Passing">12.2 Argument Passing</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Reference_Arguments_1" data-path="#Reference_Arguments_1"><div class="tree-item-inner heading-link" heading-name="Reference Arguments">Reference Arguments</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Array_Arguments_0" data-path="#Array_Arguments_0"><div class="tree-item-inner heading-link" heading-name="Array Arguments">Array Arguments</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#List_Arguments_0" data-path="#List_Arguments_0"><div class="tree-item-inner heading-link" heading-name="List Arguments">List Arguments</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Unspecified_Number_of_Arguments_0" data-path="#Unspecified_Number_of_Arguments_0"><div class="tree-item-inner heading-link" heading-name="Unspecified Number of Arguments">Unspecified Number of Arguments</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Default_Arguments_0" data-path="#Default_Arguments_0"><div class="tree-item-inner heading-link" heading-name="Default Arguments">Default Arguments</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#12.3_Overloaded_Functions_0" data-path="#12.3_Overloaded_Functions_0"><div class="tree-item-inner heading-link" heading-name="12.3 Overloaded Functions">12.3 Overloaded Functions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Automatic_Overload_Resolution_(AOR)_0" data-path="#Automatic_Overload_Resolution_(AOR)_0"><div class="tree-item-inner heading-link" heading-name="Automatic Overload Resolution (AOR)">Automatic Overload Resolution (AOR)</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Overloading_and_Return_Type_0" data-path="#Overloading_and_Return_Type_0"><div class="tree-item-inner heading-link" heading-name="Overloading and Return Type">Overloading and Return Type</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Overloading_and_Scope_0" data-path="#Overloading_and_Scope_0"><div class="tree-item-inner heading-link" heading-name="Overloading and Scope">Overloading and Scope</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Resolution_for_Multiple_Arguments_0" data-path="#Resolution_for_Multiple_Arguments_0"><div class="tree-item-inner heading-link" heading-name="Resolution for Multiple Arguments">Resolution for Multiple Arguments</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Manual_Overload_Resolution_0" data-path="#Manual_Overload_Resolution_0"><div class="tree-item-inner heading-link" heading-name="Manual Overload Resolution">Manual Overload Resolution</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#12.4_Pre-_and_Postconditions_0" data-path="#12.4_Pre-_and_Postconditions_0"><div class="tree-item-inner heading-link" heading-name="12.4 Pre- and Postconditions">12.4 Pre- and Postconditions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#12.5_Pointer_to_Function_0" data-path="#12.5_Pointer_to_Function_0"><div class="tree-item-inner heading-link" heading-name="12.5 Pointer to Function">12.5 Pointer to Function</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#12.6_Macros_0" data-path="#12.6_Macros_0"><div class="tree-item-inner heading-link" heading-name="12.6 Macros">12.6 Macros</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Predefined_Macros_0" data-path="#Predefined_Macros_0"><div class="tree-item-inner heading-link" heading-name="Predefined Macros">Predefined Macros</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Pragma_0" data-path="#Pragma_0"><div class="tree-item-inner heading-link" heading-name="Pragma">Pragma</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#12.7_Advice_0" data-path="#12.7_Advice_0"><div class="tree-item-inner heading-link" heading-name="12.7 Advice">12.7 Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#13._Exception_Handling_0" data-path="#13._Exception_Handling_0"><div class="tree-item-inner heading-link" heading-name="13. Exception Handling">13. Exception Handling</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#13.1_Error_Handling_0" data-path="#13.1_Error_Handling_0"><div class="tree-item-inner heading-link" heading-name="13.1 Error Handling">13.1 Error Handling</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Exceptions_0" data-path="#Exceptions_0"><div class="tree-item-inner heading-link" heading-name="Exceptions">Exceptions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Traditional_Error_Handling_0" data-path="#Traditional_Error_Handling_0"><div class="tree-item-inner heading-link" heading-name="Traditional Error Handling">Traditional Error Handling</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#When_You_Can't_Use_Exceptions_0" data-path="#When_You_Can't_Use_Exceptions_0"><div class="tree-item-inner heading-link" heading-name="When You Can't Use Exceptions">When You Can't Use Exceptions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Hierarchical_Error_Handling_0" data-path="#Hierarchical_Error_Handling_0"><div class="tree-item-inner heading-link" heading-name="Hierarchical Error Handling">Hierarchical Error Handling</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Exceptions_and_Efficiency_0" data-path="#Exceptions_and_Efficiency_0"><div class="tree-item-inner heading-link" heading-name="Exceptions and Efficiency">Exceptions and Efficiency</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#13.2_Exception_Guarantees_0" data-path="#13.2_Exception_Guarantees_0"><div class="tree-item-inner heading-link" heading-name="13.2 Exception Guarantees">13.2 Exception Guarantees</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#13.3_Resource_Management_0" data-path="#13.3_Resource_Management_0"><div class="tree-item-inner heading-link" heading-name="13.3 Resource Management">13.3 Resource Management</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Finally_0" data-path="#Finally_0"><div class="tree-item-inner heading-link" heading-name="Finally">Finally</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#13.4_Enforcing_Invariants_0" data-path="#13.4_Enforcing_Invariants_0"><div class="tree-item-inner heading-link" heading-name="13.4 Enforcing Invariants">13.4 Enforcing Invariants</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#13.5_Throwing_and_Catching_Exceptions_0" data-path="#13.5_Throwing_and_Catching_Exceptions_0"><div class="tree-item-inner heading-link" heading-name="13.5 Throwing and Catching Exceptions">13.5 Throwing and Catching Exceptions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Throwing_Exceptions_0" data-path="#Throwing_Exceptions_0"><div class="tree-item-inner heading-link" heading-name="Throwing Exceptions">Throwing Exceptions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Noexcept_Functions_0" data-path="#Noexcept_Functions_0"><div class="tree-item-inner heading-link" heading-name="Noexcept Functions">Noexcept Functions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#The_`noexcept`_Operator_0" data-path="#The_`noexcept`_Operator_0"><div class="tree-item-inner heading-link" heading-name="The `noexcept` Operator">The <code class="code-styler-inline">noexcept</code> Operator</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Exception_Specification_0" data-path="#Exception_Specification_0"><div class="tree-item-inner heading-link" heading-name="Exception Specification">Exception Specification</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Catching_Exceptions_0" data-path="#Catching_Exceptions_0"><div class="tree-item-inner heading-link" heading-name="Catching Exceptions">Catching Exceptions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Rethrow_0" data-path="#Rethrow_0"><div class="tree-item-inner heading-link" heading-name="Rethrow">Rethrow</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Catch_Every_Exception_0" data-path="#Catch_Every_Exception_0"><div class="tree-item-inner heading-link" heading-name="Catch Every Exception">Catch Every Exception</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Multiple_Handlers_0" data-path="#Multiple_Handlers_0"><div class="tree-item-inner heading-link" heading-name="Multiple Handlers">Multiple Handlers</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Function_`try`-Blocks_0" data-path="#Function_`try`-Blocks_0"><div class="tree-item-inner heading-link" heading-name="Function `try`-Blocks">Function <code class="code-styler-inline">try</code>-Blocks</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Termination_0" data-path="#Termination_0"><div class="tree-item-inner heading-link" heading-name="Termination">Termination</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Exceptions_and_Threads_0" data-path="#Exceptions_and_Threads_0"><div class="tree-item-inner heading-link" heading-name="Exceptions and Threads">Exceptions and Threads</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#13.6_A_`vector`_Implementation_0" data-path="#13.6_A_`vector`_Implementation_0"><div class="tree-item-inner heading-link" heading-name="13.6 A `vector` Implementation">13.6 A <code class="code-styler-inline">vector</code> Implementation</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#A_Simple_`vector`_0" data-path="#A_Simple_`vector`_0"><div class="tree-item-inner heading-link" heading-name="A Simple `vector`">A Simple <code class="code-styler-inline">vector</code></div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Representing_Memory_Explicitly_0" data-path="#Representing_Memory_Explicitly_0"><div class="tree-item-inner heading-link" heading-name="Representing Memory Explicitly">Representing Memory Explicitly</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Assignment_0" data-path="#Assignment_0"><div class="tree-item-inner heading-link" heading-name="Assignment">Assignment</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Changing_Size_0" data-path="#Changing_Size_0"><div class="tree-item-inner heading-link" heading-name="Changing Size">Changing Size</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Final_Thoughts_0" data-path="#Final_Thoughts_0"><div class="tree-item-inner heading-link" heading-name="Final Thoughts">Final Thoughts</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#13.7_Advice_0" data-path="#13.7_Advice_0"><div class="tree-item-inner heading-link" heading-name="13.7 Advice">13.7 Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#14._Namespaces_0" data-path="#14._Namespaces_0"><div class="tree-item-inner heading-link" heading-name="14. Namespaces">14. Namespaces</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#14.1_Composition_Problems_0" data-path="#14.1_Composition_Problems_0"><div class="tree-item-inner heading-link" heading-name="14.1 Composition Problems">14.1 Composition Problems</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#14.2_Namespaces_0" data-path="#14.2_Namespaces_0"><div class="tree-item-inner heading-link" heading-name="14.2 Namespaces">14.2 Namespaces</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Explicit_Qualification_0" data-path="#Explicit_Qualification_0"><div class="tree-item-inner heading-link" heading-name="Explicit Qualification">Explicit Qualification</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#`using`_Declarations_0" data-path="#`using`_Declarations_0"><div class="tree-item-inner heading-link" heading-name="`using` Declarations"><code class="code-styler-inline">using</code> Declarations</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#`using`_Directives_0" data-path="#`using`_Directives_0"><div class="tree-item-inner heading-link" heading-name="`using` Directives"><code class="code-styler-inline">using</code> Directives</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#ADL_(Argument-Dependent_Lookup)_0" data-path="#ADL_(Argument-Dependent_Lookup)_0"><div class="tree-item-inner heading-link" heading-name="ADL (Argument-Dependent Lookup)">ADL (Argument-Dependent Lookup)</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#14.3_Modularization_and_Interfaces_0" data-path="#14.3_Modularization_and_Interfaces_0"><div class="tree-item-inner heading-link" heading-name="14.3 Modularization and Interfaces">14.3 Modularization and Interfaces</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Interfaces_and_Implementations_0" data-path="#Interfaces_and_Implementations_0"><div class="tree-item-inner heading-link" heading-name="Interfaces and Implementations">Interfaces and Implementations</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#14.4_Composition_Using_Namespaces_0" data-path="#14.4_Composition_Using_Namespaces_0"><div class="tree-item-inner heading-link" heading-name="14.4 Composition Using Namespaces">14.4 Composition Using Namespaces</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Namespace_Aliases_0" data-path="#Namespace_Aliases_0"><div class="tree-item-inner heading-link" heading-name="Namespace Aliases">Namespace Aliases</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Namespace_Composition_0" data-path="#Namespace_Composition_0"><div class="tree-item-inner heading-link" heading-name="Namespace Composition">Namespace Composition</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Composition_and_Selection_0" data-path="#Composition_and_Selection_0"><div class="tree-item-inner heading-link" heading-name="Composition and Selection">Composition and Selection</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Namespaces_and_Overloading_0" data-path="#Namespaces_and_Overloading_0"><div class="tree-item-inner heading-link" heading-name="Namespaces and Overloading">Namespaces and Overloading</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Versioning_0" data-path="#Versioning_0"><div class="tree-item-inner heading-link" heading-name="Versioning">Versioning</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Nested_Namespaces_0" data-path="#Nested_Namespaces_0"><div class="tree-item-inner heading-link" heading-name="Nested Namespaces">Nested Namespaces</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Unnamed_Namespaces_0" data-path="#Unnamed_Namespaces_0"><div class="tree-item-inner heading-link" heading-name="Unnamed Namespaces">Unnamed Namespaces</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#C_Headers_0" data-path="#C_Headers_0"><div class="tree-item-inner heading-link" heading-name="C Headers">C Headers</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#14.5_Advice_0" data-path="#14.5_Advice_0"><div class="tree-item-inner heading-link" heading-name="14.5 Advice">14.5 Advice</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#15._Source_Files_and_Programs_0" data-path="#15._Source_Files_and_Programs_0"><div class="tree-item-inner heading-link" heading-name="15. Source Files and Programs">15. Source Files and Programs</div></a><div class="tree-item-children"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#15.1_Separate_Compilation_0" data-path="#15.1_Separate_Compilation_0"><div class="tree-item-inner heading-link" heading-name="15.1 Separate Compilation">15.1 Separate Compilation</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#15.2_Linkage_0" data-path="#15.2_Linkage_0"><div class="tree-item-inner heading-link" heading-name="15.2 Linkage">15.2 Linkage</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#File-Local_Names_0" data-path="#File-Local_Names_0"><div class="tree-item-inner heading-link" heading-name="File-Local Names">File-Local Names</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Header_Files_0" data-path="#Header_Files_0"><div class="tree-item-inner heading-link" heading-name="Header Files">Header Files</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#The_One-Definition_Rule_(ODR)_0" data-path="#The_One-Definition_Rule_(ODR)_0"><div class="tree-item-inner heading-link" heading-name="The One-Definition Rule (ODR)">The One-Definition Rule (ODR)</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Standard-Library_Headers_0" data-path="#Standard-Library_Headers_0"><div class="tree-item-inner heading-link" heading-name="Standard-Library Headers">Standard-Library Headers</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Linkage_to_Non-C++_Code_0" data-path="#Linkage_to_Non-C++_Code_0"><div class="tree-item-inner heading-link" heading-name="Linkage to Non-C++ Code">Linkage to Non-C++ Code</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Linkage_and_Pointers_to_Functions_0" data-path="#Linkage_and_Pointers_to_Functions_0"><div class="tree-item-inner heading-link" heading-name="Linkage and Pointers to Functions">Linkage and Pointers to Functions</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#15.3_Using_Header_0" data-path="#15.3_Using_Header_0"><div class="tree-item-inner heading-link" heading-name="15.3 Using Header">15.3 Using Header</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Single-Header_Organization_0" data-path="#Single-Header_Organization_0"><div class="tree-item-inner heading-link" heading-name="Single-Header Organization">Single-Header Organization</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Multi-Header_Organization_0" data-path="#Multi-Header_Organization_0"><div class="tree-item-inner heading-link" heading-name="Multi-Header Organization">Multi-Header Organization</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Use_of_Headers_0" data-path="#Use_of_Headers_0"><div class="tree-item-inner heading-link" heading-name="Use of Headers">Use of Headers</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Include_Guards_0" data-path="#Include_Guards_0"><div class="tree-item-inner heading-link" heading-name="Include Guards">Include Guards</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#15.4_Programs_0" data-path="#15.4_Programs_0"><div class="tree-item-inner heading-link" heading-name="15.4 Programs">15.4 Programs</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Initialization_of_Nonlocal_Variables_0" data-path="#Initialization_of_Nonlocal_Variables_0"><div class="tree-item-inner heading-link" heading-name="Initialization of Nonlocal Variables">Initialization of Nonlocal Variables</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Initialization_and_Concurrency_0" data-path="#Initialization_and_Concurrency_0"><div class="tree-item-inner heading-link" heading-name="Initialization and Concurrency">Initialization and Concurrency</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="4"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#Program_Termination_0" data-path="#Program_Termination_0"><div class="tree-item-inner heading-link" heading-name="Program Termination">Program Termination</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="tc++pl-(ii).html#15.5_Advice_0" data-path="#15.5_Advice_0"><div class="tree-item-inner heading-link" heading-name="15.5 Advice">15.5 Advice</div></a><div class="tree-item-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></div></body></html>